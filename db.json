{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/robots.txt","path":"robots.txt","modified":1,"renderable":0},{"_id":"themes/light/source/css/gitment.css","path":"css/gitment.css","modified":1,"renderable":1},{"_id":"themes/light/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/light/source/img/fundebug.png","path":"img/fundebug.png","modified":1,"renderable":1},{"_id":"themes/light/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/totop.png","path":"img/totop.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/github.png","path":"img/github.png","modified":1,"renderable":1},{"_id":"themes/light/source/js/gallery.js","path":"js/gallery.js","modified":1,"renderable":1},{"_id":"themes/light/source/img/segmentfault.jpeg","path":"img/segmentfault.jpeg","modified":1,"renderable":1},{"_id":"themes/light/source/js/jquery.imagesloaded.min.js","path":"js/jquery.imagesloaded.min.js","modified":1,"renderable":1},{"_id":"themes/light/source/js/totop.js","path":"js/totop.js","modified":1,"renderable":1},{"_id":"themes/light/source/js/pv.js","path":"js/pv.js","modified":1,"renderable":1},{"_id":"themes/light/source/img/alipay.JPG","path":"img/alipay.JPG","modified":1,"renderable":1},{"_id":"themes/light/source/img/kiwenlau.ico","path":"img/kiwenlau.ico","modified":1,"renderable":1},{"_id":"themes/light/source/css/font/fontawesome-webfont.woff","path":"css/font/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/light/source/css/font/fontawesome-webfont.eot","path":"css/font/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/08.png","path":"img/movie/08.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/wechat.JPG","path":"img/wechat.JPG","modified":1,"renderable":1},{"_id":"themes/light/source/js/gitment.js","path":"js/gitment.js","modified":1,"renderable":1},{"_id":"themes/light/source/js/highcharts.js","path":"js/highcharts.js","modified":1,"renderable":1},{"_id":"themes/light/source/js/blog/20170306_ip.js","path":"js/blog/20170306_ip.js","modified":1,"renderable":1},{"_id":"themes/light/source/js/jquery.min.js","path":"js/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/light/source/js/blog/20170306_time.js","path":"js/blog/20170306_time.js","modified":1,"renderable":1},{"_id":"themes/light/source/css/font/fontawesome-webfont.ttf","path":"css/font/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/01.png","path":"img/movie/01.png","modified":1,"renderable":1},{"_id":"themes/light/source/css/font/fontawesome-webfont.svg","path":"css/font/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/05.png","path":"img/movie/05.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/07.png","path":"img/movie/07.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/02.png","path":"img/movie/02.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/03.png","path":"img/movie/03.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/06.png","path":"img/movie/06.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/movie/04.png","path":"img/movie/04.png","modified":1,"renderable":1},{"_id":"themes/light/source/img/kiwenlau.jpg","path":"img/kiwenlau.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"e51360e39226051e1674ba3af3c414cf8f7b58f3","modified":1493631799000},{"_id":"source/robots.txt","hash":"b7d8a5701d5fb60fda9e17342c5fed7aec6b3ab2","modified":1478482378000},{"_id":"themes/light/_config.yml","hash":"909a23196df11690ea85ddeb8cd7d37d2daa9dc0","modified":1493817329000},{"_id":"themes/light/.DS_Store","hash":"cda05fc1d47420eaa6774359f15bfa0b7622f746","modified":1493632911000},{"_id":"source/_posts/.DS_Store","hash":"aefede08dc3ae66003af46494e76783873158eb6","modified":1493631787000},{"_id":"source/about/.DS_Store","hash":"64dc80f95f42dbf12ce9ef6d86358c25c2d86d25","modified":1493633586000},{"_id":"themes/light/languages/zh-CN.yml","hash":"16979cea6653f9ed345b6ed2c09823d75a622ded","modified":1493544105000},{"_id":"themes/light/layout/.DS_Store","hash":"6ee8b63efddad8c5feead3a6626373f7c1da80b7","modified":1493213697000},{"_id":"themes/light/layout/archive.ejs","hash":"a18842e3d719fe3ca9b977a6995f8facc75c8673","modified":1478482378000},{"_id":"themes/light/layout/category.ejs","hash":"9b740fc33f6f028df60f0bc4312bf3ebd03aa8ea","modified":1478482378000},{"_id":"themes/light/layout/index.ejs","hash":"e569d8fe0741a24efb89e44781f9e616da17e036","modified":1478482378000},{"_id":"source/about/index.md","hash":"b8791df829289086fc1e6eaf6997b65f1f4f9fd1","modified":1493815642000},{"_id":"themes/light/layout/layout.ejs","hash":"72da76881ebf00e71d7cc196f377e37a17ec7a6f","modified":1478482378000},{"_id":"themes/light/layout/page.ejs","hash":"70cbc9854655773cc6ba84eecaaf330fed430465","modified":1478482378000},{"_id":"themes/light/layout/post.ejs","hash":"70cbc9854655773cc6ba84eecaaf330fed430465","modified":1478482378000},{"_id":"themes/light/layout/_partial/donate.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1492788186000},{"_id":"themes/light/layout/tag.ejs","hash":"45150a2365768b6b67880193c9264ad2bb4814db","modified":1478482378000},{"_id":"themes/light/source/.DS_Store","hash":"0a2ebe4bf32d014e11c0a7412d639e42583be8e2","modified":1493632911000},{"_id":"source/_posts/2015/.DS_Store","hash":"634421600953aab1b9fddd6b04f52192f9141369","modified":1478736879000},{"_id":"source/_posts/2016/.DS_Store","hash":"dd136d2e60995e49f8ea9cdfcfc1239eed8342fb","modified":1486946708000},{"_id":"source/_posts/2017/.DS_Store","hash":"96b41b8f6f012b336b6e08e8b4486d89d8b4d7d2","modified":1493686044000},{"_id":"themes/light/layout/_partial/.DS_Store","hash":"7a84a4288f753332a92b2232155812fec1d7e8b4","modified":1493210073000},{"_id":"themes/light/layout/_partial/archive.ejs","hash":"a46dbaa593fe6702c6f7e4cc0377e7b5019bc3dd","modified":1492921299000},{"_id":"themes/light/layout/_partial/after_footer.ejs","hash":"172ace376a3f4f1a9e0b348cc677c5c6756387ab","modified":1493176456000},{"_id":"themes/light/layout/_partial/copyright.ejs","hash":"22118424dd0db2b75d1ffb22c95963e5f3adeaca","modified":1493207092000},{"_id":"themes/light/layout/_partial/footer.ejs","hash":"b0e2f959e52f0887c826fafac749196d179c0245","modified":1493909392000},{"_id":"themes/light/layout/_partial/article.ejs","hash":"7606f8dc7a6af6836ed3cc9818209b1fe27d9b25","modified":1493558552000},{"_id":"themes/light/layout/_partial/gitment.ejs","hash":"086b963ca884e8596db4859c1d24e5bb9ab80cc9","modified":1492913855000},{"_id":"themes/light/layout/_partial/header.ejs","hash":"d9a99aca97d8b41ed907fbf5b25df05da3ffa4f6","modified":1478482378000},{"_id":"themes/light/layout/_partial/pagination.ejs","hash":"1206b630a07444e8744365f14ddb26095c925ae1","modified":1478482378000},{"_id":"themes/light/layout/_partial/sidebar.ejs","hash":"caf351797a18d03d8ee945ceb9f83785c50c09f9","modified":1478482378000},{"_id":"themes/light/layout/_partial/head.ejs","hash":"610af4dbab7494fcb5557b1b4d8f8115b974ffaa","modified":1493909380000},{"_id":"themes/light/layout/_partial/totop.ejs","hash":"344f31c40616865bc4bebe32514c66365fd74f2b","modified":1493004300000},{"_id":"themes/light/layout/_widget/.DS_Store","hash":"a861cd37030aba3dab46f6a447f6dd5130c624d6","modified":1493817241000},{"_id":"themes/light/layout/_widget/advertisement.ejs","hash":"20590ad1403aaf60ff3b464835107e9312622b76","modified":1493296854000},{"_id":"themes/light/layout/_widget/blog.ejs","hash":"22dcf710c076836ca25f33926c6263d6c8c6ecec","modified":1493911412000},{"_id":"themes/light/layout/_widget/category.ejs","hash":"8a2b90dc29661371f060f710668929c3588e15e4","modified":1478482378000},{"_id":"themes/light/layout/_widget/donate.ejs","hash":"47403bf5a950ccc21fa353432c3fe11cb620e5e5","modified":1492787775000},{"_id":"themes/light/layout/_widget/popular_posts.ejs","hash":"f3b13b2ce84da5585d2694c8b51310d4cc97b36e","modified":1493207535000},{"_id":"themes/light/layout/_widget/recent_posts.ejs","hash":"8f2f3963bd568c681d7585bb8099fb1b3e1d4c81","modified":1478482378000},{"_id":"themes/light/layout/_widget/introduction.ejs","hash":"cfa8098c0a150f1107726ced904bc4be8415d6a9","modified":1493909756000},{"_id":"themes/light/layout/_widget/tag.ejs","hash":"1914db78bea49c333067d79fe7ad9567d2b08d00","modified":1478482378000},{"_id":"themes/light/layout/_widget/search.ejs","hash":"e517c8e6941d8d3bb4a2042fce258cc966488c53","modified":1478482378000},{"_id":"themes/light/layout/_widget/tagcloud.ejs","hash":"9053f62cdbadbd109d6569f4a0381b7a05ba5dfc","modified":1478482378000},{"_id":"themes/light/layout/_widget/toc.ejs","hash":"b95422f579ed3747124cae680c8d4283e28ed267","modified":1478482378000},{"_id":"themes/light/source/css/gitment.css","hash":"7fbb18b73b44ed11193739c55fce53a6f173cf68","modified":1492911909000},{"_id":"themes/light/source/css/style.styl","hash":"c03b2520e4a85b981e29516cadc0a365e6500e3d","modified":1478482378000},{"_id":"themes/light/source/css/.DS_Store","hash":"6cb65ea25f910042364bc05104e9062ab553d35c","modified":1492911972000},{"_id":"themes/light/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1478482378000},{"_id":"themes/light/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1478482378000},{"_id":"themes/light/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1478482378000},{"_id":"themes/light/source/fancybox/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1478482378000},{"_id":"themes/light/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1478482378000},{"_id":"themes/light/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1478482378000},{"_id":"themes/light/source/fancybox/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1478482378000},{"_id":"themes/light/source/img/fundebug.png","hash":"5470ee921cb4160af726031d01324e57eae2ea84","modified":1477112796000},{"_id":"themes/light/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1478482378000},{"_id":"themes/light/source/img/.DS_Store","hash":"f2611cb25b91d01dcc2f1c02a4ac362d3aedc5fb","modified":1493636571000},{"_id":"themes/light/source/img/totop.png","hash":"74f4b1e0f3b47a1a27cee4a8cb712eb33994ca41","modified":1478482378000},{"_id":"themes/light/source/img/github.png","hash":"8e4af8e0da1da6fb685e86c19afb5322d559a8ca","modified":1478482378000},{"_id":"themes/light/source/js/gallery.js","hash":"f8b17fc2dbd4fb939bb872d1232b404049355cfa","modified":1480653496000},{"_id":"themes/light/source/img/segmentfault.jpeg","hash":"023e7eef6165635b2fee0fc013a8c45b0358a547","modified":1478482378000},{"_id":"themes/light/source/js/.DS_Store","hash":"c5714145c21c1596b0b16ce68c9092513d8273be","modified":1492911967000},{"_id":"themes/light/source/js/jquery.imagesloaded.min.js","hash":"4109837b1f6477bacc6b095a863b1b95b1b3693f","modified":1478482378000},{"_id":"themes/light/source/js/totop.js","hash":"8fbd5fb07b1397839b75636607fa66e3391b4182","modified":1488337462000},{"_id":"themes/light/source/css/_base/utils.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1478482378000},{"_id":"themes/light/source/js/pv.js","hash":"8d80f3e460e3e6fb04afe282f8d9be84fc490dc5","modified":1494405281000},{"_id":"themes/light/source/img/alipay.JPG","hash":"3a0ac497613bb00f56e0aec63b8864cc150dcde4","modified":1492748611000},{"_id":"themes/light/source/img/kiwenlau.ico","hash":"987d9c1658c3779037d96f49d8779b9bab18440b","modified":1478482378000},{"_id":"source/_posts/2015/09/.DS_Store","hash":"016edfce8354a2669c8f04da0fac2a840674c7b6","modified":1478736879000},{"_id":"source/_posts/2016/05/.DS_Store","hash":"d24e2bdd11ad412a3c1eabcb2e5d690199b69827","modified":1486946475000},{"_id":"source/_posts/2016/11/.DS_Store","hash":"7c7f699e15d572775589195a31a13d35b1476646","modified":1478740032000},{"_id":"source/_posts/2016/11/fundebug-is-online.md","hash":"d0289e7d75c8db814e13e176ca1d56ff95868f8b","modified":1481121350000},{"_id":"source/_posts/2017/01/.DS_Store","hash":"a3719fd1bebad93ed88a43cc4db5c2206f64ea5a","modified":1486946722000},{"_id":"source/_posts/2016/12/.DS_Store","hash":"52e0d71c55cbdeb9c746e0a87b114ded2f6ba55c","modified":1486946714000},{"_id":"source/_posts/2017/02/.DS_Store","hash":"e07e561c2d3bb6f96a9b03579eaf074914daa8f5","modified":1489655497000},{"_id":"source/_posts/2017/03/.DS_Store","hash":"f794252c3e9a1f9ab9e70db2c751008203082c05","modified":1491038011000},{"_id":"source/_posts/2017/04/.DS_Store","hash":"9481c6cad6ca2ab4825b3e4910645d06cb9d1608","modified":1493125534000},{"_id":"themes/light/layout/_partial/post/category.ejs","hash":"be740939c5c2d4ffdbed9557b4e63a590058b476","modified":1478482378000},{"_id":"source/_posts/2017/05/.DS_Store","hash":"aeb35940d48ecb3e40b9b386dd1ee346ef68620e","modified":1494203549000},{"_id":"themes/light/layout/_partial/post/gallery.ejs","hash":"fafc2501d7e65983b0f5c2b58151ca12e57c0574","modified":1478482378000},{"_id":"themes/light/layout/_partial/post/share.ejs","hash":"24c04b319f1b19e887c42db961b90a7e0ab26fdc","modified":1478482378000},{"_id":"themes/light/layout/_partial/post/tag.ejs","hash":"095418df66a27a28cbab16d7cb0d16001b0e23f1","modified":1478482378000},{"_id":"themes/light/source/css/_base/layout.styl","hash":"1b58c21aa48a8f9f7f811af681ac182dd058e23d","modified":1478482378000},{"_id":"themes/light/source/css/_base/variable.styl","hash":"c4e07cb7f4ec980553cd19d9d2cd8a1a44d4cd82","modified":1478482378000},{"_id":"themes/light/source/css/_partial/archive.styl","hash":"072e9b8c5ee9acf95ac7cce9c34706d41e412229","modified":1478482378000},{"_id":"themes/light/source/css/_partial/article.styl","hash":"fda6b477b2137090fcc6d2bbe170dbf46b9699e7","modified":1478482378000},{"_id":"themes/light/source/css/_partial/comment.styl","hash":"a74254a6e713a522134cca4c644fde681c502823","modified":1478482378000},{"_id":"themes/light/layout/_partial/post/title.ejs","hash":"d7fbc575d35ae68f9045a382c651450e4131f335","modified":1478482378000},{"_id":"themes/light/source/css/_partial/footer.styl","hash":"1757872dbdbd09295a625f13e356aa798a8bb308","modified":1478482378000},{"_id":"themes/light/source/css/_partial/header.styl","hash":"0f932c9514d13fea70fe109242e17ee633a2b28a","modified":1478482378000},{"_id":"themes/light/source/css/_partial/index.styl","hash":"7a8c0ec6ab99a9f8e00c9687aca29d31752424a2","modified":1478482378000},{"_id":"themes/light/source/css/_partial/sidebar.styl","hash":"e21feea627a06c711f90d9830356c85e150f162e","modified":1478482378000},{"_id":"themes/light/source/css/_partial/syntax.styl","hash":"418b304ca39948bfbf720f3465962a1846f9a0e6","modified":1478482378000},{"_id":"themes/light/source/css/font/fontawesome-webfont.woff","hash":"0612cddf2f835cceffccc88fd194f97367d0b024","modified":1478482378000},{"_id":"themes/light/source/css/font/fontawesome-webfont.eot","hash":"d775f599ff3f23be082e6a9604b4898718923a37","modified":1478482378000},{"_id":"themes/light/source/img/movie/08.png","hash":"e4af7f33afa90ce95558b9fb9421c460b3066608","modified":1493634388000},{"_id":"themes/light/source/img/wechat.JPG","hash":"f7a0e2917a259dc9d4baf4cd13788ebe6ddb3547","modified":1492748611000},{"_id":"themes/light/source/js/blog/.DS_Store","hash":"1d164775213b2a54b5e9cd888934b68c9ed43154","modified":1488632201000},{"_id":"themes/light/source/js/gitment.js","hash":"376446d9c5930576016f97dd63e5e6616c94d8d4","modified":1492911935000},{"_id":"themes/light/source/js/highcharts.js","hash":"22f512de32b98166405948cd4c8e46f0f25cd8a3","modified":1484653980000},{"_id":"themes/light/source/js/blog/20170306_ip.js","hash":"e7afe8f904a71e938c9cae17e4612c113694b9e7","modified":1488702312000},{"_id":"themes/light/source/js/jquery.min.js","hash":"f647a6d37dc4ca055ced3cf64bbc1f490070acba","modified":1488334899000},{"_id":"themes/light/source/js/blog/20170306_time.js","hash":"f03d03c5f3fef48f6200f44e73e3efee6a71bcae","modified":1488702339000},{"_id":"themes/light/source/css/font/fontawesome-webfont.ttf","hash":"a9468f6a1fe965fbcaf5a1bd6c11705e2fc5f84c","modified":1478482378000},{"_id":"themes/light/source/img/movie/01.png","hash":"779dc6b68d08019d4ce6beea71047932998c6df2","modified":1493634270000},{"_id":"themes/light/source/css/font/fontawesome-webfont.svg","hash":"d162419c91b8bab3a4fd327c933a0fcf3799c251","modified":1478482378000},{"_id":"themes/light/source/img/movie/05.png","hash":"8ff5d2e99824887adfb7efaab8aa918ca3ecfe5f","modified":1493634337000},{"_id":"source/_posts/2015/06/08/150608-hadoop-cluster-docker.md","hash":"659fb635866560790aae7efa58b177355b4bb5f4","modified":1478482378000},{"_id":"source/_posts/2015/11/28/151128-single-kubernetes-docker.md","hash":"73c87cbd4d2cea2c2903c8620c041e1a2295bc2f","modified":1478482378000},{"_id":"source/_posts/2016/05/29/160529-compile-hadoop-ubuntu.md","hash":"af07ccf8c42a27f516f4d239c7c4c26d12dc3cf3","modified":1478482378000},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container.md","hash":"5819960205910a689ccf40443f198edc1ea79a52","modified":1478482378000},{"_id":"source/_posts/2016/06/05/160605-compile-hadoop-docker.md","hash":"fadb6cd129c08bcfd9bf0196d5a970894767cbbd","modified":1478482378000},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker.md","hash":"a46ac2531bceff80cc62ff78de417dac746fac84","modified":1478482378000},{"_id":"source/_posts/2016/06/12/160612-hadoop-cluster-docker-update.md","hash":"332aa8fd51e9a2850ea5ae1a78ff9db8bb73f5f9","modified":1478482378000},{"_id":"source/_posts/2016/06/26/hadoop-cluster-docker-update-english.md","hash":"14b37b76e1c94a152c9a97ed07e94179649f4fb3","modified":1478482378000},{"_id":"source/_posts/2016/06/19/160619-vagrant-virtual-machine.md","hash":"cdbdc494436a96dd6faaf0cf335ac4e1e63ae5a3","modified":1478482378000},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform.md","hash":"acc74e6800d9d634c2f5cfe483fe10c2c8a34fef","modified":1478482378000},{"_id":"source/_posts/2016/07/03/vagrant-vm-cluster.md","hash":"895758b7c475183c6d8bc293db38f96fc01a2de6","modified":1478482378000},{"_id":"source/_posts/2016/09/04/what-is-service-discovery.md","hash":"8b09a9a7c321087ca0a37711b3e05c68886f1399","modified":1491790449000},{"_id":"source/_posts/2016/09/11/mongodb-inverted-index.md","hash":"c40996da497a45209707ad29637a6723eb548c1b","modified":1478482378000},{"_id":"source/_posts/2016/12/07/.DS_Store","hash":"71ba65ec78223cfeb1b9de8f917bb7a3173f9bfc","modified":1486946714000},{"_id":"source/_posts/2016/09/18/underscore-example.md","hash":"fe54db22889e2dbaca70a3bca2687480d6ea9217","modified":1491790381000},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug.md","hash":"21e90c4b32c2bfd9baba0e5fbe0f6d5999487079","modified":1481121342000},{"_id":"source/_posts/2017/01/16/.DS_Store","hash":"04b8078c699a520cc17e0cb706d2b57f963cd3c4","modified":1486946727000},{"_id":"source/_posts/2017/01/23/.DS_Store","hash":"46bd85c6a4efef7303a0b76df0800f5108cf6752","modified":1485043119000},{"_id":"source/_posts/2017/01/23/fundebug-support-wxjs.md","hash":"844bdd2bd1f967f9aa1277e1545f3c7be5697642","modified":1486946671000},{"_id":"source/_posts/2017/01/16/fundebug-support-all-browsers.md","hash":"2c29d707eb6f30d163c5aca828e2c00fd926ee26","modified":1486946741000},{"_id":"source/_posts/2017/02/18/.DS_Store","hash":"116854a64f9839aadcafd1b4881fe3395e9dc8ca","modified":1489667264000},{"_id":"source/_posts/2017/02/11/.DS_Store","hash":"2e772adc0be0a86f40770ebc3686dd0dac303644","modified":1486946494000},{"_id":"source/_posts/2017/02/11/weixin-miniprogram-need-fundebug.md","hash":"7fc2cb22947cd4cfdc99429e695cea0243c343b6","modified":1486946638000},{"_id":"source/_posts/2017/03/06/.DS_Store","hash":"b7a30d8ae28f888c2e9a0158fc31d1b9a49cfd7d","modified":1488700752000},{"_id":"source/_posts/2017/03/13/.DS_Store","hash":"5906616cf53d0f56252d83a74bcbbe7e38e9f969","modified":1489294057000},{"_id":"source/_posts/2017/02/18/weixinjsbridge-is-not-defined.md","hash":"c07f68d3a6cdb0ed35e0f04ec3e3cef198d1ec0b","modified":1487936970000},{"_id":"source/_posts/2017/03/17/fundebug-support-nodejs.md","hash":"80301cfcdaa6bd090f69567231a0381d52a9556d","modified":1489837964000},{"_id":"source/_posts/2017/03/17/.DS_Store","hash":"9fea6611c41b3d94aa99ed0c0f19637471a28673","modified":1489889709000},{"_id":"source/_posts/2017/03/20/.DS_Store","hash":"931bb200380b7ae9efbdc2c61283a7f6efa9369e","modified":1489999511000},{"_id":"source/_posts/2017/03/06/jquery-is-not-defined.md","hash":"171a0c66cb26faac352478313fc15ea4a1851812","modified":1488804458000},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial.md","hash":"016156b344bdd0df4cf472c72ca482f54f44b397","modified":1489655363000},{"_id":"source/_posts/2017/03/26/.DS_Store","hash":"db39948eb3dc821e1044ec63b1ec368b948e38ec","modified":1490530729000},{"_id":"source/_posts/2017/03/29/.DS_Store","hash":"de881c3230d9db4a2ddc1ba661441dc9068c665c","modified":1491037938000},{"_id":"source/_posts/2017/03/20/nodejs-unit-test.md","hash":"dca18e31b40dc847dcdc007de1543f4ff55af970","modified":1490002835000},{"_id":"source/_posts/2017/03/29/user-behavior-track.md","hash":"492d7849b21b9d7e5f04668a88db2ae7df345baa","modified":1491790345000},{"_id":"source/_posts/2017/04/01/.DS_Store","hash":"c3ebba7bcc50f2eefc165506dc87299b6044b4d4","modified":1491038001000},{"_id":"source/_posts/2017/04/05/.DS_Store","hash":"8f84fd9ebae398ba4aee2d355ce2fcde5b0bb530","modified":1491550583000},{"_id":"source/_posts/2017/03/26/nodejs-docker.md","hash":"7669d7fc5aefb33d044c39a14b7889d033eaf6f9","modified":1490530735000},{"_id":"source/_posts/2017/04/06/.DS_Store","hash":"1e223efbb01132aa42d630ba45c4d38199f233ec","modified":1491474958000},{"_id":"source/_posts/2017/04/01/nodejs-async-await.md","hash":"87ac070ae114349d459114cfd6da732d17e2cdf8","modified":1492354019000},{"_id":"source/_posts/2017/04/05/understand-script-error.md","hash":"0765f84de394cb94eb7a4e5264f75f2a705681be","modified":1491565987000},{"_id":"source/_posts/2017/04/07/.DS_Store","hash":"a32ee336073cd6cea7329a9754c737830ab5ad05","modified":1491528280000},{"_id":"source/_posts/2017/04/07/solve-script-error.md","hash":"3fc7e7ca7649a6d94c04ad6c8fac59e8310727c9","modified":1491528682000},{"_id":"source/_posts/2017/04/10/.DS_Store","hash":"472f43c661f39cde42dc5631e6b1b57a57ba1d1a","modified":1492353985000},{"_id":"source/_posts/2017/04/06/test-script-error.md","hash":"499b50bfe98004bc9126c372e485fc18bcaac127","modified":1491566113000},{"_id":"source/_posts/2017/04/17/.DS_Store","hash":"8b0fbcce040a52b21ae45c3abbdf1f857af19b14","modified":1492243563000},{"_id":"source/_posts/2017/04/17/about-docker-sock.md","hash":"eace014db93e0c0fa5965ae6e00c7156408e0bec","modified":1492351931000},{"_id":"source/_posts/2017/04/24/.DS_Store","hash":"e54bcb719684bae383ff66383835d8ea350e60cc","modified":1492997697000},{"_id":"source/_posts/2017/04/10/nodejs-interview-2017.md","hash":"9dbaec86eca45bcf90669e5d6720ff2af7e74386","modified":1492353996000},{"_id":"source/_posts/2017/04/25/.DS_Store","hash":"2c36eada393487ca2f2ed583bd6bfea5c3fe9a89","modified":1493120562000},{"_id":"source/_posts/2017/04/18/docker-system-explain.md","hash":"83275d9e6e5d3e0e55123e6b4544e2ba9e40412e","modified":1492516532000},{"_id":"source/_posts/2017/05/02/.DS_Store","hash":"c7753f2a7e3e1fa6fee518346d90a07638f00c04","modified":1493624263000},{"_id":"source/_posts/2017/04/24/ssh-port-forwarding.md","hash":"51aad47181822d7266ad387841d14189e3501efe","modified":1492999856000},{"_id":"source/_posts/2017/05/08/.DS_Store","hash":"864045172c19cc201d974ad784510b61dc71fde1","modified":1494052937000},{"_id":"source/_posts/2017/04/18/.DS_Store","hash":"b500a2b675394488a111bfe495787d2f5959a57b","modified":1492516522000},{"_id":"themes/light/source/img/movie/07.png","hash":"e86ef7609459885be114a052962a47834bc1648b","modified":1493634370000},{"_id":"source/_posts/2017/05/02/about-docker-sock.md","hash":"0ae37a409e17338fe934abbe6df8da189233cbd5","modified":1493624459000},{"_id":"source/_posts/2017/04/25/node-command-option.md","hash":"a4abbfdaace3d2f8d4aca54a4ab2955d4c3a90d2","modified":1493123690000},{"_id":"themes/light/source/img/movie/02.png","hash":"ba2dca28ad364718a2304e7968ad913ed32755f4","modified":1493634285000},{"_id":"themes/light/source/img/movie/03.png","hash":"a5f512e7c48f0b75e199c8d86e434edae58a33c5","modified":1493634301000},{"_id":"themes/light/source/img/movie/06.png","hash":"9c252d667cbbda0a8b95941d29b04b286dbb5af8","modified":1493634356000},{"_id":"themes/light/source/img/movie/04.png","hash":"d7b381f968a54eb76abdfd0dfc17b61663371972","modified":1493634316000},{"_id":"source/_posts/2017/05/08/docker-swarm-suggestion.md","hash":"117420dd1f9b2986360deec08041c5c3eda2a5dc","modified":1494203402000},{"_id":"source/_posts/2015/06/08/150608-hadoop-cluster-docker/image-architecture.graffle","hash":"363be32d8d54a021835f2125e7d93ab5f07ee3e1","modified":1478482378000},{"_id":"source/_posts/2015/06/08/150608-hadoop-cluster-docker/image-architecture.png","hash":"018c8ad81bcf1ad54778e761bf6c630403eb5e80","modified":1478482378000},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.graffle","hash":"7dcd48d344e3dc1c7bbcce0871aa44cc4f1f10a8","modified":1478482378000},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.graffle","hash":"851a2ee0c92e642e4dffedaac3fcaef10d216806","modified":1478482378000},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.graffle","hash":"927aa0c3be32943949d17fa5455c2602a56c87fa","modified":1478482378000},{"_id":"source/_posts/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.graffle","hash":"851a2ee0c92e642e4dffedaac3fcaef10d216806","modified":1478482378000},{"_id":"source/_posts/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.graffle","hash":"9a2bac1e19c9299faf7e698b2feabde9717bad76","modified":1478482378000},{"_id":"source/_posts/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.graffle","hash":"33e193fb0f5600d82ebc8da745b09b2ae8d88e15","modified":1478482378000},{"_id":"source/_posts/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.graffle","hash":"87e9b82b8aebd6a0239bc1582dec43e8356bf0d1","modified":1478482378000},{"_id":"source/_posts/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.graffle","hash":"7b5bd9e08cc3b4fc85dc7a04f106be0de6edd34b","modified":1478482378000},{"_id":"source/_posts/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.graffle","hash":"281797ad8328ad5a147bfaeb4aa33c127d839e8f","modified":1478482378000},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/marathon.png","hash":"a3846ef25a058da2f9d67e5690bd501a3d1f94ff","modified":1478482378000},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/nginx.png","hash":"e98b0adf233b13140e2a03a4feb8dc0f8f459af5","modified":1478482378000},{"_id":"source/_posts/2016/09/04/what-is-service-discovery/service-discovery.graffle","hash":"d1c17c50056f8e3757d9a3fe686223cf62322d13","modified":1478482378000},{"_id":"source/_posts/2016/09/18/underscore-example/underscore-example.graffle","hash":"73758ad67c6d2d8e04112b931a5babc5bb09af24","modified":1478482378000},{"_id":"source/_posts/2016/11/fundebug-is-online/with_fundebug.jpg","hash":"21c5b66c47b82be0faaac29d39a09922587e1ef8","modified":1478722462000},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug/.DS_Store","hash":"9fafb72ffc9806b4d8da2d2ec2ebfe1a92acd433","modified":1481102050000},{"_id":"source/_posts/2016/11/fundebug-is-online/without_fundebug.jpg","hash":"0e677ff142f135356f97dc2975192c74aa153245","modified":1478722462000},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug/error-count.png","hash":"59a70b42bafe6159b1f56b07dffab29ecc84e9b8","modified":1481102064000},{"_id":"source/_posts/2017/01/16/fundebug-support-all-browsers/.DS_Store","hash":"9da38aa687209f3db4a07f2cb09419318b9c9283","modified":1484571068000},{"_id":"source/_posts/2017/01/23/fundebug-support-wxjs/.DS_Store","hash":"5f5b4ffa9b1d34d2f5a34b95d7b7e254691928ad","modified":1484988463000},{"_id":"source/_posts/2017/01/23/fundebug-support-wxjs/empty.png","hash":"d65573fd992349739115b21172ac24bb94857393","modified":1485009372000},{"_id":"source/_posts/2017/02/18/weixinjsbridge-is-not-defined/.DS_Store","hash":"370ccf8c9ec3adb427db11c785f47f187e31e6b4","modified":1487935016000},{"_id":"source/_posts/2017/03/06/jquery-is-not-defined/.DS_Store","hash":"f2bb5b573b591d2f7d43d095f91ac7f8fd9b7c22","modified":1488705401000},{"_id":"source/_posts/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.graffle","hash":"b3e35ad7747c984f5069ad3589677e599395e34d","modified":1478482378000},{"_id":"source/_posts/2017/02/18/weixinjsbridge-is-not-defined/weixinjsbridge_is_not_defined.png","hash":"215c53767524334d5357327cc21c13810253af57","modified":1487934903000},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/.DS_Store","hash":"b4c0e817e7649bd50180a834d68bca3143100a9b","modified":1489312310000},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap3.png","hash":"4e36737f6568097035a5dc8a74bc676b0c1969e6","modified":1489312381000},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap2.png","hash":"1e2e294e51d0102a572ce1c3e7e382fe0a47fdd5","modified":1489291945000},{"_id":"source/_posts/2017/03/17/fundebug-support-nodejs/.DS_Store","hash":"c06d1a6908d9f29bd6adfa007787fb68fb39f57f","modified":1489675467000},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap4.png","hash":"3f547d91548dadf50dd22eb2dc0270a63bed9bfa","modified":1489294034000},{"_id":"source/_posts/2017/03/17/fundebug-support-nodejs/fundebug-nodejs.png","hash":"bd274c08206ef29cd8eb6605bbd656c1a430a1d3","modified":1489837964000},{"_id":"source/_posts/2017/03/20/nodejs-unit-test/.DS_Store","hash":"3dab9eacc5b5eb7fa3ea2b0b4d41eb2152b73e49","modified":1490005959000},{"_id":"source/_posts/2017/03/26/nodejs-docker/.DS_Store","hash":"824427ad25434a36654c10ed158651a72b3fbdb9","modified":1490528412000},{"_id":"source/_posts/2017/03/29/user-behavior-track/.DS_Store","hash":"fbe2e99293f9f765066a496417ad504190cd5295","modified":1491037938000},{"_id":"source/_posts/2017/03/20/nodejs-unit-test/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1490000984000},{"_id":"source/_posts/2017/03/26/nodejs-docker/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1490529686000},{"_id":"source/_posts/2017/03/26/nodejs-docker/nodejs-docker.png","hash":"8dc7707af9d54eb127033b7a2b095ada92040500","modified":1490529686000},{"_id":"source/_posts/2017/04/01/nodejs-async-await/.DS_Store","hash":"b505ca77e23981e5499e116a902d967c18589cca","modified":1490697192000},{"_id":"source/_posts/2017/03/29/user-behavior-track/user-behavior-track.png","hash":"9781503a6149724661d1ebd37f4613f8ab11b260","modified":1490961931000},{"_id":"source/_posts/2017/04/01/nodejs-async-await/debug-async-await.png","hash":"9c929ae2c852697158369a4887b8258ded4e384e","modified":1491031294000},{"_id":"source/_posts/2017/04/05/understand-script-error/.DS_Store","hash":"4d3a56cdc6266b55fea4c3c8be50c5c5bf139c63","modified":1491481609000},{"_id":"source/_posts/2017/04/01/nodejs-async-await/debug-promise.png","hash":"a6eff38be217603deebeb7500e85fc76e276bc41","modified":1491031270000},{"_id":"source/_posts/2017/04/01/nodejs-async-await/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1490529686000},{"_id":"source/_posts/2017/04/06/test-script-error/01.png","hash":"657446d2083265735302bcc2d4bf2cc95f57c4bc","modified":1491482164000},{"_id":"source/_posts/2017/04/06/test-script-error/1chrome.png","hash":"d92a971123f6eab071c5b791191667b809e979b2","modified":1491482164000},{"_id":"source/_posts/2017/04/06/test-script-error/2firefox.png","hash":"b146496f3793a96d4ee3e8d7cb1cbaaefea04832","modified":1491482164000},{"_id":"source/_posts/2017/04/07/solve-script-error/.DS_Store","hash":"8cc8367c5731c0e802251ed24a9a04e69aa65ef5","modified":1491528796000},{"_id":"source/_posts/2017/04/06/test-script-error/chrome_error.png","hash":"bec33c134ddd7f1d1f2df6f4f6b6fe7fa89478b8","modified":1491482164000},{"_id":"source/_posts/2017/04/07/solve-script-error/QRCode.png","hash":"17815e593b4f7cdb21ed9a0359db8dbc0f146bf3","modified":1491482164000},{"_id":"source/_posts/2017/04/10/nodejs-interview-2017/.DS_Store","hash":"3ae5de57d5ea5fcdf0a3cef7a250054231169466","modified":1491790065000},{"_id":"source/_posts/2017/04/10/nodejs-interview-2017/test_pyramid.png","hash":"5c21f9680fb220e7bc04a785f59bb8aec3b3b2e5","modified":1491788911000},{"_id":"source/_posts/2017/04/17/about-docker-sock/.DS_Store","hash":"0e86d795a3ab724fa789a068d2be7f71da42bf9e","modified":1492244235000},{"_id":"source/_posts/2017/04/10/nodejs-interview-2017/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1491464674000},{"_id":"source/_posts/2017/04/18/docker-system-explain/.DS_Store","hash":"c28626a01a2569af81a11611df7abd67c3838829","modified":1492515025000},{"_id":"source/_posts/2017/04/24/ssh-port-forwarding/.DS_Store","hash":"426c6cb14eb1acac34770b7e18c28ba0297e8d82","modified":1492999691000},{"_id":"source/_posts/2017/04/25/node-command-option/.DS_Store","hash":"df5ff70cbf5b4f5c9a3bbc9af3ae49e69f0cb884","modified":1493120570000},{"_id":"source/_posts/2017/05/02/about-docker-sock/.DS_Store","hash":"c28626a01a2569af81a11611df7abd67c3838829","modified":1493624403000},{"_id":"source/_posts/2017/05/08/docker-swarm-suggestion/.DS_Store","hash":"c28626a01a2569af81a11611df7abd67c3838829","modified":1493624403000},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/hello.png","hash":"732ba80324b66a3ff47fafbde89f4c61dfb04a08","modified":1478482378000},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/Marathon.png","hash":"58abd8a1ba30eedef47649093a37291e29f21e00","modified":1478482378000},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.png","hash":"f5b2995f300b1302e437ef8d4736341a3d5e7661","modified":1478482378000},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.png","hash":"ae7bd83a3077c4f1a1f85211321932ab2e8df3cd","modified":1478482378000},{"_id":"source/_posts/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.png","hash":"a5ac1810938b8750268386ac39bbacfbf196c546","modified":1478482378000},{"_id":"source/_posts/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.png","hash":"a5ac1810938b8750268386ac39bbacfbf196c546","modified":1478482378000},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/mesos.png","hash":"79e6dfb76d3585a5af23df5a2b185631ede2f179","modified":1478482378000},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/zookeeper.png","hash":"24357ecf44a1046d4f9191bc7d27ffa4f5957b8c","modified":1478482378000},{"_id":"source/_posts/2016/09/04/what-is-service-discovery/service-discovery.png","hash":"8295624fb096ba56f23e89e821a6453f54d55d25","modified":1478482378000},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug/email.png","hash":"44c53c1fcaca35c97dddd008586d05b31c2b90c0","modified":1481101965000},{"_id":"source/_posts/2016/09/18/underscore-example/underscore-example.png","hash":"463575f691b762eb0dc52cdbf220b784024d4abf","modified":1478482378000},{"_id":"source/_posts/2017/01/16/fundebug-support-all-browsers/browser-share.png","hash":"d771a27d5a87b85c6a943909cbd37b01d42c7588","modified":1484576485000},{"_id":"source/_posts/2017/02/11/weixin-miniprogram-need-fundebug/fundebug-wxjs.jpg","hash":"6232670f38f5ceffa2da0c246c0f5ac770c7d981","modified":1486774942000},{"_id":"source/_posts/2017/01/23/fundebug-support-wxjs/fundebug-wxjs.jpg","hash":"6232670f38f5ceffa2da0c246c0f5ac770c7d981","modified":1484987539000},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/fundebug-sourcemap.jpg","hash":"e71ed7627d1ab8bf4be327059d75f56ec0ac1fc0","modified":1488339954000},{"_id":"source/_posts/2017/03/06/jquery-is-not-defined/fundebug-jquery-error.png","hash":"fd4bd810e3c52f028577273582147b8881e037ac","modified":1488701869000},{"_id":"source/_posts/2017/04/05/understand-script-error/script-error-not-ok-chrome.png","hash":"021ba480b510c578a369e54ffaa7f7734857498a","modified":1491482164000},{"_id":"source/_posts/2017/04/17/about-docker-sock/01.png","hash":"9b5f698f81af9723a21528003889a57ed3bfd61d","modified":1492243001000},{"_id":"source/_posts/2017/04/17/about-docker-sock/02.png","hash":"6ad227ec3576ad6fc49a2f173f91e3e2bfc495ad","modified":1492243029000},{"_id":"source/_posts/2017/04/17/about-docker-sock/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1492243789000},{"_id":"source/_posts/2017/04/18/docker-system-explain/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1492243789000},{"_id":"source/_posts/2017/04/24/ssh-port-forwarding/socket_proxy.png","hash":"17ed271eeb6558c6c5eb7f8e3d4be6e17d254581","modified":1492771954000},{"_id":"source/_posts/2017/04/24/ssh-port-forwarding/ssh_tunnel.jpeg","hash":"619c3047356b10d9731212abf42b43ad915a6c77","modified":1492999665000},{"_id":"source/_posts/2017/05/08/docker-swarm-suggestion/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1492243789000},{"_id":"source/_posts/2017/04/25/node-command-option/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1491464674000},{"_id":"source/_posts/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.png","hash":"c3762c5e96023233997aef60d1c1e678d1998ba2","modified":1478482378000},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.png","hash":"c3762c5e96023233997aef60d1c1e678d1998ba2","modified":1478482378000},{"_id":"source/_posts/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.png","hash":"a4470187ff958413325ce3241dfea734d05ad4ef","modified":1478482378000},{"_id":"source/_posts/2017/03/20/nodejs-unit-test/nodejs-unit-test.jpg","hash":"81a6dbd93a561f7fab4b867308bcae4dbd6e118b","modified":1489998390000},{"_id":"source/_posts/2017/03/29/user-behavior-track/fundebug-track-behavior.png","hash":"4cdf29106cfbd471f55d1801dc904c8adce73c4c","modified":1491037391000},{"_id":"source/_posts/2017/04/07/solve-script-error/script-error.png","hash":"1c884cc78784cd80d8cdc1e36bfb2b18471db030","modified":1491528336000},{"_id":"source/_posts/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.png","hash":"d980b3c3af38a43af0168fd7defe0ded28be9652","modified":1478482378000},{"_id":"source/_posts/2017/05/02/about-docker-sock/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1492243789000},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug/error-detail.png","hash":"aa35e26788a38cd49e492ba18c593f222323d7ae","modified":1481102064000},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap1.png","hash":"f3b042839974f56278c49f9260a349389c3494af","modified":1489291089000},{"_id":"source/_posts/2017/04/05/understand-script-error/script-error-ok.png","hash":"4a0d1dd17e797c2df8e9ec39048c6bac4646beed","modified":1491482164000},{"_id":"source/_posts/2017/04/05/understand-script-error/script-error.png","hash":"8bbfca2aeae2f8bf97044fd8b3a4adb18a46fcb3","modified":1491482164000},{"_id":"source/_posts/2017/04/06/test-script-error/2.png","hash":"d3302f43e94db29b75cf77743b3abe3fc61eed79","modified":1491482164000},{"_id":"source/_posts/2017/04/06/test-script-error/script-error.png","hash":"8bbfca2aeae2f8bf97044fd8b3a4adb18a46fcb3","modified":1491482164000},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/Mesos.png","hash":"5fbab0dbc5d46b0caa4fab577a0de8c174c0eab6","modified":1478482378000},{"_id":"themes/light/source/img/kiwenlau.jpg","hash":"e163949f9617ee5a0b92ef131f6e2bb57a2c0e36","modified":1478482378000},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.graffle","hash":"4383e6048a4699bb494d20ce8d1490d10c550b35","modified":1478482378000},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.png","hash":"aa5290c71ba1721e39ed42fbef45465df0636699","modified":1478482378000},{"_id":"source/_posts/2017/01/16/fundebug-support-all-browsers/browser.jpg","hash":"408c2c7589aebb85837af85218230b32b5d63300","modified":1484576485000},{"_id":"source/_posts/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.png","hash":"d877b65ca99e60fd05e04df49c83decda3e59e50","modified":1478482378000},{"_id":"source/_posts/2017/04/06/test-script-error/4.png","hash":"ba702785709216fa94239ff694b6328187ebb267","modified":1491482164000},{"_id":"source/_posts/2017/04/06/test-script-error/012.png","hash":"44b4f84e79cca059b987f4c6204dceeb1fbe42a4","modified":1491482164000},{"_id":"source/_posts/2017/04/06/test-script-error/1.png","hash":"593bc8666eac82ccceefda8c4f9c028b25fad8c2","modified":1491482164000},{"_id":"source/_posts/2017/04/06/test-script-error/5.png","hash":"fa1380d3e4e5d863502168ab3aab545eb85fcb66","modified":1491482164000},{"_id":"source/_posts/2017/04/07/solve-script-error/qiniu.png","hash":"618bdb7709998c629e81d392d93a9ace70516db3","modified":1491482164000},{"_id":"source/_posts/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.graffle","hash":"02a2b9ae30a9ee599151160d6a9eaf7f10661ebb","modified":1478482378000},{"_id":"source/_posts/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.png","hash":"a54ce970b4aef1d48bb0eadd2b2b8290d8987557","modified":1478482378000},{"_id":"source/_posts/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.png","hash":"0e96c1b51dcd1102d2c000f2510fedeb356d2b02","modified":1478482378000},{"_id":"public/baidusitemap.xml","hash":"e24b0cc0a14dd811ada12fe8f89f9c4a49e412af","modified":1494405533133},{"_id":"public/atom.xml","hash":"32d08af4a7eb8c6bc24754f067a4eeff0a4f6c08","modified":1494405544473},{"_id":"public/sitemap.xml","hash":"bba7b3418db56d74c41ee56d1c5b18cd43165e78","modified":1494405544474},{"_id":"public/archives/index.html","hash":"4e4861e8e45a9ed6329c973a94e73aec783a6eb2","modified":1494405544550},{"_id":"public/archives/page/3/index.html","hash":"d264e069ca76af03b6a71f507e9edcf97f7de446","modified":1494405547171},{"_id":"public/archives/2015/index.html","hash":"f06825a0c4c5be67626919fcf0887d93cadcfb3b","modified":1494405547172},{"_id":"public/archives/2015/06/index.html","hash":"44c4179216f5aa29dd2e00712efdba9ad4ff32f8","modified":1494405547175},{"_id":"public/archives/2015/09/index.html","hash":"4df73ee6f5366801057d79c1985804eebfdd3ab4","modified":1494405547175},{"_id":"public/archives/2015/11/index.html","hash":"3958f610ec280db2223d4de0080c5b425b72c8c2","modified":1494405547175},{"_id":"public/archives/2016/index.html","hash":"cc69fe3c694e85bc816ff71e1b4eca81381d5504","modified":1494405547175},{"_id":"public/archives/2016/01/index.html","hash":"227a48d191408c67d6e1ed6e878e09eb267770c6","modified":1494405547175},{"_id":"public/archives/2016/05/index.html","hash":"3959c8f531c213d5f280e87377bc530b9e44e391","modified":1494405547175},{"_id":"public/archives/2016/06/index.html","hash":"9f6f699c1f8a459a2d80ff73c46f772b27362500","modified":1494405547175},{"_id":"public/archives/2016/07/index.html","hash":"7f421b3623ebe2b8fe3408e2fec3f7a4f4db4937","modified":1494405547175},{"_id":"public/archives/2016/09/index.html","hash":"1cd711dd2318b5c3580719c3e7dd8bb1764534ac","modified":1494405547175},{"_id":"public/archives/2016/11/index.html","hash":"bf40dc0a4ca00b880e229c09a89c51144a950a19","modified":1494405547175},{"_id":"public/archives/2016/12/index.html","hash":"cfd174ce5990daf4cfe0fa76f91d4d21a11123a8","modified":1494405547175},{"_id":"public/archives/2017/index.html","hash":"a2d09a92baadfe45a3df0d900d09f540cb759f23","modified":1494405547175},{"_id":"public/archives/2017/page/2/index.html","hash":"ade2a4c311ddb5768c2e3c2594ef845fff9fe45d","modified":1494405547175},{"_id":"public/archives/2017/01/index.html","hash":"5fc786f21176d3f115c474cc6bf761f431ef1e52","modified":1494405547175},{"_id":"public/archives/2017/02/index.html","hash":"5544b559e00e6d374a9f5d42fc871ac62158b23e","modified":1494405547175},{"_id":"public/archives/2017/03/index.html","hash":"a5e2a81e3a4bbbb7ad9352a99097a33e5ee2d972","modified":1494405547176},{"_id":"public/archives/2017/04/index.html","hash":"8594184fbd926cf2407887e7769d92c0358af79a","modified":1494405547176},{"_id":"public/archives/2017/05/index.html","hash":"ef59b126c949788923d4d4bfa78b867136352ce4","modified":1494405547176},{"_id":"public/tags/Fundebug/index.html","hash":"d6c8142a50f70b2e2da2344cd12d7c73c33b0c6d","modified":1494405547176},{"_id":"public/tags/Hadoop/index.html","hash":"18026bb06dd22416d5ad47dee94862d6f2fa1bb3","modified":1494405547176},{"_id":"public/about/index.html","hash":"dff0649bcdcd89ad1a254b45b32638e367202275","modified":1494405547176},{"_id":"public/2017/05/08/docker-swarm-suggestion/index.html","hash":"ab5c73147dcb0d4c2d71b78540bec949137ef8cf","modified":1494405547176},{"_id":"public/2017/05/02/about-docker-sock/index.html","hash":"266cd0e834ab303e3efe26135d490794731d2d4f","modified":1494405547177},{"_id":"public/2017/04/25/node-command-option/index.html","hash":"cbca07cca2d5b7f63e46c645f29cbf3f4cdd4e40","modified":1494405547177},{"_id":"public/2017/04/24/ssh-port-forwarding/index.html","hash":"09a6208dcaf536dc21d2dc560f972dcd5788323c","modified":1494405547177},{"_id":"public/2017/04/18/docker-system-explain/index.html","hash":"677bba943c106a5cc6bb8a41084f6a7f0b16a96d","modified":1494405547177},{"_id":"public/2017/04/17/about-docker-sock/index.html","hash":"1b38e6c2ffe4188108134940320ee278cb175076","modified":1494405547177},{"_id":"public/2017/04/10/nodejs-interview-2017/index.html","hash":"dce189eaa717aabdef95544ca176393ac894cc29","modified":1494405547177},{"_id":"public/2017/04/07/solve-script-error/index.html","hash":"8df506500b046376d85117cfb008251dc72c26af","modified":1494405547177},{"_id":"public/2017/04/06/test-script-error/index.html","hash":"9572686ffd16a96df1f5b8aaabcf4348dac3440e","modified":1494405547177},{"_id":"public/2017/04/05/understand-script-error/index.html","hash":"0c73ed4c6b6c2c52d9f696369d22fe9ba937e0da","modified":1494405547177},{"_id":"public/2017/04/01/nodejs-async-await/index.html","hash":"cd1812f1ba5b9052e768c1997ad0fd7346f07265","modified":1494405547177},{"_id":"public/2017/03/29/user-behavior-track/index.html","hash":"c3e240fc2c2744569b5ded6dc07f1287da79f50e","modified":1494405547177},{"_id":"public/2017/03/26/nodejs-docker/index.html","hash":"e48d24881f35a17398a9422c3c432a8e8de9ba75","modified":1494405547177},{"_id":"public/2017/03/20/nodejs-unit-test/index.html","hash":"5d22302b6a7b4ce36623433ac7405f114fec0646","modified":1494405547177},{"_id":"public/2017/03/17/fundebug-support-nodejs/index.html","hash":"0ca205c69a83339c69babf8babaee8d5d745e120","modified":1494405547177},{"_id":"public/2017/03/13/sourcemap-tutorial/index.html","hash":"461962b04032ff56f5d9dc47a1aca30a18c501ce","modified":1494405547177},{"_id":"public/2017/03/06/jquery-is-not-defined/index.html","hash":"72b8242329563d7febe59314bf66f63f024d7f33","modified":1494405547177},{"_id":"public/2017/02/18/weixinjsbridge-is-not-defined/index.html","hash":"5a3044a21632447695450b2a640902ffc22e35ff","modified":1494405547177},{"_id":"public/2017/02/11/weixin-miniprogram-need-fundebug/index.html","hash":"90c29b2ed4b1882838e9764769106d6e6b221a90","modified":1494405547178},{"_id":"public/2017/01/23/fundebug-support-wxjs/index.html","hash":"1ae0fd6234bc12d6322c31a614667ecfb3b4118b","modified":1494405547178},{"_id":"public/2017/01/16/fundebug-support-all-browsers/index.html","hash":"364f4fadc9f02f2abb6c3cf74d0291caa3098007","modified":1494405547178},{"_id":"public/2016/12/07/fundebug-catch-the-bug/index.html","hash":"653fdd26aec578c989c34b41eba2bf96a573b1c8","modified":1494405547178},{"_id":"public/2016/11/fundebug-is-online/index.html","hash":"f44f4fbf5d811f8233cdc1a5fc7285f03e411512","modified":1494405547178},{"_id":"public/2016/09/18/underscore-example/index.html","hash":"60a22fd9a4e02aec2f4bcd9c85bcea1d62ac567c","modified":1494405547178},{"_id":"public/2016/09/11/mongodb-inverted-index/index.html","hash":"7da4dbaf6609c673cc4e6a6e15b128b0b043a007","modified":1494405547178},{"_id":"public/2016/09/04/what-is-service-discovery/index.html","hash":"490cd3dc11a44efd8b71d24ccda6cefba3b14aa1","modified":1494405547178},{"_id":"public/2016/07/10/mesos-marathon-platform/index.html","hash":"5acc045e8e7a7a1206023afba974f27c40d74228","modified":1494405547178},{"_id":"public/2016/07/03/vagrant-vm-cluster/index.html","hash":"f0fd4c6f952c7d3184a68cab4f1524baa5fde1af","modified":1494405547178},{"_id":"public/2016/06/26/hadoop-cluster-docker-update-english/index.html","hash":"7893c2058ad58a06392a59fa4c052305734aca6d","modified":1494405547178},{"_id":"public/2016/06/19/160619-vagrant-virtual-machine/index.html","hash":"f04853a987cfbbb50288fe7203c3f528c6225aa9","modified":1494405547178},{"_id":"public/2016/06/12/160612-hadoop-cluster-docker-update/index.html","hash":"732e14d294e4432b9dc3f9b62cd7cd83f4801613","modified":1494405547178},{"_id":"public/2016/06/05/160605-compile-hadoop-docker/index.html","hash":"a3c783e19939deae9aa02ca564b81d995b763969","modified":1494405547178},{"_id":"public/2016/05/29/160529-compile-hadoop-ubuntu/index.html","hash":"99b126d4de7488eeb51dc05fcc67fda5c72ac95c","modified":1494405547178},{"_id":"public/2016/01/09/160109-multiple-processes--docker-container/index.html","hash":"34a43cea37a5cada574ff89fe362338786520d2d","modified":1494405547178},{"_id":"public/2015/11/28/151128-single-kubernetes-docker/index.html","hash":"0741e0ada297289a4df9f0ae21616cc7452fd40f","modified":1494405547178},{"_id":"public/2015/09/18/150918-single-mesos-docker/index.html","hash":"1459dbdb2d191562935a35ffd7572fc6d439a7e4","modified":1494405547178},{"_id":"public/2015/06/08/150608-hadoop-cluster-docker/index.html","hash":"9b5d6c7ea02e87ba48403ba3ea67dfd6b71123c0","modified":1494405547179},{"_id":"public/archives/page/2/index.html","hash":"a2270d22ab8966400a312fdfdc4d7f4e514f5adb","modified":1494405547179},{"_id":"public/index.html","hash":"f8bb99e0c51e6f8cfc62d12e6948e368e5be216f","modified":1494405547179},{"_id":"public/page/2/index.html","hash":"0d64b367b957c4833a2012e1115e0128a17b523e","modified":1494405547179},{"_id":"public/page/3/index.html","hash":"79a476286fbf266b3025c55d8625db410b4b2f09","modified":1494405547179},{"_id":"public/tags/Docker/index.html","hash":"964268f8f4eab9d2fb43c932dedd29b75a5af9fd","modified":1494405547202},{"_id":"public/tags/Kubernetes/index.html","hash":"ad1b185dab305e412b091d1e87d634dfe90cb2ba","modified":1494405547202},{"_id":"public/tags/Mesos/index.html","hash":"41a218bb86041861dc7047c35d96601af0c29379","modified":1494405547202},{"_id":"public/tags/Marathon/index.html","hash":"fc9aed5acdb6625fc519e9c19ea1c2490b7214b8","modified":1494405547202},{"_id":"public/tags/Vagrant/index.html","hash":"2f4985550497bcc18468ece3e92a586536c2f974","modified":1494405547202},{"_id":"public/tags/MongoDB/index.html","hash":"db9f04cd2492503ae0fd5031c865e0fde27970b7","modified":1494405547202},{"_id":"public/tags/Node-js/index.html","hash":"c54988ed3674e0d1537586db2f0b407670c6a537","modified":1494405547203},{"_id":"public/tags//index.html","hash":"f7c64682ccd033320209e2b7bcef9b770b703a17","modified":1494405547203},{"_id":"public/tags/JavaScript/index.html","hash":"4f19ec2317352cd51665090d62db29d19ea27860","modified":1494405547203},{"_id":"public/tags/Source-Map/index.html","hash":"ea18e914a08eb5a713249c70eaec4c0a8593c989","modified":1494405547203},{"_id":"public/tags//index.html","hash":"16cd0ef1dde06c8fa99455a5766126250cbec280","modified":1494405547203},{"_id":"public/tags/BUG/index.html","hash":"dbc42acc14c3e11f0c2bee681dc33fccbfbd29fa","modified":1494405547203},{"_id":"public/tags/Linux/index.html","hash":"aad7db917a16e1fd168f108987155ab0bcff84cd","modified":1494405547203},{"_id":"public/tags/Java/index.html","hash":"847eedf397a1a0fbfb0d8f8ef3b3db402fc37485","modified":1494405547203},{"_id":"public/tags/Swarm/index.html","hash":"edd4343b768502c12f3bf129f836770a80118e3c","modified":1494405547203},{"_id":"public/robots.txt","hash":"b7d8a5701d5fb60fda9e17342c5fed7aec6b3ab2","modified":1494405547203},{"_id":"public/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1494405547203},{"_id":"public/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1494405547203},{"_id":"public/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1494405547203},{"_id":"public/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1494405547203},{"_id":"public/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1494405547203},{"_id":"public/img/fundebug.png","hash":"5470ee921cb4160af726031d01324e57eae2ea84","modified":1494405547203},{"_id":"public/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1494405547203},{"_id":"public/img/totop.png","hash":"74f4b1e0f3b47a1a27cee4a8cb712eb33994ca41","modified":1494405547203},{"_id":"public/img/github.png","hash":"8e4af8e0da1da6fb685e86c19afb5322d559a8ca","modified":1494405547203},{"_id":"public/img/segmentfault.jpeg","hash":"023e7eef6165635b2fee0fc013a8c45b0358a547","modified":1494405547203},{"_id":"public/css/font/fontawesome-webfont.woff","hash":"0612cddf2f835cceffccc88fd194f97367d0b024","modified":1494405547203},{"_id":"public/css/font/fontawesome-webfont.eot","hash":"d775f599ff3f23be082e6a9604b4898718923a37","modified":1494405547203},{"_id":"public/img/movie/08.png","hash":"e4af7f33afa90ce95558b9fb9421c460b3066608","modified":1494405547203},{"_id":"public/2017/02/18/weixinjsbridge-is-not-defined/weixinjsbridge_is_not_defined.png","hash":"215c53767524334d5357327cc21c13810253af57","modified":1494405547204},{"_id":"public/2017/03/17/fundebug-support-nodejs/fundebug-nodejs.png","hash":"bd274c08206ef29cd8eb6605bbd656c1a430a1d3","modified":1494405547204},{"_id":"public/2015/06/08/150608-hadoop-cluster-docker/image-architecture.graffle","hash":"363be32d8d54a021835f2125e7d93ab5f07ee3e1","modified":1494405547204},{"_id":"public/2017/04/25/node-command-option/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1494405547204},{"_id":"public/2015/06/08/150608-hadoop-cluster-docker/image-architecture.png","hash":"018c8ad81bcf1ad54778e761bf6c630403eb5e80","modified":1494405547204},{"_id":"public/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.graffle","hash":"851a2ee0c92e642e4dffedaac3fcaef10d216806","modified":1494405547204},{"_id":"public/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.graffle","hash":"9a2bac1e19c9299faf7e698b2feabde9717bad76","modified":1494405547204},{"_id":"public/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.graffle","hash":"33e193fb0f5600d82ebc8da745b09b2ae8d88e15","modified":1494405547204},{"_id":"public/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.graffle","hash":"281797ad8328ad5a147bfaeb4aa33c127d839e8f","modified":1494405547204},{"_id":"public/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.graffle","hash":"87e9b82b8aebd6a0239bc1582dec43e8356bf0d1","modified":1494405547204},{"_id":"public/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.graffle","hash":"7b5bd9e08cc3b4fc85dc7a04f106be0de6edd34b","modified":1494405547204},{"_id":"public/2016/09/04/what-is-service-discovery/service-discovery.graffle","hash":"d1c17c50056f8e3757d9a3fe686223cf62322d13","modified":1494405547204},{"_id":"public/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.graffle","hash":"b3e35ad7747c984f5069ad3589677e599395e34d","modified":1494405547204},{"_id":"public/2016/09/18/underscore-example/underscore-example.graffle","hash":"73758ad67c6d2d8e04112b931a5babc5bb09af24","modified":1494405547204},{"_id":"public/2017/01/23/fundebug-support-wxjs/empty.png","hash":"d65573fd992349739115b21172ac24bb94857393","modified":1494405547204},{"_id":"public/2017/03/20/nodejs-unit-test/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1494405547205},{"_id":"public/2017/03/29/user-behavior-track/user-behavior-track.png","hash":"9781503a6149724661d1ebd37f4613f8ab11b260","modified":1494405547205},{"_id":"public/2017/03/26/nodejs-docker/nodejs-docker.png","hash":"8dc7707af9d54eb127033b7a2b095ada92040500","modified":1494405547205},{"_id":"public/2017/03/26/nodejs-docker/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1494405547205},{"_id":"public/2017/04/10/nodejs-interview-2017/test_pyramid.png","hash":"5c21f9680fb220e7bc04a785f59bb8aec3b3b2e5","modified":1494405547205},{"_id":"public/2017/04/10/nodejs-interview-2017/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1494405547205},{"_id":"public/2017/04/01/nodejs-async-await/debug-async-await.png","hash":"9c929ae2c852697158369a4887b8258ded4e384e","modified":1494405547205},{"_id":"public/2017/04/01/nodejs-async-await/debug-promise.png","hash":"a6eff38be217603deebeb7500e85fc76e276bc41","modified":1494405547205},{"_id":"public/2017/04/01/nodejs-async-await/nodejs-qq-group.jpeg","hash":"38c7a1dd20184bba0651141c35a77ce0ac8047ac","modified":1494405547205},{"_id":"public/2016/12/07/fundebug-catch-the-bug/error-count.png","hash":"59a70b42bafe6159b1f56b07dffab29ecc84e9b8","modified":1494405547205},{"_id":"public/2017/04/07/solve-script-error/QRCode.png","hash":"17815e593b4f7cdb21ed9a0359db8dbc0f146bf3","modified":1494405547205},{"_id":"public/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.graffle","hash":"851a2ee0c92e642e4dffedaac3fcaef10d216806","modified":1494405547205},{"_id":"public/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.graffle","hash":"927aa0c3be32943949d17fa5455c2602a56c87fa","modified":1494405547205},{"_id":"public/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.graffle","hash":"7dcd48d344e3dc1c7bbcce0871aa44cc4f1f10a8","modified":1494405547205},{"_id":"public/2017/03/13/sourcemap-tutorial/chrome-sourcemap3.png","hash":"4e36737f6568097035a5dc8a74bc676b0c1969e6","modified":1494405547205},{"_id":"public/2017/03/13/sourcemap-tutorial/chrome-sourcemap2.png","hash":"1e2e294e51d0102a572ce1c3e7e382fe0a47fdd5","modified":1494405547205},{"_id":"public/2017/03/13/sourcemap-tutorial/chrome-sourcemap4.png","hash":"3f547d91548dadf50dd22eb2dc0270a63bed9bfa","modified":1494405547205},{"_id":"public/2016/07/10/mesos-marathon-platform/marathon.png","hash":"a3846ef25a058da2f9d67e5690bd501a3d1f94ff","modified":1494405547206},{"_id":"public/2017/04/06/test-script-error/01.png","hash":"657446d2083265735302bcc2d4bf2cc95f57c4bc","modified":1494405547206},{"_id":"public/2016/07/10/mesos-marathon-platform/nginx.png","hash":"e98b0adf233b13140e2a03a4feb8dc0f8f459af5","modified":1494405547206},{"_id":"public/2017/04/06/test-script-error/2firefox.png","hash":"b146496f3793a96d4ee3e8d7cb1cbaaefea04832","modified":1494405547206},{"_id":"public/2017/04/06/test-script-error/1chrome.png","hash":"d92a971123f6eab071c5b791191667b809e979b2","modified":1494405547207},{"_id":"public/2017/04/06/test-script-error/chrome_error.png","hash":"bec33c134ddd7f1d1f2df6f4f6b6fe7fa89478b8","modified":1494405547207},{"_id":"public/img/alipay.JPG","hash":"3a0ac497613bb00f56e0aec63b8864cc150dcde4","modified":1494405547749},{"_id":"public/img/kiwenlau.ico","hash":"987d9c1658c3779037d96f49d8779b9bab18440b","modified":1494405547751},{"_id":"public/css/font/fontawesome-webfont.ttf","hash":"a9468f6a1fe965fbcaf5a1bd6c11705e2fc5f84c","modified":1494405547752},{"_id":"public/css/font/fontawesome-webfont.svg","hash":"d162419c91b8bab3a4fd327c933a0fcf3799c251","modified":1494405547752},{"_id":"public/img/movie/05.png","hash":"8ff5d2e99824887adfb7efaab8aa918ca3ecfe5f","modified":1494405547752},{"_id":"public/img/movie/01.png","hash":"779dc6b68d08019d4ce6beea71047932998c6df2","modified":1494405547752},{"_id":"public/img/movie/07.png","hash":"e86ef7609459885be114a052962a47834bc1648b","modified":1494405547752},{"_id":"public/2017/05/02/about-docker-sock/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1494405547752},{"_id":"public/2017/02/11/weixin-miniprogram-need-fundebug/fundebug-wxjs.jpg","hash":"6232670f38f5ceffa2da0c246c0f5ac770c7d981","modified":1494405547752},{"_id":"public/2017/04/18/docker-system-explain/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1494405547752},{"_id":"public/2017/03/06/jquery-is-not-defined/fundebug-jquery-error.png","hash":"fd4bd810e3c52f028577273582147b8881e037ac","modified":1494405547753},{"_id":"public/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.png","hash":"a5ac1810938b8750268386ac39bbacfbf196c546","modified":1494405547753},{"_id":"public/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.png","hash":"a5ac1810938b8750268386ac39bbacfbf196c546","modified":1494405547753},{"_id":"public/2016/09/04/what-is-service-discovery/service-discovery.png","hash":"8295624fb096ba56f23e89e821a6453f54d55d25","modified":1494405547753},{"_id":"public/2017/01/23/fundebug-support-wxjs/fundebug-wxjs.jpg","hash":"6232670f38f5ceffa2da0c246c0f5ac770c7d981","modified":1494405547753},{"_id":"public/2016/09/18/underscore-example/underscore-example.png","hash":"463575f691b762eb0dc52cdbf220b784024d4abf","modified":1494405547753},{"_id":"public/2017/01/16/fundebug-support-all-browsers/browser-share.png","hash":"d771a27d5a87b85c6a943909cbd37b01d42c7588","modified":1494405547753},{"_id":"public/2017/04/24/ssh-port-forwarding/socket_proxy.png","hash":"17ed271eeb6558c6c5eb7f8e3d4be6e17d254581","modified":1494405547753},{"_id":"public/2017/04/24/ssh-port-forwarding/ssh_tunnel.jpeg","hash":"619c3047356b10d9731212abf42b43ad915a6c77","modified":1494405547753},{"_id":"public/2016/12/07/fundebug-catch-the-bug/email.png","hash":"44c53c1fcaca35c97dddd008586d05b31c2b90c0","modified":1494405547753},{"_id":"public/2017/04/05/understand-script-error/script-error-not-ok-chrome.png","hash":"021ba480b510c578a369e54ffaa7f7734857498a","modified":1494405547754},{"_id":"public/2017/04/17/about-docker-sock/01.png","hash":"9b5f698f81af9723a21528003889a57ed3bfd61d","modified":1494405547754},{"_id":"public/2017/04/17/about-docker-sock/02.png","hash":"6ad227ec3576ad6fc49a2f173f91e3e2bfc495ad","modified":1494405547754},{"_id":"public/2017/04/17/about-docker-sock/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1494405547754},{"_id":"public/2015/09/18/150918-single-mesos-docker/hello.png","hash":"732ba80324b66a3ff47fafbde89f4c61dfb04a08","modified":1494405547754},{"_id":"public/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.png","hash":"ae7bd83a3077c4f1a1f85211321932ab2e8df3cd","modified":1494405547754},{"_id":"public/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.png","hash":"f5b2995f300b1302e437ef8d4736341a3d5e7661","modified":1494405547754},{"_id":"public/2015/09/18/150918-single-mesos-docker/Marathon.png","hash":"58abd8a1ba30eedef47649093a37291e29f21e00","modified":1494405547754},{"_id":"public/2017/03/13/sourcemap-tutorial/fundebug-sourcemap.jpg","hash":"e71ed7627d1ab8bf4be327059d75f56ec0ac1fc0","modified":1494405547754},{"_id":"public/2016/07/10/mesos-marathon-platform/mesos.png","hash":"79e6dfb76d3585a5af23df5a2b185631ede2f179","modified":1494405547754},{"_id":"public/2016/07/10/mesos-marathon-platform/zookeeper.png","hash":"24357ecf44a1046d4f9191bc7d27ffa4f5957b8c","modified":1494405547754},{"_id":"public/2017/05/08/docker-swarm-suggestion/docker.JPG","hash":"a19f09cd2df10569384698159055b3e5652ccbcd","modified":1494405547754},{"_id":"public/css/style.css","hash":"ccd771c6683ef7b4b908eb47a30a16ccf115620b","modified":1494405547768},{"_id":"public/fancybox/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1494405547768},{"_id":"public/js/gallery.js","hash":"f8b17fc2dbd4fb939bb872d1232b404049355cfa","modified":1494405547768},{"_id":"public/js/jquery.imagesloaded.min.js","hash":"4109837b1f6477bacc6b095a863b1b95b1b3693f","modified":1494405547768},{"_id":"public/js/totop.js","hash":"8fbd5fb07b1397839b75636607fa66e3391b4182","modified":1494405547768},{"_id":"public/js/pv.js","hash":"8d80f3e460e3e6fb04afe282f8d9be84fc490dc5","modified":1494405547768},{"_id":"public/js/blog/20170306_ip.js","hash":"e7afe8f904a71e938c9cae17e4612c113694b9e7","modified":1494405547768},{"_id":"public/js/blog/20170306_time.js","hash":"f03d03c5f3fef48f6200f44e73e3efee6a71bcae","modified":1494405547768},{"_id":"public/css/gitment.css","hash":"7fbb18b73b44ed11193739c55fce53a6f173cf68","modified":1494405547768},{"_id":"public/fancybox/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1494405547768},{"_id":"public/js/gitment.js","hash":"376446d9c5930576016f97dd63e5e6616c94d8d4","modified":1494405547768},{"_id":"public/js/highcharts.js","hash":"22f512de32b98166405948cd4c8e46f0f25cd8a3","modified":1494405547768},{"_id":"public/js/jquery.min.js","hash":"f647a6d37dc4ca055ced3cf64bbc1f490070acba","modified":1494405547769},{"_id":"public/img/wechat.JPG","hash":"f7a0e2917a259dc9d4baf4cd13788ebe6ddb3547","modified":1494405547769},{"_id":"public/img/movie/02.png","hash":"ba2dca28ad364718a2304e7968ad913ed32755f4","modified":1494405547769},{"_id":"public/img/movie/03.png","hash":"a5f512e7c48f0b75e199c8d86e434edae58a33c5","modified":1494405547769},{"_id":"public/img/movie/06.png","hash":"9c252d667cbbda0a8b95941d29b04b286dbb5af8","modified":1494405547769},{"_id":"public/img/movie/04.png","hash":"d7b381f968a54eb76abdfd0dfc17b61663371972","modified":1494405547769},{"_id":"public/2016/11/fundebug-is-online/without_fundebug.jpg","hash":"0e677ff142f135356f97dc2975192c74aa153245","modified":1494405547769},{"_id":"public/2016/11/fundebug-is-online/with_fundebug.jpg","hash":"21c5b66c47b82be0faaac29d39a09922587e1ef8","modified":1494405547770},{"_id":"public/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.png","hash":"c3762c5e96023233997aef60d1c1e678d1998ba2","modified":1494405547770},{"_id":"public/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.png","hash":"a4470187ff958413325ce3241dfea734d05ad4ef","modified":1494405547770},{"_id":"public/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.png","hash":"c3762c5e96023233997aef60d1c1e678d1998ba2","modified":1494405547770},{"_id":"public/2017/03/20/nodejs-unit-test/nodejs-unit-test.jpg","hash":"81a6dbd93a561f7fab4b867308bcae4dbd6e118b","modified":1494405547771},{"_id":"public/2017/03/29/user-behavior-track/fundebug-track-behavior.png","hash":"4cdf29106cfbd471f55d1801dc904c8adce73c4c","modified":1494405547771},{"_id":"public/2017/04/07/solve-script-error/script-error.png","hash":"1c884cc78784cd80d8cdc1e36bfb2b18471db030","modified":1494405547771},{"_id":"public/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.png","hash":"d980b3c3af38a43af0168fd7defe0ded28be9652","modified":1494405547789},{"_id":"public/2016/12/07/fundebug-catch-the-bug/error-detail.png","hash":"aa35e26788a38cd49e492ba18c593f222323d7ae","modified":1494405547789},{"_id":"public/2017/03/13/sourcemap-tutorial/chrome-sourcemap1.png","hash":"f3b042839974f56278c49f9260a349389c3494af","modified":1494405547789},{"_id":"public/2017/04/06/test-script-error/2.png","hash":"d3302f43e94db29b75cf77743b3abe3fc61eed79","modified":1494405547789},{"_id":"public/2017/04/05/understand-script-error/script-error-ok.png","hash":"4a0d1dd17e797c2df8e9ec39048c6bac4646beed","modified":1494405547790},{"_id":"public/2017/04/05/understand-script-error/script-error.png","hash":"8bbfca2aeae2f8bf97044fd8b3a4adb18a46fcb3","modified":1494405547790},{"_id":"public/2017/04/06/test-script-error/script-error.png","hash":"8bbfca2aeae2f8bf97044fd8b3a4adb18a46fcb3","modified":1494405547790},{"_id":"public/2015/09/18/150918-single-mesos-docker/Mesos.png","hash":"5fbab0dbc5d46b0caa4fab577a0de8c174c0eab6","modified":1494405547809},{"_id":"public/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.graffle","hash":"4383e6048a4699bb494d20ce8d1490d10c550b35","modified":1494405547809},{"_id":"public/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.png","hash":"aa5290c71ba1721e39ed42fbef45465df0636699","modified":1494405547809},{"_id":"public/2017/01/16/fundebug-support-all-browsers/browser.jpg","hash":"408c2c7589aebb85837af85218230b32b5d63300","modified":1494405547809},{"_id":"public/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.png","hash":"d877b65ca99e60fd05e04df49c83decda3e59e50","modified":1494405547823},{"_id":"public/2017/04/06/test-script-error/4.png","hash":"ba702785709216fa94239ff694b6328187ebb267","modified":1494405547823},{"_id":"public/2017/04/07/solve-script-error/qiniu.png","hash":"618bdb7709998c629e81d392d93a9ace70516db3","modified":1494405547848},{"_id":"public/2017/04/06/test-script-error/012.png","hash":"44b4f84e79cca059b987f4c6204dceeb1fbe42a4","modified":1494405547848},{"_id":"public/2017/04/06/test-script-error/1.png","hash":"593bc8666eac82ccceefda8c4f9c028b25fad8c2","modified":1494405547848},{"_id":"public/2017/04/06/test-script-error/5.png","hash":"fa1380d3e4e5d863502168ab3aab545eb85fcb66","modified":1494405547849},{"_id":"public/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.graffle","hash":"02a2b9ae30a9ee599151160d6a9eaf7f10661ebb","modified":1494405547887},{"_id":"public/img/kiwenlau.jpg","hash":"e163949f9617ee5a0b92ef131f6e2bb57a2c0e36","modified":1494405547926},{"_id":"public/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.png","hash":"a54ce970b4aef1d48bb0eadd2b2b8290d8987557","modified":1494405547926},{"_id":"public/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.png","hash":"0e96c1b51dcd1102d2c000f2510fedeb356d2b02","modified":1494405548036}],"Category":[],"Data":[],"Page":[{"title":"","date":"2017-04-27T13:26:08.000Z","_content":"\n## \n\nKiwenLau[Fundbug](https://fundebug.com/)[Docker](https://kiwenlau.com/tags/Docker/)[Node.js](https://kiwenlau.com/tags/Node-js/)\n\n## \n\n[Hexo](https://hexo.io/docs/)[GitHub](https://github.com)[Coding](https://coding.net)[kiwenlau/blog](https://github.com/kiwenlau/blog)\n\n[Light](https://github.com/hexojs/hexo-theme-light):\n\n- [Fundebug](https://fundebug.com/)JavaScript\n- [Gitment](https://github.com/imsun/gitment)\n- [](http://busuanzi.ibruce.info)\n- [LeanCloud](https://leancloud.cn)\n- [Google AdSense](http://www.google.cn/adsense)\n- [](https://www.qiniu.com)\n- [](http://tongji.baidu.com/)[](http://www.lotuseed.com/)\n\n## \n\n{% raw %}\n<div style=\"display: inline\">\n    <table cellspacing=\"0\" cellpadding=\"4\">\n        <tbody>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/3205624/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/01.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/26683290/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/02.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1294639/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/03.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/5153254/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/04.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6874403/\" title=\"Begin Again\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/05.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/21937445/\" title=\"\" target=\"_blank\">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/06.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6872936/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/07.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1293350/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/08.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n        </tbody>\n        </table>\n</div>\n\n{% endraw %}\n\n## \n\n{% raw %}\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26779276/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv01.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/5413527/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv02.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/1419297/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv03.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/21371686/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv04.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26443937/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv05.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/22232279/\" title=\"\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv06.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26672659/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv07.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/6037429/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv08.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </div>\n{% endraw %}\n\n## \n\n{% raw %}\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/6709783/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book01.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/1421029/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book02.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/5921785/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book03.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/4104794/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book04.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3869949/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book05.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/25726145/\" title=\"\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book06.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3845101/\" title=\"24\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book07.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/26700104/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book08.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </div>\n{% endraw %}\n\n## \n\n[kiwenlau/blog](https://github.com/kiwenlau/blog)Star\n\n[Fundebug](https://fundebug.com/)\n\n## \n\n[KiwenLau](https://kiwenlau.com):\n\n<pre >:\n<b><a href=\"https://kiwenlau.com\" target=\"_blank\" title=\"KiwenLau\">KiwenLau</a></b>\n<b><a href=\"https://kiwenlau.com/2016/09/04/what-is-service-discovery/\" target=\"_blank\" title=\"\">https://kiwenlau.com/2016/09/04/what-is-service-discovery/</a></b>\n</pre>\n\n","source":"about/index.md","raw":"title: \ndate: 2017-04-27 21:26:08\n---\n\n## \n\nKiwenLau[Fundbug](https://fundebug.com/)[Docker](https://kiwenlau.com/tags/Docker/)[Node.js](https://kiwenlau.com/tags/Node-js/)\n\n## \n\n[Hexo](https://hexo.io/docs/)[GitHub](https://github.com)[Coding](https://coding.net)[kiwenlau/blog](https://github.com/kiwenlau/blog)\n\n[Light](https://github.com/hexojs/hexo-theme-light):\n\n- [Fundebug](https://fundebug.com/)JavaScript\n- [Gitment](https://github.com/imsun/gitment)\n- [](http://busuanzi.ibruce.info)\n- [LeanCloud](https://leancloud.cn)\n- [Google AdSense](http://www.google.cn/adsense)\n- [](https://www.qiniu.com)\n- [](http://tongji.baidu.com/)[](http://www.lotuseed.com/)\n\n## \n\n{% raw %}\n<div style=\"display: inline\">\n    <table cellspacing=\"0\" cellpadding=\"4\">\n        <tbody>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/3205624/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/01.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/26683290/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/02.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1294639/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/03.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/5153254/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/04.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6874403/\" title=\"Begin Again\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/05.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/21937445/\" title=\"\" target=\"_blank\">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/06.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6872936/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/07.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1293350/\" title=\"\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/08.png\" width=133px height=200px style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n        </tbody>\n        </table>\n</div>\n\n{% endraw %}\n\n## \n\n{% raw %}\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26779276/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv01.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/5413527/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv02.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/1419297/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv03.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/21371686/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv04.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26443937/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv05.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/22232279/\" title=\"\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv06.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26672659/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv07.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/6037429/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv08.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </div>\n{% endraw %}\n\n## \n\n{% raw %}\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/6709783/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book01.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/1421029/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book02.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/5921785/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book03.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/4104794/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book04.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3869949/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book05.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/25726145/\" title=\"\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book06.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3845101/\" title=\"24\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book07.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/26700104/\" title=\"\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book08.jpg\" width=133px height=200px style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </div>\n{% endraw %}\n\n## \n\n[kiwenlau/blog](https://github.com/kiwenlau/blog)Star\n\n[Fundebug](https://fundebug.com/)\n\n## \n\n[KiwenLau](https://kiwenlau.com):\n\n<pre >:\n<b><a href=\"https://kiwenlau.com\" target=\"_blank\" title=\"KiwenLau\">KiwenLau</a></b>\n<b><a href=\"https://kiwenlau.com/2016/09/04/what-is-service-discovery/\" target=\"_blank\" title=\"\">https://kiwenlau.com/2016/09/04/what-is-service-discovery/</a></b>\n</pre>\n\n","updated":"2017-05-03T12:47:22.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"cj2iqgtab000071fya2ihfn4r","content":"<h2 id=\"&#x5173;&#x4E8E;&#x6211;\"><a href=\"#&#x5173;&#x4E8E;&#x6211;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x6211;\"></a>&#x5173;&#x4E8E;&#x6211;</h2><p>&#x6211;&#x53EB;KiwenLau&#xFF0C;&#x662F;&#x5168;&#x6808;&#x5E94;&#x7528;&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x5E73;&#x53F0;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundbug</a>&#x7684;&#x521B;&#x59CB;&#x4EBA;&#x3002;&#x6211;&#x7684;&#x5DE5;&#x4F5C;&#x5185;&#x5BB9;&#x662F;&#x540E;&#x7AEF;&#x7684;&#x8BBE;&#x8BA1;&#x3001;&#x5F00;&#x53D1;&#x548C;&#x8FD0;&#x7EF4;&#xFF0C;&#x76EE;&#x524D;&#x4E13;&#x6CE8;&#x4E8E;<a href=\"https://kiwenlau.com/tags/Docker/\">Docker</a>&#xFF0C;<a href=\"https://kiwenlau.com/tags/Node-js/\">Node.js</a>&#x7B49;&#x6280;&#x672F;&#x3002;&#x6211;&#x559C;&#x6B22;&#x6572;&#x4EE3;&#x7801;&#xFF0C;&#x4E5F;&#x559C;&#x6B22;&#x5199;&#x535A;&#x5BA2;&#x3002;</p>\n<h2 id=\"&#x5173;&#x4E8E;&#x672C;&#x7AD9;\"><a href=\"#&#x5173;&#x4E8E;&#x672C;&#x7AD9;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x672C;&#x7AD9;\"></a>&#x5173;&#x4E8E;&#x672C;&#x7AD9;</h2><p>&#x672C;&#x7AD9;&#x662F;&#x6211;&#x57FA;&#x4E8E;<a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">Hexo</a>&#x642D;&#x5EFA;&#x7684;&#x4E2A;&#x4EBA;&#x6280;&#x672F;&#x535A;&#x5BA2;&#x3002;&#x672C;&#x7AD9;&#x6E90;&#x4EE3;&#x7801;&#x6258;&#x7BA1;&#x5728;<a href=\"https://github.com\" target=\"_blank\" rel=\"external\">GitHub</a>&#xFF0C;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x90E8;&#x7F72;&#x5728;<a href=\"https://coding.net\" target=\"_blank\" rel=\"external\">Coding</a>&#x4E0A;&#x3002;&#x672C;&#x7AD9;&#x6240;&#x6709;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x5F00;&#x6E90;&#x7684;<a href=\"https://github.com/kiwenlau/blog\" target=\"_blank\" rel=\"external\">kiwenlau/blog</a>&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x514D;&#x8D39;&#x4F7F;&#x7528;&#x3002;</p>\n<p>&#x672C;&#x7AD9;&#x4F7F;&#x7528;&#x4E86;<a href=\"https://github.com/hexojs/hexo-theme-light\" target=\"_blank\" rel=\"external\">Light</a>&#x4F5C;&#x4E3A;&#x4E3B;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x8FDB;&#x884C;&#x4E86;&#x5927;&#x91CF;&#x4E2A;&#x6027;&#x5316;&#x5B9A;&#x5236;:</p>\n<ul>\n<li>&#x4F7F;&#x7528;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x76D1;&#x63A7;JavaScript&#x811A;&#x672C;&#x9519;&#x8BEF;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://github.com/imsun/gitment\" target=\"_blank\" rel=\"external\">Gitment</a>&#x5B9E;&#x73B0;&#x535A;&#x5BA2;&#x8BC4;&#x8BBA;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"http://busuanzi.ibruce.info\" target=\"_blank\" rel=\"external\">&#x4E0D;&#x849C;&#x5B50;</a>&#x7EDF;&#x8BA1;&#x535A;&#x5BA2;&#x8BBF;&#x95EE;&#x91CF;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://leancloud.cn\" target=\"_blank\" rel=\"external\">LeanCloud</a>&#x7EDF;&#x8BA1;&#x70ED;&#x95E8;&#x535A;&#x5BA2;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"http://www.google.cn/adsense\" target=\"_blank\" rel=\"external\">Google AdSense</a>&#x5B9E;&#x73B0;&#x5E7F;&#x544A;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://www.qiniu.com\" target=\"_blank\" rel=\"external\">&#x4E03;&#x725B;</a>&#x5B58;&#x50A8;&#x4E86;&#x90E8;&#x5206;&#x56FE;&#x7247;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"http://tongji.baidu.com/\" target=\"_blank\" rel=\"external\">&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</a>&#x548C;<a href=\"http://www.lotuseed.com/\" target=\"_blank\" rel=\"external\">&#x83B2;&#x5B50;&#x6570;&#x636E;</a>&#x7EDF;&#x8BA1;&#x540E;&#x53F0;&#x6570;&#x636E;&#x3002;</li>\n</ul>\n<h2 id=\"&#x63A8;&#x8350;&#x7535;&#x5F71;\"><a href=\"#&#x63A8;&#x8350;&#x7535;&#x5F71;\" class=\"headerlink\" title=\"&#x63A8;&#x8350;&#x7535;&#x5F71;\"></a>&#x63A8;&#x8350;&#x7535;&#x5F71;</h2>\n<div style=\"display: inline\">\n    <table cellspacing=\"0\" cellpadding=\"4\">\n        <tbody>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/3205624/\" title=\"&#x793E;&#x4EA4;&#x7F51;&#x7EDC;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/01.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/26683290/\" title=\"&#x4F60;&#x7684;&#x540D;&#x5B57;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/02.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1294639/\" title=\"&#x52C7;&#x6562;&#x7684;&#x5FC3;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/03.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/5153254/\" title=\"&#x7231;&#x4F60;&#xFF0C;&#x7F57;&#x831C;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/04.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6874403/\" title=\"Begin Again\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/05.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/21937445/\" title=\"&#x8FA9;&#x62A4;&#x4EBA;\" target=\"_blank\">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/06.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6872936/\" title=\"&#x519B;&#x706B;&#x8D29;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/07.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1293350/\" title=\"&#x4E24;&#x6746;&#x5927;&#x70DF;&#x67AA;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/08.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n        </tbody>\n        </table>\n</div>\n\n\n<h2 id=\"&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;\"><a href=\"#&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;\" class=\"headerlink\" title=\"&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;\"></a>&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;</h2>\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26779276/\" title=\"&#x5077;&#x62A2;&#x62D0;&#x9A97;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv01.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/5413527/\" title=\"&#x56FD;&#x571F;&#x5B89;&#x5168;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv02.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/1419297/\" title=\"&#x8D8A;&#x72F1;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv03.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/21371686/\" title=\"&#x5D29;&#x817E;&#x5E74;&#x4EE3;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv04.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26443937/\" title=\"&#x968F;&#x6027;&#x6240;&#x6B32;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv05.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/22232279/\" title=\"&#x66B4;&#x541B;\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv06.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26672659/\" title=\"&#x5047;&#x9762;&#x771F;&#x60C5;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv07.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/6037429/\" title=\"&#x7EB8;&#x724C;&#x5C4B;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv08.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </table></div>\n\n<h2 id=\"&#x63A8;&#x8350;&#x4E66;&#x7C4D;\"><a href=\"#&#x63A8;&#x8350;&#x4E66;&#x7C4D;\" class=\"headerlink\" title=\"&#x63A8;&#x8350;&#x4E66;&#x7C4D;\"></a>&#x63A8;&#x8350;&#x4E66;&#x7C4D;</h2>\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/6709783/\" title=\"&#x6D6A;&#x6F6E;&#x4E4B;&#x5DC5;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book01.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/1421029/\" title=\"&#x5E1D;&#x56FD;&#x7684;&#x60C6;&#x6005;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book02.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/5921785/\" title=\"&#x4E71;&#x4E16;&#x534E;&#x5C14;&#x8857;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book03.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/4104794/\" title=\"&#x6709;&#x4E00;&#x7C7B;&#x6218;&#x72AF;&#x53EB;&#x53C2;&#x8C0B;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book04.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3869949/\" title=\"&#x7ECF;&#x6D4E;&#x5B66;&#x901A;&#x8BC6;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book05.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/25726145/\" title=\"&#x4E00;&#x8DEF;&#x8D70;&#x6765;&#x4E00;&#x8DEF;&#x8BFB;\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book06.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3845101/\" title=\"24&#x5802;&#x8D22;&#x5BCC;&#x8BFE;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book07.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/26700104/\" title=\"&#x7A7F;&#x8D8A;&#x767E;&#x5E74;&#x4E2D;&#x4E1C;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book08.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </table></div>\n\n<h2 id=\"&#x9F13;&#x52B1;&#x4E00;&#x4E0B;\"><a href=\"#&#x9F13;&#x52B1;&#x4E00;&#x4E0B;\" class=\"headerlink\" title=\"&#x9F13;&#x52B1;&#x4E00;&#x4E0B;\"></a>&#x9F13;&#x52B1;&#x4E00;&#x4E0B;</h2><p>&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x8FD8;&#x4E0D;&#x9519;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED9;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x4ED3;&#x5E93;<a href=\"https://github.com/kiwenlau/blog\" target=\"_blank\" rel=\"external\">kiwenlau/blog</a>&#x4E00;&#x4E2A;Star&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x5206;&#x4EAB;&#x7ED9;&#x4F60;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x652F;&#x4ED8;&#x5B9D;&#x6216;&#x8005;&#x5FAE;&#x4FE1;&#x7ED9;&#x6211;&#x6253;&#x8D4F;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8BD5;&#x7528;&#x4E00;&#x4E0B;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x670D;&#x52A1;&#xFF0C;&#x652F;&#x6301;&#x6211;&#x7684;&#x521B;&#x4E1A;&#x9879;&#x76EE;&#x3002;</p>\n<h2 id=\"&#x7248;&#x6743;&#x7533;&#x660E;\"><a href=\"#&#x7248;&#x6743;&#x7533;&#x660E;\" class=\"headerlink\" title=\"&#x7248;&#x6743;&#x7533;&#x660E;\"></a>&#x7248;&#x6743;&#x7533;&#x660E;</h2><p>&#x672C;&#x7AD9;&#x6240;&#x6709;&#x535A;&#x5BA2;&#x5747;&#x4FDD;&#x7559;&#x7248;&#x6743;&#xFF0C;&#x672A;&#x7ECF;&#x5141;&#x8BB8;&#xFF0C;&#x4E0D;&#x5F97;&#x7528;&#x4E8E;&#x5546;&#x4E1A;&#x7528;&#x9014;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x8FFD;&#x7A76;&#x6CD5;&#x5F8B;&#x8D23;&#x4EFB;&#x3002;&#x5982;&#x679C;&#x8F6C;&#x8F7D;&#x7684;&#x8BDD;&#xFF0C;&#x8BF7;&#x6CE8;&#x660E;&#x4F5C;&#x8005;<a href=\"https://kiwenlau.com\">KiwenLau</a>&#x4EE5;&#x53CA;&#x535A;&#x5BA2;&#x5730;&#x5740;&#xFF0C;&#x4F8B;&#x5982;:</p>\n<pre>&#x7248;&#x6743;&#x58F0;&#x660E;:\n&#x8F6C;&#x8F7D;&#x65F6;&#x8BF7;&#x6CE8;&#x660E;&#x4F5C;&#x8005;<b><a href=\"https://kiwenlau.com\" target=\"_blank\" title=\"KiwenLau\">KiwenLau</a></b>&#x4EE5;&#x53CA;&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;\n<b><a href=\"https://kiwenlau.com/2016/09/04/what-is-service-discovery/\" target=\"_blank\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF1F;\">https://kiwenlau.com/2016/09/04/what-is-service-discovery/</a></b>\n</pre>\n\n","excerpt":"","more":"<h2 id=\"&#x5173;&#x4E8E;&#x6211;\"><a href=\"#&#x5173;&#x4E8E;&#x6211;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x6211;\"></a>&#x5173;&#x4E8E;&#x6211;</h2><p>&#x6211;&#x53EB;KiwenLau&#xFF0C;&#x662F;&#x5168;&#x6808;&#x5E94;&#x7528;&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x5E73;&#x53F0;<a href=\"https://fundebug.com/\">Fundbug</a>&#x7684;&#x521B;&#x59CB;&#x4EBA;&#x3002;&#x6211;&#x7684;&#x5DE5;&#x4F5C;&#x5185;&#x5BB9;&#x662F;&#x540E;&#x7AEF;&#x7684;&#x8BBE;&#x8BA1;&#x3001;&#x5F00;&#x53D1;&#x548C;&#x8FD0;&#x7EF4;&#xFF0C;&#x76EE;&#x524D;&#x4E13;&#x6CE8;&#x4E8E;<a href=\"https://kiwenlau.com/tags/Docker/\">Docker</a>&#xFF0C;<a href=\"https://kiwenlau.com/tags/Node-js/\">Node.js</a>&#x7B49;&#x6280;&#x672F;&#x3002;&#x6211;&#x559C;&#x6B22;&#x6572;&#x4EE3;&#x7801;&#xFF0C;&#x4E5F;&#x559C;&#x6B22;&#x5199;&#x535A;&#x5BA2;&#x3002;</p>\n<h2 id=\"&#x5173;&#x4E8E;&#x672C;&#x7AD9;\"><a href=\"#&#x5173;&#x4E8E;&#x672C;&#x7AD9;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x672C;&#x7AD9;\"></a>&#x5173;&#x4E8E;&#x672C;&#x7AD9;</h2><p>&#x672C;&#x7AD9;&#x662F;&#x6211;&#x57FA;&#x4E8E;<a href=\"https://hexo.io/docs/\">Hexo</a>&#x642D;&#x5EFA;&#x7684;&#x4E2A;&#x4EBA;&#x6280;&#x672F;&#x535A;&#x5BA2;&#x3002;&#x672C;&#x7AD9;&#x6E90;&#x4EE3;&#x7801;&#x6258;&#x7BA1;&#x5728;<a href=\"https://github.com\">GitHub</a>&#xFF0C;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x90E8;&#x7F72;&#x5728;<a href=\"https://coding.net\">Coding</a>&#x4E0A;&#x3002;&#x672C;&#x7AD9;&#x6240;&#x6709;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x5F00;&#x6E90;&#x7684;<a href=\"https://github.com/kiwenlau/blog\">kiwenlau/blog</a>&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x514D;&#x8D39;&#x4F7F;&#x7528;&#x3002;</p>\n<p>&#x672C;&#x7AD9;&#x4F7F;&#x7528;&#x4E86;<a href=\"https://github.com/hexojs/hexo-theme-light\">Light</a>&#x4F5C;&#x4E3A;&#x4E3B;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x8FDB;&#x884C;&#x4E86;&#x5927;&#x91CF;&#x4E2A;&#x6027;&#x5316;&#x5B9A;&#x5236;:</p>\n<ul>\n<li>&#x4F7F;&#x7528;<a href=\"https://fundebug.com/\">Fundebug</a>&#x76D1;&#x63A7;JavaScript&#x811A;&#x672C;&#x9519;&#x8BEF;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://github.com/imsun/gitment\">Gitment</a>&#x5B9E;&#x73B0;&#x535A;&#x5BA2;&#x8BC4;&#x8BBA;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"http://busuanzi.ibruce.info\">&#x4E0D;&#x849C;&#x5B50;</a>&#x7EDF;&#x8BA1;&#x535A;&#x5BA2;&#x8BBF;&#x95EE;&#x91CF;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://leancloud.cn\">LeanCloud</a>&#x7EDF;&#x8BA1;&#x70ED;&#x95E8;&#x535A;&#x5BA2;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"http://www.google.cn/adsense\">Google AdSense</a>&#x5B9E;&#x73B0;&#x5E7F;&#x544A;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://www.qiniu.com\">&#x4E03;&#x725B;</a>&#x5B58;&#x50A8;&#x4E86;&#x90E8;&#x5206;&#x56FE;&#x7247;&#x3002;</li>\n<li>&#x4F7F;&#x7528;<a href=\"http://tongji.baidu.com/\">&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</a>&#x548C;<a href=\"http://www.lotuseed.com/\">&#x83B2;&#x5B50;&#x6570;&#x636E;</a>&#x7EDF;&#x8BA1;&#x540E;&#x53F0;&#x6570;&#x636E;&#x3002;</li>\n</ul>\n<h2 id=\"&#x63A8;&#x8350;&#x7535;&#x5F71;\"><a href=\"#&#x63A8;&#x8350;&#x7535;&#x5F71;\" class=\"headerlink\" title=\"&#x63A8;&#x8350;&#x7535;&#x5F71;\"></a>&#x63A8;&#x8350;&#x7535;&#x5F71;</h2>\n<div style=\"display: inline\">\n    <table cellspacing=\"0\" cellpadding=\"4\">\n        <tbody>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/3205624/\" title=\"&#x793E;&#x4EA4;&#x7F51;&#x7EDC;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/01.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/26683290/\" title=\"&#x4F60;&#x7684;&#x540D;&#x5B57;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/02.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1294639/\" title=\"&#x52C7;&#x6562;&#x7684;&#x5FC3;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/03.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/5153254/\" title=\"&#x7231;&#x4F60;&#xFF0C;&#x7F57;&#x831C;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/04.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n            <tr align=\"center\">\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6874403/\" title=\"Begin Again\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/05.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/21937445/\" title=\"&#x8FA9;&#x62A4;&#x4EBA;\" target=\"_blank\">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/06.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/6872936/\" title=\"&#x519B;&#x706B;&#x8D29;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/07.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n                <td>\n                    <a href=\"https://movie.douban.com/subject/1293350/\" title=\"&#x4E24;&#x6746;&#x5927;&#x70DF;&#x67AA;\" target=\"_blank \">\n                        <img src=\"http://op9rwofuk.bkt.clouddn.com/08.png\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                    </a>\n                </td>\n            </tr>\n        </tbody>\n        </table>\n</div>\n\n\n<h2 id=\"&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;\"><a href=\"#&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;\" class=\"headerlink\" title=\"&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;\"></a>&#x63A8;&#x8350;&#x7535;&#x89C6;&#x5267;</h2>\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26779276/\" title=\"&#x5077;&#x62A2;&#x62D0;&#x9A97;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv01.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/5413527/\" title=\"&#x56FD;&#x571F;&#x5B89;&#x5168;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv02.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/1419297/\" title=\"&#x8D8A;&#x72F1;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv03.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/21371686/\" title=\"&#x5D29;&#x817E;&#x5E74;&#x4EE3;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv04.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26443937/\" title=\"&#x968F;&#x6027;&#x6240;&#x6B32;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv05.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/22232279/\" title=\"&#x66B4;&#x541B;\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv06.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/26672659/\" title=\"&#x5047;&#x9762;&#x771F;&#x60C5;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv07.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://movie.douban.com/subject/6037429/\" title=\"&#x7EB8;&#x724C;&#x5C4B;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/tv08.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </table></div>\n\n<h2 id=\"&#x63A8;&#x8350;&#x4E66;&#x7C4D;\"><a href=\"#&#x63A8;&#x8350;&#x4E66;&#x7C4D;\" class=\"headerlink\" title=\"&#x63A8;&#x8350;&#x4E66;&#x7C4D;\"></a>&#x63A8;&#x8350;&#x4E66;&#x7C4D;</h2>\n    <div>\n        <table cellspacing=\"0\" cellpadding=\"4\">\n            <tbody>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/6709783/\" title=\"&#x6D6A;&#x6F6E;&#x4E4B;&#x5DC5;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book01.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/1421029/\" title=\"&#x5E1D;&#x56FD;&#x7684;&#x60C6;&#x6005;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book02.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/5921785/\" title=\"&#x4E71;&#x4E16;&#x534E;&#x5C14;&#x8857;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book03.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/4104794/\" title=\"&#x6709;&#x4E00;&#x7C7B;&#x6218;&#x72AF;&#x53EB;&#x53C2;&#x8C0B;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book04.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n                <tr align=\"center\">\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3869949/\" title=\"&#x7ECF;&#x6D4E;&#x5B66;&#x901A;&#x8BC6;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book05.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/25726145/\" title=\"&#x4E00;&#x8DEF;&#x8D70;&#x6765;&#x4E00;&#x8DEF;&#x8BFB;\" target=\"_blank\">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book06.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/3845101/\" title=\"24&#x5802;&#x8D22;&#x5BCC;&#x8BFE;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book07.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                    <td>\n                        <a href=\"https://book.douban.com/subject/26700104/\" title=\"&#x7A7F;&#x8D8A;&#x767E;&#x5E74;&#x4E2D;&#x4E1C;\" target=\"_blank \">\n                            <img src=\"http://op9rwofuk.bkt.clouddn.com/book08.jpg\" width=\"133px\" height=\"200px\" style=\"margin: 10px 10px\">\n                        </a>\n                    </td>\n                </tr>\n            </tbody>\n    </table></div>\n\n<h2 id=\"&#x9F13;&#x52B1;&#x4E00;&#x4E0B;\"><a href=\"#&#x9F13;&#x52B1;&#x4E00;&#x4E0B;\" class=\"headerlink\" title=\"&#x9F13;&#x52B1;&#x4E00;&#x4E0B;\"></a>&#x9F13;&#x52B1;&#x4E00;&#x4E0B;</h2><p>&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x8FD8;&#x4E0D;&#x9519;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED9;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x4ED3;&#x5E93;<a href=\"https://github.com/kiwenlau/blog\">kiwenlau/blog</a>&#x4E00;&#x4E2A;Star&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x5206;&#x4EAB;&#x7ED9;&#x4F60;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x652F;&#x4ED8;&#x5B9D;&#x6216;&#x8005;&#x5FAE;&#x4FE1;&#x7ED9;&#x6211;&#x6253;&#x8D4F;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8BD5;&#x7528;&#x4E00;&#x4E0B;<a href=\"https://fundebug.com/\">Fundebug</a>&#x670D;&#x52A1;&#xFF0C;&#x652F;&#x6301;&#x6211;&#x7684;&#x521B;&#x4E1A;&#x9879;&#x76EE;&#x3002;</p>\n<h2 id=\"&#x7248;&#x6743;&#x7533;&#x660E;\"><a href=\"#&#x7248;&#x6743;&#x7533;&#x660E;\" class=\"headerlink\" title=\"&#x7248;&#x6743;&#x7533;&#x660E;\"></a>&#x7248;&#x6743;&#x7533;&#x660E;</h2><p>&#x672C;&#x7AD9;&#x6240;&#x6709;&#x535A;&#x5BA2;&#x5747;&#x4FDD;&#x7559;&#x7248;&#x6743;&#xFF0C;&#x672A;&#x7ECF;&#x5141;&#x8BB8;&#xFF0C;&#x4E0D;&#x5F97;&#x7528;&#x4E8E;&#x5546;&#x4E1A;&#x7528;&#x9014;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x8FFD;&#x7A76;&#x6CD5;&#x5F8B;&#x8D23;&#x4EFB;&#x3002;&#x5982;&#x679C;&#x8F6C;&#x8F7D;&#x7684;&#x8BDD;&#xFF0C;&#x8BF7;&#x6CE8;&#x660E;&#x4F5C;&#x8005;<a href=\"https://kiwenlau.com\">KiwenLau</a>&#x4EE5;&#x53CA;&#x535A;&#x5BA2;&#x5730;&#x5740;&#xFF0C;&#x4F8B;&#x5982;:</p>\n<pre>&#x7248;&#x6743;&#x58F0;&#x660E;:\n&#x8F6C;&#x8F7D;&#x65F6;&#x8BF7;&#x6CE8;&#x660E;&#x4F5C;&#x8005;<b><a href=\"https://kiwenlau.com\" target=\"_blank\" title=\"KiwenLau\">KiwenLau</a></b>&#x4EE5;&#x53CA;&#x672C;&#x6587;&#x5730;&#x5740;&#xFF1A;\n<b><a href=\"https://kiwenlau.com/2016/09/04/what-is-service-discovery/\" target=\"_blank\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF1F;\">https://kiwenlau.com/2016/09/04/what-is-service-discovery/</a></b>\n</pre>\n\n"}],"Post":[{"title":"Fundebug","date":"2016-11-10T16:00:00.000Z","_content":"\nBug\n\n<!-- more -->\n\nBug\n\n:\n\n- \n- \n- F5\n- APP\n- ......\n\n100%\n\nBug\n\n- Null, Undefined;\n- ;\n- (MySQL, MongoDB, Redis);\n- CPU;\n- ......\n\nAPPBug\n\n\n<div style=\"text-align: center;\">\n<a href=\"https://fundebug.com\">\n<img style=\"width:80%;\" src=\"fundebug-is-online/without_fundebug.jpg\" />\n</a>\n</div>\n\n<!--DebugSSH(grep, awk, vim...)-->\n\n[Fundebug](https://fundebug.com/)[](https://fundebug.com/team/create)!\n\n<div style=\"text-align: center;\">\n<a href=\"https://fundebug.com\">\n<img style=\"width:40%;\" src=\"https://fundebug.com/assets/images/logo/fundebug.jpg\" />\n</a>\n</div>\n\nFundebug, Debug with Fun! BugDebugJavaScript:\n\n```\n<script src=\"https://og6593g2z.qnssl.com/fundebug.0.1.0.min.js\" apikey=\"YOUR-API-KEY-HERE\"></script>\n```\n\nFundebug:\n\n- !\n- !\n- !\n- \n\n<div style=\"text-align: center;\">\n<a href=\"https://fundebug.com\">\n<img style=\"width:80%;\" src=\"fundebug-is-online/with_fundebug.jpg\" />\n</a>\n</div>\n\nFundebug\n\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n\n\n\n","source":"_posts/2016/11/fundebug-is-online.md","raw":"---\ntitle: Fundebug\n\ndate: 2016-11-11 00:00:00\n\ntags: [Fundebug]\n\n---\n\nBug\n\n<!-- more -->\n\nBug\n\n:\n\n- \n- \n- F5\n- APP\n- ......\n\n100%\n\nBug\n\n- Null, Undefined;\n- ;\n- (MySQL, MongoDB, Redis);\n- CPU;\n- ......\n\nAPPBug\n\n\n<div style=\"text-align: center;\">\n<a href=\"https://fundebug.com\">\n<img style=\"width:80%;\" src=\"fundebug-is-online/without_fundebug.jpg\" />\n</a>\n</div>\n\n<!--DebugSSH(grep, awk, vim...)-->\n\n[Fundebug](https://fundebug.com/)[](https://fundebug.com/team/create)!\n\n<div style=\"text-align: center;\">\n<a href=\"https://fundebug.com\">\n<img style=\"width:40%;\" src=\"https://fundebug.com/assets/images/logo/fundebug.jpg\" />\n</a>\n</div>\n\nFundebug, Debug with Fun! BugDebugJavaScript:\n\n```\n<script src=\"https://og6593g2z.qnssl.com/fundebug.0.1.0.min.js\" apikey=\"YOUR-API-KEY-HERE\"></script>\n```\n\nFundebug:\n\n- !\n- !\n- !\n- \n\n<div style=\"text-align: center;\">\n<a href=\"https://fundebug.com\">\n<img style=\"width:80%;\" src=\"fundebug-is-online/with_fundebug.jpg\" />\n</a>\n</div>\n\nFundebug\n\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n\n\n\n","slug":"2016/11/fundebug-is-online","published":1,"updated":"2016-12-07T14:35:50.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtgp000171fyknu83y06","content":"<p>&#x5F53;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x4E86;&#x4E00;&#x4E2A;&#x53C8;&#x4E00;&#x4E2A;Bug&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x4E86;&#x4E00;&#x8F6E;&#x53C8;&#x4E00;&#x8F6E;&#x4EE3;&#x7801;&#x5BA1;&#x67E5;&#xFF0C;&#x4E4B;&#x540E;&#x53C8;&#x8DD1;&#x4E86;&#x4E00;&#x904D;&#x53C8;&#x4E00;&#x904D;&#x6D4B;&#x8BD5;&#xFF0C;&#x4EE3;&#x7801;&#x7EC8;&#x4E8E;&#x4E0A;&#x7EBF;&#x4E86;&#xFF01;</p>\n<a id=\"more\"></a>\n<p>&#x7136;&#x800C;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x4E0A;&#x7EBF;&#x7684;&#x4EE3;&#x7801;&#x4E00;&#x5B9A;&#x6CA1;&#x6709;Bug&#x5417;&#xFF1F;&#x4F3C;&#x4E4E;&#x6CA1;&#x6709;&#x4EBA;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x80AF;&#x5B9A;&#x3002;</p>\n<p>&#x7528;&#x6237;&#x4F7F;&#x7528;&#x5E94;&#x7528;&#x7684;&#x753B;&#x98CE;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<ul>\n<li>&#x4E3A;&#x5565;&#x300E;&#x6CE8;&#x518C;&#x300F;&#x6309;&#x952E;&#x70B9;&#x51FB;&#x4E86;&#x534A;&#x5929;&#x6CA1;&#x6709;&#x53CD;&#x5E94;&#xFF1F;&#xFF01;</li>\n<li>&#x4E3A;&#x5565;&#x300E;&#x6FC0;&#x6D3B;&#x90AE;&#x4EF6;&#x300F;&#x4E00;&#x76F4;&#x6728;&#x6709;&#x6536;&#x5230;&#xFF1F;&#xFF01;</li>\n<li>&#x4E3A;&#x5565;&#x72C2;&#x6309;F5&#x65F6;&#x9875;&#x9762;&#x5E76;&#x6CA1;&#x6709;&#x66F4;&#x65B0;&#xFF1F;&#xFF01;</li>\n<li>&#x4E3A;&#x5565;APP&#x83AB;&#x540D;&#x5176;&#x5999;&#x5730;&#x95EA;&#x9000;&#x4E86;&#xFF1F;&#xFF01;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x7528;&#x6237;&#x7684;&#x5185;&#x5FC3;&#x662F;&#x5D29;&#x6E83;&#x7684;&#xFF0C;&#x300E;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x7834;&#x8F6F;&#x4EF6;&#xFF1F;&#x679C;&#x65AD;&#x5F03;&#x4E86;&#x300F;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x601C;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x5982;&#x679C;&#x77E5;&#x9053;&#x6328;&#x9A82;&#x4E86;&#xFF0C;&#x4E5F;&#x8868;&#x793A;&#x5F88;&#x65E0;&#x8BED;&#xFF0C;&#x660E;&#x660E;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x90FD;&#x901A;&#x8FC7;&#x4E86;&#x554A;&#xFF0C;&#x8986;&#x76D6;&#x7387;&#x59A5;&#x59A5;&#x7684;100%&#x6709;&#x6728;&#x6709;&#x3002;&#x3002;&#x3002;</p>\n<p>&#x5176;&#x5B9E;&#x5462;&#xFF0C;&#x7EBF;&#x4E0A;&#x4EE3;&#x7801;&#x51FA;Bug&#x4E5F;&#x662F;&#x5F88;&#x6B63;&#x5E38;&#x7684;&#x4E8B;&#xFF1A;</p>\n<ul>\n<li>&#x4E00;&#x4E9B;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x8FB9;&#x754C;&#x6761;&#x4EF6;&#xFF08;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#xFF0C;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;Null, Undefined&#xFF09;;</li>\n<li>&#x4EE3;&#x7801;&#x7684;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#xFF08;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5404;&#x79CD;&#x624B;&#x673A;&#xFF09;&#x5343;&#x53D8;&#x4E07;&#x5316;;</li>\n<li>&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x4F9D;&#x8D56;&#x7684;&#x7CFB;&#x7EDF;&#x6BD4;&#x5982;&#x6570;&#x636E;&#x5E93;(MySQL, MongoDB, Redis)&#x5076;&#x5C14;&#x62BD;&#x98CE;;</li>\n<li>&#x5CF0;&#x503C;&#x60C5;&#x51B5;&#x4E0B;&#x7F51;&#x7EDC;&#x8D85;&#x65F6;&#xFF0C;CPU&#x548C;&#x5185;&#x5B58;&#x8D85;&#x8D1F;&#x8377;;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<p>&#x8FD8;&#x6709;&#xFF0C;&#x7F51;&#x9875;&#x5E94;&#x7528;&#x662F;&#x8FD0;&#x884C;&#x5728;&#x7528;&#x6237;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;&#xFF0C;APP&#x662F;&#x8FD0;&#x884C;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x7528;&#x51FA;&#x9519;&#x7684;&#x65F6;&#x5019;&#x7A0B;&#x5E8F;&#x5458;&#x662F;&#x4E0D;&#x77E5;&#x9053;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x89E3;&#x51B3;Bug&#xFF0C;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x662F;&#x5F88;&#x4E0D;&#x597D;&#x7684;&#x3002;</p>\n<div style=\"text-align: center;\"><br><a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\"><br><img style=\"width:80%;\" src=\"/2016/11/fundebug-is-online/without_fundebug.jpg\"><br></a><br></div>\n\n<!--DebugSSH(grep, awk, vim...)-->\n<p>&#x90A3;&#x4E48;&#xFF0C;&#x60A8;&#x662F;&#x5426;&#x9700;&#x8981;&#x7A33;&#x5B9A;&#xFF0C;&#x5B89;&#x5168;&#xFF0C;&#x667A;&#x80FD;&#x7684;&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x4E0E;&#x7EA0;&#x9519;&#x8F85;&#x52A9;&#x670D;&#x52A1;&#xFF1F;&#x5982;&#x679C;&#x9700;&#x8981;&#xFF0C;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x5DF2;&#x7ECF;&#x6B63;&#x5F0F;&#x4E0A;&#x7EBF;&#x4E86;&#xFF0C;&#x8D76;&#x7D27;<a href=\"https://fundebug.com/team/create\" target=\"_blank\" rel=\"external\">&#x514D;&#x8D39;&#x6CE8;&#x518C;</a>&#x5427;!</p>\n<div style=\"text-align: center;\"><br><a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\"><br><img style=\"width:40%;\" src=\"https://fundebug.com/assets/images/logo/fundebug.jpg\"><br></a><br></div>\n\n<p>Fundebug, Debug with Fun! &#x6211;&#x4EEC;&#x81F4;&#x529B;&#x4E8E;&#x63D0;&#x4F9B;&#x6700;&#x4E13;&#x4E1A;&#x7684;Bug&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x670D;&#x52A1;&#xFF0C;&#x8BA9;Debug&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x800C;&#x6709;&#x8DA3;&#x3002;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;JavaScript&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x670D;&#x52A1;&#xFF0C;&#x60A8;&#x53EA;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x4E00;&#x884C;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://og6593g2z.qnssl.com/fundebug.0.1.0.min.js&quot;</span> <span class=\"attr\">apikey</span>=<span class=\"string\">&quot;YOUR-API-KEY-HERE&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;Fundebug&#xFF0C;&#x60A8;&#x5C31;&#x53EF;&#x4EE5;:</p>\n<ul>\n<li>&#x90AE;&#x4EF6;&#x63D0;&#x9192;&#xFF0C;&#x66F4;&#x53CA;&#x65F6;&#x5730;&#x53D1;&#x73B0;&#x9519;&#x8BEF;!</li>\n<li>&#x667A;&#x80FD;&#x9762;&#x677F;&#xFF0C;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x7BA1;&#x7406;&#x9519;&#x8BEF;!</li>\n<li>&#x4EFB;&#x52A1;&#x5206;&#x914D;&#xFF0C;&#x66F4;&#x9AD8;&#x6548;&#x5730;&#x56E2;&#x961F;&#x534F;&#x52A9;!</li>\n<li>&#x9519;&#x8BEF;&#x641C;&#x7D22;&#xFF0C;&#x66F4;&#x51C6;&#x786E;&#x5730;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#xFF01;</li>\n</ul>\n<div style=\"text-align: center;\"><br><a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\"><br><img style=\"width:80%;\" src=\"/2016/11/fundebug-is-online/with_fundebug.jpg\"><br></a><br></div>\n\n<p>&#x8FD8;&#x7B49;&#x4EC0;&#x4E48;&#x5462;&#xFF0C;&#x8D76;&#x7D27;&#x4E3A;&#x60A8;&#x7684;&#x56E2;&#x961F;&#x6CE8;&#x518C;Fundebug&#x5E10;&#x53F7;&#x5427;&#xFF01;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\" target=\"_blank\" rel=\"external\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>\n\n\n\n","excerpt":"<p>&#x5F53;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x4E86;&#x4E00;&#x4E2A;&#x53C8;&#x4E00;&#x4E2A;Bug&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x4E86;&#x4E00;&#x8F6E;&#x53C8;&#x4E00;&#x8F6E;&#x4EE3;&#x7801;&#x5BA1;&#x67E5;&#xFF0C;&#x4E4B;&#x540E;&#x53C8;&#x8DD1;&#x4E86;&#x4E00;&#x904D;&#x53C8;&#x4E00;&#x904D;&#x6D4B;&#x8BD5;&#xFF0C;&#x4EE3;&#x7801;&#x7EC8;&#x4E8E;&#x4E0A;&#x7EBF;&#x4E86;&#xFF01;</p>","more":"<p>&#x7136;&#x800C;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x4E0A;&#x7EBF;&#x7684;&#x4EE3;&#x7801;&#x4E00;&#x5B9A;&#x6CA1;&#x6709;Bug&#x5417;&#xFF1F;&#x4F3C;&#x4E4E;&#x6CA1;&#x6709;&#x4EBA;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x80AF;&#x5B9A;&#x3002;</p>\n<p>&#x7528;&#x6237;&#x4F7F;&#x7528;&#x5E94;&#x7528;&#x7684;&#x753B;&#x98CE;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<ul>\n<li>&#x4E3A;&#x5565;&#x300E;&#x6CE8;&#x518C;&#x300F;&#x6309;&#x952E;&#x70B9;&#x51FB;&#x4E86;&#x534A;&#x5929;&#x6CA1;&#x6709;&#x53CD;&#x5E94;&#xFF1F;&#xFF01;</li>\n<li>&#x4E3A;&#x5565;&#x300E;&#x6FC0;&#x6D3B;&#x90AE;&#x4EF6;&#x300F;&#x4E00;&#x76F4;&#x6728;&#x6709;&#x6536;&#x5230;&#xFF1F;&#xFF01;</li>\n<li>&#x4E3A;&#x5565;&#x72C2;&#x6309;F5&#x65F6;&#x9875;&#x9762;&#x5E76;&#x6CA1;&#x6709;&#x66F4;&#x65B0;&#xFF1F;&#xFF01;</li>\n<li>&#x4E3A;&#x5565;APP&#x83AB;&#x540D;&#x5176;&#x5999;&#x5730;&#x95EA;&#x9000;&#x4E86;&#xFF1F;&#xFF01;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x7528;&#x6237;&#x7684;&#x5185;&#x5FC3;&#x662F;&#x5D29;&#x6E83;&#x7684;&#xFF0C;&#x300E;&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x7834;&#x8F6F;&#x4EF6;&#xFF1F;&#x679C;&#x65AD;&#x5F03;&#x4E86;&#x300F;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x601C;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x5982;&#x679C;&#x77E5;&#x9053;&#x6328;&#x9A82;&#x4E86;&#xFF0C;&#x4E5F;&#x8868;&#x793A;&#x5F88;&#x65E0;&#x8BED;&#xFF0C;&#x660E;&#x660E;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x90FD;&#x901A;&#x8FC7;&#x4E86;&#x554A;&#xFF0C;&#x8986;&#x76D6;&#x7387;&#x59A5;&#x59A5;&#x7684;100%&#x6709;&#x6728;&#x6709;&#x3002;&#x3002;&#x3002;</p>\n<p>&#x5176;&#x5B9E;&#x5462;&#xFF0C;&#x7EBF;&#x4E0A;&#x4EE3;&#x7801;&#x51FA;Bug&#x4E5F;&#x662F;&#x5F88;&#x6B63;&#x5E38;&#x7684;&#x4E8B;&#xFF1A;</p>\n<ul>\n<li>&#x4E00;&#x4E9B;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x8FB9;&#x754C;&#x6761;&#x4EF6;&#xFF08;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#xFF0C;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;Null, Undefined&#xFF09;;</li>\n<li>&#x4EE3;&#x7801;&#x7684;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#xFF08;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5404;&#x79CD;&#x624B;&#x673A;&#xFF09;&#x5343;&#x53D8;&#x4E07;&#x5316;;</li>\n<li>&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x4F9D;&#x8D56;&#x7684;&#x7CFB;&#x7EDF;&#x6BD4;&#x5982;&#x6570;&#x636E;&#x5E93;(MySQL, MongoDB, Redis)&#x5076;&#x5C14;&#x62BD;&#x98CE;;</li>\n<li>&#x5CF0;&#x503C;&#x60C5;&#x51B5;&#x4E0B;&#x7F51;&#x7EDC;&#x8D85;&#x65F6;&#xFF0C;CPU&#x548C;&#x5185;&#x5B58;&#x8D85;&#x8D1F;&#x8377;;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<p>&#x8FD8;&#x6709;&#xFF0C;&#x7F51;&#x9875;&#x5E94;&#x7528;&#x662F;&#x8FD0;&#x884C;&#x5728;&#x7528;&#x6237;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;&#xFF0C;APP&#x662F;&#x8FD0;&#x884C;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x7528;&#x51FA;&#x9519;&#x7684;&#x65F6;&#x5019;&#x7A0B;&#x5E8F;&#x5458;&#x662F;&#x4E0D;&#x77E5;&#x9053;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x89E3;&#x51B3;Bug&#xFF0C;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x662F;&#x5F88;&#x4E0D;&#x597D;&#x7684;&#x3002;</p>\n<div style=\"text-align: center;\"><br><a href=\"https://fundebug.com\"><br><img style=\"width:80%;\" src=\"/2016/11/fundebug-is-online/without_fundebug.jpg\"><br></a><br></div>\n\n<!--DebugSSH(grep, awk, vim...)-->\n<p>&#x90A3;&#x4E48;&#xFF0C;&#x60A8;&#x662F;&#x5426;&#x9700;&#x8981;&#x7A33;&#x5B9A;&#xFF0C;&#x5B89;&#x5168;&#xFF0C;&#x667A;&#x80FD;&#x7684;&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x4E0E;&#x7EA0;&#x9519;&#x8F85;&#x52A9;&#x670D;&#x52A1;&#xFF1F;&#x5982;&#x679C;&#x9700;&#x8981;&#xFF0C;<a href=\"https://fundebug.com/\">Fundebug</a>&#x5DF2;&#x7ECF;&#x6B63;&#x5F0F;&#x4E0A;&#x7EBF;&#x4E86;&#xFF0C;&#x8D76;&#x7D27;<a href=\"https://fundebug.com/team/create\">&#x514D;&#x8D39;&#x6CE8;&#x518C;</a>&#x5427;!</p>\n<div style=\"text-align: center;\"><br><a href=\"https://fundebug.com\"><br><img style=\"width:40%;\" src=\"https://fundebug.com/assets/images/logo/fundebug.jpg\"><br></a><br></div>\n\n<p>Fundebug, Debug with Fun! &#x6211;&#x4EEC;&#x81F4;&#x529B;&#x4E8E;&#x63D0;&#x4F9B;&#x6700;&#x4E13;&#x4E1A;&#x7684;Bug&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x670D;&#x52A1;&#xFF0C;&#x8BA9;Debug&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x800C;&#x6709;&#x8DA3;&#x3002;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;JavaScript&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x670D;&#x52A1;&#xFF0C;&#x60A8;&#x53EA;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x4E00;&#x884C;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://og6593g2z.qnssl.com/fundebug.0.1.0.min.js&quot;</span> <span class=\"attr\">apikey</span>=<span class=\"string\">&quot;YOUR-API-KEY-HERE&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;Fundebug&#xFF0C;&#x60A8;&#x5C31;&#x53EF;&#x4EE5;:</p>\n<ul>\n<li>&#x90AE;&#x4EF6;&#x63D0;&#x9192;&#xFF0C;&#x66F4;&#x53CA;&#x65F6;&#x5730;&#x53D1;&#x73B0;&#x9519;&#x8BEF;!</li>\n<li>&#x667A;&#x80FD;&#x9762;&#x677F;&#xFF0C;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x7BA1;&#x7406;&#x9519;&#x8BEF;!</li>\n<li>&#x4EFB;&#x52A1;&#x5206;&#x914D;&#xFF0C;&#x66F4;&#x9AD8;&#x6548;&#x5730;&#x56E2;&#x961F;&#x534F;&#x52A9;!</li>\n<li>&#x9519;&#x8BEF;&#x641C;&#x7D22;&#xFF0C;&#x66F4;&#x51C6;&#x786E;&#x5730;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#xFF01;</li>\n</ul>\n<div style=\"text-align: center;\"><br><a href=\"https://fundebug.com\"><br><img style=\"width:80%;\" src=\"/2016/11/fundebug-is-online/with_fundebug.jpg\"><br></a><br></div>\n\n<p>&#x8FD8;&#x7B49;&#x4EC0;&#x4E48;&#x5462;&#xFF0C;&#x8D76;&#x7D27;&#x4E3A;&#x60A8;&#x7684;&#x56E2;&#x961F;&#x6CE8;&#x518C;Fundebug&#x5E10;&#x53F7;&#x5427;&#xFF01;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>"},{"title":"DockerHadoop","date":"2015-06-08T04:44:40.000Z","_content":"\n**:** : [DockerHadoop](http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/)!!!\n\n**GitHub:**\n- [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2015-06-08](http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/)\n\nDockerHadoppHadoopMasterSlave\n\n3Hadoop\n\n## . \n\nHadoopwordcount\n\nHadoopDockerHadoopHadoop...Hadoop on Docker\n\n|                              |   |                  |\n|:--------------------------------|:--------|:---------------------|\n|sequenceiq/hadoop-docker:latest  |1.491GB  |  |\n|sequenceiq/hadoop-docker:2.7.0   |1.76 GB  |                   |\n|sequenceiq/hadoop-docker:2.6.0   |1.624GB  |                   |\n|sequenceiq/ambari:latest         |1.782GB   |      |\n|sequenceiq/ambari:2.0.0          |4.804GB   |                  |\n|sequenceiq/ambari:latest:1.70    |4.761GB   |                  |\n|alvinhenrick/hadoop-mutinode     |4.331GB   | bug|\n\nalvinhenrick/hadoop-mutinodealvinhenrick/hadoop-mutinodeGithub[GitHub](https://github.com/alvinhenrick/hadoop-mutinode)[](http://alvinhenrick.com/2014/07/16/hadoop-yarn-multinode-cluster-with-docker/)\n\nalvinhenrick/hadoop-mutinodekiwenlau/hadoop-cluster-docker\n\n|\t                    |\t      |   |  |\n| :-------------------------| :---------- | :------- | :------- |\n|alvinhenrick/serf          | 258.213s    | 21\t     | 239.4MB |\n|alvinhenrick/hadoop-base\t| 2236.055s   | 58\t     | 4.328GB |\n|alvinhenrick/hadoop-dn\t    | 51.959s     | 74\t     | 4.331GB |\n|alvinhenrick/hadoop-nn-dn  | 49.548s     |  84      | 4.331GB |\n\n|\t                                 |\t       |    |  |\n| :-------------------------| :---------- | :------- | :------- |\n| kiwenlau/serf-dnsmasq          | 509.46s        |  8\t        | 206.6 MB |\n|kiwenlau/hadoop-base\t         | 400.29s\t        |  7\t        | 775.4 MB |\n|kiwenlau/hadoop-master         | 5.41s            |  9\t        | 775.4 MB |\n|kiwenlau/hadoop-slave\t         | 2.41s\t        |  8 \t        | 775.4 MB |\n\n\n- \n- \n- \n\n#### **Hadoop**\n\nalvinhenrick/hadoop-mutinodeHadoophadoop-nn-dn,shell1hadoop-master3Hadoophadoop\n\nhadoop, wordcountshell:)\n\n#### ****\n\n- ubuntu 14.04  ubuntu 12.04\n- : 3.13.0-32-generic\n- Docker1.5.0 1.6.2\n\n#### **:(**\n\n## . \n\n#### **4**\n\n- serf-dnsmasq\n- hadoop-base\n- hadoop-master\n- hadoop-slave\n\n#### **serf-dnsmasq**\n\n- ubuntu:15.04 (...)\n- serf: serfhadoop\n- dnsmasq: dnsmasqdnshadoop\n\nmasterIPslaveserfcontainerslaveserf agentmastermaster IPmasterslave(Everyone will know Everyone). serfdnsmasq,dnsmasq. dnsmasqHadoopserfdnsHadoopSequenceIQHadoopDockerPPT[Docker-based Hadoop Provisioning](http://www.slideshare.net/JanosMatyas/docker-based-hadoop-provisioning)\n\n#### **hadoop-base**\n\n- serf-dnsmasq\n- JDK(openjdk)\n- openssh-server, ssh\n- vim:)\n- Hadoop 2.3.0: hadoop 2.5.2 2.6.0 2.7.0 2.3.0\n\nHadoop[[Hadoop 2.30 Ubuntu 14.04 ](http://www.cnblogs.com/kiwenlau/p/4227204.html)](http://www.cnblogs.com/kiwenlau/p/4227204.html)\n\nhadoop-base, hadoop-2.3.0hadoop-cluster-docker/hadoop-base/files64hadoop-2.3.0[hadoop-2.3.0](http://pan.baidu.com/s/1sjFRaFz)\n\n64hadoop 2.5.2, 2.6.0, 2.7.0, \n\n- [hadoop-2.3.0](http://pan.baidu.com/s/1sjFRaFz)\n- [hadoop-2.5.2](http://pan.baidu.com/s/1jGw24aa)\n- [hadoop-2.6.0](http://pan.baidu.com/s/1eQgvF2M)\n- [hadoop-2.7.0]( http://pan.baidu.com/s/1c0HD0Nu)\n\n#### **hadoop-master**\n\n- hadoop-base\n- hadoopmaster\n- namenode\n\nslavesslavesIPHadoopslavesHadoopslaveshadoop-masterresize-cluster.shHadoophadoop-master1\n\n#### **hadoop-slave**\n\n- hadoop-base\n- hadoopslave\n\n#### ****\n\nsudo docker images\n\n|REPOSITORY       |   TAG    |  IMAGE ID       | CREATED     |   VIRTUAL SIZE |\n| ------------- | ------- | ---------- | ---------- | ------- |\n|index.alauda.cn/kiwenlau/hadoop-slave   | 0.1.0|    d63869855c03 |   17 hours ago  |  777.4 MB|\n|index.alauda.cn/kiwenlau/hadoop-master|    0.1.0   | 7c9d32ede450  |  17 hours ago   | 777.4 MB|\n|index.alauda.cn/kiwenlau/hadoop-base  |    0.1.0   | 5571bd5de58e    |17 hours ago   | 777.4 MB|\n|index.alauda.cn/kiwenlau/serf-dnsmasq  |  0.1.0    |09ed89c24ee8   | 17 hours ago  |  206.7 MB |\n|ubuntu     |                               15.04   | bd94ae587483  |  3 weeks ago    |131.3 MB |\n\n\n\n- serf-dnsmasqubuntu:15.0475.4MB\n- hadoop-baseserf-dnsmasq570.7MB\n- hadoop-masterhadoop-slavehadoop-base\n\ndocker history index.alauda.cn/kiwenlau/hadoop-base:0.1.0\n\n|IMAGE      |    CREATED        |    CREATED BY         |                             SIZE\n |  -----  | ---------------  | ---------------  |  -----------  | \n|2039b9b81146 |   44 hours ago   |       /bin/sh -c #(nop) ADD   multi:a93c971a49514e787  |  158.5 MB | \n | cdb620312f30    |  44 hours ago   |       /bin/sh -c apt-get install -y openjdk-7-jdk    |  324.6 MB  | \n | da7d10c790c1   |   44 hours ago      |    /bin/sh -c apt-get install -y openssh-server   |   87.58 MB  | \n |  c65cb568defc    |  44 hours ago     |     /bin/sh -c curl -Lso serf.zip https://dl.bint  |  14.46 MB  | \n | 3e22b3d72e33     | 44 hours ago       |   /bin/sh -c apt-get update && apt-get install     |  60.89 MB   | \n |  b68f8c8d2140    |  3 weeks ago     |     /bin/sh -c #(nop) ADD file:d90f7467c470bfa9a3  |   131.3 MB  | \n\n\n- ubuntu:15.04131.3MB\n- openjdk324.6MB\n- hadoop158.5MB\n- ubuntu,openjdkhadoop:614.4MB\n\n#### **hadoop**\n\nDocker\n\n<img src=\"150608-hadoop-cluster-docker/image-architecture.png\" width = \"500\"/>\n\n## . 3Hadoop\n\n#### 1. ****\n\n```sh\nsudo docker pull index.alauda.cn/kiwenlau/hadoop-master:0.1.0\nsudo docker pull index.alauda.cn/kiwenlau/hadoop-slave:0.1.0\nsudo docker pull index.alauda.cn/kiwenlau/hadoop-base:0.1.0\nsudo docker pull index.alauda.cn/kiwenlau/serf-dnsmasq:0.1.0\n```\n\n- 3~5OK~\n\n**\n\n```sh\nsudo docker images\n```\n\n**\n\n|REPOSITORY    |    TAG  |    IMAGE ID      |  CREATED  |      VIRTUAL SIZE |\n |  ----------  |  -----------  |  ---------  |   --------  |  \n| index.alauda.cn/kiwenlau/hadoop-slave   | 0.1.0    |d63869855c03  |  17 hours ago   | 777.4 MB|\n|index.alauda.cn/kiwenlau/hadoop-master   |   0.1.0 |     7c9d32ede450   |   17 hours ago  |    777.4 MB | \n | index.alauda.cn/kiwenlau/hadoop-base |       0.1.0     | 5571bd5de58e   |   17 hours ago  |    777.4 MB | \n |  index.alauda.cn/kiwenlau/serf-dnsmasq   |   0.1.0   |   09ed89c24ee8     | 17 hours ago     |  206.7 MB | \n\n- hadoop-baseserf-dnsmasqhadoop-slavehadoop-masterhadoop-base\n- 4777.4MB:)\n\n#### **2. tag**\n\n```sh\nsudo docker tag d63869855c03 kiwenlau/hadoop-slave:0.1.0\nsudo docker tag 7c9d32ede450 kiwenlau/hadoop-master:0.1.0\nsudo docker tag 5571bd5de58e kiwenlau/hadoop-base:0.1.0\nsudo docker tag 09ed89c24ee8 kiwenlau/serf-dnsmasq:0.1.0\n```\n\n*tag*\n\n```sh\nsudo docker images\n```\n\n**\n\n| REPOSITORY   |   TAG   |    IMAGE ID    |    CREATED    |      VIRTUAL SIZE  | \n |  ----------  |  -----  |  ---------  |  ----------  |  -----------  | \n| index.alauda.cn/kiwenlau/hadoop-slave  |    0.1.0   |   d63869855c03    |  17 hours ago   |   777.4 MB\n | kiwenlau/hadoop-slave    |                  0.1.0   |   d63869855c03   |   17 hours ago  |    777.4 MB | \n | index.alauda.cn/kiwenlau/hadoop-master  |  0.1.0 |     7c9d32ede450   |   17 hours ago |     777.4 MB | \n | kiwenlau/hadoop-master  |                  0.1.0   |   7c9d32ede450   |   17 hours ago |     777.4 MB | \n | kiwenlau/hadoop-base   |                   0.1.0  |    5571bd5de58e  |    17 hours ago   |   777.4 MB | \n | index.alauda.cn/kiwenlau/hadoop-base  |    0.1.0   |   5571bd5de58e   |   17 hours ago |     777.4 MB | \n | kiwenlau/serf-dnsmasq          |            0.1.0    |  09ed89c24ee8  |    17 hours ago    |  206.7 MB | \n | index.alauda.cn/kiwenlau/serf-dnsmasq  |    0.1.0   |   09ed89c24ee8     | 17 hours ago   |   206.7 MB | \n\n- Dockerhub, Dokerfileshellalauadasorry for this....tag\n- DockerHubtag...Alauda~\n\n#### **3.**\n\n```sh\ngit clone https://github.com/kiwenlau/hadoop-cluster-docker\n```\n\n- GithubXX, git\n\n```sh\ngit clone http://git.oschina.net/kiwenlau/hadoop-cluster-docker\n```\n\n#### **4. **\n\n```sh\ncd hadoop-cluster-docker\n./start-container.sh\n\n```\n\n**\n\n```bash\nstart master container...\nstart slave1 container...\nstart slave2 container...\nroot@master:~#\n```\n\n- 31master, 2slave\n- masterroot/root\n\n*masterroot*\n\n```sh\nls\n```\n\n**\n\n```plain\nhdfs  run-wordcount.sh\tserf_log  start-hadoop.sh  start-ssh-serf.sh\n```\n\n- start-hadoop.shhadoopshell\n- run-wordcount.shwordcountshell\n\n#### **5.(master)**\n\n*hadoop*\n\n```sh\nserf members\n```\n\n**\n\n```bash\nmaster.kiwenlau.com  172.17.0.65:7946  alive\nslave1.kiwenlau.com  172.17.0.66:7946  alive\nslave2.kiwenlau.com  172.17.0.67:7946  alive\n```\n\n- serf membersserf agent\n\n*ssh*\n\n```sh\nssh slave2.kiwenlau.com\n```\n\n**\n\n```bash\nWarning: Permanently added 'slave2.kiwenlau.com,172.17.0.67' (ECDSA) to the list of known hosts.\nWelcome to Ubuntu 15.04 (GNU/Linux 3.13.0-53-generic x86_64)\n* Documentation:  https://help.ubuntu.com/\nThe programs included with the Ubuntu system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\napplicable law.\nroot@slave2:~#\n```\n\n*slave2*\n\n```sh\nexit\n```\n\n**\n\n```bash\nlogout\nConnection to slave2.kiwenlau.com closed.\n```\n\n- sshdnsmasqdns\n- Hadoop\n\n#### **6. hadoop**\n\n```sh\n./start-hadoop.sh\n```\n\n- sshslave2master!!\n- ....\n- hadoop....\n\n#### **7. wordcount**\n\n```sh\n./run-wordcount.sh\n```\n\n**\n```bash\ninput file1.txt:\nHello Hadoop\ninput file2.txt:\nHello Docker\nwordcount output:\nDocker\t1\nHadoop\t1\nHello\t2\n```\n\n- wordcount....\n\n## . NHadoop\n\n#### **1. **\n\n- 1~3tag\n- serf-dnsmasq, hadoop-basehadoop-masterhadoop-base\n\n#### **2. hadoop-master**\n\n```sh\n./resize-cluster.sh 5\n```\n\n- 1\n- resize-cluster.sh1, 2, 3, 4, 5, 6...\n\n#### **3. **\n\n```sh\n./start-container.sh 5\n```\n\n- resize-cluster.sh1, 2, 3, 4, 5, 6...\n- :)\n- Hadoop..\n- Hadoop..\n\n#### **4. **\n\n- 5~7Hadoopwordcount\n- Hadoop, serfdnsmasqDNS\n- ....\n\n","source":"_posts/2015/06/08/150608-hadoop-cluster-docker.md","raw":"title: DockerHadoop\n\ndate: 2015-06-08 12:44:40\n\ntags: [Hadoop, Docker]\n\n---\n\n**:** : [DockerHadoop](http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/)!!!\n\n**GitHub:**\n- [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2015-06-08](http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/)\n\nDockerHadoppHadoopMasterSlave\n\n3Hadoop\n\n## . \n\nHadoopwordcount\n\nHadoopDockerHadoopHadoop...Hadoop on Docker\n\n|                              |   |                  |\n|:--------------------------------|:--------|:---------------------|\n|sequenceiq/hadoop-docker:latest  |1.491GB  |  |\n|sequenceiq/hadoop-docker:2.7.0   |1.76 GB  |                   |\n|sequenceiq/hadoop-docker:2.6.0   |1.624GB  |                   |\n|sequenceiq/ambari:latest         |1.782GB   |      |\n|sequenceiq/ambari:2.0.0          |4.804GB   |                  |\n|sequenceiq/ambari:latest:1.70    |4.761GB   |                  |\n|alvinhenrick/hadoop-mutinode     |4.331GB   | bug|\n\nalvinhenrick/hadoop-mutinodealvinhenrick/hadoop-mutinodeGithub[GitHub](https://github.com/alvinhenrick/hadoop-mutinode)[](http://alvinhenrick.com/2014/07/16/hadoop-yarn-multinode-cluster-with-docker/)\n\nalvinhenrick/hadoop-mutinodekiwenlau/hadoop-cluster-docker\n\n|\t                    |\t      |   |  |\n| :-------------------------| :---------- | :------- | :------- |\n|alvinhenrick/serf          | 258.213s    | 21\t     | 239.4MB |\n|alvinhenrick/hadoop-base\t| 2236.055s   | 58\t     | 4.328GB |\n|alvinhenrick/hadoop-dn\t    | 51.959s     | 74\t     | 4.331GB |\n|alvinhenrick/hadoop-nn-dn  | 49.548s     |  84      | 4.331GB |\n\n|\t                                 |\t       |    |  |\n| :-------------------------| :---------- | :------- | :------- |\n| kiwenlau/serf-dnsmasq          | 509.46s        |  8\t        | 206.6 MB |\n|kiwenlau/hadoop-base\t         | 400.29s\t        |  7\t        | 775.4 MB |\n|kiwenlau/hadoop-master         | 5.41s            |  9\t        | 775.4 MB |\n|kiwenlau/hadoop-slave\t         | 2.41s\t        |  8 \t        | 775.4 MB |\n\n\n- \n- \n- \n\n#### **Hadoop**\n\nalvinhenrick/hadoop-mutinodeHadoophadoop-nn-dn,shell1hadoop-master3Hadoophadoop\n\nhadoop, wordcountshell:)\n\n#### ****\n\n- ubuntu 14.04  ubuntu 12.04\n- : 3.13.0-32-generic\n- Docker1.5.0 1.6.2\n\n#### **:(**\n\n## . \n\n#### **4**\n\n- serf-dnsmasq\n- hadoop-base\n- hadoop-master\n- hadoop-slave\n\n#### **serf-dnsmasq**\n\n- ubuntu:15.04 (...)\n- serf: serfhadoop\n- dnsmasq: dnsmasqdnshadoop\n\nmasterIPslaveserfcontainerslaveserf agentmastermaster IPmasterslave(Everyone will know Everyone). serfdnsmasq,dnsmasq. dnsmasqHadoopserfdnsHadoopSequenceIQHadoopDockerPPT[Docker-based Hadoop Provisioning](http://www.slideshare.net/JanosMatyas/docker-based-hadoop-provisioning)\n\n#### **hadoop-base**\n\n- serf-dnsmasq\n- JDK(openjdk)\n- openssh-server, ssh\n- vim:)\n- Hadoop 2.3.0: hadoop 2.5.2 2.6.0 2.7.0 2.3.0\n\nHadoop[[Hadoop 2.30 Ubuntu 14.04 ](http://www.cnblogs.com/kiwenlau/p/4227204.html)](http://www.cnblogs.com/kiwenlau/p/4227204.html)\n\nhadoop-base, hadoop-2.3.0hadoop-cluster-docker/hadoop-base/files64hadoop-2.3.0[hadoop-2.3.0](http://pan.baidu.com/s/1sjFRaFz)\n\n64hadoop 2.5.2, 2.6.0, 2.7.0, \n\n- [hadoop-2.3.0](http://pan.baidu.com/s/1sjFRaFz)\n- [hadoop-2.5.2](http://pan.baidu.com/s/1jGw24aa)\n- [hadoop-2.6.0](http://pan.baidu.com/s/1eQgvF2M)\n- [hadoop-2.7.0]( http://pan.baidu.com/s/1c0HD0Nu)\n\n#### **hadoop-master**\n\n- hadoop-base\n- hadoopmaster\n- namenode\n\nslavesslavesIPHadoopslavesHadoopslaveshadoop-masterresize-cluster.shHadoophadoop-master1\n\n#### **hadoop-slave**\n\n- hadoop-base\n- hadoopslave\n\n#### ****\n\nsudo docker images\n\n|REPOSITORY       |   TAG    |  IMAGE ID       | CREATED     |   VIRTUAL SIZE |\n| ------------- | ------- | ---------- | ---------- | ------- |\n|index.alauda.cn/kiwenlau/hadoop-slave   | 0.1.0|    d63869855c03 |   17 hours ago  |  777.4 MB|\n|index.alauda.cn/kiwenlau/hadoop-master|    0.1.0   | 7c9d32ede450  |  17 hours ago   | 777.4 MB|\n|index.alauda.cn/kiwenlau/hadoop-base  |    0.1.0   | 5571bd5de58e    |17 hours ago   | 777.4 MB|\n|index.alauda.cn/kiwenlau/serf-dnsmasq  |  0.1.0    |09ed89c24ee8   | 17 hours ago  |  206.7 MB |\n|ubuntu     |                               15.04   | bd94ae587483  |  3 weeks ago    |131.3 MB |\n\n\n\n- serf-dnsmasqubuntu:15.0475.4MB\n- hadoop-baseserf-dnsmasq570.7MB\n- hadoop-masterhadoop-slavehadoop-base\n\ndocker history index.alauda.cn/kiwenlau/hadoop-base:0.1.0\n\n|IMAGE      |    CREATED        |    CREATED BY         |                             SIZE\n |  -----  | ---------------  | ---------------  |  -----------  | \n|2039b9b81146 |   44 hours ago   |       /bin/sh -c #(nop) ADD   multi:a93c971a49514e787  |  158.5 MB | \n | cdb620312f30    |  44 hours ago   |       /bin/sh -c apt-get install -y openjdk-7-jdk    |  324.6 MB  | \n | da7d10c790c1   |   44 hours ago      |    /bin/sh -c apt-get install -y openssh-server   |   87.58 MB  | \n |  c65cb568defc    |  44 hours ago     |     /bin/sh -c curl -Lso serf.zip https://dl.bint  |  14.46 MB  | \n | 3e22b3d72e33     | 44 hours ago       |   /bin/sh -c apt-get update && apt-get install     |  60.89 MB   | \n |  b68f8c8d2140    |  3 weeks ago     |     /bin/sh -c #(nop) ADD file:d90f7467c470bfa9a3  |   131.3 MB  | \n\n\n- ubuntu:15.04131.3MB\n- openjdk324.6MB\n- hadoop158.5MB\n- ubuntu,openjdkhadoop:614.4MB\n\n#### **hadoop**\n\nDocker\n\n<img src=\"150608-hadoop-cluster-docker/image-architecture.png\" width = \"500\"/>\n\n## . 3Hadoop\n\n#### 1. ****\n\n```sh\nsudo docker pull index.alauda.cn/kiwenlau/hadoop-master:0.1.0\nsudo docker pull index.alauda.cn/kiwenlau/hadoop-slave:0.1.0\nsudo docker pull index.alauda.cn/kiwenlau/hadoop-base:0.1.0\nsudo docker pull index.alauda.cn/kiwenlau/serf-dnsmasq:0.1.0\n```\n\n- 3~5OK~\n\n**\n\n```sh\nsudo docker images\n```\n\n**\n\n|REPOSITORY    |    TAG  |    IMAGE ID      |  CREATED  |      VIRTUAL SIZE |\n |  ----------  |  -----------  |  ---------  |   --------  |  \n| index.alauda.cn/kiwenlau/hadoop-slave   | 0.1.0    |d63869855c03  |  17 hours ago   | 777.4 MB|\n|index.alauda.cn/kiwenlau/hadoop-master   |   0.1.0 |     7c9d32ede450   |   17 hours ago  |    777.4 MB | \n | index.alauda.cn/kiwenlau/hadoop-base |       0.1.0     | 5571bd5de58e   |   17 hours ago  |    777.4 MB | \n |  index.alauda.cn/kiwenlau/serf-dnsmasq   |   0.1.0   |   09ed89c24ee8     | 17 hours ago     |  206.7 MB | \n\n- hadoop-baseserf-dnsmasqhadoop-slavehadoop-masterhadoop-base\n- 4777.4MB:)\n\n#### **2. tag**\n\n```sh\nsudo docker tag d63869855c03 kiwenlau/hadoop-slave:0.1.0\nsudo docker tag 7c9d32ede450 kiwenlau/hadoop-master:0.1.0\nsudo docker tag 5571bd5de58e kiwenlau/hadoop-base:0.1.0\nsudo docker tag 09ed89c24ee8 kiwenlau/serf-dnsmasq:0.1.0\n```\n\n*tag*\n\n```sh\nsudo docker images\n```\n\n**\n\n| REPOSITORY   |   TAG   |    IMAGE ID    |    CREATED    |      VIRTUAL SIZE  | \n |  ----------  |  -----  |  ---------  |  ----------  |  -----------  | \n| index.alauda.cn/kiwenlau/hadoop-slave  |    0.1.0   |   d63869855c03    |  17 hours ago   |   777.4 MB\n | kiwenlau/hadoop-slave    |                  0.1.0   |   d63869855c03   |   17 hours ago  |    777.4 MB | \n | index.alauda.cn/kiwenlau/hadoop-master  |  0.1.0 |     7c9d32ede450   |   17 hours ago |     777.4 MB | \n | kiwenlau/hadoop-master  |                  0.1.0   |   7c9d32ede450   |   17 hours ago |     777.4 MB | \n | kiwenlau/hadoop-base   |                   0.1.0  |    5571bd5de58e  |    17 hours ago   |   777.4 MB | \n | index.alauda.cn/kiwenlau/hadoop-base  |    0.1.0   |   5571bd5de58e   |   17 hours ago |     777.4 MB | \n | kiwenlau/serf-dnsmasq          |            0.1.0    |  09ed89c24ee8  |    17 hours ago    |  206.7 MB | \n | index.alauda.cn/kiwenlau/serf-dnsmasq  |    0.1.0   |   09ed89c24ee8     | 17 hours ago   |   206.7 MB | \n\n- Dockerhub, Dokerfileshellalauadasorry for this....tag\n- DockerHubtag...Alauda~\n\n#### **3.**\n\n```sh\ngit clone https://github.com/kiwenlau/hadoop-cluster-docker\n```\n\n- GithubXX, git\n\n```sh\ngit clone http://git.oschina.net/kiwenlau/hadoop-cluster-docker\n```\n\n#### **4. **\n\n```sh\ncd hadoop-cluster-docker\n./start-container.sh\n\n```\n\n**\n\n```bash\nstart master container...\nstart slave1 container...\nstart slave2 container...\nroot@master:~#\n```\n\n- 31master, 2slave\n- masterroot/root\n\n*masterroot*\n\n```sh\nls\n```\n\n**\n\n```plain\nhdfs  run-wordcount.sh\tserf_log  start-hadoop.sh  start-ssh-serf.sh\n```\n\n- start-hadoop.shhadoopshell\n- run-wordcount.shwordcountshell\n\n#### **5.(master)**\n\n*hadoop*\n\n```sh\nserf members\n```\n\n**\n\n```bash\nmaster.kiwenlau.com  172.17.0.65:7946  alive\nslave1.kiwenlau.com  172.17.0.66:7946  alive\nslave2.kiwenlau.com  172.17.0.67:7946  alive\n```\n\n- serf membersserf agent\n\n*ssh*\n\n```sh\nssh slave2.kiwenlau.com\n```\n\n**\n\n```bash\nWarning: Permanently added 'slave2.kiwenlau.com,172.17.0.67' (ECDSA) to the list of known hosts.\nWelcome to Ubuntu 15.04 (GNU/Linux 3.13.0-53-generic x86_64)\n* Documentation:  https://help.ubuntu.com/\nThe programs included with the Ubuntu system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\napplicable law.\nroot@slave2:~#\n```\n\n*slave2*\n\n```sh\nexit\n```\n\n**\n\n```bash\nlogout\nConnection to slave2.kiwenlau.com closed.\n```\n\n- sshdnsmasqdns\n- Hadoop\n\n#### **6. hadoop**\n\n```sh\n./start-hadoop.sh\n```\n\n- sshslave2master!!\n- ....\n- hadoop....\n\n#### **7. wordcount**\n\n```sh\n./run-wordcount.sh\n```\n\n**\n```bash\ninput file1.txt:\nHello Hadoop\ninput file2.txt:\nHello Docker\nwordcount output:\nDocker\t1\nHadoop\t1\nHello\t2\n```\n\n- wordcount....\n\n## . NHadoop\n\n#### **1. **\n\n- 1~3tag\n- serf-dnsmasq, hadoop-basehadoop-masterhadoop-base\n\n#### **2. hadoop-master**\n\n```sh\n./resize-cluster.sh 5\n```\n\n- 1\n- resize-cluster.sh1, 2, 3, 4, 5, 6...\n\n#### **3. **\n\n```sh\n./start-container.sh 5\n```\n\n- resize-cluster.sh1, 2, 3, 4, 5, 6...\n- :)\n- Hadoop..\n- Hadoop..\n\n#### **4. **\n\n- 5~7Hadoopwordcount\n- Hadoop, serfdnsmasqDNS\n- ....\n\n","slug":"2015/06/08/150608-hadoop-cluster-docker","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtk1000471fyt439tvbh","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x5DF2;&#x66F4;&#x65B0;&#xFF0C;&#x8BF7;&#x67E5;&#x770B;: <a href=\"http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;Hadoop&#x96C6;&#x7FA4;&#x4E4B;&#x5347;&#x7EA7;&#x7248;</a>!!!</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau\" target=\"_blank\" rel=\"external\">kiwenlau/hadoop-cluster-docker</a></li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/\">2015-06-08</a></li>\n</ul>\n<p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x57FA;&#x4E8E;Docker&#x5728;&#x5355;&#x673A;&#x4E0A;&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Hadopp&#x96C6;&#x7FA4;&#x65B9;&#x6CD5;&#xFF0C;Hadoop&#x7684;Master&#x548C;Slave&#x5206;&#x522B;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>\n<p>&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x90E8;&#x5206;&#xFF0C;&#x5FEB;&#x901F;&#x5728;&#x672C;&#x673A;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;3&#x4E2A;&#x8282;&#x70B9;&#x7684;Hadoop&#x96C6;&#x7FA4;</p>\n<h2 id=\"&#x4E00;-&#x9879;&#x76EE;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-&#x9879;&#x76EE;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. &#x9879;&#x76EE;&#x7B80;&#x4ECB;\"></a>&#x4E00;. &#x9879;&#x76EE;&#x7B80;&#x4ECB;</h2><p>&#x76F4;&#x63A5;&#x7528;&#x673A;&#x5668;&#x642D;&#x5EFA;Hadoop&#x96C6;&#x7FA4;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x75DB;&#x82E6;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5C24;&#x5176;&#x5BF9;&#x521D;&#x5B66;&#x8005;&#x6765;&#x8BF4;&#x3002;&#x4ED6;&#x4EEC;&#x8FD8;&#x6CA1;&#x5F00;&#x59CB;&#x8DD1;wordcount&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x88AB;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6298;&#x817E;&#x7684;&#x4F53;&#x65E0;&#x5B8C;&#x80A4;&#x4E86;&#x3002;</p>\n<p>&#x6211;&#x7684;&#x76EE;&#x6807;&#x662F;&#x5C06;Hadoop&#x96C6;&#x7FA4;&#x8FD0;&#x884C;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x4F7F;Hadoop&#x5F00;&#x53D1;&#x8005;&#x80FD;&#x591F;&#x5FEB;&#x901F;&#x4FBF;&#x6377;&#x5730;&#x5728;&#x672C;&#x673A;&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;&#x7684;Hadoop&#x96C6;&#x7FA4;&#x3002;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x60F3;&#x6CD5;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x4E0D;&#x5C11;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x662F;&#x90FD;&#x4E0D;&#x662F;&#x5F88;&#x7406;&#x60F3;&#xFF0C;&#x4ED6;&#x4EEC;&#x6216;&#x8005;&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x592A;&#x6162;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x4E86;&#x7B2C;&#x4E09;&#x65B9;&#x5DE5;&#x5177;&#x4F7F;&#x5F97;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x8FC7;&#x4E8E;&#x590D;&#x6742;&#x2026;&#x4E0B;&#x8868;&#x4E3A;&#x4E00;&#x4E9B;&#x5DF2;&#x77E5;&#x7684;Hadoop on Docker&#x9879;&#x76EE;&#x4EE5;&#x53CA;&#x5176;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x9879;&#x76EE;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5927;&#x5C0F;</th>\n<th style=\"text-align:left\">&#x95EE;&#x9898;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">sequenceiq/hadoop-docker:latest</td>\n<td style=\"text-align:left\">1.491GB</td>\n<td style=\"text-align:left\">&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x53EA;&#x652F;&#x6301;&#x5355;&#x4E2A;&#x8282;&#x70B9;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/hadoop-docker:2.7.0</td>\n<td style=\"text-align:left\">1.76 GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/hadoop-docker:2.6.0</td>\n<td style=\"text-align:left\">1.624GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/ambari:latest</td>\n<td style=\"text-align:left\">1.782GB</td>\n<td style=\"text-align:left\">&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x4F7F;&#x7528;&#x592A;&#x6162;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/ambari:2.0.0</td>\n<td style=\"text-align:left\">4.804GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/ambari:latest:1.70</td>\n<td style=\"text-align:left\">4.761GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-mutinode</td>\n<td style=\"text-align:left\">4.331GB</td>\n<td style=\"text-align:left\">&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x6784;&#x5EFA;&#x592A;&#x6162;&#xFF0C;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x9EBB;&#x70E6;&#xFF0C;&#x6709;bug</td>\n</tr>\n</tbody>\n</table>\n<p>&#x6211;&#x7684;&#x9879;&#x76EE;&#x53C2;&#x8003;&#x4E86;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x8FC7;&#x6211;&#x505A;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x4F18;&#x5316;&#x548C;&#x91CD;&#x6784;&#x3002;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#x7684;Github&#x4E3B;&#x9875;&#x4EE5;&#x53CA;&#x4F5C;&#x8005;&#x6240;&#x5199;&#x7684;&#x535A;&#x5BA2;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/alvinhenrick/hadoop-mutinode\" target=\"_blank\" rel=\"external\">GitHub</a>&#xFF0C;<a href=\"http://alvinhenrick.com/2014/07/16/hadoop-yarn-multinode-cluster-with-docker/\" target=\"_blank\" rel=\"external\">&#x535A;&#x5BA2;</a></p>\n<p>&#x4E0B;&#x9762;&#x4E24;&#x4E2A;&#x8868;&#x662F;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#x4E0E;&#x6211;&#x7684;kiwenlau/hadoop-cluster-docker&#x9879;&#x76EE;&#x7684;&#x53C2;&#x6570;&#x5BF9;&#x6BD4;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x540D;&#x79F0;</th>\n<th style=\"text-align:left\">&#x6784;&#x5EFA;&#x65F6;&#x95F4;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5C42;&#x6570;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5927;&#x5C0F;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/serf</td>\n<td style=\"text-align:left\">258.213s</td>\n<td style=\"text-align:left\">21</td>\n<td style=\"text-align:left\">239.4MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-base</td>\n<td style=\"text-align:left\">2236.055s</td>\n<td style=\"text-align:left\">58</td>\n<td style=\"text-align:left\">4.328GB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-dn</td>\n<td style=\"text-align:left\">51.959s</td>\n<td style=\"text-align:left\">74</td>\n<td style=\"text-align:left\">4.331GB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-nn-dn</td>\n<td style=\"text-align:left\">49.548s</td>\n<td style=\"text-align:left\">84</td>\n<td style=\"text-align:left\">4.331GB</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x540D;&#x79F0;</th>\n<th style=\"text-align:left\">&#x6784;&#x5EFA;&#x65F6;&#x95F4;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5C42;&#x6570;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5927;&#x5C0F;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">kiwenlau/serf-dnsmasq</td>\n<td style=\"text-align:left\">509.46s</td>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">206.6 MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kiwenlau/hadoop-base</td>\n<td style=\"text-align:left\">400.29s</td>\n<td style=\"text-align:left\">7</td>\n<td style=\"text-align:left\">775.4 MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kiwenlau/hadoop-master</td>\n<td style=\"text-align:left\">5.41s</td>\n<td style=\"text-align:left\">9</td>\n<td style=\"text-align:left\">775.4 MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kiwenlau/hadoop-slave</td>\n<td style=\"text-align:left\">2.41s</td>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">775.4 MB</td>\n</tr>\n</tbody>\n</table>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4E3B;&#x8981;&#x4F18;&#x5316;&#x4E86;&#x8FD9;&#x6837;&#x51E0;&#x70B9;</p>\n<ul>\n<li>&#x66F4;&#x5C0F;&#x7684;&#x955C;&#x50CF;&#x5927;&#x5C0F;</li>\n<li>&#x66F4;&#x5FEB;&#x7684;&#x6784;&#x9020;&#x65F6;&#x95F4;</li>\n<li>&#x66F4;&#x5C11;&#x7684;&#x955C;&#x50CF;&#x5C42;&#x6570;</li>\n</ul>\n<h4 id=\"&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;\"><a href=\"#&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;\" class=\"headerlink\" title=\"&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;\"></a><strong>&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;</strong></h4><p>&#x53E6;&#x5916;&#xFF0C;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x65F6;&#x9700;&#x8981;&#x624B;&#x52A8;&#x4FEE;&#x6539;Hadoop&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-nn-dn&#x955C;&#x50CF;,&#x7136;&#x540E;&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x811A;&#x672C;&#xFF0C;&#x624D;&#x80FD;&#x5B9E;&#x73B0;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x7684;&#x529F;&#x80FD;&#x3002;&#x800C;&#x6211;&#x901A;&#x8FC7;shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x8BDD;&#xFF0C;&#x4E0D;&#x5230;1&#x5206;&#x949F;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;&#xFF0C;&#x7136;&#x540E;&#x7ACB;&#x5373;&#x8FD0;&#x884C;&#xFF01;&#xFF01;&#xFF01;&#x672C;&#x9879;&#x76EE;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;3&#x4E2A;&#x8282;&#x70B9;&#x7684;Hadoop&#x96C6;&#x7FA4;&#xFF0C;&#x652F;&#x6301;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x6570;&#x7684;hadoop&#x96C6;&#x7FA4;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x542F;&#x52A8;hadoop, &#x8FD0;&#x884C;wordcount&#x4EE5;&#x53CA;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x90FD;&#x91C7;&#x7528;&#x4E86;shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x5316;&#x3002;&#x8FD9;&#x6837;&#x4F7F;&#x5F97;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#x7684;&#x4F7F;&#x7528;&#x4EE5;&#x53CA;&#x5F00;&#x53D1;&#x90FD;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x5FEB;&#x6377;:)</p>\n<h4 id=\"&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;\"><a href=\"#&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;\" class=\"headerlink\" title=\"&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;\"></a><strong>&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;</strong></h4><ul>\n<li>&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF1A;ubuntu 14.04 &#x548C; ubuntu 12.04</li>\n<li>&#x5185;&#x6838;&#x7248;&#x672C;: 3.13.0-32-generic</li>\n<li>Docker&#x7248;&#x672C;&#xFF1A;1.5.0 &#x548C;1.6.2</li>\n</ul>\n<h4 id=\"&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;\"><a href=\"#&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;\" class=\"headerlink\" title=\"&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;:(\"></a><strong>&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;:(</strong></h4><h2 id=\"&#x4E8C;-&#x955C;&#x50CF;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E8C;-&#x955C;&#x50CF;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E8C;. &#x955C;&#x50CF;&#x7B80;&#x4ECB;\"></a>&#x4E8C;. &#x955C;&#x50CF;&#x7B80;&#x4ECB;</h2><h4 id=\"&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;\"><a href=\"#&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;\" class=\"headerlink\" title=\"&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;\"></a><strong>&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;</strong></h4><ul>\n<li>serf-dnsmasq</li>\n<li>hadoop-base</li>\n<li>hadoop-master</li>\n<li>hadoop-slave</li>\n</ul>\n<h4 id=\"serf-dnsmasq&#x955C;&#x50CF;\"><a href=\"#serf-dnsmasq&#x955C;&#x50CF;\" class=\"headerlink\" title=\"serf-dnsmasq&#x955C;&#x50CF;\"></a><strong>serf-dnsmasq&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;ubuntu:15.04 (&#x9009;&#x5B83;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x6700;&#x5C0F;&#xFF0C;&#x4E0D;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x6700;&#x65B0;&#x2026;)</li>\n<li>&#x5B89;&#x88C5;serf: serf&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x673A;&#x5668;&#x8282;&#x70B9;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x53D1;&#x73B0;&#x6240;&#x6709;hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x3002;</li>\n<li>&#x5B89;&#x88C5;dnsmasq: dnsmasq&#x4F5C;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;dns&#x670D;&#x52A1;&#x5668;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x4E3A;hadoop&#x96C6;&#x7FA4;&#x63D0;&#x4F9B;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x670D;&#x52A1;&#x3002;</li>\n</ul>\n<p>&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x65F6;&#xFF0C;master&#x8282;&#x70B9;&#x7684;IP&#x4F1A;&#x4F20;&#x7ED9;&#x6240;&#x6709;slave&#x8282;&#x70B9;&#x3002;serf&#x4F1A;&#x5728;container&#x542F;&#x52A8;&#x540E;&#x7ACB;&#x5373;&#x542F;&#x52A8;&#x3002;slave&#x8282;&#x70B9;&#x4E0A;&#x7684;serf agent&#x4F1A;&#x9A6C;&#x4E0A;&#x53D1;&#x73B0;master&#x8282;&#x70B9;&#xFF08;master IP&#x5B83;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x561B;&#xFF09;&#xFF0C;master&#x8282;&#x70B9;&#x5C31;&#x9A6C;&#x4E0A;&#x53D1;&#x73B0;&#x4E86;&#x6240;&#x6709;slave&#x8282;&#x70B9;&#x3002;&#x7136;&#x540E;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x901A;&#x8FC7;&#x4E92;&#x76F8;&#x4EA4;&#x6362;&#x4FE1;&#x606F;&#xFF0C;&#x6240;&#x6709;&#x8282;&#x70B9;&#x5C31;&#x80FD;&#x77E5;&#x9053;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x5B58;&#x5728;&#x4E86;&#xFF01;(Everyone will know Everyone). serf&#x53D1;&#x73B0;&#x65B0;&#x7684;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x91CD;&#x65B0;&#x914D;&#x7F6E;dnsmasq,&#x7136;&#x540E;&#x91CD;&#x542F;dnsmasq. &#x6240;&#x4EE5;dnsmasq&#x5C31;&#x80FD;&#x591F;&#x89E3;&#x6790;&#x96C6;&#x7FA4;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x57DF;&#x540D;&#x5566;&#x3002;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x968F;&#x7740;&#x8282;&#x70B9;&#x7684;&#x589E;&#x52A0;&#x4F1A;&#x8017;&#x65F6;&#x66F4;&#x4E45;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x82E5;&#x914D;&#x7F6E;&#x7684;Hadoop&#x8282;&#x70B9;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x5219;&#x5728;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x540E;&#x9700;&#x8981;&#x6D4B;&#x8BD5;serf&#x662F;&#x5426;&#x53D1;&#x73B0;&#x4E86;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;dns&#x662F;&#x5426;&#x80FD;&#x591F;&#x89E3;&#x6790;&#x6240;&#x6709;&#x8282;&#x70B9;&#x57DF;&#x540D;&#x3002;&#x7A0D;&#x7B49;&#x7247;&#x523B;&#x624D;&#x80FD;&#x542F;&#x52A8;Hadoop&#x3002;&#x8FD9;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x7531;SequenceIQ&#x516C;&#x53F8;&#x63D0;&#x51FA;&#x7684;&#xFF0C;&#x8BE5;&#x516C;&#x53F8;&#x4E13;&#x6CE8;&#x4E8E;&#x5C06;Hadoop&#x8FD0;&#x884C;&#x5728;Docker&#x4E2D;&#x3002;&#x8BF7;&#x53C2;&#x8003;&#x8FD9;&#x4E2A;PPT&#xFF1A;<a href=\"http://www.slideshare.net/JanosMatyas/docker-based-hadoop-provisioning\" target=\"_blank\" rel=\"external\">Docker-based Hadoop Provisioning</a></p>\n<h4 id=\"hadoop-base&#x955C;&#x50CF;\"><a href=\"#hadoop-base&#x955C;&#x50CF;\" class=\"headerlink\" title=\"hadoop-base&#x955C;&#x50CF;\"></a><strong>hadoop-base&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;serf-dnsmasq&#x955C;&#x50CF;</li>\n<li>&#x5B89;&#x88C5;JDK(openjdk)</li>\n<li>&#x5B89;&#x88C5;openssh-server, &#x914D;&#x7F6E;&#x65E0;&#x5BC6;&#x7801;ssh</li>\n<li>&#x5B89;&#x88C5;vim&#xFF1A;&#x4ECB;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x6109;&#x5FEB;&#x5730;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x6572;&#x4EE3;&#x7801;&#x4E86;:)</li>\n<li>&#x5B89;&#x88C5;Hadoop 2.3.0: &#x5B89;&#x88C5;&#x7F16;&#x8BD1;&#x8FC7;&#x7684;hadoop &#xFF08;2.5.2&#xFF0C; 2.6.0&#xFF0C; 2.7.0 &#x90FD;&#x6BD4;2.3.0&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x61D2;&#x5F97;&#x5347;&#x7EA7;&#x4E86;&#xFF09;</li>\n</ul>\n<p>&#x7F16;&#x8BD1;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x8BF7;&#x53C2;&#x8003;&#x6211;&#x7684;&#x535A;&#x5BA2;&#xFF1A;<a href=\"http://www.cnblogs.com/kiwenlau/p/4227204.html\" target=\"_blank\" rel=\"external\"><a href=\"http://www.cnblogs.com/kiwenlau/p/4227204.html\" target=\"_blank\" rel=\"external\">Hadoop 2.30 &#x5728;Ubuntu 14.04 &#x4E2D;&#x7F16;&#x8BD1;</a></a></p>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5F00;&#x53D1;&#x6211;&#x7684;hadoop-base, &#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7F16;&#x8BD1;&#x8FC7;&#x7684;hadoop-2.3.0&#x5B89;&#x88C5;&#x5305;&#xFF0C;&#x653E;&#x5230;hadoop-cluster-docker/hadoop-base/files&#x76EE;&#x5F55;&#x5185;&#x3002;&#x6211;&#x7F16;&#x8BD1;&#x7684;64&#x4F4D;hadoop-2.3.0&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"http://pan.baidu.com/s/1sjFRaFz\" target=\"_blank\" rel=\"external\">hadoop-2.3.0</a></p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x8FD8;&#x7F16;&#x8BD1;&#x4E86;64&#x4F4D;&#x7684;hadoop 2.5.2, 2.6.0, 2.7.0, &#x5176;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x5982;&#x4E0B;&#xFF1A;</p>\n<ul>\n<li><a href=\"http://pan.baidu.com/s/1sjFRaFz\" target=\"_blank\" rel=\"external\">hadoop-2.3.0</a></li>\n<li><a href=\"http://pan.baidu.com/s/1jGw24aa\" target=\"_blank\" rel=\"external\">hadoop-2.5.2</a></li>\n<li><a href=\"http://pan.baidu.com/s/1eQgvF2M\" target=\"_blank\" rel=\"external\">hadoop-2.6.0</a></li>\n<li><a href=\"http://pan.baidu.com/s/1c0HD0Nu\" target=\"_blank\" rel=\"external\">hadoop-2.7.0</a></li>\n</ul>\n<h4 id=\"hadoop-master&#x955C;&#x50CF;\"><a href=\"#hadoop-master&#x955C;&#x50CF;\" class=\"headerlink\" title=\"hadoop-master&#x955C;&#x50CF;\"></a><strong>hadoop-master&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;hadoop-base&#x955C;&#x50CF;</li>\n<li>&#x914D;&#x7F6E;hadoop&#x7684;master&#x8282;&#x70B9;</li>\n<li>&#x683C;&#x5F0F;&#x5316;namenode</li>\n</ul>\n<p>&#x8FD9;&#x4E00;&#x6B65;&#x9700;&#x8981;&#x914D;&#x7F6E;slaves&#x6587;&#x4EF6;&#xFF0C;&#x800C;slaves&#x6587;&#x4EF6;&#x9700;&#x8981;&#x5217;&#x51FA;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x57DF;&#x540D;&#x6216;&#x8005;IP&#x3002;&#x56E0;&#x6B64;&#xFF0C;Hadoop&#x8282;&#x70B9;&#x6570;&#x76EE;&#x4E0D;&#x540C;&#x65F6;&#xFF0C;slaves&#x6587;&#x4EF6;&#x81EA;&#x7136;&#x4E5F;&#x4E0D;&#x4E00;&#x6837;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x66F4;&#x6539;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;slaves&#x6587;&#x4EF6;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;&#x3002;&#x6211;&#x7F16;&#x5199;&#x4E86;&#x4E00;&#x4E2A;resize-cluster.sh&#x811A;&#x672C;&#x81EA;&#x52A8;&#x5316;&#x8FD9;&#x4E00;&#x8FC7;&#x7A0B;&#x3002;&#x4EC5;&#x9700;&#x7ED9;&#x5B9A;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x4F5C;&#x4E3A;&#x811A;&#x672C;&#x53C2;&#x6570;&#x5C31;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5B9E;&#x73B0;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x7684;&#x66F4;&#x6539;&#x3002;&#x7531;&#x4E8E;hadoop-master&#x955C;&#x50CF;&#x4EC5;&#x4EC5;&#x505A;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E5F;&#x65E0;&#x9700;&#x4E0B;&#x8F7D;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#xFF0C;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x975E;&#x5E38;&#x5FEB;&#xFF0C;1&#x5206;&#x949F;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;</p>\n<h4 id=\"hadoop-slave&#x955C;&#x50CF;\"><a href=\"#hadoop-slave&#x955C;&#x50CF;\" class=\"headerlink\" title=\"hadoop-slave&#x955C;&#x50CF;\"></a><strong>hadoop-slave&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;hadoop-base&#x955C;&#x50CF;</li>\n<li>&#x914D;&#x7F6E;hadoop&#x7684;slave&#x8282;&#x70B9;</li>\n</ul>\n<h4 id=\"&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;\"><a href=\"#&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;\" class=\"headerlink\" title=\"&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;\"></a><strong>&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;</strong></h4><p>&#x4E0B;&#x8868;&#x4E3A;sudo docker images&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;</p>\n<table>\n<thead>\n<tr>\n<th>REPOSITORY</th>\n<th>TAG</th>\n<th>IMAGE ID</th>\n<th>CREATED</th>\n<th>VIRTUAL SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n<tr>\n<td>ubuntu</td>\n<td>15.04</td>\n<td>bd94ae587483</td>\n<td>3 weeks ago</td>\n<td>131.3 MB</td>\n</tr>\n</tbody>\n</table>\n<p>&#x6613;&#x77E5;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x7ED3;&#x8BBA;&#xFF1A;</p>\n<ul>\n<li>serf-dnsmasq&#x955C;&#x50CF;&#x5728;ubuntu:15.04&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E86;75.4MB</li>\n<li>hadoop-base&#x955C;&#x50CF;&#x5728;serf-dnsmasq&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E86;570.7MB</li>\n<li>hadoop-master&#x548C;hadoop-slave&#x955C;&#x50CF;&#x5728;hadoop-base&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x5927;&#x5C0F;&#x51E0;&#x4E4E;&#x6CA1;&#x6709;&#x589E;&#x52A0;</li>\n</ul>\n<p>&#x4E0B;&#x8868;&#x4E3A;docker history index.alauda.cn/kiwenlau/hadoop-base:0.1.0&#x547D;&#x4EE4;&#x7684;&#x90E8;&#x5206;&#x8FD0;&#x884C;&#x7ED3;&#x679C;</p>\n<table>\n<thead>\n<tr>\n<th>IMAGE</th>\n<th>CREATED</th>\n<th>CREATED BY</th>\n<th>SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2039b9b81146</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c #(nop) ADD   multi:a93c971a49514e787</td>\n<td>158.5 MB</td>\n</tr>\n<tr>\n<td>cdb620312f30</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c apt-get install -y openjdk-7-jdk</td>\n<td>324.6 MB</td>\n</tr>\n<tr>\n<td>da7d10c790c1</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c apt-get install -y openssh-server</td>\n<td>87.58 MB</td>\n</tr>\n<tr>\n<td>c65cb568defc</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c curl -Lso serf.zip <a href=\"https://dl.bint\" target=\"_blank\" rel=\"external\">https://dl.bint</a></td>\n<td>14.46 MB</td>\n</tr>\n<tr>\n<td>3e22b3d72e33</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c apt-get update &amp;&amp; apt-get install</td>\n<td>60.89 MB</td>\n</tr>\n<tr>\n<td>b68f8c8d2140</td>\n<td>3 weeks ago</td>\n<td>/bin/sh -c #(nop) ADD file:d90f7467c470bfa9a3</td>\n<td>131.3 MB</td>\n</tr>\n</tbody>\n</table>\n<p>&#x53EF;&#x77E5;</p>\n<ul>\n<li>&#x57FA;&#x7840;&#x955C;&#x50CF;ubuntu:15.04&#x4E3A;131.3MB</li>\n<li>&#x5B89;&#x88C5;openjdk&#x9700;&#x8981;324.6MB</li>\n<li>&#x5B89;&#x88C5;hadoop&#x9700;&#x8981;158.5MB</li>\n<li>ubuntu,openjdk&#x4E0E;hadoop&#x5747;&#x4E3A;&#x955C;&#x50CF;&#x6240;&#x5FC5;&#x987B;&#xFF0C;&#x4E09;&#x8005;&#x4E00;&#x5171;&#x5360;&#x4E86;:614.4MB</li>\n</ul>\n<h4 id=\"&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;\"><a href=\"#&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;\" class=\"headerlink\" title=\"&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;\"></a><strong>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;</strong></h4><p>&#x4E0B;&#x56FE;&#x663E;&#x793A;&#x4E86;&#x9879;&#x76EE;&#x7684;Docker&#x955C;&#x50CF;&#x7ED3;&#x6784;&#xFF1A;</p>\n<p><img src=\"/2015/06/08/150608-hadoop-cluster-docker/image-architecture.png\" width=\"500\"></p>\n<h2 id=\"&#x4E09;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E09;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E09;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E09;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x62C9;&#x53D6;&#x955C;&#x50CF;\"><a href=\"#1-&#x62C9;&#x53D6;&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x62C9;&#x53D6;&#x955C;&#x50CF;\"></a>1. <strong>&#x62C9;&#x53D6;&#x955C;&#x50CF;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/hadoop-master:0.1.0</div><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/hadoop-slave:0.1.0</div><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/hadoop-base:0.1.0</div><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/serf-dnsmasq:0.1.0</div></pre></td></tr></table></figure>\n<ul>\n<li>3~5&#x5206;&#x949F;OK~</li>\n</ul>\n<p><em>&#x67E5;&#x770B;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker images</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<table>\n<thead>\n<tr>\n<th>REPOSITORY</th>\n<th>TAG</th>\n<th>IMAGE ID</th>\n<th>CREATED</th>\n<th>VIRTUAL SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>hadoop-base&#x955C;&#x50CF;&#x662F;&#x57FA;&#x4E8E;serf-dnsmasq&#x955C;&#x50CF;&#x7684;&#xFF0C;hadoop-slave&#x955C;&#x50CF;&#x548C;hadoop-master&#x955C;&#x50CF;&#x90FD;&#x662F;&#x57FA;&#x4E8E;hadoop-base&#x955C;&#x50CF;</li>\n<li>&#x6240;&#x4EE5;&#x5176;&#x5B9E;4&#x4E2A;&#x955C;&#x50CF;&#x4E00;&#x5171;&#x4E5F;&#x5C31;777.4MB:)</li>\n</ul>\n<h4 id=\"2-&#x4FEE;&#x6539;&#x955C;&#x50CF;tag\"><a href=\"#2-&#x4FEE;&#x6539;&#x955C;&#x50CF;tag\" class=\"headerlink\" title=\"2. &#x4FEE;&#x6539;&#x955C;&#x50CF;tag\"></a><strong>2. &#x4FEE;&#x6539;&#x955C;&#x50CF;tag</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker tag d63869855c03 kiwenlau/hadoop-slave:0.1.0</div><div class=\"line\">sudo docker tag 7c9d32ede450 kiwenlau/hadoop-master:0.1.0</div><div class=\"line\">sudo docker tag 5571bd5de58e kiwenlau/hadoop-base:0.1.0</div><div class=\"line\">sudo docker tag 09ed89c24ee8 kiwenlau/serf-dnsmasq:0.1.0</div></pre></td></tr></table></figure>\n<p><em>&#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x955C;&#x50CF;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker images</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<table>\n<thead>\n<tr>\n<th>REPOSITORY</th>\n<th>TAG</th>\n<th>IMAGE ID</th>\n<th>CREATED</th>\n<th>VIRTUAL SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>&#x4E4B;&#x6240;&#x4EE5;&#x8981;&#x4FEE;&#x6539;&#x955C;&#x50CF;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x9ED8;&#x8BA4;&#x662F;&#x5C06;&#x955C;&#x50CF;&#x4E0A;&#x4F20;&#x5230;Dockerhub, &#x56E0;&#x6B64;Dokerfile&#x4EE5;&#x53CA;shell&#x811A;&#x672C;&#x4E2D;&#x5F97;&#x955C;&#x50CF;&#x540D;&#x79F0;&#x90FD;&#x662F;&#x6CA1;&#x6709;alauada&#x524D;&#x7F00;&#x7684;&#xFF0C;sorry for this&#x2026;.&#x4E0D;&#x8FC7;&#x6539;tag&#x8FD8;&#x662F;&#x5F88;&#x5FEB;&#x6EF4;</li>\n<li>&#x82E5;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x6211;&#x5728;DockerHub&#x4E2D;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x81EA;&#x7136;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;tag&#x2026;&#x4E0D;&#x8FC7;Alauda&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#x7684;&#x54C8;~</li>\n</ul>\n<h4 id=\"3-&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;\"><a href=\"#3-&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"3.&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;\"></a><strong>3.&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E3A;&#x4E86;&#x9632;&#x6B62;Github&#x88AB;XX, &#x6211;&#x628A;&#x4EE3;&#x7801;&#x5BFC;&#x5165;&#x5230;&#x4E86;&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x7684;git&#x4ED3;&#x5E93;</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">clone</span> http://git.oschina.net/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"><a href=\"#4-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"4. &#x8FD0;&#x884C;&#x5BB9;&#x5668;\"></a><strong>4. &#x8FD0;&#x884C;&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> hadoop-cluster-docker</div><div class=\"line\">./start-container.sh</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">start master container...</div><div class=\"line\">start slave1 container...</div><div class=\"line\">start slave2 container...</div><div class=\"line\">root@master:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E00;&#x5171;&#x5F00;&#x542F;&#x4E86;3&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;1&#x4E2A;master, 2&#x4E2A;slave</li>\n<li>&#x5F00;&#x542F;&#x5BB9;&#x5668;&#x540E;&#x5C31;&#x8FDB;&#x5165;&#x4E86;master&#x5BB9;&#x5668;root&#x7528;&#x6237;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#xFF08;/root&#xFF09;</li>\n</ul>\n<p><em>&#x67E5;&#x770B;master&#x7684;root&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;&#x7684;&#x6587;&#x4EF6;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">ls</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">hdfs  run-wordcount.sh\tserf_log  start-hadoop.sh  start-ssh-serf.sh</div></pre></td></tr></table></figure>\n<ul>\n<li>start-hadoop.sh&#x662F;&#x5F00;&#x542F;hadoop&#x7684;shell&#x811A;&#x672C;</li>\n<li>run-wordcount.sh&#x662F;&#x8FD0;&#x884C;wordcount&#x7684;shell&#x811A;&#x672C;&#xFF0C;&#x53EF;&#x4EE5;&#x6D4B;&#x8BD5;&#x955C;&#x50CF;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;</li>\n</ul>\n<h4 id=\"5-&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;-&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;\"><a href=\"#5-&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;-&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"5.&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;(&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;)\"></a><strong>5.&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;(&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;)</strong></h4><p><em>&#x67E5;&#x770B;hadoop&#x96C6;&#x7FA4;&#x6210;&#x5458;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">serf members</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">master.kiwenlau.com  172.17.0.65:7946  alive</div><div class=\"line\">slave1.kiwenlau.com  172.17.0.66:7946  alive</div><div class=\"line\">slave2.kiwenlau.com  172.17.0.67:7946  alive</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x82E5;&#x7ED3;&#x679C;&#x7F3A;&#x5C11;&#x8282;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x7A0D;&#x7B49;&#x7247;&#x523B;&#xFF0C;&#x518D;&#x6267;&#x884C;&#x201C;serf members&#x201D;&#x547D;&#x4EE4;&#x3002;&#x56E0;&#x4E3A;serf agent&#x9700;&#x8981;&#x65F6;&#x95F4;&#x53D1;&#x73B0;&#x6240;&#x6709;&#x8282;&#x70B9;&#x3002;</li>\n</ul>\n<p><em>&#x6D4B;&#x8BD5;ssh</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">ssh slave2.kiwenlau.com</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">Warning: Permanently added <span class=\"string\">&apos;slave2.kiwenlau.com,172.17.0.67&apos;</span> (ECDSA) to the list of known hosts.</div><div class=\"line\">Welcome to Ubuntu 15.04 (GNU/Linux 3.13.0-53-generic x86_64)</div><div class=\"line\">* Documentation:  https://help.ubuntu.com/</div><div class=\"line\">The programs included with the Ubuntu system are free software;</div><div class=\"line\">the exact distribution terms <span class=\"keyword\">for</span> each program are described <span class=\"keyword\">in</span> the</div><div class=\"line\">individual files <span class=\"keyword\">in</span> /usr/share/doc/*/copyright.</div><div class=\"line\">Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by</div><div class=\"line\">applicable law.</div><div class=\"line\">root@slave2:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<p><em>&#x9000;&#x51FA;slave2</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">exit</span></div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">logout</span></div><div class=\"line\">Connection to slave2.kiwenlau.com closed.</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x82E5;ssh&#x5931;&#x8D25;&#xFF0C;&#x8BF7;&#x7A0D;&#x7B49;&#x7247;&#x523B;&#x518D;&#x6D4B;&#x8BD5;&#xFF0C;&#x56E0;&#x4E3A;dnsmasq&#x7684;dns&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x9700;&#x8981;&#x65F6;&#x95F4;&#x3002;</li>\n<li>&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x542F;Hadoop&#x96C6;&#x7FA4;&#x4E86;&#xFF01;&#x5176;&#x5B9E;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#xFF0C;&#x5F00;&#x542F;&#x5BB9;&#x5668;&#x540E;&#x8010;&#x5FC3;&#x7B49;&#x5F85;&#x4E00;&#x5206;&#x949F;&#x5373;&#x53EF;&#xFF01;</li>\n</ul>\n<h4 id=\"6-&#x5F00;&#x542F;hadoop\"><a href=\"#6-&#x5F00;&#x542F;hadoop\" class=\"headerlink\" title=\"6. &#x5F00;&#x542F;hadoop\"></a><strong>6. &#x5F00;&#x542F;hadoop</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./start-hadoop.sh</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E0A;&#x4E00;&#x6B65;ssh&#x5230;slave2&#x4E4B;&#x540E;&#xFF0C;&#x8BF7;&#x8BB0;&#x5F97;&#x56DE;&#x5230;master&#x554A;!!&#xFF01;</li>\n<li>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x592A;&#x591A;&#xFF0C;&#x5FFD;&#x7565;&#x2026;.</li>\n<li>hadoop&#x7684;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x53D6;&#x51B3;&#x4E8E;&#x673A;&#x5668;&#x6027;&#x80FD;&#x2026;.</li>\n</ul>\n<h4 id=\"7-&#x8FD0;&#x884C;wordcount\"><a href=\"#7-&#x8FD0;&#x884C;wordcount\" class=\"headerlink\" title=\"7. &#x8FD0;&#x884C;wordcount\"></a><strong>7. &#x8FD0;&#x884C;wordcount</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./run-wordcount.sh</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">input file1.txt:</div><div class=\"line\">Hello Hadoop</div><div class=\"line\">input file2.txt:</div><div class=\"line\">Hello Docker</div><div class=\"line\">wordcount output:</div><div class=\"line\">Docker\t1</div><div class=\"line\">Hadoop\t1</div><div class=\"line\">Hello\t2</div></pre></td></tr></table></figure></p>\n<ul>\n<li>wordcount&#x7684;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x53D6;&#x51B3;&#x4E8E;&#x673A;&#x5668;&#x6027;&#x80FD;&#x2026;.</li>\n</ul>\n<h2 id=\"&#x56DB;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x56DB;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x56DB;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x56DB;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"><a href=\"#1-&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\" class=\"headerlink\" title=\"1. &#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"></a><strong>1. &#x51C6;&#x5907;&#x5DE5;&#x4F5C;</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;1~3&#xFF1A;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x4FEE;&#x6539;tag&#xFF0C;&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;</li>\n<li>&#x6CE8;&#x610F;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E0D;&#x4E0B;&#x8F7D;serf-dnsmasq, &#x4F46;&#x662F;&#x8BF7;&#x6700;&#x597D;&#x4E0B;&#x8F7D;hadoop-base&#xFF0C;&#x56E0;&#x4E3A;hadoop-master&#x662F;&#x57FA;&#x4E8E;hadoop-base&#x6784;&#x5EFA;&#x7684;</li>\n</ul>\n<h4 id=\"2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;\"><a href=\"#2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;\" class=\"headerlink\" title=\"2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;\"></a><strong>2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./resize-cluster.sh 5</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E0D;&#x8981;&#x62C5;&#x5FC3;&#xFF0C;1&#x5206;&#x949F;&#x5C31;&#x80FD;&#x641E;&#x5B9A;</li>\n<li>&#x4F60;&#x53EF;&#x4EE5;&#x4E3A;resize-cluster.sh&#x811A;&#x672C;&#x8BBE;&#x4E0D;&#x540C;&#x7684;&#x6B63;&#x6574;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x6570;1, 2, 3, 4, 5, 6&#x2026;</li>\n</ul>\n<h4 id=\"3-&#x542F;&#x52A8;&#x5BB9;&#x5668;\"><a href=\"#3-&#x542F;&#x52A8;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"3. &#x542F;&#x52A8;&#x5BB9;&#x5668;\"></a><strong>3. &#x542F;&#x52A8;&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./start-container.sh 5</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4F60;&#x53EF;&#x4EE5;&#x4E3A;resize-cluster.sh&#x811A;&#x672C;&#x8BBE;&#x4E0D;&#x540C;&#x7684;&#x6B63;&#x6574;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x6570;1, 2, 3, 4, 5, 6&#x2026;</li>\n<li>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5462;&#xFF0C;&#x6700;&#x597D;&#x8FD8;&#x662F;&#x5F97;&#x548C;&#x4E0A;&#x4E00;&#x6B65;&#x7684;&#x53C2;&#x6570;&#x4E00;&#x81F4;:)</li>\n<li>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5982;&#x679C;&#x6BD4;&#x4E0A;&#x4E00;&#x6B65;&#x7684;&#x53C2;&#x6570;&#x5927;&#xFF0C;&#x4F60;&#x591A;&#x542F;&#x52A8;&#x7684;&#x8282;&#x70B9;&#xFF0C;Hadoop&#x4E0D;&#x8BA4;&#x8BC6;&#x5B83;&#x4EEC;..</li>\n<li>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5982;&#x679C;&#x6BD4;&#x4E0A;&#x4E00;&#x6B65;&#x7684;&#x53C2;&#x6570;&#x5C0F;&#xFF0C;Hadoop&#x89C9;&#x5F97;&#x5C11;&#x542F;&#x52A8;&#x7684;&#x8282;&#x70B9;&#x6302;&#x6389;&#x4E86;..</li>\n</ul>\n<h4 id=\"4-&#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;\"><a href=\"#4-&#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;\" class=\"headerlink\" title=\"4. &#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;\"></a><strong>4. &#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E09;&#x90E8;&#x5206;5~7&#xFF1A;&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#xFF0C;&#x5F00;&#x542F;Hadoop&#xFF0C;&#x8FD0;&#x884C;wordcount</li>\n<li>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x82E5;&#x8282;&#x70B9;&#x589E;&#x52A0;&#xFF0C;&#x8BF7;&#x52A1;&#x5FC5;&#x5148;&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5F00;&#x542F;Hadoop, &#x56E0;&#x4E3A;serf&#x53EF;&#x80FD;&#x8FD8;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;&#x800C;dnsmasq&#x7684;DNS&#x670D;&#x52A1;&#x5668;&#x8868;&#x793A;&#x8FD8;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x597D;&#x670D;&#x52A1;</li>\n<li>&#x6D4B;&#x8BD5;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x53D6;&#x51B3;&#x4E8E;&#x673A;&#x5668;&#x6027;&#x80FD;&#x2026;.</li>\n</ul>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x5DF2;&#x66F4;&#x65B0;&#xFF0C;&#x8BF7;&#x67E5;&#x770B;: <a href=\"http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;Hadoop&#x96C6;&#x7FA4;&#x4E4B;&#x5347;&#x7EA7;&#x7248;</a>!!!</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau\">kiwenlau/hadoop-cluster-docker</a></li>\n</ul>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/\">2015-06-08</a></li>\n</ul>\n<p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x57FA;&#x4E8E;Docker&#x5728;&#x5355;&#x673A;&#x4E0A;&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Hadopp&#x96C6;&#x7FA4;&#x65B9;&#x6CD5;&#xFF0C;Hadoop&#x7684;Master&#x548C;Slave&#x5206;&#x522B;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>\n<p>&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x90E8;&#x5206;&#xFF0C;&#x5FEB;&#x901F;&#x5728;&#x672C;&#x673A;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;3&#x4E2A;&#x8282;&#x70B9;&#x7684;Hadoop&#x96C6;&#x7FA4;</p>\n<h2 id=\"&#x4E00;-&#x9879;&#x76EE;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-&#x9879;&#x76EE;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. &#x9879;&#x76EE;&#x7B80;&#x4ECB;\"></a>&#x4E00;. &#x9879;&#x76EE;&#x7B80;&#x4ECB;</h2><p>&#x76F4;&#x63A5;&#x7528;&#x673A;&#x5668;&#x642D;&#x5EFA;Hadoop&#x96C6;&#x7FA4;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x75DB;&#x82E6;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5C24;&#x5176;&#x5BF9;&#x521D;&#x5B66;&#x8005;&#x6765;&#x8BF4;&#x3002;&#x4ED6;&#x4EEC;&#x8FD8;&#x6CA1;&#x5F00;&#x59CB;&#x8DD1;wordcount&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x88AB;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6298;&#x817E;&#x7684;&#x4F53;&#x65E0;&#x5B8C;&#x80A4;&#x4E86;&#x3002;</p>\n<p>&#x6211;&#x7684;&#x76EE;&#x6807;&#x662F;&#x5C06;Hadoop&#x96C6;&#x7FA4;&#x8FD0;&#x884C;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x4F7F;Hadoop&#x5F00;&#x53D1;&#x8005;&#x80FD;&#x591F;&#x5FEB;&#x901F;&#x4FBF;&#x6377;&#x5730;&#x5728;&#x672C;&#x673A;&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;&#x7684;Hadoop&#x96C6;&#x7FA4;&#x3002;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x60F3;&#x6CD5;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x4E0D;&#x5C11;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x662F;&#x90FD;&#x4E0D;&#x662F;&#x5F88;&#x7406;&#x60F3;&#xFF0C;&#x4ED6;&#x4EEC;&#x6216;&#x8005;&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x592A;&#x6162;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x4E86;&#x7B2C;&#x4E09;&#x65B9;&#x5DE5;&#x5177;&#x4F7F;&#x5F97;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x8FC7;&#x4E8E;&#x590D;&#x6742;&#x2026;&#x4E0B;&#x8868;&#x4E3A;&#x4E00;&#x4E9B;&#x5DF2;&#x77E5;&#x7684;Hadoop on Docker&#x9879;&#x76EE;&#x4EE5;&#x53CA;&#x5176;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x9879;&#x76EE;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5927;&#x5C0F;</th>\n<th style=\"text-align:left\">&#x95EE;&#x9898;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">sequenceiq/hadoop-docker:latest</td>\n<td style=\"text-align:left\">1.491GB</td>\n<td style=\"text-align:left\">&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x53EA;&#x652F;&#x6301;&#x5355;&#x4E2A;&#x8282;&#x70B9;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/hadoop-docker:2.7.0</td>\n<td style=\"text-align:left\">1.76 GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/hadoop-docker:2.6.0</td>\n<td style=\"text-align:left\">1.624GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/ambari:latest</td>\n<td style=\"text-align:left\">1.782GB</td>\n<td style=\"text-align:left\">&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x4F7F;&#x7528;&#x592A;&#x6162;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/ambari:2.0.0</td>\n<td style=\"text-align:left\">4.804GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sequenceiq/ambari:latest:1.70</td>\n<td style=\"text-align:left\">4.761GB</td>\n<td style=\"text-align:left\">&#x540C;&#x4E0A;</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-mutinode</td>\n<td style=\"text-align:left\">4.331GB</td>\n<td style=\"text-align:left\">&#x955C;&#x50CF;&#x592A;&#x5927;&#xFF0C;&#x6784;&#x5EFA;&#x592A;&#x6162;&#xFF0C;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x9EBB;&#x70E6;&#xFF0C;&#x6709;bug</td>\n</tr>\n</tbody>\n</table>\n<p>&#x6211;&#x7684;&#x9879;&#x76EE;&#x53C2;&#x8003;&#x4E86;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x8FC7;&#x6211;&#x505A;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x4F18;&#x5316;&#x548C;&#x91CD;&#x6784;&#x3002;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#x7684;Github&#x4E3B;&#x9875;&#x4EE5;&#x53CA;&#x4F5C;&#x8005;&#x6240;&#x5199;&#x7684;&#x535A;&#x5BA2;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/alvinhenrick/hadoop-mutinode\">GitHub</a>&#xFF0C;<a href=\"http://alvinhenrick.com/2014/07/16/hadoop-yarn-multinode-cluster-with-docker/\">&#x535A;&#x5BA2;</a></p>\n<p>&#x4E0B;&#x9762;&#x4E24;&#x4E2A;&#x8868;&#x662F;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#x4E0E;&#x6211;&#x7684;kiwenlau/hadoop-cluster-docker&#x9879;&#x76EE;&#x7684;&#x53C2;&#x6570;&#x5BF9;&#x6BD4;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x540D;&#x79F0;</th>\n<th style=\"text-align:left\">&#x6784;&#x5EFA;&#x65F6;&#x95F4;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5C42;&#x6570;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5927;&#x5C0F;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/serf</td>\n<td style=\"text-align:left\">258.213s</td>\n<td style=\"text-align:left\">21</td>\n<td style=\"text-align:left\">239.4MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-base</td>\n<td style=\"text-align:left\">2236.055s</td>\n<td style=\"text-align:left\">58</td>\n<td style=\"text-align:left\">4.328GB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-dn</td>\n<td style=\"text-align:left\">51.959s</td>\n<td style=\"text-align:left\">74</td>\n<td style=\"text-align:left\">4.331GB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alvinhenrick/hadoop-nn-dn</td>\n<td style=\"text-align:left\">49.548s</td>\n<td style=\"text-align:left\">84</td>\n<td style=\"text-align:left\">4.331GB</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x540D;&#x79F0;</th>\n<th style=\"text-align:left\">&#x6784;&#x5EFA;&#x65F6;&#x95F4;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5C42;&#x6570;</th>\n<th style=\"text-align:left\">&#x955C;&#x50CF;&#x5927;&#x5C0F;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">kiwenlau/serf-dnsmasq</td>\n<td style=\"text-align:left\">509.46s</td>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">206.6 MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kiwenlau/hadoop-base</td>\n<td style=\"text-align:left\">400.29s</td>\n<td style=\"text-align:left\">7</td>\n<td style=\"text-align:left\">775.4 MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kiwenlau/hadoop-master</td>\n<td style=\"text-align:left\">5.41s</td>\n<td style=\"text-align:left\">9</td>\n<td style=\"text-align:left\">775.4 MB</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kiwenlau/hadoop-slave</td>\n<td style=\"text-align:left\">2.41s</td>\n<td style=\"text-align:left\">8</td>\n<td style=\"text-align:left\">775.4 MB</td>\n</tr>\n</tbody>\n</table>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4E3B;&#x8981;&#x4F18;&#x5316;&#x4E86;&#x8FD9;&#x6837;&#x51E0;&#x70B9;</p>\n<ul>\n<li>&#x66F4;&#x5C0F;&#x7684;&#x955C;&#x50CF;&#x5927;&#x5C0F;</li>\n<li>&#x66F4;&#x5FEB;&#x7684;&#x6784;&#x9020;&#x65F6;&#x95F4;</li>\n<li>&#x66F4;&#x5C11;&#x7684;&#x955C;&#x50CF;&#x5C42;&#x6570;</li>\n</ul>\n<h4 id=\"&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;\"><a href=\"#&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;\" class=\"headerlink\" title=\"&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;\"></a><strong>&#x66F4;&#x5FEB;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x6539;&#x53D8;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;</strong></h4><p>&#x53E6;&#x5916;&#xFF0C;alvinhenrick/hadoop-mutinode&#x9879;&#x76EE;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x65F6;&#x9700;&#x8981;&#x624B;&#x52A8;&#x4FEE;&#x6539;Hadoop&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-nn-dn&#x955C;&#x50CF;,&#x7136;&#x540E;&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x811A;&#x672C;&#xFF0C;&#x624D;&#x80FD;&#x5B9E;&#x73B0;&#x589E;&#x52A0;&#x8282;&#x70B9;&#x7684;&#x529F;&#x80FD;&#x3002;&#x800C;&#x6211;&#x901A;&#x8FC7;shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x8BDD;&#xFF0C;&#x4E0D;&#x5230;1&#x5206;&#x949F;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;&#xFF0C;&#x7136;&#x540E;&#x7ACB;&#x5373;&#x8FD0;&#x884C;&#xFF01;&#xFF01;&#xFF01;&#x672C;&#x9879;&#x76EE;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;3&#x4E2A;&#x8282;&#x70B9;&#x7684;Hadoop&#x96C6;&#x7FA4;&#xFF0C;&#x652F;&#x6301;&#x4EFB;&#x610F;&#x8282;&#x70B9;&#x6570;&#x7684;hadoop&#x96C6;&#x7FA4;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x542F;&#x52A8;hadoop, &#x8FD0;&#x884C;wordcount&#x4EE5;&#x53CA;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x90FD;&#x91C7;&#x7528;&#x4E86;shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x5316;&#x3002;&#x8FD9;&#x6837;&#x4F7F;&#x5F97;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#x7684;&#x4F7F;&#x7528;&#x4EE5;&#x53CA;&#x5F00;&#x53D1;&#x90FD;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x5FEB;&#x6377;:)</p>\n<h4 id=\"&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;\"><a href=\"#&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;\" class=\"headerlink\" title=\"&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;\"></a><strong>&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;</strong></h4><ul>\n<li>&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF1A;ubuntu 14.04 &#x548C; ubuntu 12.04</li>\n<li>&#x5185;&#x6838;&#x7248;&#x672C;: 3.13.0-32-generic</li>\n<li>Docker&#x7248;&#x672C;&#xFF1A;1.5.0 &#x548C;1.6.2</li>\n</ul>\n<h4 id=\"&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;\"><a href=\"#&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;\" class=\"headerlink\" title=\"&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;:(\"></a><strong>&#x786C;&#x76D8;&#x4E0D;&#x591F;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x591F;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5185;&#x6838;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD0;&#x884C;&#x5931;&#x8D25;:(</strong></h4><h2 id=\"&#x4E8C;-&#x955C;&#x50CF;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E8C;-&#x955C;&#x50CF;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E8C;. &#x955C;&#x50CF;&#x7B80;&#x4ECB;\"></a>&#x4E8C;. &#x955C;&#x50CF;&#x7B80;&#x4ECB;</h2><h4 id=\"&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;\"><a href=\"#&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;\" class=\"headerlink\" title=\"&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;\"></a><strong>&#x672C;&#x9879;&#x76EE;&#x4E00;&#x5171;&#x5F00;&#x53D1;&#x4E86;4&#x4E2A;&#x955C;&#x50CF;</strong></h4><ul>\n<li>serf-dnsmasq</li>\n<li>hadoop-base</li>\n<li>hadoop-master</li>\n<li>hadoop-slave</li>\n</ul>\n<h4 id=\"serf-dnsmasq&#x955C;&#x50CF;\"><a href=\"#serf-dnsmasq&#x955C;&#x50CF;\" class=\"headerlink\" title=\"serf-dnsmasq&#x955C;&#x50CF;\"></a><strong>serf-dnsmasq&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;ubuntu:15.04 (&#x9009;&#x5B83;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x6700;&#x5C0F;&#xFF0C;&#x4E0D;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x6700;&#x65B0;&#x2026;)</li>\n<li>&#x5B89;&#x88C5;serf: serf&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x673A;&#x5668;&#x8282;&#x70B9;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x53D1;&#x73B0;&#x6240;&#x6709;hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x3002;</li>\n<li>&#x5B89;&#x88C5;dnsmasq: dnsmasq&#x4F5C;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;dns&#x670D;&#x52A1;&#x5668;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x4E3A;hadoop&#x96C6;&#x7FA4;&#x63D0;&#x4F9B;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x670D;&#x52A1;&#x3002;</li>\n</ul>\n<p>&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x65F6;&#xFF0C;master&#x8282;&#x70B9;&#x7684;IP&#x4F1A;&#x4F20;&#x7ED9;&#x6240;&#x6709;slave&#x8282;&#x70B9;&#x3002;serf&#x4F1A;&#x5728;container&#x542F;&#x52A8;&#x540E;&#x7ACB;&#x5373;&#x542F;&#x52A8;&#x3002;slave&#x8282;&#x70B9;&#x4E0A;&#x7684;serf agent&#x4F1A;&#x9A6C;&#x4E0A;&#x53D1;&#x73B0;master&#x8282;&#x70B9;&#xFF08;master IP&#x5B83;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x561B;&#xFF09;&#xFF0C;master&#x8282;&#x70B9;&#x5C31;&#x9A6C;&#x4E0A;&#x53D1;&#x73B0;&#x4E86;&#x6240;&#x6709;slave&#x8282;&#x70B9;&#x3002;&#x7136;&#x540E;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x901A;&#x8FC7;&#x4E92;&#x76F8;&#x4EA4;&#x6362;&#x4FE1;&#x606F;&#xFF0C;&#x6240;&#x6709;&#x8282;&#x70B9;&#x5C31;&#x80FD;&#x77E5;&#x9053;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x5B58;&#x5728;&#x4E86;&#xFF01;(Everyone will know Everyone). serf&#x53D1;&#x73B0;&#x65B0;&#x7684;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x91CD;&#x65B0;&#x914D;&#x7F6E;dnsmasq,&#x7136;&#x540E;&#x91CD;&#x542F;dnsmasq. &#x6240;&#x4EE5;dnsmasq&#x5C31;&#x80FD;&#x591F;&#x89E3;&#x6790;&#x96C6;&#x7FA4;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x57DF;&#x540D;&#x5566;&#x3002;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x968F;&#x7740;&#x8282;&#x70B9;&#x7684;&#x589E;&#x52A0;&#x4F1A;&#x8017;&#x65F6;&#x66F4;&#x4E45;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x82E5;&#x914D;&#x7F6E;&#x7684;Hadoop&#x8282;&#x70B9;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x5219;&#x5728;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x540E;&#x9700;&#x8981;&#x6D4B;&#x8BD5;serf&#x662F;&#x5426;&#x53D1;&#x73B0;&#x4E86;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;dns&#x662F;&#x5426;&#x80FD;&#x591F;&#x89E3;&#x6790;&#x6240;&#x6709;&#x8282;&#x70B9;&#x57DF;&#x540D;&#x3002;&#x7A0D;&#x7B49;&#x7247;&#x523B;&#x624D;&#x80FD;&#x542F;&#x52A8;Hadoop&#x3002;&#x8FD9;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x7531;SequenceIQ&#x516C;&#x53F8;&#x63D0;&#x51FA;&#x7684;&#xFF0C;&#x8BE5;&#x516C;&#x53F8;&#x4E13;&#x6CE8;&#x4E8E;&#x5C06;Hadoop&#x8FD0;&#x884C;&#x5728;Docker&#x4E2D;&#x3002;&#x8BF7;&#x53C2;&#x8003;&#x8FD9;&#x4E2A;PPT&#xFF1A;<a href=\"http://www.slideshare.net/JanosMatyas/docker-based-hadoop-provisioning\">Docker-based Hadoop Provisioning</a></p>\n<h4 id=\"hadoop-base&#x955C;&#x50CF;\"><a href=\"#hadoop-base&#x955C;&#x50CF;\" class=\"headerlink\" title=\"hadoop-base&#x955C;&#x50CF;\"></a><strong>hadoop-base&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;serf-dnsmasq&#x955C;&#x50CF;</li>\n<li>&#x5B89;&#x88C5;JDK(openjdk)</li>\n<li>&#x5B89;&#x88C5;openssh-server, &#x914D;&#x7F6E;&#x65E0;&#x5BC6;&#x7801;ssh</li>\n<li>&#x5B89;&#x88C5;vim&#xFF1A;&#x4ECB;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x6109;&#x5FEB;&#x5730;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x6572;&#x4EE3;&#x7801;&#x4E86;:)</li>\n<li>&#x5B89;&#x88C5;Hadoop 2.3.0: &#x5B89;&#x88C5;&#x7F16;&#x8BD1;&#x8FC7;&#x7684;hadoop &#xFF08;2.5.2&#xFF0C; 2.6.0&#xFF0C; 2.7.0 &#x90FD;&#x6BD4;2.3.0&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x61D2;&#x5F97;&#x5347;&#x7EA7;&#x4E86;&#xFF09;</li>\n</ul>\n<p>&#x7F16;&#x8BD1;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x8BF7;&#x53C2;&#x8003;&#x6211;&#x7684;&#x535A;&#x5BA2;&#xFF1A;<a href=\"http://www.cnblogs.com/kiwenlau/p/4227204.html\"><a href=\"http://www.cnblogs.com/kiwenlau/p/4227204.html\">Hadoop 2.30 &#x5728;Ubuntu 14.04 &#x4E2D;&#x7F16;&#x8BD1;</a></a></p>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5F00;&#x53D1;&#x6211;&#x7684;hadoop-base, &#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7F16;&#x8BD1;&#x8FC7;&#x7684;hadoop-2.3.0&#x5B89;&#x88C5;&#x5305;&#xFF0C;&#x653E;&#x5230;hadoop-cluster-docker/hadoop-base/files&#x76EE;&#x5F55;&#x5185;&#x3002;&#x6211;&#x7F16;&#x8BD1;&#x7684;64&#x4F4D;hadoop-2.3.0&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"http://pan.baidu.com/s/1sjFRaFz\">hadoop-2.3.0</a></p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x8FD8;&#x7F16;&#x8BD1;&#x4E86;64&#x4F4D;&#x7684;hadoop 2.5.2, 2.6.0, 2.7.0, &#x5176;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x5982;&#x4E0B;&#xFF1A;</p>\n<ul>\n<li><a href=\"http://pan.baidu.com/s/1sjFRaFz\">hadoop-2.3.0</a></li>\n<li><a href=\"http://pan.baidu.com/s/1jGw24aa\">hadoop-2.5.2</a></li>\n<li><a href=\"http://pan.baidu.com/s/1eQgvF2M\">hadoop-2.6.0</a></li>\n<li><a href=\"http://pan.baidu.com/s/1c0HD0Nu\">hadoop-2.7.0</a></li>\n</ul>\n<h4 id=\"hadoop-master&#x955C;&#x50CF;\"><a href=\"#hadoop-master&#x955C;&#x50CF;\" class=\"headerlink\" title=\"hadoop-master&#x955C;&#x50CF;\"></a><strong>hadoop-master&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;hadoop-base&#x955C;&#x50CF;</li>\n<li>&#x914D;&#x7F6E;hadoop&#x7684;master&#x8282;&#x70B9;</li>\n<li>&#x683C;&#x5F0F;&#x5316;namenode</li>\n</ul>\n<p>&#x8FD9;&#x4E00;&#x6B65;&#x9700;&#x8981;&#x914D;&#x7F6E;slaves&#x6587;&#x4EF6;&#xFF0C;&#x800C;slaves&#x6587;&#x4EF6;&#x9700;&#x8981;&#x5217;&#x51FA;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x57DF;&#x540D;&#x6216;&#x8005;IP&#x3002;&#x56E0;&#x6B64;&#xFF0C;Hadoop&#x8282;&#x70B9;&#x6570;&#x76EE;&#x4E0D;&#x540C;&#x65F6;&#xFF0C;slaves&#x6587;&#x4EF6;&#x81EA;&#x7136;&#x4E5F;&#x4E0D;&#x4E00;&#x6837;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x66F4;&#x6539;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;slaves&#x6587;&#x4EF6;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;&#x3002;&#x6211;&#x7F16;&#x5199;&#x4E86;&#x4E00;&#x4E2A;resize-cluster.sh&#x811A;&#x672C;&#x81EA;&#x52A8;&#x5316;&#x8FD9;&#x4E00;&#x8FC7;&#x7A0B;&#x3002;&#x4EC5;&#x9700;&#x7ED9;&#x5B9A;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x4F5C;&#x4E3A;&#x811A;&#x672C;&#x53C2;&#x6570;&#x5C31;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5B9E;&#x73B0;Hadoop&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x6570;&#x76EE;&#x7684;&#x66F4;&#x6539;&#x3002;&#x7531;&#x4E8E;hadoop-master&#x955C;&#x50CF;&#x4EC5;&#x4EC5;&#x505A;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E5F;&#x65E0;&#x9700;&#x4E0B;&#x8F7D;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#xFF0C;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x975E;&#x5E38;&#x5FEB;&#xFF0C;1&#x5206;&#x949F;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;</p>\n<h4 id=\"hadoop-slave&#x955C;&#x50CF;\"><a href=\"#hadoop-slave&#x955C;&#x50CF;\" class=\"headerlink\" title=\"hadoop-slave&#x955C;&#x50CF;\"></a><strong>hadoop-slave&#x955C;&#x50CF;</strong></h4><ul>\n<li>&#x57FA;&#x4E8E;hadoop-base&#x955C;&#x50CF;</li>\n<li>&#x914D;&#x7F6E;hadoop&#x7684;slave&#x8282;&#x70B9;</li>\n</ul>\n<h4 id=\"&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;\"><a href=\"#&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;\" class=\"headerlink\" title=\"&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;\"></a><strong>&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x5206;&#x6790;</strong></h4><p>&#x4E0B;&#x8868;&#x4E3A;sudo docker images&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;</p>\n<table>\n<thead>\n<tr>\n<th>REPOSITORY</th>\n<th>TAG</th>\n<th>IMAGE ID</th>\n<th>CREATED</th>\n<th>VIRTUAL SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n<tr>\n<td>ubuntu</td>\n<td>15.04</td>\n<td>bd94ae587483</td>\n<td>3 weeks ago</td>\n<td>131.3 MB</td>\n</tr>\n</tbody>\n</table>\n<p>&#x6613;&#x77E5;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x7ED3;&#x8BBA;&#xFF1A;</p>\n<ul>\n<li>serf-dnsmasq&#x955C;&#x50CF;&#x5728;ubuntu:15.04&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E86;75.4MB</li>\n<li>hadoop-base&#x955C;&#x50CF;&#x5728;serf-dnsmasq&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E86;570.7MB</li>\n<li>hadoop-master&#x548C;hadoop-slave&#x955C;&#x50CF;&#x5728;hadoop-base&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x5927;&#x5C0F;&#x51E0;&#x4E4E;&#x6CA1;&#x6709;&#x589E;&#x52A0;</li>\n</ul>\n<p>&#x4E0B;&#x8868;&#x4E3A;docker history index.alauda.cn/kiwenlau/hadoop-base:0.1.0&#x547D;&#x4EE4;&#x7684;&#x90E8;&#x5206;&#x8FD0;&#x884C;&#x7ED3;&#x679C;</p>\n<table>\n<thead>\n<tr>\n<th>IMAGE</th>\n<th>CREATED</th>\n<th>CREATED BY</th>\n<th>SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2039b9b81146</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c #(nop) ADD   multi:a93c971a49514e787</td>\n<td>158.5 MB</td>\n</tr>\n<tr>\n<td>cdb620312f30</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c apt-get install -y openjdk-7-jdk</td>\n<td>324.6 MB</td>\n</tr>\n<tr>\n<td>da7d10c790c1</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c apt-get install -y openssh-server</td>\n<td>87.58 MB</td>\n</tr>\n<tr>\n<td>c65cb568defc</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c curl -Lso serf.zip <a href=\"https://dl.bint\">https://dl.bint</a></td>\n<td>14.46 MB</td>\n</tr>\n<tr>\n<td>3e22b3d72e33</td>\n<td>44 hours ago</td>\n<td>/bin/sh -c apt-get update &amp;&amp; apt-get install</td>\n<td>60.89 MB</td>\n</tr>\n<tr>\n<td>b68f8c8d2140</td>\n<td>3 weeks ago</td>\n<td>/bin/sh -c #(nop) ADD file:d90f7467c470bfa9a3</td>\n<td>131.3 MB</td>\n</tr>\n</tbody>\n</table>\n<p>&#x53EF;&#x77E5;</p>\n<ul>\n<li>&#x57FA;&#x7840;&#x955C;&#x50CF;ubuntu:15.04&#x4E3A;131.3MB</li>\n<li>&#x5B89;&#x88C5;openjdk&#x9700;&#x8981;324.6MB</li>\n<li>&#x5B89;&#x88C5;hadoop&#x9700;&#x8981;158.5MB</li>\n<li>ubuntu,openjdk&#x4E0E;hadoop&#x5747;&#x4E3A;&#x955C;&#x50CF;&#x6240;&#x5FC5;&#x987B;&#xFF0C;&#x4E09;&#x8005;&#x4E00;&#x5171;&#x5360;&#x4E86;:614.4MB</li>\n</ul>\n<h4 id=\"&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;\"><a href=\"#&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;\" class=\"headerlink\" title=\"&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;\"></a><strong>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x6240;&#x5F00;&#x53D1;&#x7684;hadoop&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#xFF0C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x5F88;&#x5C0F;&#x4E86;</strong></h4><p>&#x4E0B;&#x56FE;&#x663E;&#x793A;&#x4E86;&#x9879;&#x76EE;&#x7684;Docker&#x955C;&#x50CF;&#x7ED3;&#x6784;&#xFF1A;</p>\n<p><img src=\"/2015/06/08/150608-hadoop-cluster-docker/image-architecture.png\" width=\"500\"></p>\n<h2 id=\"&#x4E09;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E09;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E09;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E09;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x62C9;&#x53D6;&#x955C;&#x50CF;\"><a href=\"#1-&#x62C9;&#x53D6;&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x62C9;&#x53D6;&#x955C;&#x50CF;\"></a>1. <strong>&#x62C9;&#x53D6;&#x955C;&#x50CF;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/hadoop-master:0.1.0</div><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/hadoop-slave:0.1.0</div><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/hadoop-base:0.1.0</div><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/serf-dnsmasq:0.1.0</div></pre></td></tr></table></figure>\n<ul>\n<li>3~5&#x5206;&#x949F;OK~</li>\n</ul>\n<p><em>&#x67E5;&#x770B;&#x4E0B;&#x8F7D;&#x7684;&#x955C;&#x50CF;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker images</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<table>\n<thead>\n<tr>\n<th>REPOSITORY</th>\n<th>TAG</th>\n<th>IMAGE ID</th>\n<th>CREATED</th>\n<th>VIRTUAL SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>hadoop-base&#x955C;&#x50CF;&#x662F;&#x57FA;&#x4E8E;serf-dnsmasq&#x955C;&#x50CF;&#x7684;&#xFF0C;hadoop-slave&#x955C;&#x50CF;&#x548C;hadoop-master&#x955C;&#x50CF;&#x90FD;&#x662F;&#x57FA;&#x4E8E;hadoop-base&#x955C;&#x50CF;</li>\n<li>&#x6240;&#x4EE5;&#x5176;&#x5B9E;4&#x4E2A;&#x955C;&#x50CF;&#x4E00;&#x5171;&#x4E5F;&#x5C31;777.4MB:)</li>\n</ul>\n<h4 id=\"2-&#x4FEE;&#x6539;&#x955C;&#x50CF;tag\"><a href=\"#2-&#x4FEE;&#x6539;&#x955C;&#x50CF;tag\" class=\"headerlink\" title=\"2. &#x4FEE;&#x6539;&#x955C;&#x50CF;tag\"></a><strong>2. &#x4FEE;&#x6539;&#x955C;&#x50CF;tag</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker tag d63869855c03 kiwenlau/hadoop-slave:0.1.0</div><div class=\"line\">sudo docker tag 7c9d32ede450 kiwenlau/hadoop-master:0.1.0</div><div class=\"line\">sudo docker tag 5571bd5de58e kiwenlau/hadoop-base:0.1.0</div><div class=\"line\">sudo docker tag 09ed89c24ee8 kiwenlau/serf-dnsmasq:0.1.0</div></pre></td></tr></table></figure>\n<p><em>&#x67E5;&#x770B;&#x4FEE;&#x6539;tag&#x540E;&#x955C;&#x50CF;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker images</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<table>\n<thead>\n<tr>\n<th>REPOSITORY</th>\n<th>TAG</th>\n<th>IMAGE ID</th>\n<th>CREATED</th>\n<th>VIRTUAL SIZE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/hadoop-slave</td>\n<td>0.1.0</td>\n<td>d63869855c03</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/hadoop-master</td>\n<td>0.1.0</td>\n<td>7c9d32ede450</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/hadoop-base</td>\n<td>0.1.0</td>\n<td>5571bd5de58e</td>\n<td>17 hours ago</td>\n<td>777.4 MB</td>\n</tr>\n<tr>\n<td>kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n<tr>\n<td>index.alauda.cn/kiwenlau/serf-dnsmasq</td>\n<td>0.1.0</td>\n<td>09ed89c24ee8</td>\n<td>17 hours ago</td>\n<td>206.7 MB</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>&#x4E4B;&#x6240;&#x4EE5;&#x8981;&#x4FEE;&#x6539;&#x955C;&#x50CF;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x9ED8;&#x8BA4;&#x662F;&#x5C06;&#x955C;&#x50CF;&#x4E0A;&#x4F20;&#x5230;Dockerhub, &#x56E0;&#x6B64;Dokerfile&#x4EE5;&#x53CA;shell&#x811A;&#x672C;&#x4E2D;&#x5F97;&#x955C;&#x50CF;&#x540D;&#x79F0;&#x90FD;&#x662F;&#x6CA1;&#x6709;alauada&#x524D;&#x7F00;&#x7684;&#xFF0C;sorry for this&#x2026;.&#x4E0D;&#x8FC7;&#x6539;tag&#x8FD8;&#x662F;&#x5F88;&#x5FEB;&#x6EF4;</li>\n<li>&#x82E5;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x6211;&#x5728;DockerHub&#x4E2D;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x81EA;&#x7136;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;tag&#x2026;&#x4E0D;&#x8FC7;Alauda&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#x7684;&#x54C8;~</li>\n</ul>\n<h4 id=\"3-&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;\"><a href=\"#3-&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"3.&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;\"></a><strong>3.&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E3A;&#x4E86;&#x9632;&#x6B62;Github&#x88AB;XX, &#x6211;&#x628A;&#x4EE3;&#x7801;&#x5BFC;&#x5165;&#x5230;&#x4E86;&#x5F00;&#x6E90;&#x4E2D;&#x56FD;&#x7684;git&#x4ED3;&#x5E93;</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">clone</span> http://git.oschina.net/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"><a href=\"#4-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"4. &#x8FD0;&#x884C;&#x5BB9;&#x5668;\"></a><strong>4. &#x8FD0;&#x884C;&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> hadoop-cluster-docker</div><div class=\"line\">./start-container.sh</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">start master container...</div><div class=\"line\">start slave1 container...</div><div class=\"line\">start slave2 container...</div><div class=\"line\">root@master:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E00;&#x5171;&#x5F00;&#x542F;&#x4E86;3&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;1&#x4E2A;master, 2&#x4E2A;slave</li>\n<li>&#x5F00;&#x542F;&#x5BB9;&#x5668;&#x540E;&#x5C31;&#x8FDB;&#x5165;&#x4E86;master&#x5BB9;&#x5668;root&#x7528;&#x6237;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#xFF08;/root&#xFF09;</li>\n</ul>\n<p><em>&#x67E5;&#x770B;master&#x7684;root&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;&#x7684;&#x6587;&#x4EF6;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">ls</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">hdfs  run-wordcount.sh\tserf_log  start-hadoop.sh  start-ssh-serf.sh</div></pre></td></tr></table></figure>\n<ul>\n<li>start-hadoop.sh&#x662F;&#x5F00;&#x542F;hadoop&#x7684;shell&#x811A;&#x672C;</li>\n<li>run-wordcount.sh&#x662F;&#x8FD0;&#x884C;wordcount&#x7684;shell&#x811A;&#x672C;&#xFF0C;&#x53EF;&#x4EE5;&#x6D4B;&#x8BD5;&#x955C;&#x50CF;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;</li>\n</ul>\n<h4 id=\"5-&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;-&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;\"><a href=\"#5-&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;-&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"5.&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;(&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;)\"></a><strong>5.&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;(&#x6B64;&#x65F6;&#x5DF2;&#x8FDB;&#x5165;master&#x5BB9;&#x5668;)</strong></h4><p><em>&#x67E5;&#x770B;hadoop&#x96C6;&#x7FA4;&#x6210;&#x5458;</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">serf members</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">master.kiwenlau.com  172.17.0.65:7946  alive</div><div class=\"line\">slave1.kiwenlau.com  172.17.0.66:7946  alive</div><div class=\"line\">slave2.kiwenlau.com  172.17.0.67:7946  alive</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x82E5;&#x7ED3;&#x679C;&#x7F3A;&#x5C11;&#x8282;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x7A0D;&#x7B49;&#x7247;&#x523B;&#xFF0C;&#x518D;&#x6267;&#x884C;&#x201C;serf members&#x201D;&#x547D;&#x4EE4;&#x3002;&#x56E0;&#x4E3A;serf agent&#x9700;&#x8981;&#x65F6;&#x95F4;&#x53D1;&#x73B0;&#x6240;&#x6709;&#x8282;&#x70B9;&#x3002;</li>\n</ul>\n<p><em>&#x6D4B;&#x8BD5;ssh</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">ssh slave2.kiwenlau.com</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">Warning: Permanently added <span class=\"string\">&apos;slave2.kiwenlau.com,172.17.0.67&apos;</span> (ECDSA) to the list of known hosts.</div><div class=\"line\">Welcome to Ubuntu 15.04 (GNU/Linux 3.13.0-53-generic x86_64)</div><div class=\"line\">* Documentation:  https://help.ubuntu.com/</div><div class=\"line\">The programs included with the Ubuntu system are free software;</div><div class=\"line\">the exact distribution terms <span class=\"keyword\">for</span> each program are described <span class=\"keyword\">in</span> the</div><div class=\"line\">individual files <span class=\"keyword\">in</span> /usr/share/doc/*/copyright.</div><div class=\"line\">Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by</div><div class=\"line\">applicable law.</div><div class=\"line\">root@slave2:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<p><em>&#x9000;&#x51FA;slave2</em></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">exit</span></div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">logout</span></div><div class=\"line\">Connection to slave2.kiwenlau.com closed.</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x82E5;ssh&#x5931;&#x8D25;&#xFF0C;&#x8BF7;&#x7A0D;&#x7B49;&#x7247;&#x523B;&#x518D;&#x6D4B;&#x8BD5;&#xFF0C;&#x56E0;&#x4E3A;dnsmasq&#x7684;dns&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x9700;&#x8981;&#x65F6;&#x95F4;&#x3002;</li>\n<li>&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x542F;Hadoop&#x96C6;&#x7FA4;&#x4E86;&#xFF01;&#x5176;&#x5B9E;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#xFF0C;&#x5F00;&#x542F;&#x5BB9;&#x5668;&#x540E;&#x8010;&#x5FC3;&#x7B49;&#x5F85;&#x4E00;&#x5206;&#x949F;&#x5373;&#x53EF;&#xFF01;</li>\n</ul>\n<h4 id=\"6-&#x5F00;&#x542F;hadoop\"><a href=\"#6-&#x5F00;&#x542F;hadoop\" class=\"headerlink\" title=\"6. &#x5F00;&#x542F;hadoop\"></a><strong>6. &#x5F00;&#x542F;hadoop</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./start-hadoop.sh</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E0A;&#x4E00;&#x6B65;ssh&#x5230;slave2&#x4E4B;&#x540E;&#xFF0C;&#x8BF7;&#x8BB0;&#x5F97;&#x56DE;&#x5230;master&#x554A;!!&#xFF01;</li>\n<li>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x592A;&#x591A;&#xFF0C;&#x5FFD;&#x7565;&#x2026;.</li>\n<li>hadoop&#x7684;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x53D6;&#x51B3;&#x4E8E;&#x673A;&#x5668;&#x6027;&#x80FD;&#x2026;.</li>\n</ul>\n<h4 id=\"7-&#x8FD0;&#x884C;wordcount\"><a href=\"#7-&#x8FD0;&#x884C;wordcount\" class=\"headerlink\" title=\"7. &#x8FD0;&#x884C;wordcount\"></a><strong>7. &#x8FD0;&#x884C;wordcount</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./run-wordcount.sh</div></pre></td></tr></table></figure>\n<p><em>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</em><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">input file1.txt:</div><div class=\"line\">Hello Hadoop</div><div class=\"line\">input file2.txt:</div><div class=\"line\">Hello Docker</div><div class=\"line\">wordcount output:</div><div class=\"line\">Docker\t1</div><div class=\"line\">Hadoop\t1</div><div class=\"line\">Hello\t2</div></pre></td></tr></table></figure></p>\n<ul>\n<li>wordcount&#x7684;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x53D6;&#x51B3;&#x4E8E;&#x673A;&#x5668;&#x6027;&#x80FD;&#x2026;.</li>\n</ul>\n<h2 id=\"&#x56DB;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x56DB;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x56DB;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x56DB;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"><a href=\"#1-&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\" class=\"headerlink\" title=\"1. &#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"></a><strong>1. &#x51C6;&#x5907;&#x5DE5;&#x4F5C;</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;1~3&#xFF1A;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#xFF0C;&#x4FEE;&#x6539;tag&#xFF0C;&#x4E0B;&#x8F7D;&#x6E90;&#x4EE3;&#x7801;</li>\n<li>&#x6CE8;&#x610F;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E0D;&#x4E0B;&#x8F7D;serf-dnsmasq, &#x4F46;&#x662F;&#x8BF7;&#x6700;&#x597D;&#x4E0B;&#x8F7D;hadoop-base&#xFF0C;&#x56E0;&#x4E3A;hadoop-master&#x662F;&#x57FA;&#x4E8E;hadoop-base&#x6784;&#x5EFA;&#x7684;</li>\n</ul>\n<h4 id=\"2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;\"><a href=\"#2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;\" class=\"headerlink\" title=\"2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;\"></a><strong>2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;hadoop-master&#x955C;&#x50CF;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./resize-cluster.sh 5</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E0D;&#x8981;&#x62C5;&#x5FC3;&#xFF0C;1&#x5206;&#x949F;&#x5C31;&#x80FD;&#x641E;&#x5B9A;</li>\n<li>&#x4F60;&#x53EF;&#x4EE5;&#x4E3A;resize-cluster.sh&#x811A;&#x672C;&#x8BBE;&#x4E0D;&#x540C;&#x7684;&#x6B63;&#x6574;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x6570;1, 2, 3, 4, 5, 6&#x2026;</li>\n</ul>\n<h4 id=\"3-&#x542F;&#x52A8;&#x5BB9;&#x5668;\"><a href=\"#3-&#x542F;&#x52A8;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"3. &#x542F;&#x52A8;&#x5BB9;&#x5668;\"></a><strong>3. &#x542F;&#x52A8;&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./start-container.sh 5</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4F60;&#x53EF;&#x4EE5;&#x4E3A;resize-cluster.sh&#x811A;&#x672C;&#x8BBE;&#x4E0D;&#x540C;&#x7684;&#x6B63;&#x6574;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x6570;1, 2, 3, 4, 5, 6&#x2026;</li>\n<li>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5462;&#xFF0C;&#x6700;&#x597D;&#x8FD8;&#x662F;&#x5F97;&#x548C;&#x4E0A;&#x4E00;&#x6B65;&#x7684;&#x53C2;&#x6570;&#x4E00;&#x81F4;:)</li>\n<li>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5982;&#x679C;&#x6BD4;&#x4E0A;&#x4E00;&#x6B65;&#x7684;&#x53C2;&#x6570;&#x5927;&#xFF0C;&#x4F60;&#x591A;&#x542F;&#x52A8;&#x7684;&#x8282;&#x70B9;&#xFF0C;Hadoop&#x4E0D;&#x8BA4;&#x8BC6;&#x5B83;&#x4EEC;..</li>\n<li>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5982;&#x679C;&#x6BD4;&#x4E0A;&#x4E00;&#x6B65;&#x7684;&#x53C2;&#x6570;&#x5C0F;&#xFF0C;Hadoop&#x89C9;&#x5F97;&#x5C11;&#x542F;&#x52A8;&#x7684;&#x8282;&#x70B9;&#x6302;&#x6389;&#x4E86;..</li>\n</ul>\n<h4 id=\"4-&#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;\"><a href=\"#4-&#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;\" class=\"headerlink\" title=\"4. &#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;\"></a><strong>4. &#x6D4B;&#x8BD5;&#x5DE5;&#x4F5C;</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E09;&#x90E8;&#x5206;5~7&#xFF1A;&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#xFF0C;&#x5F00;&#x542F;Hadoop&#xFF0C;&#x8FD0;&#x884C;wordcount</li>\n<li>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x82E5;&#x8282;&#x70B9;&#x589E;&#x52A0;&#xFF0C;&#x8BF7;&#x52A1;&#x5FC5;&#x5148;&#x6D4B;&#x8BD5;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5F00;&#x542F;Hadoop, &#x56E0;&#x4E3A;serf&#x53EF;&#x80FD;&#x8FD8;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;&#x800C;dnsmasq&#x7684;DNS&#x670D;&#x52A1;&#x5668;&#x8868;&#x793A;&#x8FD8;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x597D;&#x670D;&#x52A1;</li>\n<li>&#x6D4B;&#x8BD5;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x53D6;&#x51B3;&#x4E8E;&#x673A;&#x5668;&#x6027;&#x80FD;&#x2026;.</li>\n</ul>"},{"title":"DockerKuberntes","date":"2015-11-28T01:00:00.000Z","_content":"\n**:** DockerKuberntesKubernetes\n\n**GitHub:**\n- [kiwenlau/single-kubernetes-docker](https://github.com/kiwenlau/single-kubernetes-docker)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2015-11-28](http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/)\n\n## . Kubernetes\n\n2006GoogleRohit SethCgroupsCgroupsCPUGoogleGoogleGmailMapReduceGoogle--Borg\n\n2014Google--KubernetesBorgDockerKuberneteesMesosYARNDocker\n\nKubernetesMaster/SlaveKubernetes\n\n|      |                |                                            |\n| ------- |:-----------------: | :--------------------------------------------:|\n| Master  | apiserver          | RESTful                                |\n| Master  | scheduler          | podSlave                   |\n| Master  | controller-manager | Master                           |\n| Master  | etde               | pod                 |\n| Slave   | kubelet            | Pod                       |\n| Slave   | proxy              | ServicePod  |\n|    | kubectl            | apiserverPod          |\n\n\n## . kiwenlau/kubernetes\n\nUbuntuKubernetes7KubernetesKuberenetesKubernetesKubernetesKubernetesKubernetesdocker linkapiserverectd4001schedulercontroller-managerkubeletproxykubectlapiserver8080\n\n<img src=\"151128-single-kubernetes-docker/kubernetes-multiple-docker.png\" width = \"500\"/>\n\n: kubectlapiserverPod; schedulerPodkubeletkubeletdockerDocker deamon; Docker deamon\n\nDocker deamonUbuntuDocker daemonKubernetesUbuntudocker socketvolumekubeletkubeletdockerDocker daemon\n\nkubernetes/usr/local/binDockerfileKubernetesKubernetesKubernetes\n\nkiwenlau/kubernetes:1.0.7:\n\n- ubuntu: 14.04\n- Kubernetes: 1.0.7\n- ectd: 2.2.1\n\nUbuntu:\n\n- ubuntu: 14.04.3 LTS\n- kernel: 3.16.0-30-generic\n- docker: 1.9.1\n\n\n\n## . \n\n#### **1. Docker**\n\nubuntu 14.04Docker: \n\n```\ncurl -fLsS https://get.docker.com/ | sh\n```\n\n: [https://docs.docker.com/](https://docs.docker.com/)\n\n#### **2. Docker**\n\nkiwenlau/kubernetes:1.07Docker[](http://www.alauda.cn/)\n\n```\nsudo docker pull index.alauda.cn/kiwenlau/kubernetes:1.0.7\nsudo docker pull index.alauda.cn/kiwenlau/etcd:v2.2.1\nsudo docker pull index.alauda.cn/kiwenlau/nginx:1.9.7\nsudo docker pull index.alauda.cn/kiwenlau/pause:0.8.0\n```\n\n#### **3. Kubernetes**\n\n```sh\ngit clone https://github.com/kiwenlau/single-kubernetes-docker\ncd single-kubernetes-docker/\nsudo chmod +x start-kubernetes-alauda.sh stop-kubernetes.sh\nsudo ./start-kubernetes-alauda.sh\n```\n\nkubectlkubeclt\"exit\"\"sudo docker exec -it kubectl bash\"kubectl\n\n\n#### **4. Kubernetes**\n\nnginx pod\n\n```\nchmod +x test-kubernetes-alauda.sh\n./test-kubernetes-alauda.sh \n```\n\n\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\n  body {\n    width: 35em;\n    margin: 0 auto;\n    font-family: Tahoma, Verdana, Arial, sans-serif;\n  }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href=\"http://nginx.org/\">nginx.org</a>.<br/>\nCommercial support is available at\n<a href=\"http://nginx.com/\">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n```\n\n\n## . \n\n1. [meteorhacks/hyperkube](https://github.com/meteorhacks/hyperkube)\n2. [meteorhacks/kube-init](https://github.com/meteorhacks/kube-init)\n3. [Kubernetes: The Future of Cloud Hosting](https://meteorhacks.com/learn-kubernetes-the-future-of-the-cloud)\n4. [Kubernetes ](http://weibo.com/p/1001603912843031387951?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io)\n5. [An Introduction to Kubernetes](https://www.digitalocean.com/community/tutorials/an-introduction-to-kubernetes)\n\n","source":"_posts/2015/11/28/151128-single-kubernetes-docker.md","raw":"title: DockerKuberntes\n\ndate: 2015-11-28 09:00:00\n\ntags: [Docker, Kubernetes]\n\n---\n\n**:** DockerKuberntesKubernetes\n\n**GitHub:**\n- [kiwenlau/single-kubernetes-docker](https://github.com/kiwenlau/single-kubernetes-docker)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2015-11-28](http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/)\n\n## . Kubernetes\n\n2006GoogleRohit SethCgroupsCgroupsCPUGoogleGoogleGmailMapReduceGoogle--Borg\n\n2014Google--KubernetesBorgDockerKuberneteesMesosYARNDocker\n\nKubernetesMaster/SlaveKubernetes\n\n|      |                |                                            |\n| ------- |:-----------------: | :--------------------------------------------:|\n| Master  | apiserver          | RESTful                                |\n| Master  | scheduler          | podSlave                   |\n| Master  | controller-manager | Master                           |\n| Master  | etde               | pod                 |\n| Slave   | kubelet            | Pod                       |\n| Slave   | proxy              | ServicePod  |\n|    | kubectl            | apiserverPod          |\n\n\n## . kiwenlau/kubernetes\n\nUbuntuKubernetes7KubernetesKuberenetesKubernetesKubernetesKubernetesKubernetesdocker linkapiserverectd4001schedulercontroller-managerkubeletproxykubectlapiserver8080\n\n<img src=\"151128-single-kubernetes-docker/kubernetes-multiple-docker.png\" width = \"500\"/>\n\n: kubectlapiserverPod; schedulerPodkubeletkubeletdockerDocker deamon; Docker deamon\n\nDocker deamonUbuntuDocker daemonKubernetesUbuntudocker socketvolumekubeletkubeletdockerDocker daemon\n\nkubernetes/usr/local/binDockerfileKubernetesKubernetesKubernetes\n\nkiwenlau/kubernetes:1.0.7:\n\n- ubuntu: 14.04\n- Kubernetes: 1.0.7\n- ectd: 2.2.1\n\nUbuntu:\n\n- ubuntu: 14.04.3 LTS\n- kernel: 3.16.0-30-generic\n- docker: 1.9.1\n\n\n\n## . \n\n#### **1. Docker**\n\nubuntu 14.04Docker: \n\n```\ncurl -fLsS https://get.docker.com/ | sh\n```\n\n: [https://docs.docker.com/](https://docs.docker.com/)\n\n#### **2. Docker**\n\nkiwenlau/kubernetes:1.07Docker[](http://www.alauda.cn/)\n\n```\nsudo docker pull index.alauda.cn/kiwenlau/kubernetes:1.0.7\nsudo docker pull index.alauda.cn/kiwenlau/etcd:v2.2.1\nsudo docker pull index.alauda.cn/kiwenlau/nginx:1.9.7\nsudo docker pull index.alauda.cn/kiwenlau/pause:0.8.0\n```\n\n#### **3. Kubernetes**\n\n```sh\ngit clone https://github.com/kiwenlau/single-kubernetes-docker\ncd single-kubernetes-docker/\nsudo chmod +x start-kubernetes-alauda.sh stop-kubernetes.sh\nsudo ./start-kubernetes-alauda.sh\n```\n\nkubectlkubeclt\"exit\"\"sudo docker exec -it kubectl bash\"kubectl\n\n\n#### **4. Kubernetes**\n\nnginx pod\n\n```\nchmod +x test-kubernetes-alauda.sh\n./test-kubernetes-alauda.sh \n```\n\n\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\n  body {\n    width: 35em;\n    margin: 0 auto;\n    font-family: Tahoma, Verdana, Arial, sans-serif;\n  }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href=\"http://nginx.org/\">nginx.org</a>.<br/>\nCommercial support is available at\n<a href=\"http://nginx.com/\">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n```\n\n\n## . \n\n1. [meteorhacks/hyperkube](https://github.com/meteorhacks/hyperkube)\n2. [meteorhacks/kube-init](https://github.com/meteorhacks/kube-init)\n3. [Kubernetes: The Future of Cloud Hosting](https://meteorhacks.com/learn-kubernetes-the-future-of-the-cloud)\n4. [Kubernetes ](http://weibo.com/p/1001603912843031387951?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io)\n5. [An Introduction to Kubernetes](https://www.digitalocean.com/community/tutorials/an-introduction-to-kubernetes)\n\n","slug":"2015/11/28/151128-single-kubernetes-docker","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtk4000571fyxra9l595","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Kuberntes&#x7684;&#x65B9;&#x6CD5;&#xFF0C;Kubernetes&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x5747;&#x8FD0;&#x884C;&#x4E8E;&#x5355;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/single-kubernetes-docker\" target=\"_blank\" rel=\"external\">kiwenlau/single-kubernetes-docker</a></li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/\">2015-11-28</a></li>\n</ul>\n<h2 id=\"&#x4E00;-Kubernetes&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-Kubernetes&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. Kubernetes&#x7B80;&#x4ECB;\"></a>&#x4E00;. Kubernetes&#x7B80;&#x4ECB;</h2><p>2006&#x5E74;&#xFF0C;Google&#x5DE5;&#x7A0B;&#x5E08;Rohit Seth&#x53D1;&#x8D77;&#x4E86;Cgroups&#x5185;&#x6838;&#x9879;&#x76EE;&#x3002;Cgroups&#x662F;&#x5BB9;&#x5668;&#x5B9E;&#x73B0;CPU&#xFF0C;&#x5185;&#x5B58;&#x7B49;&#x8D44;&#x6E90;&#x9694;&#x79BB;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x7531;&#x6B64;&#x53EF;&#x89C1;Google&#x5176;&#x5B9E;&#x5F88;&#x65E9;&#x5C31;&#x5F00;&#x59CB;&#x6D89;&#x8DB3;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x3002;&#x800C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;Google&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x5DF2;&#x7ECF;&#x957F;&#x8FBE;&#x5341;&#x5E74;&#xFF0C;&#x76EE;&#x524D;&#x8C37;&#x6B4C;&#x6240;&#x6709;&#x4E1A;&#x52A1;&#x5305;&#x62EC;&#x641C;&#x7D22;&#xFF0C;Gmail&#xFF0C;MapReduce&#x7B49;&#x5747;&#x8FD0;&#x884C;&#x5728;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#x3002;Google&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x7684;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x2013;Borg&#xFF0C;&#x582A;&#x79F0;&#x5176;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x7684;&#x745E;&#x58EB;&#x519B;&#x5200;&#x3002;</p>\n<p>2014&#x5E74;&#xFF0C;Google&#x53D1;&#x8D77;&#x4E86;&#x5F00;&#x6E90;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x2013;Kubernetes&#xFF0C;&#x5176;&#x8BBE;&#x8BA1;&#x4E4B;&#x521D;&#x5C31;&#x5438;&#x53D6;&#x4E86;Borg&#x7684;&#x7ECF;&#x9A8C;&#x548C;&#x6559;&#x8BAD;&#xFF0C;&#x5E76;&#x539F;&#x751F;&#x652F;&#x6301;&#x4E86;Docker&#x3002;&#x56E0;&#x6B64;&#xFF0C;Kubernetees&#x4E0E;&#x8F83;&#x65E9;&#x7684;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;Mesos&#x548C;YARN&#x76F8;&#x6BD4;&#xFF0C;&#x5BF9;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x5C24;&#x5176;&#x662F;Docker&#x7684;&#x652F;&#x6301;&#x66F4;&#x52A0;&#x539F;&#x751F;&#xFF0C;&#x540C;&#x65F6;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x5F3A;&#x5927;&#x7684;&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x8D44;&#x6E90;&#x8C03;&#x5EA6;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x9AD8;&#x53EF;&#x7528;&#x7B49;&#x5E95;&#x5C42;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x4E13;&#x6CE8;&#x4E8E;&#x5F00;&#x53D1;&#x5E94;&#x7528;&#x3002;</p>\n<p>&#x4E0E;&#x5176;&#x4ED6;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x4E00;&#x81F4;&#xFF0C;Kubernetes&#x4E5F;&#x91C7;&#x7528;&#x4E86;Master/Slave&#x7ED3;&#x6784;&#x3002;&#x4E0B;&#x8868;&#x663E;&#x793A;&#x4E86;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x53CA;&#x5176;&#x529F;&#x80FD;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th>&#x89D2;&#x8272;</th>\n<th style=\"text-align:center\">&#x7EC4;&#x4EF6;</th>\n<th style=\"text-align:center\">&#x529F;&#x80FD;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">apiserver</td>\n<td style=\"text-align:center\">&#x63D0;&#x4F9B;RESTful&#x63A5;&#x53E3;</td>\n</tr>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">scheduler</td>\n<td style=\"text-align:center\">&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#xFF0C;&#x5C06;pod&#x5206;&#x914D;&#x5230;Slave&#x8282;&#x70B9;</td>\n</tr>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">controller-manager</td>\n<td style=\"text-align:center\">&#x8D1F;&#x8D23;Master&#x7684;&#x5176;&#x4ED6;&#x529F;&#x80FD;</td>\n</tr>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">etde</td>\n<td style=\"text-align:center\">&#x50A8;&#x5B58;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x8282;&#x70B9;&#x4FE1;&#x606F;&#xFF0C;pod&#x4FE1;&#x606F;&#x7B49;</td>\n</tr>\n<tr>\n<td>Slave</td>\n<td style=\"text-align:center\">kubelet</td>\n<td style=\"text-align:center\">&#x8D1F;&#x8D23;&#x7BA1;&#x7406;Pod&#x3001;&#x5BB9;&#x5668;&#x548C;&#x5BB9;&#x5668;&#x955C;&#x50CF;</td>\n</tr>\n<tr>\n<td>Slave</td>\n<td style=\"text-align:center\">proxy</td>\n<td style=\"text-align:center\">&#x5C06;&#x8BBF;&#x95EE;Service&#x7684;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x5BF9;&#x5E94;&#x7684;Pod&#xFF0C;&#x505A;&#x4E00;&#x4E9B;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</td>\n</tr>\n<tr>\n<td>&#x5BA2;&#x6237;&#x7AEF;</td>\n<td style=\"text-align:center\">kubectl</td>\n<td style=\"text-align:center\">&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x5411;apiserver&#x53D1;&#x8D77;&#x521B;&#x5EFA;Pod&#x7B49;&#x8BF7;&#x6C42;</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"&#x4E8C;-kiwenlau-kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E8C;-kiwenlau-kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E8C;. kiwenlau/kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;\"></a>&#x4E8C;. kiwenlau/kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;</h2><p>&#x4E0B;&#x56FE;&#x663E;&#x793A;&#x4E86;&#x6211;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x5355;&#x673A;&#x7248;Kubernetes&#x7684;&#x67B6;&#x6784;&#x3002;&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4E00;&#x5171;&#x8FD0;&#x884C;&#x4E86;7&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x8FD0;&#x884C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;Kuberenetes&#x672A;&#x6765;&#x7684;&#x5F00;&#x53D1;&#x76EE;&#x6807;&#x6B63;&#x662F;&#x5C06;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x8FD0;&#x884C;&#x5230;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;Kubernetes&#x7684;&#x90E8;&#x7F72;&#x548C;&#x5347;&#x7EA7;&#x3002;&#x73B0;&#x5728;&#x6211;&#x5C06;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5168;&#x90E8;&#x8FD0;&#x884C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x5FC5;&#x7136;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x4E14;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x662F;&#x672A;&#x77E5;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x4EC5;&#x505A;&#x5B66;&#x4E60;&#x6D4B;&#x8BD5;&#x800C;&#x4E0D;&#x5B9C;&#x90E8;&#x7F72;&#x5230;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x3002;Kubernetes&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x901A;&#x8FC7;docker link&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x4E2D;apiserver&#x4E0E;ectd&#x7684;4001&#x7AEF;&#x53E3;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;scheduler&#xFF0C;controller-manager&#xFF0C;kubelet&#xFF0C;proxy&#x4EE5;&#x53CA;kubectl&#x4E0E;apiserver&#x7684;8080&#x7AEF;&#x53E3;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<p><img src=\"/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.png\" width=\"500\"></p>\n<p>&#x96C6;&#x7FA4;&#x7684;&#x5927;&#x81F4;&#x8FD0;&#x884C;&#x6D41;&#x7A0B;&#x662F;&#x8FD9;&#x6837;&#x7684;: &#x7528;&#x6237;&#x901A;&#x8FC7;kubectl&#x547D;&#x4EE4;&#x5411;apiserver&#x53D1;&#x8D77;&#x521B;&#x5EFA;Pod&#x7684;&#x8BF7;&#x6C42;; scheduler&#x5C06;&#x521B;&#x5EFA;Pod&#x7684;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x7ED9;kubelet&#xFF1B;kubelet&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;docker&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x8BE5;&#x5DE5;&#x5177;&#x4F1A;&#x5411;Docker deamon&#x53D1;&#x8D77;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x7684;&#x8BF7;&#x6C42;; Docker deamon&#x8D1F;&#x8D23;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x7136;&#x540E;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x6211;&#x5C06;Docker deamon&#x8FD0;&#x884C;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#xFF0C;&#x56E0;&#x6B64;Docker daemon&#x6240;&#x521B;&#x5EFA;&#x7684;&#x5E94;&#x7528;&#x5BB9;&#x5668;&#x4E0E;Kubernetes&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x5BB9;&#x5668;&#x5747;&#x8FD0;&#x884C;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x3002;docker socket&#x91C7;&#x7528;volume&#x7684;&#x5F62;&#x5F0F;&#x6302;&#x8F7D;&#x5230;kubelet&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x56E0;&#x6B64;kubelet&#x4E2D;&#x7684;docker&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0E;&#x4E3B;&#x673A;&#x4E0A;&#x7684;Docker daemon&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<p>&#x6211;&#x662F;&#x76F4;&#x63A5;&#x5C06;kubernetes&#x53D1;&#x5E03;&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x5728;/usr/local/bin&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x4FEE;&#x6539;Dockerfile&#x4E2D;&#x7684;Kubernetes&#x4E0B;&#x8F7D;&#x94FE;&#x63A5;&#x7684;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x6784;&#x5EFA;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x7684;Kubernetes&#x955C;&#x50CF;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4EC5;&#x9700;&#x4FEE;&#x6539;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x5730;&#x5728;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x90E8;&#x7F72;Kubernetes&#x3002;</p>\n<p>kiwenlau/kubernetes:1.0.7&#x955C;&#x50CF;&#x7248;&#x672C;&#x4FE1;&#x606F;:</p>\n<ul>\n<li>ubuntu: 14.04</li>\n<li>Kubernetes: 1.0.7</li>\n<li>ectd: 2.2.1</li>\n</ul>\n<p>Ubuntu&#x4E3B;&#x673A;&#x7248;&#x672C;&#x4FE1;&#x606F;:</p>\n<ul>\n<li>ubuntu: 14.04.3 LTS</li>\n<li>kernel: 3.16.0-30-generic</li>\n<li>docker: 1.9.1</li>\n</ul>\n<h2 id=\"&#x4E09;-&#x8FD0;&#x884C;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E09;-&#x8FD0;&#x884C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E09;. &#x8FD0;&#x884C;&#x6B65;&#x9AA4;\"></a>&#x4E09;. &#x8FD0;&#x884C;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x5B89;&#x88C5;Docker\"><a href=\"#1-&#x5B89;&#x88C5;Docker\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;Docker\"></a><strong>1. &#x5B89;&#x88C5;Docker</strong></h4><p>ubuntu 14.04&#x4E0A;&#x5B89;&#x88C5;Docker: </p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -fLsS http<span class=\"variable\">s:</span>//<span class=\"built_in\">get</span>.docker.<span class=\"keyword\">com</span>/ | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4ED6;&#x7CFB;&#x7EDF;&#x8BF7;&#x53C2;&#x8003;: <a href=\"https://docs.docker.com/\" target=\"_blank\" rel=\"external\">https://docs.docker.com/</a></p>\n<h4 id=\"2-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#2-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>2. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><p>&#x6211;&#x5C06;kiwenlau/kubernetes:1.07&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x7528;&#x5230;&#x7684;Docker&#x955C;&#x50CF;&#x90FD;&#x653E;&#x5728;<a href=\"http://www.alauda.cn/\" target=\"_blank\" rel=\"external\">&#x7075;&#x96C0;&#x4E91;</a></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/kubernetes:<span class=\"number\">1.0</span>.<span class=\"number\">7</span></div><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/etcd:v2.<span class=\"number\">2.1</span></div><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/nginx:<span class=\"number\">1.9</span>.<span class=\"number\">7</span></div><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/pause:<span class=\"number\">0.8</span>.<span class=\"number\">0</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x542F;&#x52A8;Kubernetes\"><a href=\"#3-&#x542F;&#x52A8;Kubernetes\" class=\"headerlink\" title=\"3. &#x542F;&#x52A8;Kubernetes\"></a><strong>3. &#x542F;&#x52A8;Kubernetes</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/kiwenlau/single-kubernetes-docker</div><div class=\"line\"><span class=\"built_in\">cd</span> single-kubernetes-docker/</div><div class=\"line\">sudo chmod +x start-kubernetes-alauda.sh stop-kubernetes.sh</div><div class=\"line\">sudo ./start-kubernetes-alauda.sh</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x7ED3;&#x675F;&#x540E;&#x8FDB;&#x5165;kubectl&#x5BB9;&#x5668;&#x3002;&#x5BB9;&#x5668;&#x4E3B;&#x673A;&#x540D;&#x4E3A;kubeclt&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x201D;exit&#x201D;&#x547D;&#x4EE4;&#x9000;&#x51FA;&#x5BB9;&#x5668;&#x8FD4;&#x56DE;&#x5230;&#x4E3B;&#x673A;&#xFF0C;&#x7136;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x201D;sudo docker exec -it kubectl bash&#x201D;&#x547D;&#x4EE4;&#x518D;&#x6B21;&#x8FDB;&#x5165;kubectl&#x5BB9;&#x5668;&#x3002;</p>\n<h4 id=\"4-&#x6D4B;&#x8BD5;Kubernetes\"><a href=\"#4-&#x6D4B;&#x8BD5;Kubernetes\" class=\"headerlink\" title=\"4. &#x6D4B;&#x8BD5;Kubernetes\"></a><strong>4. &#x6D4B;&#x8BD5;Kubernetes</strong></h4><p>&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x811A;&#x672C;&#xFF0C;&#x8BE5;&#x811A;&#x672C;&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;nginx pod&#x3002;</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\">chmod +x <span class=\"keyword\">test</span>-kubernetes-alauda.<span class=\"keyword\">sh</span></div><div class=\"line\">./<span class=\"keyword\">test</span>-kubernetes-alauda.<span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p>&#x8F93;&#x51FA;</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Welcome to nginx!<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">&#xA0; &#xA0; <span class=\"selector-tag\">body</span> {</div><div class=\"line\">&#xA0; &#xA0; &#xA0; &#xA0; <span class=\"attribute\">width</span>: <span class=\"number\">35em</span>;</div><div class=\"line\">&#xA0; &#xA0; &#xA0; &#xA0; <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</div><div class=\"line\">&#xA0; &#xA0; &#xA0; &#xA0; <span class=\"attribute\">font-family</span>: Tahoma, Verdana, Arial, sans-serif;</div><div class=\"line\">&#xA0; &#xA0; }</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Welcome to nginx!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>If you see this page, the nginx web server is successfully installed and</div><div class=\"line\">working. Further configuration is required.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>For online documentation and support please refer to</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://nginx.org/&quot;</span>&gt;</span>nginx.org<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>.<span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\">Commercial support is available at</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://nginx.com/&quot;</span>&gt;</span>nginx.com<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>Thank you for using nginx.<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"&#x56DB;-&#x53C2;&#x8003;\"><a href=\"#&#x56DB;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x56DB;. &#x53C2;&#x8003;\"></a>&#x56DB;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"https://github.com/meteorhacks/hyperkube\" target=\"_blank\" rel=\"external\">meteorhacks/hyperkube</a></li>\n<li><a href=\"https://github.com/meteorhacks/kube-init\" target=\"_blank\" rel=\"external\">meteorhacks/kube-init</a></li>\n<li><a href=\"https://meteorhacks.com/learn-kubernetes-the-future-of-the-cloud\" target=\"_blank\" rel=\"external\">Kubernetes: The Future of Cloud Hosting</a></li>\n<li><a href=\"http://weibo.com/p/1001603912843031387951?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io\" target=\"_blank\" rel=\"external\">Kubernetes &#x67B6;&#x6784;&#x6D45;&#x6790;</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/an-introduction-to-kubernetes\" target=\"_blank\" rel=\"external\">An Introduction to Kubernetes</a></li>\n</ol>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Kuberntes&#x7684;&#x65B9;&#x6CD5;&#xFF0C;Kubernetes&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x5747;&#x8FD0;&#x884C;&#x4E8E;&#x5355;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/single-kubernetes-docker\">kiwenlau/single-kubernetes-docker</a></li>\n</ul>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/\">2015-11-28</a></li>\n</ul>\n<h2 id=\"&#x4E00;-Kubernetes&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-Kubernetes&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. Kubernetes&#x7B80;&#x4ECB;\"></a>&#x4E00;. Kubernetes&#x7B80;&#x4ECB;</h2><p>2006&#x5E74;&#xFF0C;Google&#x5DE5;&#x7A0B;&#x5E08;Rohit Seth&#x53D1;&#x8D77;&#x4E86;Cgroups&#x5185;&#x6838;&#x9879;&#x76EE;&#x3002;Cgroups&#x662F;&#x5BB9;&#x5668;&#x5B9E;&#x73B0;CPU&#xFF0C;&#x5185;&#x5B58;&#x7B49;&#x8D44;&#x6E90;&#x9694;&#x79BB;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x7531;&#x6B64;&#x53EF;&#x89C1;Google&#x5176;&#x5B9E;&#x5F88;&#x65E9;&#x5C31;&#x5F00;&#x59CB;&#x6D89;&#x8DB3;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x3002;&#x800C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;Google&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x5DF2;&#x7ECF;&#x957F;&#x8FBE;&#x5341;&#x5E74;&#xFF0C;&#x76EE;&#x524D;&#x8C37;&#x6B4C;&#x6240;&#x6709;&#x4E1A;&#x52A1;&#x5305;&#x62EC;&#x641C;&#x7D22;&#xFF0C;Gmail&#xFF0C;MapReduce&#x7B49;&#x5747;&#x8FD0;&#x884C;&#x5728;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#x3002;Google&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x7684;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x2013;Borg&#xFF0C;&#x582A;&#x79F0;&#x5176;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x7684;&#x745E;&#x58EB;&#x519B;&#x5200;&#x3002;</p>\n<p>2014&#x5E74;&#xFF0C;Google&#x53D1;&#x8D77;&#x4E86;&#x5F00;&#x6E90;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x2013;Kubernetes&#xFF0C;&#x5176;&#x8BBE;&#x8BA1;&#x4E4B;&#x521D;&#x5C31;&#x5438;&#x53D6;&#x4E86;Borg&#x7684;&#x7ECF;&#x9A8C;&#x548C;&#x6559;&#x8BAD;&#xFF0C;&#x5E76;&#x539F;&#x751F;&#x652F;&#x6301;&#x4E86;Docker&#x3002;&#x56E0;&#x6B64;&#xFF0C;Kubernetees&#x4E0E;&#x8F83;&#x65E9;&#x7684;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;Mesos&#x548C;YARN&#x76F8;&#x6BD4;&#xFF0C;&#x5BF9;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x5C24;&#x5176;&#x662F;Docker&#x7684;&#x652F;&#x6301;&#x66F4;&#x52A0;&#x539F;&#x751F;&#xFF0C;&#x540C;&#x65F6;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x5F3A;&#x5927;&#x7684;&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x8D44;&#x6E90;&#x8C03;&#x5EA6;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x9AD8;&#x53EF;&#x7528;&#x7B49;&#x5E95;&#x5C42;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x4E13;&#x6CE8;&#x4E8E;&#x5F00;&#x53D1;&#x5E94;&#x7528;&#x3002;</p>\n<p>&#x4E0E;&#x5176;&#x4ED6;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x4E00;&#x81F4;&#xFF0C;Kubernetes&#x4E5F;&#x91C7;&#x7528;&#x4E86;Master/Slave&#x7ED3;&#x6784;&#x3002;&#x4E0B;&#x8868;&#x663E;&#x793A;&#x4E86;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x53CA;&#x5176;&#x529F;&#x80FD;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th>&#x89D2;&#x8272;</th>\n<th style=\"text-align:center\">&#x7EC4;&#x4EF6;</th>\n<th style=\"text-align:center\">&#x529F;&#x80FD;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">apiserver</td>\n<td style=\"text-align:center\">&#x63D0;&#x4F9B;RESTful&#x63A5;&#x53E3;</td>\n</tr>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">scheduler</td>\n<td style=\"text-align:center\">&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#xFF0C;&#x5C06;pod&#x5206;&#x914D;&#x5230;Slave&#x8282;&#x70B9;</td>\n</tr>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">controller-manager</td>\n<td style=\"text-align:center\">&#x8D1F;&#x8D23;Master&#x7684;&#x5176;&#x4ED6;&#x529F;&#x80FD;</td>\n</tr>\n<tr>\n<td>Master</td>\n<td style=\"text-align:center\">etde</td>\n<td style=\"text-align:center\">&#x50A8;&#x5B58;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x8282;&#x70B9;&#x4FE1;&#x606F;&#xFF0C;pod&#x4FE1;&#x606F;&#x7B49;</td>\n</tr>\n<tr>\n<td>Slave</td>\n<td style=\"text-align:center\">kubelet</td>\n<td style=\"text-align:center\">&#x8D1F;&#x8D23;&#x7BA1;&#x7406;Pod&#x3001;&#x5BB9;&#x5668;&#x548C;&#x5BB9;&#x5668;&#x955C;&#x50CF;</td>\n</tr>\n<tr>\n<td>Slave</td>\n<td style=\"text-align:center\">proxy</td>\n<td style=\"text-align:center\">&#x5C06;&#x8BBF;&#x95EE;Service&#x7684;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x5BF9;&#x5E94;&#x7684;Pod&#xFF0C;&#x505A;&#x4E00;&#x4E9B;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</td>\n</tr>\n<tr>\n<td>&#x5BA2;&#x6237;&#x7AEF;</td>\n<td style=\"text-align:center\">kubectl</td>\n<td style=\"text-align:center\">&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x5411;apiserver&#x53D1;&#x8D77;&#x521B;&#x5EFA;Pod&#x7B49;&#x8BF7;&#x6C42;</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"&#x4E8C;-kiwenlau-kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E8C;-kiwenlau-kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E8C;. kiwenlau/kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;\"></a>&#x4E8C;. kiwenlau/kubernetes&#x955C;&#x50CF;&#x7B80;&#x4ECB;</h2><p>&#x4E0B;&#x56FE;&#x663E;&#x793A;&#x4E86;&#x6211;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x5355;&#x673A;&#x7248;Kubernetes&#x7684;&#x67B6;&#x6784;&#x3002;&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4E00;&#x5171;&#x8FD0;&#x884C;&#x4E86;7&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x8FD0;&#x884C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;Kuberenetes&#x672A;&#x6765;&#x7684;&#x5F00;&#x53D1;&#x76EE;&#x6807;&#x6B63;&#x662F;&#x5C06;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x8FD0;&#x884C;&#x5230;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;Kubernetes&#x7684;&#x90E8;&#x7F72;&#x548C;&#x5347;&#x7EA7;&#x3002;&#x73B0;&#x5728;&#x6211;&#x5C06;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5168;&#x90E8;&#x8FD0;&#x884C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x5FC5;&#x7136;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x4E14;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x662F;&#x672A;&#x77E5;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x4EC5;&#x505A;&#x5B66;&#x4E60;&#x6D4B;&#x8BD5;&#x800C;&#x4E0D;&#x5B9C;&#x90E8;&#x7F72;&#x5230;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x3002;Kubernetes&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x901A;&#x8FC7;docker link&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x4E2D;apiserver&#x4E0E;ectd&#x7684;4001&#x7AEF;&#x53E3;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;scheduler&#xFF0C;controller-manager&#xFF0C;kubelet&#xFF0C;proxy&#x4EE5;&#x53CA;kubectl&#x4E0E;apiserver&#x7684;8080&#x7AEF;&#x53E3;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<p><img src=\"/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.png\" width=\"500\"></p>\n<p>&#x96C6;&#x7FA4;&#x7684;&#x5927;&#x81F4;&#x8FD0;&#x884C;&#x6D41;&#x7A0B;&#x662F;&#x8FD9;&#x6837;&#x7684;: &#x7528;&#x6237;&#x901A;&#x8FC7;kubectl&#x547D;&#x4EE4;&#x5411;apiserver&#x53D1;&#x8D77;&#x521B;&#x5EFA;Pod&#x7684;&#x8BF7;&#x6C42;; scheduler&#x5C06;&#x521B;&#x5EFA;Pod&#x7684;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x7ED9;kubelet&#xFF1B;kubelet&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;docker&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x8BE5;&#x5DE5;&#x5177;&#x4F1A;&#x5411;Docker deamon&#x53D1;&#x8D77;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x7684;&#x8BF7;&#x6C42;; Docker deamon&#x8D1F;&#x8D23;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x7136;&#x540E;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x6211;&#x5C06;Docker deamon&#x8FD0;&#x884C;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#xFF0C;&#x56E0;&#x6B64;Docker daemon&#x6240;&#x521B;&#x5EFA;&#x7684;&#x5E94;&#x7528;&#x5BB9;&#x5668;&#x4E0E;Kubernetes&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x5BB9;&#x5668;&#x5747;&#x8FD0;&#x884C;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x3002;docker socket&#x91C7;&#x7528;volume&#x7684;&#x5F62;&#x5F0F;&#x6302;&#x8F7D;&#x5230;kubelet&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x56E0;&#x6B64;kubelet&#x4E2D;&#x7684;docker&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0E;&#x4E3B;&#x673A;&#x4E0A;&#x7684;Docker daemon&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<p>&#x6211;&#x662F;&#x76F4;&#x63A5;&#x5C06;kubernetes&#x53D1;&#x5E03;&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x5728;/usr/local/bin&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x4FEE;&#x6539;Dockerfile&#x4E2D;&#x7684;Kubernetes&#x4E0B;&#x8F7D;&#x94FE;&#x63A5;&#x7684;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x6784;&#x5EFA;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x7684;Kubernetes&#x955C;&#x50CF;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4EC5;&#x9700;&#x4FEE;&#x6539;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x5730;&#x5728;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x90E8;&#x7F72;Kubernetes&#x3002;</p>\n<p>kiwenlau/kubernetes:1.0.7&#x955C;&#x50CF;&#x7248;&#x672C;&#x4FE1;&#x606F;:</p>\n<ul>\n<li>ubuntu: 14.04</li>\n<li>Kubernetes: 1.0.7</li>\n<li>ectd: 2.2.1</li>\n</ul>\n<p>Ubuntu&#x4E3B;&#x673A;&#x7248;&#x672C;&#x4FE1;&#x606F;:</p>\n<ul>\n<li>ubuntu: 14.04.3 LTS</li>\n<li>kernel: 3.16.0-30-generic</li>\n<li>docker: 1.9.1</li>\n</ul>\n<h2 id=\"&#x4E09;-&#x8FD0;&#x884C;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E09;-&#x8FD0;&#x884C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E09;. &#x8FD0;&#x884C;&#x6B65;&#x9AA4;\"></a>&#x4E09;. &#x8FD0;&#x884C;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x5B89;&#x88C5;Docker\"><a href=\"#1-&#x5B89;&#x88C5;Docker\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;Docker\"></a><strong>1. &#x5B89;&#x88C5;Docker</strong></h4><p>ubuntu 14.04&#x4E0A;&#x5B89;&#x88C5;Docker: </p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -fLsS http<span class=\"variable\">s:</span>//<span class=\"built_in\">get</span>.docker.<span class=\"keyword\">com</span>/ | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4ED6;&#x7CFB;&#x7EDF;&#x8BF7;&#x53C2;&#x8003;: <a href=\"https://docs.docker.com/\">https://docs.docker.com/</a></p>\n<h4 id=\"2-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#2-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>2. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><p>&#x6211;&#x5C06;kiwenlau/kubernetes:1.07&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x7528;&#x5230;&#x7684;Docker&#x955C;&#x50CF;&#x90FD;&#x653E;&#x5728;<a href=\"http://www.alauda.cn/\">&#x7075;&#x96C0;&#x4E91;</a></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/kubernetes:<span class=\"number\">1.0</span>.<span class=\"number\">7</span></div><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/etcd:v2.<span class=\"number\">2.1</span></div><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/nginx:<span class=\"number\">1.9</span>.<span class=\"number\">7</span></div><div class=\"line\">sudo docker pull index<span class=\"selector-class\">.alauda</span><span class=\"selector-class\">.cn</span>/kiwenlau/pause:<span class=\"number\">0.8</span>.<span class=\"number\">0</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x542F;&#x52A8;Kubernetes\"><a href=\"#3-&#x542F;&#x52A8;Kubernetes\" class=\"headerlink\" title=\"3. &#x542F;&#x52A8;Kubernetes\"></a><strong>3. &#x542F;&#x52A8;Kubernetes</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/kiwenlau/single-kubernetes-docker</div><div class=\"line\"><span class=\"built_in\">cd</span> single-kubernetes-docker/</div><div class=\"line\">sudo chmod +x start-kubernetes-alauda.sh stop-kubernetes.sh</div><div class=\"line\">sudo ./start-kubernetes-alauda.sh</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x7ED3;&#x675F;&#x540E;&#x8FDB;&#x5165;kubectl&#x5BB9;&#x5668;&#x3002;&#x5BB9;&#x5668;&#x4E3B;&#x673A;&#x540D;&#x4E3A;kubeclt&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x201D;exit&#x201D;&#x547D;&#x4EE4;&#x9000;&#x51FA;&#x5BB9;&#x5668;&#x8FD4;&#x56DE;&#x5230;&#x4E3B;&#x673A;&#xFF0C;&#x7136;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x201D;sudo docker exec -it kubectl bash&#x201D;&#x547D;&#x4EE4;&#x518D;&#x6B21;&#x8FDB;&#x5165;kubectl&#x5BB9;&#x5668;&#x3002;</p>\n<h4 id=\"4-&#x6D4B;&#x8BD5;Kubernetes\"><a href=\"#4-&#x6D4B;&#x8BD5;Kubernetes\" class=\"headerlink\" title=\"4. &#x6D4B;&#x8BD5;Kubernetes\"></a><strong>4. &#x6D4B;&#x8BD5;Kubernetes</strong></h4><p>&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x811A;&#x672C;&#xFF0C;&#x8BE5;&#x811A;&#x672C;&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;nginx pod&#x3002;</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\">chmod +x <span class=\"keyword\">test</span>-kubernetes-alauda.<span class=\"keyword\">sh</span></div><div class=\"line\">./<span class=\"keyword\">test</span>-kubernetes-alauda.<span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p>&#x8F93;&#x51FA;</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Welcome to nginx!<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">&#xA0; &#xA0; <span class=\"selector-tag\">body</span> {</div><div class=\"line\">&#xA0; &#xA0; &#xA0; &#xA0; <span class=\"attribute\">width</span>: <span class=\"number\">35em</span>;</div><div class=\"line\">&#xA0; &#xA0; &#xA0; &#xA0; <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</div><div class=\"line\">&#xA0; &#xA0; &#xA0; &#xA0; <span class=\"attribute\">font-family</span>: Tahoma, Verdana, Arial, sans-serif;</div><div class=\"line\">&#xA0; &#xA0; }</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Welcome to nginx!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>If you see this page, the nginx web server is successfully installed and</div><div class=\"line\">working. Further configuration is required.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>For online documentation and support please refer to</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://nginx.org/&quot;</span>&gt;</span>nginx.org<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>.<span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\">Commercial support is available at</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://nginx.com/&quot;</span>&gt;</span>nginx.com<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>Thank you for using nginx.<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"&#x56DB;-&#x53C2;&#x8003;\"><a href=\"#&#x56DB;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x56DB;. &#x53C2;&#x8003;\"></a>&#x56DB;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"https://github.com/meteorhacks/hyperkube\">meteorhacks/hyperkube</a></li>\n<li><a href=\"https://github.com/meteorhacks/kube-init\">meteorhacks/kube-init</a></li>\n<li><a href=\"https://meteorhacks.com/learn-kubernetes-the-future-of-the-cloud\">Kubernetes: The Future of Cloud Hosting</a></li>\n<li><a href=\"http://weibo.com/p/1001603912843031387951?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io\">Kubernetes &#x67B6;&#x6784;&#x6D45;&#x6790;</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/an-introduction-to-kubernetes\">An Introduction to Kubernetes</a></li>\n</ol>"},{"title":"64UbuntuHadoop","date":"2016-05-29T01:00:00.000Z","_content":"\n**:** 64Ubuntu 14.04Hadoop\n\nHadoop[](https://pan.baidu.com/s/1hrGLqlA) [GitHub](https://github.com/kiwenlau/compile-hadoop/releases)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-05-29](http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/)\n\n<img src=\"160529-compile-hadoop-ubuntu/ubuntu-hadoop.png\" width = \"300\"/>\n\nHadoop3264\n\n```\nWARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n```\n\nHadoop:\n\n#### **1. **\n\n```\nsudo apt-get update\nsudo apt-get install -y openjdk-7-jdk libprotobuf-dev protobuf-compiler maven cmake build-essential pkg-config libssl-dev zlib1g-dev llvm-gcc automake autoconf make\n```\n\n#### **2. [Hadoop](http://archive.apache.org/dist/hadoop/core/)**\n\n```\nwget http://archive.apache.org/dist/hadoop/core/hadoop-2.3.0/hadoop-2.3.0-src.tar.gz\ntar -xzvf hadoop-2.3.0-src.tar.gz\n```\n\n#### **3. Hadoop**\n\n```\ncd hadoop-2.3.0-src\nmvn package -Pdist,native -DskipTests Dtar\n```\n\n15~30 \n\n:\n\n```\n[INFO] ------------------------------------------------------------------------\n\n[INFO] BUILD SUCCESS\n\n[INFO] ------------------------------------------------------------------------\n\n[INFO] Total time: 14:59.240s\n\n[INFO] Finished at: Thu Jan 15 18:51:59 JST 2015\n\n[INFO] Final Memory: 168M/435M\n\n[INFO] ------------------------------------------------------------------------\n```\n\n\n\n```\nhadoop-2.3.0-src/hadoop-dist/target/hadoop-2.3.0.tar.gz\n```\n\nHadoopHadoop:\n\n- [](https://pan.baidu.com/s/1hrGLqlA)\n- [GitHub](https://github.com/kiwenlau/compile-hadoop/releases)\n\nLinuxwgetGitHubHadoop:\n\n```\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.3.0/hadoop-2.3.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.4.0/hadoop-2.4.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.5.0/hadoop-2.5.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.6.0/hadoop-2.6.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.7.0/hadoop-2.7.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.7.2/hadoop-2.7.2.tar.gz\n```\n\n, HadoopHadoop.bashrchadoop-env.sh\n\n```\nexport HADOOP_COMMON_LIB_NATIVE_DIR=\"~/hadoop/lib/\"\nexport HADOOP_OPTS=\"$HADOOP_OPTS -Djava.library.path=~/hadoop/lib/\"\n```\n\n","source":"_posts/2016/05/29/160529-compile-hadoop-ubuntu.md","raw":"title: 64UbuntuHadoop\n\ndate: 2016-05-29 09:00\n\ntags: [Hadoop]\n\n---\n\n**:** 64Ubuntu 14.04Hadoop\n\nHadoop[](https://pan.baidu.com/s/1hrGLqlA) [GitHub](https://github.com/kiwenlau/compile-hadoop/releases)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-05-29](http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/)\n\n<img src=\"160529-compile-hadoop-ubuntu/ubuntu-hadoop.png\" width = \"300\"/>\n\nHadoop3264\n\n```\nWARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n```\n\nHadoop:\n\n#### **1. **\n\n```\nsudo apt-get update\nsudo apt-get install -y openjdk-7-jdk libprotobuf-dev protobuf-compiler maven cmake build-essential pkg-config libssl-dev zlib1g-dev llvm-gcc automake autoconf make\n```\n\n#### **2. [Hadoop](http://archive.apache.org/dist/hadoop/core/)**\n\n```\nwget http://archive.apache.org/dist/hadoop/core/hadoop-2.3.0/hadoop-2.3.0-src.tar.gz\ntar -xzvf hadoop-2.3.0-src.tar.gz\n```\n\n#### **3. Hadoop**\n\n```\ncd hadoop-2.3.0-src\nmvn package -Pdist,native -DskipTests Dtar\n```\n\n15~30 \n\n:\n\n```\n[INFO] ------------------------------------------------------------------------\n\n[INFO] BUILD SUCCESS\n\n[INFO] ------------------------------------------------------------------------\n\n[INFO] Total time: 14:59.240s\n\n[INFO] Finished at: Thu Jan 15 18:51:59 JST 2015\n\n[INFO] Final Memory: 168M/435M\n\n[INFO] ------------------------------------------------------------------------\n```\n\n\n\n```\nhadoop-2.3.0-src/hadoop-dist/target/hadoop-2.3.0.tar.gz\n```\n\nHadoopHadoop:\n\n- [](https://pan.baidu.com/s/1hrGLqlA)\n- [GitHub](https://github.com/kiwenlau/compile-hadoop/releases)\n\nLinuxwgetGitHubHadoop:\n\n```\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.3.0/hadoop-2.3.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.4.0/hadoop-2.4.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.5.0/hadoop-2.5.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.6.0/hadoop-2.6.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.7.0/hadoop-2.7.0.tar.gz\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/2.7.2/hadoop-2.7.2.tar.gz\n```\n\n, HadoopHadoop.bashrchadoop-env.sh\n\n```\nexport HADOOP_COMMON_LIB_NATIVE_DIR=\"~/hadoop/lib/\"\nexport HADOOP_OPTS=\"$HADOOP_OPTS -Djava.library.path=~/hadoop/lib/\"\n```\n\n","slug":"2016/05/29/160529-compile-hadoop-ubuntu","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtk6000771fy1in4m81q","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x5728;64&#x4F4D;Ubuntu 14.04&#x4E2D;&#x7F16;&#x8BD1;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x3002;</p>\n<p>Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"https://pan.baidu.com/s/1hrGLqlA\" target=\"_blank\" rel=\"external\">&#x767E;&#x5EA6;&#x7F51;&#x76D8;</a> <a href=\"https://github.com/kiwenlau/compile-hadoop/releases\" target=\"_blank\" rel=\"external\">GitHub</a></p>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/\">2016-05-29</a></li>\n</ul>\n<p><img src=\"/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.png\" width=\"300\"></p>\n<p>Hadoop&#x5B98;&#x7F51;&#x63D0;&#x4F9B;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x662F;&#x5728;32&#x4F4D;&#x7CFB;&#x7EDF;&#x4E0A;&#x7F16;&#x8BD1;&#x7684;&#xFF0C;&#x5728;64&#x7CFB;&#x7EDF;&#x4E0A;&#x8FD0;&#x884C;&#x4F1A;&#x51FA;&#x9519;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><div class=\"line\">WARN util.NativeCodeLoader: Unable to <span class=\"keyword\">load</span> <span class=\"keyword\">native</span>-hadoop <span class=\"keyword\">library</span> <span class=\"keyword\">for</span> your platform... <span class=\"keyword\">using</span> builtin-<span class=\"keyword\">java</span> classes <span class=\"keyword\">where</span> applicable</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x884C;&#x7F16;&#x8BD1;Hadoop&#x6E90;&#x7801;&#x3002;&#x4EE5;&#x4E0B;&#x4E3A;&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;:</p>\n<h4 id=\"1-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;\"><a href=\"#1-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;\"></a><strong>1. &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;</strong></h4><figure class=\"highlight q\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install -y openjdk<span class=\"number\">-7</span>-jdk libprotobuf-<span class=\"built_in\">dev</span> protobuf-compiler maven cmake build-essential pkg-config libssl-<span class=\"built_in\">dev</span> zlib1g-<span class=\"built_in\">dev</span> llvm-gcc automake autoconf make</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"><a href=\"#2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"></a><strong>2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;<a href=\"http://archive.apache.org/dist/hadoop/core/\" target=\"_blank\" rel=\"external\">Hadoop&#x6E90;&#x6587;&#x4EF6;</a></strong></h4><figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">wget http:<span class=\"comment\">//archive.apache.org/dist/hadoop/core/hadoop-2.3.0/hadoop-2.3.0-src.tar.gz</span></div><div class=\"line\">tar -xzvf hadoop-<span class=\"number\">2.3</span>.<span class=\"number\">0</span>-src<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x7F16;&#x8BD1;Hadoop\"><a href=\"#3-&#x7F16;&#x8BD1;Hadoop\" class=\"headerlink\" title=\"3. &#x7F16;&#x8BD1;Hadoop\"></a><strong>3. &#x7F16;&#x8BD1;Hadoop</strong></h4><figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\">cd hadoop-<span class=\"number\">2.3</span>.<span class=\"number\">0</span>-src</div><div class=\"line\">mvn <span class=\"keyword\">package</span> <span class=\"title\">-Pd</span>ist,native -DskipTests &#x2013;Dtar</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E00;&#x6B65;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#xFF0C;&#x5927;&#x6982;&#x9700;&#x8981;15~30&#x5206;&#x949F;&#x3002; </p>\n<p>&#x6B63;&#x786E;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight less\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">BUILD</span> <span class=\"selector-tag\">SUCCESS</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Total</span> <span class=\"selector-tag\">time</span>: <span class=\"selector-tag\">14</span><span class=\"selector-pseudo\">:59.240s</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Finished</span> <span class=\"selector-tag\">at</span>: <span class=\"selector-tag\">Thu</span> <span class=\"selector-tag\">Jan</span> <span class=\"selector-tag\">15</span> <span class=\"selector-tag\">18</span><span class=\"selector-pseudo\">:51</span><span class=\"selector-pseudo\">:59</span> <span class=\"selector-tag\">JST</span> <span class=\"selector-tag\">2015</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Final</span> <span class=\"selector-tag\">Memory</span>: <span class=\"selector-tag\">168M</span>/<span class=\"selector-tag\">435M</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x597D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x5305;&#x4F4D;&#x4E8E;</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">hadoop<span class=\"number\">-2.3</span><span class=\"number\">.0</span>-src/hadoop-dist/target/hadoop<span class=\"number\">-2.3</span><span class=\"number\">.0</span>.tar.gz</div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x7684;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x4E00;&#x81F4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x6211;&#x7F16;&#x8BD1;&#x597D;&#x7684;Hadoop:</p>\n<ul>\n<li><a href=\"https://pan.baidu.com/s/1hrGLqlA\" target=\"_blank\" rel=\"external\">&#x767E;&#x5EA6;&#x7F51;&#x76D8;</a></li>\n<li><a href=\"https://github.com/kiwenlau/compile-hadoop/releases\" target=\"_blank\" rel=\"external\">GitHub</a></li>\n</ul>\n<p>Linux&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;wget&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;GitHub&#x4E0A;&#x7684;Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.3.0/</span>hadoop-<span class=\"number\">2.3</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.4.0/</span>hadoop-<span class=\"number\">2.4</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.5.0/</span>hadoop-<span class=\"number\">2.5</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.6.0/</span>hadoop-<span class=\"number\">2.6</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.7.0/</span>hadoop-<span class=\"number\">2.7</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.7.2/</span>hadoop-<span class=\"number\">2.7</span>.<span class=\"number\">2</span>.tar.gz</div></pre></td></tr></table></figure>\n<p>&#x53E6;&#x5916;, &#x4F7F;&#x7528;&#x81EA;&#x884C;&#x7F16;&#x8BD1;&#x7684;Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;Hadoop&#x65F6;&#x9700;&#x8981;&#x5220;&#x9664;.bashrc&#x6587;&#x4EF6;&#x4E0E;hadoop-env.sh&#x6587;&#x4EF6;&#x4E2D;&#x4E0B;&#x9762;&#x4E24;&#x884C;&#xFF08;&#x9ED8;&#x8BA4;&#x4E0D;&#x4F1A;&#x6709;&#x8FD9;&#x4E24;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x5C1D;&#x8BD5;&#x89E3;&#x51B3;&#x62A5;&#x9519;&#x65F6;&#x53EF;&#x80FD;&#x6539;&#x5199;&#x4E86;&#xFF09;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">export</span> HADOOP_COMMON_LIB_NATIVE_DIR=<span class=\"string\">&quot;~/hadoop/lib/&quot;</span></div><div class=\"line\"><span class=\"built_in\">export</span> HADOOP_OPTS=<span class=\"string\">&quot;<span class=\"variable\">$HADOOP_OPTS</span> -Djava.library.path=~/hadoop/lib/&quot;</span></div></pre></td></tr></table></figure>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x5728;64&#x4F4D;Ubuntu 14.04&#x4E2D;&#x7F16;&#x8BD1;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x3002;</p>\n<p>Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"https://pan.baidu.com/s/1hrGLqlA\">&#x767E;&#x5EA6;&#x7F51;&#x76D8;</a> <a href=\"https://github.com/kiwenlau/compile-hadoop/releases\">GitHub</a></p>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/\">2016-05-29</a></li>\n</ul>\n<p><img src=\"/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.png\" width=\"300\"></p>\n<p>Hadoop&#x5B98;&#x7F51;&#x63D0;&#x4F9B;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x662F;&#x5728;32&#x4F4D;&#x7CFB;&#x7EDF;&#x4E0A;&#x7F16;&#x8BD1;&#x7684;&#xFF0C;&#x5728;64&#x7CFB;&#x7EDF;&#x4E0A;&#x8FD0;&#x884C;&#x4F1A;&#x51FA;&#x9519;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><div class=\"line\">WARN util.NativeCodeLoader: Unable to <span class=\"keyword\">load</span> <span class=\"keyword\">native</span>-hadoop <span class=\"keyword\">library</span> <span class=\"keyword\">for</span> your platform... <span class=\"keyword\">using</span> builtin-<span class=\"keyword\">java</span> classes <span class=\"keyword\">where</span> applicable</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x884C;&#x7F16;&#x8BD1;Hadoop&#x6E90;&#x7801;&#x3002;&#x4EE5;&#x4E0B;&#x4E3A;&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;:</p>\n<h4 id=\"1-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;\"><a href=\"#1-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;\"></a><strong>1. &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;</strong></h4><figure class=\"highlight q\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install -y openjdk<span class=\"number\">-7</span>-jdk libprotobuf-<span class=\"built_in\">dev</span> protobuf-compiler maven cmake build-essential pkg-config libssl-<span class=\"built_in\">dev</span> zlib1g-<span class=\"built_in\">dev</span> llvm-gcc automake autoconf make</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"><a href=\"#2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"></a><strong>2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;<a href=\"http://archive.apache.org/dist/hadoop/core/\">Hadoop&#x6E90;&#x6587;&#x4EF6;</a></strong></h4><figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">wget http:<span class=\"comment\">//archive.apache.org/dist/hadoop/core/hadoop-2.3.0/hadoop-2.3.0-src.tar.gz</span></div><div class=\"line\">tar -xzvf hadoop-<span class=\"number\">2.3</span>.<span class=\"number\">0</span>-src<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x7F16;&#x8BD1;Hadoop\"><a href=\"#3-&#x7F16;&#x8BD1;Hadoop\" class=\"headerlink\" title=\"3. &#x7F16;&#x8BD1;Hadoop\"></a><strong>3. &#x7F16;&#x8BD1;Hadoop</strong></h4><figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\">cd hadoop-<span class=\"number\">2.3</span>.<span class=\"number\">0</span>-src</div><div class=\"line\">mvn <span class=\"keyword\">package</span> <span class=\"title\">-Pd</span>ist,native -DskipTests &#x2013;Dtar</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E00;&#x6B65;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#xFF0C;&#x5927;&#x6982;&#x9700;&#x8981;15~30&#x5206;&#x949F;&#x3002; </p>\n<p>&#x6B63;&#x786E;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight less\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">BUILD</span> <span class=\"selector-tag\">SUCCESS</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Total</span> <span class=\"selector-tag\">time</span>: <span class=\"selector-tag\">14</span><span class=\"selector-pseudo\">:59.240s</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Finished</span> <span class=\"selector-tag\">at</span>: <span class=\"selector-tag\">Thu</span> <span class=\"selector-tag\">Jan</span> <span class=\"selector-tag\">15</span> <span class=\"selector-tag\">18</span><span class=\"selector-pseudo\">:51</span><span class=\"selector-pseudo\">:59</span> <span class=\"selector-tag\">JST</span> <span class=\"selector-tag\">2015</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Final</span> <span class=\"selector-tag\">Memory</span>: <span class=\"selector-tag\">168M</span>/<span class=\"selector-tag\">435M</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x597D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x5305;&#x4F4D;&#x4E8E;</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">hadoop<span class=\"number\">-2.3</span><span class=\"number\">.0</span>-src/hadoop-dist/target/hadoop<span class=\"number\">-2.3</span><span class=\"number\">.0</span>.tar.gz</div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x7684;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x4E00;&#x81F4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x6211;&#x7F16;&#x8BD1;&#x597D;&#x7684;Hadoop:</p>\n<ul>\n<li><a href=\"https://pan.baidu.com/s/1hrGLqlA\">&#x767E;&#x5EA6;&#x7F51;&#x76D8;</a></li>\n<li><a href=\"https://github.com/kiwenlau/compile-hadoop/releases\">GitHub</a></li>\n</ul>\n<p>Linux&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;wget&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;GitHub&#x4E0A;&#x7684;Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.3.0/</span>hadoop-<span class=\"number\">2.3</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.4.0/</span>hadoop-<span class=\"number\">2.4</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.5.0/</span>hadoop-<span class=\"number\">2.5</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.6.0/</span>hadoop-<span class=\"number\">2.6</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.7.0/</span>hadoop-<span class=\"number\">2.7</span>.<span class=\"number\">0</span>.tar.gz</div><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/2.7.2/</span>hadoop-<span class=\"number\">2.7</span>.<span class=\"number\">2</span>.tar.gz</div></pre></td></tr></table></figure>\n<p>&#x53E6;&#x5916;, &#x4F7F;&#x7528;&#x81EA;&#x884C;&#x7F16;&#x8BD1;&#x7684;Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;Hadoop&#x65F6;&#x9700;&#x8981;&#x5220;&#x9664;.bashrc&#x6587;&#x4EF6;&#x4E0E;hadoop-env.sh&#x6587;&#x4EF6;&#x4E2D;&#x4E0B;&#x9762;&#x4E24;&#x884C;&#xFF08;&#x9ED8;&#x8BA4;&#x4E0D;&#x4F1A;&#x6709;&#x8FD9;&#x4E24;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x5C1D;&#x8BD5;&#x89E3;&#x51B3;&#x62A5;&#x9519;&#x65F6;&#x53EF;&#x80FD;&#x6539;&#x5199;&#x4E86;&#xFF09;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">export</span> HADOOP_COMMON_LIB_NATIVE_DIR=<span class=\"string\">&quot;~/hadoop/lib/&quot;</span></div><div class=\"line\"><span class=\"built_in\">export</span> HADOOP_OPTS=<span class=\"string\">&quot;<span class=\"variable\">$HADOOP_OPTS</span> -Djava.library.path=~/hadoop/lib/&quot;</span></div></pre></td></tr></table></figure>"},{"title":"Docker","date":"2016-01-09T13:00:00.000Z","_content":"\n**:** Docker: **shell****supervisor**\n\n**GitHub:**\n- [kiwenlau/kubernetes-shell](https://github.com/kiwenlau/kubernetes-shell)\n- [kiwenlau/kubernetes-supervisor](https://github.com/kiwenlau/kubernetes-supervisor)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-01-09](http://kiwenlau.com/2016/01/09/160109-multiple-processes--docker-container/)\n\n## . \n\nDocker\"**DockerKubernetes**\"Kubernetes\n\nDocker\"**DockerKubernetes**\"kubernetes**Docker**\n\n**Shell**[Supervisor](http://supervisord.org/)[kiwenlau/kubernetes-shell](https://github.com/kiwenlau/kubernetes-shell)[kiwenlau/kubernetes-supervisor](https://github.com/kiwenlau/kubernetes-supervisor)Kubernetes\"**DockerKubernetes**\"\n\n## . ShellDocker\n\nShellKubernetes**start-kubernetes.sh**\n\n```\n#!/bin/bash\n\n# start docker daemon\ndocker daemon > /var/log/docker.log 2>&1 &\n\n# start etcd\netcd --data-dir=/var/etcd/data > /var/log/etcd.log 2>&1 &\n\n# wait for ectd to setup\nsleep 5\n\n# start apiserver\nkube-apiserver --service-cluster-ip-range=10.0.0.1/24 --insecure-bind-address=0.0.0.0 --etcd_servers=http://127.0.0.1:4001 > /var/log/kube-apiserver.log 2>&1 &\n\n# wait for apiserver to setup\nsleep 5\n\n# start controller manager, sheduler, kubelet and proxy\nkube-controller-manager --master=http://0.0.0.0:8080 > /var/log/kube-controller-manager.log 2>&1 &\nkube-scheduler --master=http://0.0.0.0:8080 > /var/log/kube-scheduler.log 2>&1 &\nkubelet --api_servers=http://0.0.0.0:8080 --address=0.0.0.0 --cluster_dns=10.0.0.10 --cluster_domain=\"kubernetes.local\" --pod-infra-container-image=\"kiwenlau/pause:0.8.0\"  > /var/log/kubelet.log 2>&1 &\nkube-proxy --master=http://0.0.0.0:8080 > /var/log/kube-proxy.log 2>&1 &\n\n# just keep this script running\nwhile [[ true ]]; do\n\tsleep 1\ndone\n```\n\nDockerfile**start-kubernetes.sh**Docker:\n\n```\nCMD [\"start-kubernetes.sh\"]\n```\n\n******start-kubernetes.sh**Docker1**Docker1**Docker1**Exited**Kubernetes**start-kubernetes.sh**\n\n```\n# just keep this script running\nwhile [[ true ]]; do\n\tsleep 1\ndone\n```\n\n## . supervisorDocker\n\n[Supervisor](http://supervisord.org/)supervisor**kubernetes.conf**:\n\n```\n[supervisord]\nnodaemon=true\n\n[program:etcd]\ncommand=etcd --data-dir=/var/etcd/data\nautorestart=true\nstdout_logfile=/var/log/etcd.stdout.log\nstderr_logfile=/var/log/etcd.stderr.log\n\n[program:kube-apiserver]\ncommand=kube-apiserver --service-cluster-ip-range=10.0.0.1/24 --insecure-bind-address=0.0.0.0 --etcd_servers=http://127.0.0.1:4001\nautorestart=true\nstdout_logfile=/var/log/kube-apiserver.stdout.log\nstderr_logfile=/var/log/kube-apiserver.stderr.log\n\n[program:kube-controller-manager]\ncommand=kube-controller-manager --master=http://0.0.0.0:8080\nautorestart=true\nstdout_logfile=/var/log/controller-manager.stdout.log\nstderr_logfile=/var/log/controller-manager.stderr.log\n\n[program:kube-scheduler]\ncommand=kube-scheduler --master=http://0.0.0.0:8080\nautorestart=true\nstdout_logfile=/var/log/kube-scheduler.stdout.log\nstderr_logfile=/var/log/kube-scheduler.stderr.log\n\n[program:kubelet]\ncommand=kubelet --api_servers=http://0.0.0.0:8080 --address=0.0.0.0 --cluster_dns=10.0.0.10 --cluster_domain=\"kubernetes.local\" --pod-infra-container-image=\"kiwenlau/pause:0.8.0\"\nautorestart=true\nstdout_logfile=/var/log/kubelet.stdout.log\nstderr_logfile=/var/log/kubelet.stderr.log\n\n[program:kube-proxy]\ncommand=kube-proxy --master=http://0.0.0.0:8080\nautorestart=true\nstdout_logfile=/var/log/kube-proxy.stdout.log\nstderr_logfile=/var/log/kube-proxy.stderr.log\n\n[program:docker]\ncommand=docker daemon\nautorestart=true\nstdout_logfile=/var/log/docker.stdout.log\nstderr_logfile=/var/log/docker.stderr.log\n```\n\nKubernetescommandautorestarttruesupervisorstdout_logfilestderr_logfile\n\nDockerfile**supervisord**Docker:\n\n```\nCMD [\"supervisord\", \"-c\", \"/etc/supervisor/conf.d/kubernetes.conf\"]\n```\n\n, supervisordDocker1nodaemontruesupervisorsupervisorDockersupervisordExited.\n\n```\n[supervisord]\nnodaemon=true\n```\n\n\n\n## . \n\nShellDockerDocker1shell\n\nsupervisorDocker1\n\n\n#### **DockerKubernetes**\n\n**GitHub**\n\n- [kiwenlau/single-kubernetes-docker](https://github.com/kiwenlau/single-kubernetes-docker)\n\nUbuntuKubernetes7Kubernetes\n\n<img src=\"160109-multiple-processes--docker-container/kubernetes-multiple-docker.png\" width = \"500\"/>\n\n#### **DockerKubernetes**\n\n**GitHub:**\n\n- [kiwenlau/kubernetes-shell](https://github.com/kiwenlau/kubernetes-shell)\n- [kiwenlau/kubernetes-supervisor](https://github.com/kiwenlau/kubernetes-supervisor)\n\nkubernetesetcd, controller manager, apiserver, scheduler, kubelet, proxydocker daemonDocker\n\nshellsupervisor\n\n<img src=\"160109-multiple-processes--docker-container/kubernetes-single-docker.png\" width = \"500\"/>\n\n## \n1. [Using Supervisor with Docker](https://docs.docker.com/engine/articles/using_supervisord/)\n2. [How To Install and Manage Supervisor on Ubuntu and Debian VPS](https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps)\n3. [DockerKuberntes](http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/)\n4. [kiwenlau/single-kubernetes-docker](https://github.com/kiwenlau/single-kubernetes-docker)\n\n","source":"_posts/2016/01/09/160109-multiple-processes--docker-container.md","raw":"title: Docker\n\ndate: 2016-01-09 21:00:00\n\ntags: [Docker, Kubernetes]\n\n---\n\n**:** Docker: **shell****supervisor**\n\n**GitHub:**\n- [kiwenlau/kubernetes-shell](https://github.com/kiwenlau/kubernetes-shell)\n- [kiwenlau/kubernetes-supervisor](https://github.com/kiwenlau/kubernetes-supervisor)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-01-09](http://kiwenlau.com/2016/01/09/160109-multiple-processes--docker-container/)\n\n## . \n\nDocker\"**DockerKubernetes**\"Kubernetes\n\nDocker\"**DockerKubernetes**\"kubernetes**Docker**\n\n**Shell**[Supervisor](http://supervisord.org/)[kiwenlau/kubernetes-shell](https://github.com/kiwenlau/kubernetes-shell)[kiwenlau/kubernetes-supervisor](https://github.com/kiwenlau/kubernetes-supervisor)Kubernetes\"**DockerKubernetes**\"\n\n## . ShellDocker\n\nShellKubernetes**start-kubernetes.sh**\n\n```\n#!/bin/bash\n\n# start docker daemon\ndocker daemon > /var/log/docker.log 2>&1 &\n\n# start etcd\netcd --data-dir=/var/etcd/data > /var/log/etcd.log 2>&1 &\n\n# wait for ectd to setup\nsleep 5\n\n# start apiserver\nkube-apiserver --service-cluster-ip-range=10.0.0.1/24 --insecure-bind-address=0.0.0.0 --etcd_servers=http://127.0.0.1:4001 > /var/log/kube-apiserver.log 2>&1 &\n\n# wait for apiserver to setup\nsleep 5\n\n# start controller manager, sheduler, kubelet and proxy\nkube-controller-manager --master=http://0.0.0.0:8080 > /var/log/kube-controller-manager.log 2>&1 &\nkube-scheduler --master=http://0.0.0.0:8080 > /var/log/kube-scheduler.log 2>&1 &\nkubelet --api_servers=http://0.0.0.0:8080 --address=0.0.0.0 --cluster_dns=10.0.0.10 --cluster_domain=\"kubernetes.local\" --pod-infra-container-image=\"kiwenlau/pause:0.8.0\"  > /var/log/kubelet.log 2>&1 &\nkube-proxy --master=http://0.0.0.0:8080 > /var/log/kube-proxy.log 2>&1 &\n\n# just keep this script running\nwhile [[ true ]]; do\n\tsleep 1\ndone\n```\n\nDockerfile**start-kubernetes.sh**Docker:\n\n```\nCMD [\"start-kubernetes.sh\"]\n```\n\n******start-kubernetes.sh**Docker1**Docker1**Docker1**Exited**Kubernetes**start-kubernetes.sh**\n\n```\n# just keep this script running\nwhile [[ true ]]; do\n\tsleep 1\ndone\n```\n\n## . supervisorDocker\n\n[Supervisor](http://supervisord.org/)supervisor**kubernetes.conf**:\n\n```\n[supervisord]\nnodaemon=true\n\n[program:etcd]\ncommand=etcd --data-dir=/var/etcd/data\nautorestart=true\nstdout_logfile=/var/log/etcd.stdout.log\nstderr_logfile=/var/log/etcd.stderr.log\n\n[program:kube-apiserver]\ncommand=kube-apiserver --service-cluster-ip-range=10.0.0.1/24 --insecure-bind-address=0.0.0.0 --etcd_servers=http://127.0.0.1:4001\nautorestart=true\nstdout_logfile=/var/log/kube-apiserver.stdout.log\nstderr_logfile=/var/log/kube-apiserver.stderr.log\n\n[program:kube-controller-manager]\ncommand=kube-controller-manager --master=http://0.0.0.0:8080\nautorestart=true\nstdout_logfile=/var/log/controller-manager.stdout.log\nstderr_logfile=/var/log/controller-manager.stderr.log\n\n[program:kube-scheduler]\ncommand=kube-scheduler --master=http://0.0.0.0:8080\nautorestart=true\nstdout_logfile=/var/log/kube-scheduler.stdout.log\nstderr_logfile=/var/log/kube-scheduler.stderr.log\n\n[program:kubelet]\ncommand=kubelet --api_servers=http://0.0.0.0:8080 --address=0.0.0.0 --cluster_dns=10.0.0.10 --cluster_domain=\"kubernetes.local\" --pod-infra-container-image=\"kiwenlau/pause:0.8.0\"\nautorestart=true\nstdout_logfile=/var/log/kubelet.stdout.log\nstderr_logfile=/var/log/kubelet.stderr.log\n\n[program:kube-proxy]\ncommand=kube-proxy --master=http://0.0.0.0:8080\nautorestart=true\nstdout_logfile=/var/log/kube-proxy.stdout.log\nstderr_logfile=/var/log/kube-proxy.stderr.log\n\n[program:docker]\ncommand=docker daemon\nautorestart=true\nstdout_logfile=/var/log/docker.stdout.log\nstderr_logfile=/var/log/docker.stderr.log\n```\n\nKubernetescommandautorestarttruesupervisorstdout_logfilestderr_logfile\n\nDockerfile**supervisord**Docker:\n\n```\nCMD [\"supervisord\", \"-c\", \"/etc/supervisor/conf.d/kubernetes.conf\"]\n```\n\n, supervisordDocker1nodaemontruesupervisorsupervisorDockersupervisordExited.\n\n```\n[supervisord]\nnodaemon=true\n```\n\n\n\n## . \n\nShellDockerDocker1shell\n\nsupervisorDocker1\n\n\n#### **DockerKubernetes**\n\n**GitHub**\n\n- [kiwenlau/single-kubernetes-docker](https://github.com/kiwenlau/single-kubernetes-docker)\n\nUbuntuKubernetes7Kubernetes\n\n<img src=\"160109-multiple-processes--docker-container/kubernetes-multiple-docker.png\" width = \"500\"/>\n\n#### **DockerKubernetes**\n\n**GitHub:**\n\n- [kiwenlau/kubernetes-shell](https://github.com/kiwenlau/kubernetes-shell)\n- [kiwenlau/kubernetes-supervisor](https://github.com/kiwenlau/kubernetes-supervisor)\n\nkubernetesetcd, controller manager, apiserver, scheduler, kubelet, proxydocker daemonDocker\n\nshellsupervisor\n\n<img src=\"160109-multiple-processes--docker-container/kubernetes-single-docker.png\" width = \"500\"/>\n\n## \n1. [Using Supervisor with Docker](https://docs.docker.com/engine/articles/using_supervisord/)\n2. [How To Install and Manage Supervisor on Ubuntu and Debian VPS](https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps)\n3. [DockerKuberntes](http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/)\n4. [kiwenlau/single-kubernetes-docker](https://github.com/kiwenlau/single-kubernetes-docker)\n\n","slug":"2016/01/09/160109-multiple-processes--docker-container","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtkb000871fyiq7ind5w","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x4E24;&#x79CD;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x65B9;&#x6CD5;: <strong>shell&#x811A;&#x672C;</strong>&#x548C;<strong>supervisor</strong>&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-shell\" target=\"_blank\" rel=\"external\">kiwenlau/kubernetes-shell</a></li>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-supervisor\" target=\"_blank\" rel=\"external\">kiwenlau/kubernetes-supervisor</a></li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/01/09/160109-multiple-processes--docker-container/\">2016-01-09</a></li>\n</ul>\n<h2 id=\"&#x4E00;-&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. &#x7B80;&#x4ECB;\"></a>&#x4E00;. &#x7B80;&#x4ECB;</h2><p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;Docker&#x5BB9;&#x5668;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x5355;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x9879;&#x76EE;&#x201D;<strong>&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong>&#x201C;&#xFF0C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5206;&#x522B;&#x8FD0;&#x884C;&#x5728;&#x5404;&#x4E2A;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BB9;&#x5668;&#x53EA;&#x8FD0;&#x884C;&#x5355;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;</p>\n<p>&#x7136;&#x800C;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x9879;&#x76EE;&#x201D;<strong>&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong>&#x201C;&#xFF0C;kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5747;&#x8FD0;&#x884C;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x8BE5;&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x4E86;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;&#x90A3;&#x4E48;&#xFF0C;<strong>&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;&#xFF1F;</strong></p>\n<p>&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x4F7F;&#x7528;<strong>Shell&#x811A;&#x672C;</strong>&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x4F7F;&#x7528;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x5DE5;&#x5177;<a href=\"http://supervisord.org/\" target=\"_blank\" rel=\"external\">Supervisor</a>&#x3002;<a href=\"https://github.com/kiwenlau/kubernetes-shell\" target=\"_blank\" rel=\"external\">kiwenlau/kubernetes-shell</a>&#x548C;<a href=\"https://github.com/kiwenlau/kubernetes-supervisor\" target=\"_blank\" rel=\"external\">kiwenlau/kubernetes-supervisor</a>&#x5206;&#x522B;&#x91C7;&#x7528;&#x4E86;&#x8FD9;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x4E8E;&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x6765;&#x8FD0;&#x884C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x201D;<strong>&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong>&#x201C;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x5C06;&#x5206;&#x522B;&#x4ECB;&#x7ECD;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"><a href=\"#&#x4E8C;-&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x4E8C;. &#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"></a>&#x4E8C;. &#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;</h2><p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x4F1A;&#x6BD4;&#x8F83;&#x719F;&#x6089;&#xFF0C;&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x4F9D;&#x6B21;&#x542F;&#x52A8;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5373;&#x53EF;&#x3002;&#x4EE5;&#x4E0B;&#x4E3A;<strong>start-kubernetes.sh</strong></p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">#!/bin/bash</div><div class=\"line\"></div><div class=\"line\"># start docker daemon</div><div class=\"line\">docker daemon &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/docker.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># start etcd</div><div class=\"line\">etcd --data-dir=/<span class=\"built_in\">var</span>/etcd/data &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/etcd.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># wait <span class=\"keyword\">for</span> ectd to setup</div><div class=\"line\">sleep <span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\"># start apiserver</div><div class=\"line\">kube-apiserver --service-cluster-ip-<span class=\"built_in\">range</span>=<span class=\"number\">10.0</span>.0.1/<span class=\"number\">24</span> --insecure-bind-address=<span class=\"number\">0.0</span>.0.0 --etcd_servers=http://<span class=\"number\">127.0</span>.0.1:<span class=\"number\">4001</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-apiserver.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># wait <span class=\"keyword\">for</span> apiserver to setup</div><div class=\"line\">sleep <span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\"># start controller manager, sheduler, kubelet <span class=\"keyword\">and</span> proxy</div><div class=\"line\">kube-controller-manager --master=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-controller-manager.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\">kube-scheduler --master=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-scheduler.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\">kubelet --api_servers=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> --address=<span class=\"number\">0.0</span>.0.0 --cluster_dns=<span class=\"number\">10.0</span>.0.10 --cluster_domain=<span class=\"string\">&quot;kubernetes.local&quot;</span> --pod-infra-container-<span class=\"built_in\">image</span>=<span class=\"string\">&quot;kiwenlau/pause:0.8.0&quot;</span>  &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kubelet.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\">kube-proxy --master=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-proxy.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># just keep this script running</div><div class=\"line\"><span class=\"keyword\">while</span> [[ <span class=\"literal\">true</span> ]]; <span class=\"keyword\">do</span></div><div class=\"line\">\tsleep <span class=\"number\">1</span></div><div class=\"line\">done</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5728;Dockerfile&#x4E2D;&#xFF0C;&#x5C06;<strong>start-kubernetes.sh</strong>&#x6307;&#x5B9A;&#x4E3A;Docker&#x5BB9;&#x5668;&#x9ED8;&#x8BA4;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x5373;&#x53EF;:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;start-kubernetes.sh&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p><strong>&#x9700;&#x8981;&#x6CE8;&#x610F;</strong>&#x7684;&#x4E00;&#x70B9;&#x5728;&#x4E8E;&#xFF0C;<strong>start-kubernetes.sh</strong>&#x811A;&#x672C;&#x5C06;&#x4F5C;&#x4E3A;Docker&#x5BB9;&#x5668;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#xFF0C;&#x5FC5;&#x987B;&#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x3002;&#x56E0;&#x4E3A;<strong>Docker&#x5BB9;&#x5668;&#x4EC5;&#x5728;1&#x53F7;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x4FDD;&#x6301;&#x8FD0;&#x884C;</strong>&#xFF0C;&#x6362;&#x8A00;&#x4E4B;&#xFF0C;Docker&#x5BB9;&#x5668;&#x5C06;&#x5728;1&#x53F7;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x540E;<strong>Exited</strong>&#x3002;&#x7531;&#x4E8E;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x90FD;&#x4EE5;&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#x6267;&#x884C;&#xFF0C;&#x6211;&#x5728;&#x811A;&#x672C;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x4E86;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x4EE5;&#x4FDD;&#x6301;<strong>start-kubernetes.sh</strong>&#x811A;&#x672C;&#x59CB;&#x7EC8;&#x5904;&#x4E8E;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x3002;</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"code\"><pre><div class=\"line\"># just keep this script running</div><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"string\">[[ true ]]</span>; <span class=\"keyword\">do</span></div><div class=\"line\">\tsleep <span class=\"number\">1</span></div><div class=\"line\">done</div></pre></td></tr></table></figure>\n<h2 id=\"&#x4E09;-&#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"><a href=\"#&#x4E09;-&#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x4E09;. &#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"></a>&#x4E09;. &#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;</h2><p><a href=\"http://supervisord.org/\" target=\"_blank\" rel=\"external\">Supervisor</a>&#x662F;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x7F16;&#x5199;supervisor&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<strong>kubernetes.conf</strong>:</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">[supervisord]</span></div><div class=\"line\"><span class=\"attr\">nodaemon</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:etcd]</div><div class=\"line\"><span class=\"attr\">command</span>=etcd --data-dir=/var/etcd/data</div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/etcd.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/etcd.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-apiserver]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-apiserver --service-cluster-ip-range=<span class=\"number\">10.0</span>.<span class=\"number\">0.1</span>/<span class=\"number\">24</span> --insecure-bind-address=<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span> --etcd_servers=http://<span class=\"number\">127.0</span>.<span class=\"number\">0.1</span>:<span class=\"number\">4001</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kube-apiserver.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kube-apiserver.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-controller-manager]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-controller-manager --master=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/controller-manager.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/controller-manager.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-scheduler]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-scheduler --master=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kube-scheduler.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kube-scheduler.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kubelet]</div><div class=\"line\"><span class=\"attr\">command</span>=kubelet --api_servers=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span> --address=<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span> --cluster_dns=<span class=\"number\">10.0</span>.<span class=\"number\">0.10</span> --cluster_domain=<span class=\"string\">&quot;kubernetes.local&quot;</span> --pod-infra-container-image=<span class=\"string\">&quot;kiwenlau/pause:0.8.0&quot;</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kubelet.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kubelet.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-proxy]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-proxy --master=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kube-proxy.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kube-proxy.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:docker]</div><div class=\"line\"><span class=\"attr\">command</span>=docker daemon</div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/docker.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/docker.stderr.log</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5C06;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x542F;&#x52A8;&#x547D;&#x4EE4;&#x8BBE;&#x4E3A;command&#x5373;&#x53EF;&#x3002;autorestart&#x53C2;&#x6570;&#x8BBE;&#x4E3A;true&#xFF0C;&#x610F;&#x5473;&#x7740;supervisor&#x5C06;&#x8D1F;&#x8D23;&#x91CD;&#x542F;&#x610F;&#x5916;&#x9000;&#x51FA;&#x7684;&#x7EC4;&#x4EF6;&#x3002;stdout_logfile&#x548C;stderr_logfile&#x53C2;&#x6570;&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x547D;&#x4EE4;&#x7684;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x548C;&#x6807;&#x51C6;&#x9519;&#x8BEF;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x5728;Dockerfile&#x4E2D;&#xFF0C;&#x5C06;<strong>supervisord</strong>&#x6307;&#x5B9A;&#x4E3A;Docker&#x5BB9;&#x5668;&#x9ED8;&#x8BA4;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x5373;&#x53EF;:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;supervisord&quot;</span>, <span class=\"string\">&quot;-c&quot;</span>, <span class=\"string\">&quot;/etc/supervisor/conf.d/kubernetes.conf&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;, supervisord&#x662F;Docker&#x5BB9;&#x5668;&#x4E2D;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x3002;nodaemon&#x8BBE;&#x4E3A;true&#x65F6;&#xFF0C;&#x8868;&#x793A;supervisor&#x4FDD;&#x6301;&#x524D;&#x53F0;&#x8FD0;&#x884C;&#x800C;&#x975E;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x3002;&#x82E5;supervisor&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x5219;Docker&#x5BB9;&#x5668;&#x4E5F;&#x4F1A;&#x5728;&#x6267;&#x884C;supervisord&#x547D;&#x4EE4;&#x540E;&#x7ACB;&#x5373;Exited.</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">[supervisord]</span></div><div class=\"line\"><span class=\"attr\">nodaemon</span>=<span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<h2 id=\"&#x56DB;-&#x603B;&#x7ED3;\"><a href=\"#&#x56DB;-&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x56DB;. &#x603B;&#x7ED3;\"></a>&#x56DB;. &#x603B;&#x7ED3;</h2><p>&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;&#xFF0C;&#x4F18;&#x52BF;&#x662F;&#x5927;&#x5BB6;&#x6BD4;&#x8F83;&#x719F;&#x6089;&#x3002;&#x7531;&#x4E8E;&#x9700;&#x8981;&#x4FDD;&#x6301;Docker&#x5BB9;&#x5668;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#x59CB;&#x7EC8;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x3002;&#x82E5;&#x8981;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x610F;&#x5916;&#x9000;&#x51FA;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x542F;&#x7684;&#x8BDD;&#xFF0C;&#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;</p>\n<p>&#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;&#xFF0C;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4FDD;&#x6301;1&#x53F7;&#x8FDB;&#x7A0B;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#xFF0C;&#x4EE5;&#x53CA;&#x8FDB;&#x7A0B;&#x610F;&#x5916;&#x9000;&#x51FA;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x542F;&#xFF0C;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x90FD;&#x5F88;&#x7B80;&#x5355;&#x3002;</p>\n<h4 id=\"&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"><a href=\"#&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"></a><strong>&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong></h4><p><strong>GitHub&#x5730;&#x5740;</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/single-kubernetes-docker\" target=\"_blank\" rel=\"external\">kiwenlau/single-kubernetes-docker</a></li>\n</ul>\n<p>&#x4E0B;&#x56FE;&#x663E;&#x793A;&#x4E86;&#x6211;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x5355;&#x673A;&#x7248;Kubernetes&#x7684;&#x67B6;&#x6784;&#x3002;&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4E00;&#x5171;&#x8FD0;&#x884C;&#x4E86;7&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x8FD0;&#x884C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x3002;</p>\n<p><img src=\"/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.png\" width=\"500\"></p>\n<h4 id=\"&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"><a href=\"#&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"></a><strong>&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong></h4><p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-shell\" target=\"_blank\" rel=\"external\">kiwenlau/kubernetes-shell</a></li>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-supervisor\" target=\"_blank\" rel=\"external\">kiwenlau/kubernetes-supervisor</a></li>\n</ul>\n<p>&#x8BE5;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x6211;&#x5C06;kubernetes&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#xFF1A;etcd, controller manager, apiserver, scheduler, kubelet, proxy&#x4EE5;&#x53CA;docker daemon&#x5747;&#x8FD0;&#x884C;&#x5728;&#x540C;&#x4E00;&#x4E2A;Docker&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#x3002;</p>\n<p>&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7531;shell&#x811A;&#x672C;&#x6216;&#x8005;supervisor&#x542F;&#x52A8;&#x3002;</p>\n<p><img src=\"/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.png\" width=\"500\"></p>\n<h2 id=\"&#x53C2;&#x8003;\"><a href=\"#&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;\"></a>&#x53C2;&#x8003;</h2><ol>\n<li><a href=\"https://docs.docker.com/engine/articles/using_supervisord/\" target=\"_blank\" rel=\"external\">Using Supervisor with Docker</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps\" target=\"_blank\" rel=\"external\">How To Install and Manage Supervisor on Ubuntu and Debian VPS</a></li>\n<li><a href=\"http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Kuberntes</a></li>\n<li><a href=\"https://github.com/kiwenlau/single-kubernetes-docker\" target=\"_blank\" rel=\"external\">kiwenlau/single-kubernetes-docker</a></li>\n</ol>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x4E24;&#x79CD;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x65B9;&#x6CD5;: <strong>shell&#x811A;&#x672C;</strong>&#x548C;<strong>supervisor</strong>&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-shell\">kiwenlau/kubernetes-shell</a></li>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-supervisor\">kiwenlau/kubernetes-supervisor</a></li>\n</ul>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/01/09/160109-multiple-processes--docker-container/\">2016-01-09</a></li>\n</ul>\n<h2 id=\"&#x4E00;-&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. &#x7B80;&#x4ECB;\"></a>&#x4E00;. &#x7B80;&#x4ECB;</h2><p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;Docker&#x5BB9;&#x5668;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x5355;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x9879;&#x76EE;&#x201D;<strong>&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong>&#x201C;&#xFF0C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5206;&#x522B;&#x8FD0;&#x884C;&#x5728;&#x5404;&#x4E2A;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BB9;&#x5668;&#x53EA;&#x8FD0;&#x884C;&#x5355;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;</p>\n<p>&#x7136;&#x800C;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x9879;&#x76EE;&#x201D;<strong>&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong>&#x201C;&#xFF0C;kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5747;&#x8FD0;&#x884C;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x8BE5;&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x4E86;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;&#x90A3;&#x4E48;&#xFF0C;<strong>&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;&#xFF1F;</strong></p>\n<p>&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x4F7F;&#x7528;<strong>Shell&#x811A;&#x672C;</strong>&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x4F7F;&#x7528;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x5DE5;&#x5177;<a href=\"http://supervisord.org/\">Supervisor</a>&#x3002;<a href=\"https://github.com/kiwenlau/kubernetes-shell\">kiwenlau/kubernetes-shell</a>&#x548C;<a href=\"https://github.com/kiwenlau/kubernetes-supervisor\">kiwenlau/kubernetes-supervisor</a>&#x5206;&#x522B;&#x91C7;&#x7528;&#x4E86;&#x8FD9;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x4E8E;&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x6765;&#x8FD0;&#x884C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x201D;<strong>&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong>&#x201C;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x5C06;&#x5206;&#x522B;&#x4ECB;&#x7ECD;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"><a href=\"#&#x4E8C;-&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x4E8C;. &#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"></a>&#x4E8C;. &#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;</h2><p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x4F1A;&#x6BD4;&#x8F83;&#x719F;&#x6089;&#xFF0C;&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x4F9D;&#x6B21;&#x542F;&#x52A8;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5373;&#x53EF;&#x3002;&#x4EE5;&#x4E0B;&#x4E3A;<strong>start-kubernetes.sh</strong></p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"code\"><pre><div class=\"line\">#!/bin/bash</div><div class=\"line\"></div><div class=\"line\"># start docker daemon</div><div class=\"line\">docker daemon &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/docker.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># start etcd</div><div class=\"line\">etcd --data-dir=/<span class=\"built_in\">var</span>/etcd/data &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/etcd.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># wait <span class=\"keyword\">for</span> ectd to setup</div><div class=\"line\">sleep <span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\"># start apiserver</div><div class=\"line\">kube-apiserver --service-cluster-ip-<span class=\"built_in\">range</span>=<span class=\"number\">10.0</span>.0.1/<span class=\"number\">24</span> --insecure-bind-address=<span class=\"number\">0.0</span>.0.0 --etcd_servers=http://<span class=\"number\">127.0</span>.0.1:<span class=\"number\">4001</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-apiserver.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># wait <span class=\"keyword\">for</span> apiserver to setup</div><div class=\"line\">sleep <span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\"># start controller manager, sheduler, kubelet <span class=\"keyword\">and</span> proxy</div><div class=\"line\">kube-controller-manager --master=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-controller-manager.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\">kube-scheduler --master=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-scheduler.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\">kubelet --api_servers=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> --address=<span class=\"number\">0.0</span>.0.0 --cluster_dns=<span class=\"number\">10.0</span>.0.10 --cluster_domain=<span class=\"string\">&quot;kubernetes.local&quot;</span> --pod-infra-container-<span class=\"built_in\">image</span>=<span class=\"string\">&quot;kiwenlau/pause:0.8.0&quot;</span>  &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kubelet.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\">kube-proxy --master=http://<span class=\"number\">0.0</span>.0.0:<span class=\"number\">8080</span> &gt; /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/kube-proxy.<span class=\"built_in\">log</span> <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> &amp;</div><div class=\"line\"></div><div class=\"line\"># just keep this script running</div><div class=\"line\"><span class=\"keyword\">while</span> [[ <span class=\"literal\">true</span> ]]; <span class=\"keyword\">do</span></div><div class=\"line\">\tsleep <span class=\"number\">1</span></div><div class=\"line\">done</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5728;Dockerfile&#x4E2D;&#xFF0C;&#x5C06;<strong>start-kubernetes.sh</strong>&#x6307;&#x5B9A;&#x4E3A;Docker&#x5BB9;&#x5668;&#x9ED8;&#x8BA4;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x5373;&#x53EF;:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;start-kubernetes.sh&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p><strong>&#x9700;&#x8981;&#x6CE8;&#x610F;</strong>&#x7684;&#x4E00;&#x70B9;&#x5728;&#x4E8E;&#xFF0C;<strong>start-kubernetes.sh</strong>&#x811A;&#x672C;&#x5C06;&#x4F5C;&#x4E3A;Docker&#x5BB9;&#x5668;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#xFF0C;&#x5FC5;&#x987B;&#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x3002;&#x56E0;&#x4E3A;<strong>Docker&#x5BB9;&#x5668;&#x4EC5;&#x5728;1&#x53F7;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x65F6;&#x4FDD;&#x6301;&#x8FD0;&#x884C;</strong>&#xFF0C;&#x6362;&#x8A00;&#x4E4B;&#xFF0C;Docker&#x5BB9;&#x5668;&#x5C06;&#x5728;1&#x53F7;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x540E;<strong>Exited</strong>&#x3002;&#x7531;&#x4E8E;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x90FD;&#x4EE5;&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#x6267;&#x884C;&#xFF0C;&#x6211;&#x5728;&#x811A;&#x672C;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x4E86;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x4EE5;&#x4FDD;&#x6301;<strong>start-kubernetes.sh</strong>&#x811A;&#x672C;&#x59CB;&#x7EC8;&#x5904;&#x4E8E;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x3002;</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"code\"><pre><div class=\"line\"># just keep this script running</div><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"string\">[[ true ]]</span>; <span class=\"keyword\">do</span></div><div class=\"line\">\tsleep <span class=\"number\">1</span></div><div class=\"line\">done</div></pre></td></tr></table></figure>\n<h2 id=\"&#x4E09;-&#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"><a href=\"#&#x4E09;-&#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x4E09;. &#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;\"></a>&#x4E09;. &#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;</h2><p><a href=\"http://supervisord.org/\">Supervisor</a>&#x662F;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x7F16;&#x5199;supervisor&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<strong>kubernetes.conf</strong>:</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">[supervisord]</span></div><div class=\"line\"><span class=\"attr\">nodaemon</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:etcd]</div><div class=\"line\"><span class=\"attr\">command</span>=etcd --data-dir=/var/etcd/data</div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/etcd.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/etcd.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-apiserver]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-apiserver --service-cluster-ip-range=<span class=\"number\">10.0</span>.<span class=\"number\">0.1</span>/<span class=\"number\">24</span> --insecure-bind-address=<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span> --etcd_servers=http://<span class=\"number\">127.0</span>.<span class=\"number\">0.1</span>:<span class=\"number\">4001</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kube-apiserver.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kube-apiserver.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-controller-manager]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-controller-manager --master=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/controller-manager.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/controller-manager.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-scheduler]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-scheduler --master=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kube-scheduler.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kube-scheduler.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kubelet]</div><div class=\"line\"><span class=\"attr\">command</span>=kubelet --api_servers=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span> --address=<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span> --cluster_dns=<span class=\"number\">10.0</span>.<span class=\"number\">0.10</span> --cluster_domain=<span class=\"string\">&quot;kubernetes.local&quot;</span> --pod-infra-container-image=<span class=\"string\">&quot;kiwenlau/pause:0.8.0&quot;</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kubelet.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kubelet.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:kube-proxy]</div><div class=\"line\"><span class=\"attr\">command</span>=kube-proxy --master=http://<span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">8080</span></div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/kube-proxy.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/kube-proxy.stderr.log</div><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[program:docker]</div><div class=\"line\"><span class=\"attr\">command</span>=docker daemon</div><div class=\"line\"><span class=\"attr\">autorestart</span>=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">stdout_logfile</span>=/var/log/docker.stdout.log</div><div class=\"line\"><span class=\"attr\">stderr_logfile</span>=/var/log/docker.stderr.log</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5C06;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x542F;&#x52A8;&#x547D;&#x4EE4;&#x8BBE;&#x4E3A;command&#x5373;&#x53EF;&#x3002;autorestart&#x53C2;&#x6570;&#x8BBE;&#x4E3A;true&#xFF0C;&#x610F;&#x5473;&#x7740;supervisor&#x5C06;&#x8D1F;&#x8D23;&#x91CD;&#x542F;&#x610F;&#x5916;&#x9000;&#x51FA;&#x7684;&#x7EC4;&#x4EF6;&#x3002;stdout_logfile&#x548C;stderr_logfile&#x53C2;&#x6570;&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x547D;&#x4EE4;&#x7684;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x548C;&#x6807;&#x51C6;&#x9519;&#x8BEF;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x5728;Dockerfile&#x4E2D;&#xFF0C;&#x5C06;<strong>supervisord</strong>&#x6307;&#x5B9A;&#x4E3A;Docker&#x5BB9;&#x5668;&#x9ED8;&#x8BA4;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x5373;&#x53EF;:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;supervisord&quot;</span>, <span class=\"string\">&quot;-c&quot;</span>, <span class=\"string\">&quot;/etc/supervisor/conf.d/kubernetes.conf&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;, supervisord&#x662F;Docker&#x5BB9;&#x5668;&#x4E2D;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x3002;nodaemon&#x8BBE;&#x4E3A;true&#x65F6;&#xFF0C;&#x8868;&#x793A;supervisor&#x4FDD;&#x6301;&#x524D;&#x53F0;&#x8FD0;&#x884C;&#x800C;&#x975E;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x3002;&#x82E5;supervisor&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x5219;Docker&#x5BB9;&#x5668;&#x4E5F;&#x4F1A;&#x5728;&#x6267;&#x884C;supervisord&#x547D;&#x4EE4;&#x540E;&#x7ACB;&#x5373;Exited.</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">[supervisord]</span></div><div class=\"line\"><span class=\"attr\">nodaemon</span>=<span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<h2 id=\"&#x56DB;-&#x603B;&#x7ED3;\"><a href=\"#&#x56DB;-&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x56DB;. &#x603B;&#x7ED3;\"></a>&#x56DB;. &#x603B;&#x7ED3;</h2><p>&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;&#xFF0C;&#x4F18;&#x52BF;&#x662F;&#x5927;&#x5BB6;&#x6BD4;&#x8F83;&#x719F;&#x6089;&#x3002;&#x7531;&#x4E8E;&#x9700;&#x8981;&#x4FDD;&#x6301;Docker&#x5BB9;&#x5668;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#x59CB;&#x7EC8;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x3002;&#x82E5;&#x8981;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x610F;&#x5916;&#x9000;&#x51FA;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x542F;&#x7684;&#x8BDD;&#xFF0C;&#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;</p>\n<p>&#x4F7F;&#x7528;supervisor&#x8FD0;&#x884C;&#x591A;&#x8FDB;&#x7A0B;Docker&#x5BB9;&#x5668;&#xFF0C;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4FDD;&#x6301;1&#x53F7;&#x8FDB;&#x7A0B;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#xFF0C;&#x4EE5;&#x53CA;&#x8FDB;&#x7A0B;&#x610F;&#x5916;&#x9000;&#x51FA;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x542F;&#xFF0C;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x90FD;&#x5F88;&#x7B80;&#x5355;&#x3002;</p>\n<h4 id=\"&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"><a href=\"#&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"></a><strong>&#x4F7F;&#x7528;&#x591A;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong></h4><p><strong>GitHub&#x5730;&#x5740;</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/single-kubernetes-docker\">kiwenlau/single-kubernetes-docker</a></li>\n</ul>\n<p>&#x4E0B;&#x56FE;&#x663E;&#x793A;&#x4E86;&#x6211;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x5355;&#x673A;&#x7248;Kubernetes&#x7684;&#x67B6;&#x6784;&#x3002;&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4E00;&#x5171;&#x8FD0;&#x884C;&#x4E86;7&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x8FD0;&#x884C;Kubernetes&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x3002;</p>\n<p><img src=\"/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.png\" width=\"500\"></p>\n<h4 id=\"&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"><a href=\"#&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes\"></a><strong>&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;Kubernetes</strong></h4><p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-shell\">kiwenlau/kubernetes-shell</a></li>\n<li><a href=\"https://github.com/kiwenlau/kubernetes-supervisor\">kiwenlau/kubernetes-supervisor</a></li>\n</ul>\n<p>&#x8BE5;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x6211;&#x5C06;kubernetes&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#xFF1A;etcd, controller manager, apiserver, scheduler, kubelet, proxy&#x4EE5;&#x53CA;docker daemon&#x5747;&#x8FD0;&#x884C;&#x5728;&#x540C;&#x4E00;&#x4E2A;Docker&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#x3002;</p>\n<p>&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x7531;shell&#x811A;&#x672C;&#x6216;&#x8005;supervisor&#x542F;&#x52A8;&#x3002;</p>\n<p><img src=\"/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.png\" width=\"500\"></p>\n<h2 id=\"&#x53C2;&#x8003;\"><a href=\"#&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;\"></a>&#x53C2;&#x8003;</h2><ol>\n<li><a href=\"https://docs.docker.com/engine/articles/using_supervisord/\">Using Supervisor with Docker</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps\">How To Install and Manage Supervisor on Ubuntu and Debian VPS</a></li>\n<li><a href=\"http://kiwenlau.com/2015/11/28/151128-single-kubernetes-docker/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Kuberntes</a></li>\n<li><a href=\"https://github.com/kiwenlau/single-kubernetes-docker\">kiwenlau/single-kubernetes-docker</a></li>\n</ol>"},{"title":"DockerHadoop","date":"2016-06-05T02:00:00.000Z","_content":"\n**:** HadoopDockerDockerHadoop\n\n**GitHub:**\n- [kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-06-05](http://kiwenlau.com/2016/06/05/160605-compile-hadoop-docker/)\n\n<img src=\"160605-compile-hadoop-docker/hadoop-docker.png\" width = \"300\"/>\n\n[64UbuntuHadoop](http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/)DockerHadoop\n\n## . \n\n#### **1. Docker**\n\n```\nsudo docker pull kiwenlau/compile-hadoop\n```\n\nDocker\n\n```\nsudo docker build -t kiwenlau/compile-hadoop .\n```\n\n\n#### **2. [Hadoop](http://archive.apache.org/dist/hadoop/core/)**\n\n```\nexport VERSION=2.7.2\nwget http://archive.apache.org/dist/hadoop/core/hadoop-$VERSION/hadoop-$VERSION-src.tar.gz\ntar -xzvf hadoop-$VERSION-src.tar.gz\n```\n\n#### **3. DockerHadoop**\n\n```\nsudo docker run -v $(pwd)/hadoop-$VERSION-src:/hadoop-$VERSION-src kiwenlau/compile-hadoop /root/compile.sh $VERSION\n```\n\n15~30 \n\n:\n\n```\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 23:46.056s\n[INFO] Finished at: Tue May 31 16:40:53 UTC 2016\n[INFO] Final Memory: 210M/915M\n[INFO] ------------------------------------------------------------------------\n\n\ncomile hadoop 2.7.2 success!\n```\n\n\n\n```\nhadoop-2.7.2-src/hadoop-dist/target/hadoop-2.7.2.tar.gz\n```\n\nHadoopVERSION\n\nwgetGitHubHadoop:\n\n```\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/$VERSION/hadoop-VERSION.tar.gz\n```\n\n## . \n\n[kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)\n\n#### **1. Docker**\n\n\n\n#### **2. **\n\nDockerDocker\n\n#### **3. Docker**\n\n(volume)\n\n","source":"_posts/2016/06/05/160605-compile-hadoop-docker.md","raw":"title: DockerHadoop\n\ndate: 2016-06-05 10:00\n\ntags: [Docker, Hadoop]\n\n---\n\n**:** HadoopDockerDockerHadoop\n\n**GitHub:**\n- [kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-06-05](http://kiwenlau.com/2016/06/05/160605-compile-hadoop-docker/)\n\n<img src=\"160605-compile-hadoop-docker/hadoop-docker.png\" width = \"300\"/>\n\n[64UbuntuHadoop](http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/)DockerHadoop\n\n## . \n\n#### **1. Docker**\n\n```\nsudo docker pull kiwenlau/compile-hadoop\n```\n\nDocker\n\n```\nsudo docker build -t kiwenlau/compile-hadoop .\n```\n\n\n#### **2. [Hadoop](http://archive.apache.org/dist/hadoop/core/)**\n\n```\nexport VERSION=2.7.2\nwget http://archive.apache.org/dist/hadoop/core/hadoop-$VERSION/hadoop-$VERSION-src.tar.gz\ntar -xzvf hadoop-$VERSION-src.tar.gz\n```\n\n#### **3. DockerHadoop**\n\n```\nsudo docker run -v $(pwd)/hadoop-$VERSION-src:/hadoop-$VERSION-src kiwenlau/compile-hadoop /root/compile.sh $VERSION\n```\n\n15~30 \n\n:\n\n```\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 23:46.056s\n[INFO] Finished at: Tue May 31 16:40:53 UTC 2016\n[INFO] Final Memory: 210M/915M\n[INFO] ------------------------------------------------------------------------\n\n\ncomile hadoop 2.7.2 success!\n```\n\n\n\n```\nhadoop-2.7.2-src/hadoop-dist/target/hadoop-2.7.2.tar.gz\n```\n\nHadoopVERSION\n\nwgetGitHubHadoop:\n\n```\nwget https://github.com/kiwenlau/compile-hadoop/releases/download/$VERSION/hadoop-VERSION.tar.gz\n```\n\n## . \n\n[kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)\n\n#### **1. Docker**\n\n\n\n#### **2. **\n\nDockerDocker\n\n#### **3. Docker**\n\n(volume)\n\n","slug":"2016/06/05/160605-compile-hadoop-docker","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtkw000971fy1ioyfjz4","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x5C06;&#x7F16;&#x8BD1;Hadoop&#x6240;&#x9700;&#x8981;&#x7684;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x5230;Docker&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7F16;&#x8BD1;&#x6548;&#x7387;&#xFF0C;&#x540C;&#x65F6;&#x907F;&#x514D;&#x6C61;&#x67D3;&#x4E3B;&#x673A;&#x3002;&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x8F6F;&#x4EF6;&#x65F6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/compile-hadoop\" target=\"_blank\" rel=\"external\">kiwenlau/compile-hadoop</a></li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/06/05/160605-compile-hadoop-docker/\">2016-06-05</a></li>\n</ul>\n<p><img src=\"/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.png\" width=\"300\"></p>\n<p>&#x5728;&#x524D;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E86;<a href=\"http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/\">64&#x4F4D;Ubuntu&#x4E2D;&#x7F16;&#x8BD1;Hadoop&#x7684;&#x6B65;&#x9AA4;</a>&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;&#x57FA;&#x4E8E;Docker&#x7F16;&#x8BD1;Hadoop&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x4E00;-&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E00;-&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E00;. &#x7F16;&#x8BD1;&#x6B65;&#x9AA4;\"></a>&#x4E00;. &#x7F16;&#x8BD1;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><figure class=\"highlight gauss\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"keyword\">compile</span>-hadoop</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x81EA;&#x884C;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> docker <span class=\"keyword\">build </span>-t kiwenlau/compile-hadoop .</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"><a href=\"#2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"></a><strong>2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;<a href=\"http://archive.apache.org/dist/hadoop/core/\" target=\"_blank\" rel=\"external\">Hadoop&#x6E90;&#x6587;&#x4EF6;</a></strong></h4><figure class=\"highlight elixir\"><table><tr><td class=\"code\"><pre><div class=\"line\">export VERSION=<span class=\"number\">2.7</span>.<span class=\"number\">2</span></div><div class=\"line\">wget <span class=\"symbol\">http:</span>/<span class=\"regexp\">/archive.apache.org/dist</span><span class=\"regexp\">/hadoop/core</span><span class=\"regexp\">/hadoop-$VERSION/hadoop</span>-<span class=\"variable\">$VERSION</span>-src.tar.gz</div><div class=\"line\">tar -xzvf hadoop-<span class=\"variable\">$VERSION</span>-src.tar.gz</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop\"><a href=\"#3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop\" class=\"headerlink\" title=\"3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop\"></a><strong>3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"keyword\">run</span><span class=\"bash\"> -v $(<span class=\"built_in\">pwd</span>)/hadoop-<span class=\"variable\">$VERSION</span>-src:/hadoop-<span class=\"variable\">$VERSION</span>-src kiwenlau/compile-hadoop /root/compile.sh <span class=\"variable\">$VERSION</span></span></div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E00;&#x6B65;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#xFF0C;&#x5927;&#x6982;&#x9700;&#x8981;15~30&#x5206;&#x949F;&#x3002; </p>\n<p>&#x6B63;&#x786E;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight less\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">BUILD</span> <span class=\"selector-tag\">SUCCESS</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Total</span> <span class=\"selector-tag\">time</span>: <span class=\"selector-tag\">23</span><span class=\"selector-pseudo\">:46.056s</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Finished</span> <span class=\"selector-tag\">at</span>: <span class=\"selector-tag\">Tue</span> <span class=\"selector-tag\">May</span> <span class=\"selector-tag\">31</span> <span class=\"selector-tag\">16</span><span class=\"selector-pseudo\">:40</span><span class=\"selector-pseudo\">:53</span> <span class=\"selector-tag\">UTC</span> <span class=\"selector-tag\">2016</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Final</span> <span class=\"selector-tag\">Memory</span>: <span class=\"selector-tag\">210M</span>/<span class=\"selector-tag\">915M</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">comile</span> <span class=\"selector-tag\">hadoop</span> <span class=\"selector-tag\">2</span><span class=\"selector-class\">.7</span><span class=\"selector-class\">.2</span> <span class=\"selector-tag\">success</span>!</div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x597D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x5305;&#x4F4D;&#x4E8E;</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">hadoop<span class=\"number\">-2.7</span><span class=\"number\">.2</span>-src/hadoop-dist/target/hadoop<span class=\"number\">-2.7</span><span class=\"number\">.2</span>.tar.gz</div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x7684;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x4E00;&#x81F4;&#xFF0C;&#x4EC5;&#x9700;&#x6539;&#x53D8;VERSION&#x7684;&#x503C;&#x3002;</p>\n<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;wget&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;GitHub&#x4E0A;&#x7684;Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/$VERSION/</span>hadoop-VERSION.tar.gz</div></pre></td></tr></table></figure>\n<h2 id=\"&#x4E8C;-&#x65B9;&#x6CD5;&#x603B;&#x7ED3;\"><a href=\"#&#x4E8C;-&#x65B9;&#x6CD5;&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x4E8C;. &#x65B9;&#x6CD5;&#x603B;&#x7ED3;\"></a>&#x4E8C;. &#x65B9;&#x6CD5;&#x603B;&#x7ED3;</h2><p>&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x8F6F;&#x4EF6;&#x65F6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5177;&#x4F53;&#x7EC6;&#x8282;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6E90;&#x7801;<a href=\"https://github.com/kiwenlau/compile-hadoop\" target=\"_blank\" rel=\"external\">kiwenlau/compile-hadoop</a></p>\n<h4 id=\"1-&#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;\"></a><strong>1. &#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;</strong></h4><p>&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;&#x5F80;&#x5F80;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x5F88;&#x591A;&#x4F9D;&#x8D56;&#xFF0C;&#x800C;&#x7F16;&#x8BD1;&#x4E0D;&#x540C;&#x7684;&#x8F6F;&#x4EF6;&#x6709;&#x65F6;&#x9700;&#x8981;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x5728;&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;&#x4F1A;&#x6C61;&#x67D3;&#x4E3B;&#x673A;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x4E0D;&#x6613;&#x91CD;&#x590D;&#x3002;</p>\n<h4 id=\"2-&#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;\"><a href=\"#2-&#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;\"></a><strong>2. &#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;</strong></h4><p>&#x6E90;&#x7801;&#x4E0D;&#x653E;&#x5728;Docker&#x955C;&#x50CF;&#x91CC;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7F16;&#x8BD1;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#x7684;&#x6548;&#x7387;&#x3002;</p>\n<h4 id=\"3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;\"><a href=\"#3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;\" class=\"headerlink\" title=\"3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;\"></a><strong>3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;</strong></h4><p>&#x8F6F;&#x4EF6;&#x6E90;&#x7801;&#x4EE5;&#x6570;&#x636E;&#x5377;(volume)&#x7684;&#x5F62;&#x5F0F;&#x6302;&#x8F7D;&#x7684;&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x7F16;&#x8BD1;&#x6240;&#x5F97;&#x7684;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x4E5F;&#x5C06;&#x4F4D;&#x4E8E;&#x6570;&#x636E;&#x5377;&#x5185;&#x3002;</p>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x5C06;&#x7F16;&#x8BD1;Hadoop&#x6240;&#x9700;&#x8981;&#x7684;&#x4F9D;&#x8D56;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x5230;Docker&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7F16;&#x8BD1;&#x6548;&#x7387;&#xFF0C;&#x540C;&#x65F6;&#x907F;&#x514D;&#x6C61;&#x67D3;&#x4E3B;&#x673A;&#x3002;&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x8F6F;&#x4EF6;&#x65F6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/compile-hadoop\">kiwenlau/compile-hadoop</a></li>\n</ul>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/06/05/160605-compile-hadoop-docker/\">2016-06-05</a></li>\n</ul>\n<p><img src=\"/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.png\" width=\"300\"></p>\n<p>&#x5728;&#x524D;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E86;<a href=\"http://kiwenlau.com/2016/05/29/160529-compile-hadoop-ubuntu/\">64&#x4F4D;Ubuntu&#x4E2D;&#x7F16;&#x8BD1;Hadoop&#x7684;&#x6B65;&#x9AA4;</a>&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;&#x57FA;&#x4E8E;Docker&#x7F16;&#x8BD1;Hadoop&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x4E00;-&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E00;-&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E00;. &#x7F16;&#x8BD1;&#x6B65;&#x9AA4;\"></a>&#x4E00;. &#x7F16;&#x8BD1;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><figure class=\"highlight gauss\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"keyword\">compile</span>-hadoop</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x81EA;&#x884C;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> docker <span class=\"keyword\">build </span>-t kiwenlau/compile-hadoop .</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"><a href=\"#2-&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;Hadoop&#x6E90;&#x6587;&#x4EF6;\"></a><strong>2. &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;<a href=\"http://archive.apache.org/dist/hadoop/core/\">Hadoop&#x6E90;&#x6587;&#x4EF6;</a></strong></h4><figure class=\"highlight elixir\"><table><tr><td class=\"code\"><pre><div class=\"line\">export VERSION=<span class=\"number\">2.7</span>.<span class=\"number\">2</span></div><div class=\"line\">wget <span class=\"symbol\">http:</span>/<span class=\"regexp\">/archive.apache.org/dist</span><span class=\"regexp\">/hadoop/core</span><span class=\"regexp\">/hadoop-$VERSION/hadoop</span>-<span class=\"variable\">$VERSION</span>-src.tar.gz</div><div class=\"line\">tar -xzvf hadoop-<span class=\"variable\">$VERSION</span>-src.tar.gz</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop\"><a href=\"#3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop\" class=\"headerlink\" title=\"3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop\"></a><strong>3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7F16;&#x8BD1;Hadoop</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"keyword\">run</span><span class=\"bash\"> -v $(<span class=\"built_in\">pwd</span>)/hadoop-<span class=\"variable\">$VERSION</span>-src:/hadoop-<span class=\"variable\">$VERSION</span>-src kiwenlau/compile-hadoop /root/compile.sh <span class=\"variable\">$VERSION</span></span></div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E00;&#x6B65;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#xFF0C;&#x5927;&#x6982;&#x9700;&#x8981;15~30&#x5206;&#x949F;&#x3002; </p>\n<p>&#x6B63;&#x786E;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight less\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">BUILD</span> <span class=\"selector-tag\">SUCCESS</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Total</span> <span class=\"selector-tag\">time</span>: <span class=\"selector-tag\">23</span><span class=\"selector-pseudo\">:46.056s</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Finished</span> <span class=\"selector-tag\">at</span>: <span class=\"selector-tag\">Tue</span> <span class=\"selector-tag\">May</span> <span class=\"selector-tag\">31</span> <span class=\"selector-tag\">16</span><span class=\"selector-pseudo\">:40</span><span class=\"selector-pseudo\">:53</span> <span class=\"selector-tag\">UTC</span> <span class=\"selector-tag\">2016</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">Final</span> <span class=\"selector-tag\">Memory</span>: <span class=\"selector-tag\">210M</span>/<span class=\"selector-tag\">915M</span></div><div class=\"line\"><span class=\"selector-attr\">[INFO]</span> <span class=\"selector-tag\">------------------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">comile</span> <span class=\"selector-tag\">hadoop</span> <span class=\"selector-tag\">2</span><span class=\"selector-class\">.7</span><span class=\"selector-class\">.2</span> <span class=\"selector-tag\">success</span>!</div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x597D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x5305;&#x4F4D;&#x4E8E;</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">hadoop<span class=\"number\">-2.7</span><span class=\"number\">.2</span>-src/hadoop-dist/target/hadoop<span class=\"number\">-2.7</span><span class=\"number\">.2</span>.tar.gz</div></pre></td></tr></table></figure>\n<p>&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x7248;&#x672C;&#x7684;Hadoop&#x7684;&#x6B65;&#x9AA4;&#x4E00;&#x81F4;&#xFF0C;&#x4EC5;&#x9700;&#x6539;&#x53D8;VERSION&#x7684;&#x503C;&#x3002;</p>\n<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;wget&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;GitHub&#x4E0A;&#x7684;Hadoop&#x4E8C;&#x8FDB;&#x5236;&#x5305;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">wget https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/kiwenlau/</span>compile-hadoop<span class=\"regexp\">/releases/</span>download<span class=\"regexp\">/$VERSION/</span>hadoop-VERSION.tar.gz</div></pre></td></tr></table></figure>\n<h2 id=\"&#x4E8C;-&#x65B9;&#x6CD5;&#x603B;&#x7ED3;\"><a href=\"#&#x4E8C;-&#x65B9;&#x6CD5;&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x4E8C;. &#x65B9;&#x6CD5;&#x603B;&#x7ED3;\"></a>&#x4E8C;. &#x65B9;&#x6CD5;&#x603B;&#x7ED3;</h2><p>&#x7F16;&#x8BD1;&#x5176;&#x4ED6;&#x8F6F;&#x4EF6;&#x65F6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5177;&#x4F53;&#x7EC6;&#x8282;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6E90;&#x7801;<a href=\"https://github.com/kiwenlau/compile-hadoop\">kiwenlau/compile-hadoop</a></p>\n<h4 id=\"1-&#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;\"></a><strong>1. &#x6784;&#x5EFA;&#x7F16;&#x8BD1;&#x6240;&#x9700;&#x7684;Docker&#x955C;&#x50CF;</strong></h4><p>&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;&#x5F80;&#x5F80;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x5F88;&#x591A;&#x4F9D;&#x8D56;&#xFF0C;&#x800C;&#x7F16;&#x8BD1;&#x4E0D;&#x540C;&#x7684;&#x8F6F;&#x4EF6;&#x6709;&#x65F6;&#x9700;&#x8981;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x5728;&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;&#x4F1A;&#x6C61;&#x67D3;&#x4E3B;&#x673A;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x4E0D;&#x6613;&#x91CD;&#x590D;&#x3002;</p>\n<h4 id=\"2-&#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;\"><a href=\"#2-&#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;\"></a><strong>2. &#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;</strong></h4><p>&#x6E90;&#x7801;&#x4E0D;&#x653E;&#x5728;Docker&#x955C;&#x50CF;&#x91CC;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7F16;&#x8BD1;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#x7684;&#x6548;&#x7387;&#x3002;</p>\n<h4 id=\"3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;\"><a href=\"#3-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;\" class=\"headerlink\" title=\"3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;\"></a><strong>3. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7F16;&#x8BD1;&#x8F6F;&#x4EF6;</strong></h4><p>&#x8F6F;&#x4EF6;&#x6E90;&#x7801;&#x4EE5;&#x6570;&#x636E;&#x5377;(volume)&#x7684;&#x5F62;&#x5F0F;&#x6302;&#x8F7D;&#x7684;&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x7F16;&#x8BD1;&#x6240;&#x5F97;&#x7684;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x4E5F;&#x5C06;&#x4F4D;&#x4E8E;&#x6570;&#x636E;&#x5377;&#x5185;&#x3002;</p>"},{"title":"DockerMesos/Marathon","date":"2015-09-18T04:00:00.000Z","_content":"\n**:** DockerMesos/MarathonMesos/Marathon\n\n**GitHub:**\n- [kiwenlau/single-mesos-docker](https://github.com/kiwenlau/single-mesos-docker)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2015-09-18](http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/)\n\n## . \n\n[Mesos](http://mesos.apache.org)[Marathon](http://mesosphere.github.io/marathon)MesosMesosMarathon[Docker](https://www.docker.com/)Mesos/Marathon\n\n**kiwenlau/single-mesos**DockerUbuntuMesosMarathonDockerMesos MasterMesos SlaveMarathon[ZooKeeper](https://zookeeper.apache.org/)\n\n<img src=\"150918-single-mesos-docker/single-mesos-marathon.png\" width = \"500\"/>\n\n\n## . Mesos/Marathon\n\n#### **1. Docker:**\n\n```sh\nsudo docker pull kiwenlau/single-mesos:3.0\n```\n\n#### **2. Docker:**\n\n```sh\nsudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root kiwenlau/single-mesos:3.0\n```\n\ndocker run\n\n```bash\nStart ZooKeeper...\nStart Mesos master...\nStart Mesos slave...\nStart Marathon...\n```\n\n\n## . Mesos/Marathon\n\n#### **1. curlMarathonREST API, hello**\n\n```sh\ncurl -v -H \"Content-Type: application/json\" -X POST --data \"@hello.json\" http://127.0.0.1:8080/v2/apps\n```\n\nhello.jsoncmd1output.txthello\n\n```bash\n{\n  \"id\": \"hello\",\n  \"cmd\": \"while [ true ] ; do echo hello >> /root/output.txt; sleep 1; done\",\n  \"cpus\": 0.1,\n  \"mem\": 10.0,\n  \"instances\": 1\n}\n```\n\ncurl:\n\n```bash\n* Hostname was NOT found in DNS cache\n*   Trying 127.0.0.1...\n* Connected to 127.0.0.1 (127.0.0.1) port 8080 (#0)\n> POST /v2/apps HTTP/1.1\n> User-Agent: curl/7.35.0\n> Host: 127.0.0.1:8080\n> Accept: */*\n> Content-Type: application/json\n> Content-Length: 139\n> \n* upload completely sent off: 139 out of 139 bytes\n< HTTP/1.1 201 Created\n< X-Marathon-Leader: http://ec054cabb9af:8080\n< Cache-Control: no-cache, no-store, must-revalidate\n< Pragma: no-cache\n< Expires: 0\n< Location: http://127.0.0.1:8080/v2/apps/hello\n< Content-Type: application/json; qs=2\n< Transfer-Encoding: chunked\n* Server Jetty(8.y.z-SNAPSHOT) is not blacklisted\n< Server: Jetty(8.y.z-SNAPSHOT)\n< \n* Connection #0 to host 127.0.0.1 left intact\n{\"id\":\"/hello\",\"cmd\":\"while [ true ] ; do echo hello >> /root/output.txt; sleep 1; done\",\"args\":null,\"user\":null,\"env\":{},\"instances\":1,\"cpus\":0.1,\"mem\":10.0,\"disk\":0.0,\"executor\":\"\",\"constraints\":[],\"uris\":[],\"storeUrls\":[],\"ports\":[0],\"requirePorts\":false,\"backoffFactor\":1.15,\"container\":null,\"healthChecks\":[],\"dependencies\":[],\"upgradeStrategy\":{\"minimumHealthCapacity\":1.0,\"maximumOverCapacity\":1.0},\"labels\":{},\"acceptedResourceRoles\":null,\"version\":\"2015-09-16T11:22:27.967Z\",\"deployments\":[{\"id\":\"2cd2fdd4-e5f9-4088-895f-7976349b7a19\"}],\"tasks\":[],\"tasksStaged\":0,\"tasksRunning\":0,\"tasksHealthy\":0,\"tasksUnhealthy\":0,\"backoffSeconds\":1,\"maxLaunchDelaySeconds\":3600}\n```\n\n#### **2. hello**\n\n```sh\ntail -f output.txt\n```\n\"hello\"\n\n#### **3. MesosMarathon**\n\n****IPDockerIP\n\nMesos[http://192.168.59.10:5050](http://192.168.59.10:5050)\n\nMesoshello\n\n<img src=\"150918-single-mesos-docker/Mesos.png\" width = \"500\"/>\n\nMarathon[http://192.168.59.10:8080](http://192.168.59.10:8080)\n\nMarathonhello\n\n<img src=\"150918-single-mesos-docker/Marathon.png\" width = \"500\"/>\n\n#### **4. Marathon**\n\nMarathon\"New APP\"ID\"hello\", Command\"echo hello >> /root/output.txt\", \"Create\"\n\n<img src=\"150918-single-mesos-docker/hello.png\" width = \"300\"/>\n\n\n## . \n\n[Setting up a Single Node Mesosphere Cluster](https://open.mesosphere.com/getting-started/developer/single-node-install/)ubuntuMesos/MarathonMesos/MarathonDocker\n\nDocker**\"sudo service mesos-master start\"****\"sudo service mesos-slave start\"**Mesos MasterMesos Slave**\"mesos-master: unrecognized service\"****\"mesos-slave: unrecognized service\"**ubuntuMesos/MarathonMesosmesos-mastermesos-slaveMesos\n\n```sh\n/usr/sbin/mesos-master --zk=zk://127.0.0.1:2181/mesos --quorum=1 --work_dir=/var/lib/mesos --log_dir=/log/mesos  \n```\n\n```sh\n/usr/sbin/mesos-slave --master=zk://127.0.0.1:2181/mesos --log_dir=/log/mesos\n```\n\nDockerUbuntu**Dockerubuntu**Docker:(\n\n\n## . Docker\n\nDockerAlaudoDocker\n\n```sh\nsudo docker pull index.alauda.cn/kiwenlau/single-mesos:3.0\n```\n\n```sh\nsudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root index.alauda.cn/kiwenlau/single-mesos:3.0\n```\n\n## . \n\n1. [Setting up a Single Node Mesosphere Cluster](https://open.mesosphere.com/getting-started/developer/single-node-install/)\n2. [Setting up a Cluster on Mesos and Marathon](https://open.mesosphere.com/getting-started/datacenter/install/#master-setup)\n3. [An Introduction to Mesosphere](https://www.digitalocean.com/community/tutorials/an-introduction-to-mesosphere)\n4. [How To Configure a Production-Ready Mesosphere Cluster on Ubuntu 14.04](https://www.digitalocean.com/community/tutorials/how-to-configure-a-production-ready-mesosphere-cluster-on-ubuntu-14-04)\n5. [Deploy a Mesos Cluster with 7 Commands Using Docker](https://medium.com/@gargar454/deploy-a-mesos-cluster-with-7-commands-using-docker-57951e020586)\n6. [sekka1/mesosphere-docker](https://github.com/sekka1/mesosphere-docker)\n7. [Marathon: Application Basics](http://mesosphere.github.io/marathon/docs/application-basics.html)\n8. [Marathon: REST API](http://mesosphere.github.io/marathon/docs/rest-api.html)\n\n","source":"_posts/2015/09/18/150918-single-mesos-docker.md","raw":"title: DockerMesos/Marathon\n\ndate: 2015-09-18 12:00:00\n\ntags: [Docker,Mesos,Marathon]\n\n---\n\n**:** DockerMesos/MarathonMesos/Marathon\n\n**GitHub:**\n- [kiwenlau/single-mesos-docker](https://github.com/kiwenlau/single-mesos-docker)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2015-09-18](http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/)\n\n## . \n\n[Mesos](http://mesos.apache.org)[Marathon](http://mesosphere.github.io/marathon)MesosMesosMarathon[Docker](https://www.docker.com/)Mesos/Marathon\n\n**kiwenlau/single-mesos**DockerUbuntuMesosMarathonDockerMesos MasterMesos SlaveMarathon[ZooKeeper](https://zookeeper.apache.org/)\n\n<img src=\"150918-single-mesos-docker/single-mesos-marathon.png\" width = \"500\"/>\n\n\n## . Mesos/Marathon\n\n#### **1. Docker:**\n\n```sh\nsudo docker pull kiwenlau/single-mesos:3.0\n```\n\n#### **2. Docker:**\n\n```sh\nsudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root kiwenlau/single-mesos:3.0\n```\n\ndocker run\n\n```bash\nStart ZooKeeper...\nStart Mesos master...\nStart Mesos slave...\nStart Marathon...\n```\n\n\n## . Mesos/Marathon\n\n#### **1. curlMarathonREST API, hello**\n\n```sh\ncurl -v -H \"Content-Type: application/json\" -X POST --data \"@hello.json\" http://127.0.0.1:8080/v2/apps\n```\n\nhello.jsoncmd1output.txthello\n\n```bash\n{\n  \"id\": \"hello\",\n  \"cmd\": \"while [ true ] ; do echo hello >> /root/output.txt; sleep 1; done\",\n  \"cpus\": 0.1,\n  \"mem\": 10.0,\n  \"instances\": 1\n}\n```\n\ncurl:\n\n```bash\n* Hostname was NOT found in DNS cache\n*   Trying 127.0.0.1...\n* Connected to 127.0.0.1 (127.0.0.1) port 8080 (#0)\n> POST /v2/apps HTTP/1.1\n> User-Agent: curl/7.35.0\n> Host: 127.0.0.1:8080\n> Accept: */*\n> Content-Type: application/json\n> Content-Length: 139\n> \n* upload completely sent off: 139 out of 139 bytes\n< HTTP/1.1 201 Created\n< X-Marathon-Leader: http://ec054cabb9af:8080\n< Cache-Control: no-cache, no-store, must-revalidate\n< Pragma: no-cache\n< Expires: 0\n< Location: http://127.0.0.1:8080/v2/apps/hello\n< Content-Type: application/json; qs=2\n< Transfer-Encoding: chunked\n* Server Jetty(8.y.z-SNAPSHOT) is not blacklisted\n< Server: Jetty(8.y.z-SNAPSHOT)\n< \n* Connection #0 to host 127.0.0.1 left intact\n{\"id\":\"/hello\",\"cmd\":\"while [ true ] ; do echo hello >> /root/output.txt; sleep 1; done\",\"args\":null,\"user\":null,\"env\":{},\"instances\":1,\"cpus\":0.1,\"mem\":10.0,\"disk\":0.0,\"executor\":\"\",\"constraints\":[],\"uris\":[],\"storeUrls\":[],\"ports\":[0],\"requirePorts\":false,\"backoffFactor\":1.15,\"container\":null,\"healthChecks\":[],\"dependencies\":[],\"upgradeStrategy\":{\"minimumHealthCapacity\":1.0,\"maximumOverCapacity\":1.0},\"labels\":{},\"acceptedResourceRoles\":null,\"version\":\"2015-09-16T11:22:27.967Z\",\"deployments\":[{\"id\":\"2cd2fdd4-e5f9-4088-895f-7976349b7a19\"}],\"tasks\":[],\"tasksStaged\":0,\"tasksRunning\":0,\"tasksHealthy\":0,\"tasksUnhealthy\":0,\"backoffSeconds\":1,\"maxLaunchDelaySeconds\":3600}\n```\n\n#### **2. hello**\n\n```sh\ntail -f output.txt\n```\n\"hello\"\n\n#### **3. MesosMarathon**\n\n****IPDockerIP\n\nMesos[http://192.168.59.10:5050](http://192.168.59.10:5050)\n\nMesoshello\n\n<img src=\"150918-single-mesos-docker/Mesos.png\" width = \"500\"/>\n\nMarathon[http://192.168.59.10:8080](http://192.168.59.10:8080)\n\nMarathonhello\n\n<img src=\"150918-single-mesos-docker/Marathon.png\" width = \"500\"/>\n\n#### **4. Marathon**\n\nMarathon\"New APP\"ID\"hello\", Command\"echo hello >> /root/output.txt\", \"Create\"\n\n<img src=\"150918-single-mesos-docker/hello.png\" width = \"300\"/>\n\n\n## . \n\n[Setting up a Single Node Mesosphere Cluster](https://open.mesosphere.com/getting-started/developer/single-node-install/)ubuntuMesos/MarathonMesos/MarathonDocker\n\nDocker**\"sudo service mesos-master start\"****\"sudo service mesos-slave start\"**Mesos MasterMesos Slave**\"mesos-master: unrecognized service\"****\"mesos-slave: unrecognized service\"**ubuntuMesos/MarathonMesosmesos-mastermesos-slaveMesos\n\n```sh\n/usr/sbin/mesos-master --zk=zk://127.0.0.1:2181/mesos --quorum=1 --work_dir=/var/lib/mesos --log_dir=/log/mesos  \n```\n\n```sh\n/usr/sbin/mesos-slave --master=zk://127.0.0.1:2181/mesos --log_dir=/log/mesos\n```\n\nDockerUbuntu**Dockerubuntu**Docker:(\n\n\n## . Docker\n\nDockerAlaudoDocker\n\n```sh\nsudo docker pull index.alauda.cn/kiwenlau/single-mesos:3.0\n```\n\n```sh\nsudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root index.alauda.cn/kiwenlau/single-mesos:3.0\n```\n\n## . \n\n1. [Setting up a Single Node Mesosphere Cluster](https://open.mesosphere.com/getting-started/developer/single-node-install/)\n2. [Setting up a Cluster on Mesos and Marathon](https://open.mesosphere.com/getting-started/datacenter/install/#master-setup)\n3. [An Introduction to Mesosphere](https://www.digitalocean.com/community/tutorials/an-introduction-to-mesosphere)\n4. [How To Configure a Production-Ready Mesosphere Cluster on Ubuntu 14.04](https://www.digitalocean.com/community/tutorials/how-to-configure-a-production-ready-mesosphere-cluster-on-ubuntu-14-04)\n5. [Deploy a Mesos Cluster with 7 Commands Using Docker](https://medium.com/@gargar454/deploy-a-mesos-cluster-with-7-commands-using-docker-57951e020586)\n6. [sekka1/mesosphere-docker](https://github.com/sekka1/mesosphere-docker)\n7. [Marathon: Application Basics](http://mesosphere.github.io/marathon/docs/application-basics.html)\n8. [Marathon: REST API](http://mesosphere.github.io/marathon/docs/rest-api.html)\n\n","slug":"2015/09/18/150918-single-mesos-docker","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtl7000b71fyw0wiv6du","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Mesos/Marathon&#x7684;&#x65B9;&#x6CD5;&#xFF0C;Mesos/Marathon&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x5747;&#x8FD0;&#x884C;&#x4E8E;&#x5355;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/single-mesos-docker\" target=\"_blank\" rel=\"external\">kiwenlau/single-mesos-docker</a></li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/\">2015-09-18</a></li>\n</ul>\n<h2 id=\"&#x4E00;-&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. &#x7B80;&#x4ECB;\"></a>&#x4E00;. &#x7B80;&#x4ECB;</h2><p><a href=\"http://mesos.apache.org\" target=\"_blank\" rel=\"external\">Mesos</a>&#x662F;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;<a href=\"http://mesosphere.github.io/marathon\" target=\"_blank\" rel=\"external\">Marathon</a>&#x662F;&#x8FD0;&#x884C;&#x5728;Mesos&#x4E4B;&#x4E0A;&#x7684;&#x96C6;&#x7FA4;&#x8BA1;&#x7B97;&#x67B6;&#x6784;&#x3002;&#x5C06;Mesos&#x548C;Marathon&#x6253;&#x5305;&#x5230;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x4FBF;&#x53EF;&#x4EE5;&#x5728;&#x672C;&#x673A;&#x4E0A;&#x5FEB;&#x901F;&#x642D;&#x5EFA;Mesos/Marathon&#x96C6;&#x7FA4;&#xFF0C;&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#x548C;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p><strong>kiwenlau/single-mesos</strong>&#x955C;&#x50CF;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E4B;&#x4E0A;&#xFF0C;Mesos&#x548C;Marathon&#x8FD0;&#x884C;&#x5728;&#x8BE5;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BB2;&#xFF0C;Docker&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;Mesos Master&#x548C;&#x4E00;&#x4E2A;Mesos Slave&#xFF0C;&#x4EE5;&#x53CA;Marathon&#x548C;<a href=\"https://zookeeper.apache.org/\" target=\"_blank\" rel=\"external\">ZooKeeper</a>&#x3002;&#x96C6;&#x7FA4;&#x67B6;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.png\" width=\"500\"></p>\n<h2 id=\"&#x4E8C;-&#x642D;&#x5EFA;Mesos-Marathon&#x96C6;&#x7FA4;\"><a href=\"#&#x4E8C;-&#x642D;&#x5EFA;Mesos-Marathon&#x96C6;&#x7FA4;\" class=\"headerlink\" title=\"&#x4E8C;. &#x642D;&#x5EFA;Mesos/Marathon&#x96C6;&#x7FA4;\"></a>&#x4E8C;. &#x642D;&#x5EFA;Mesos/Marathon&#x96C6;&#x7FA4;</h2><h4 id=\"1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;:\"></a><strong>1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;:</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"><a href=\"#2-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"2. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;:\"></a><strong>2. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;:</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<p>docker run&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x540E;&#x5373;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#xFF0C;&#x4EE5;&#x4E0B;&#x4E3A;&#x8F93;&#x51FA;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">Start ZooKeeper...</div><div class=\"line\">Start Mesos master...</div><div class=\"line\">Start Mesos slave...</div><div class=\"line\">Start Marathon...</div></pre></td></tr></table></figure>\n<h2 id=\"&#x4E09;-&#x6D4B;&#x8BD5;Mesos-Marathon&#x96C6;&#x7FA4;\"><a href=\"#&#x4E09;-&#x6D4B;&#x8BD5;Mesos-Marathon&#x96C6;&#x7FA4;\" class=\"headerlink\" title=\"&#x4E09;. &#x6D4B;&#x8BD5;Mesos/Marathon&#x96C6;&#x7FA4;\"></a>&#x4E09;. &#x6D4B;&#x8BD5;Mesos/Marathon&#x96C6;&#x7FA4;</h2><h4 id=\"1-&#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST-API-&#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;\"><a href=\"#1-&#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST-API-&#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;\" class=\"headerlink\" title=\"1. &#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST API, &#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;\"></a><strong>1. &#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST API, &#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -v -H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> -X POST --data <span class=\"string\">&quot;@hello.json&quot;</span> http://127.0.0.1:8080/v2/apps</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x4E3A;hello.json&#x3002;&#x7531;cmd&#x53EF;&#x77E5;&#xFF0C;&#x8BE5;&#x7A0B;&#x5E8F;&#x6BCF;&#x9694;1&#x79D2;&#x5F80;output.txt&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#x5165;hello&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">  <span class=\"string\">&quot;id&quot;</span>: <span class=\"string\">&quot;hello&quot;</span>,</div><div class=\"line\">  <span class=\"string\">&quot;cmd&quot;</span>: <span class=\"string\">&quot;while [ true ] ; do echo hello &gt;&gt; /root/output.txt; sleep 1; done&quot;</span>,</div><div class=\"line\">  <span class=\"string\">&quot;cpus&quot;</span>: 0.1,</div><div class=\"line\">  <span class=\"string\">&quot;mem&quot;</span>: 10.0,</div><div class=\"line\">  <span class=\"string\">&quot;instances&quot;</span>: 1</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>curl&#x6267;&#x884C;&#x7ED3;&#x679C;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">* Hostname was NOT found <span class=\"keyword\">in</span> DNS cache</div><div class=\"line\">*   Trying 127.0.0.1...</div><div class=\"line\">* Connected to 127.0.0.1 (127.0.0.1) port 8080 (<span class=\"comment\">#0)</span></div><div class=\"line\">&gt; POST /v2/apps HTTP/1.1</div><div class=\"line\">&gt; User-Agent: curl/7.35.0</div><div class=\"line\">&gt; Host: 127.0.0.1:8080</div><div class=\"line\">&gt; Accept: */*</div><div class=\"line\">&gt; Content-Type: application/json</div><div class=\"line\">&gt; Content-Length: 139</div><div class=\"line\">&gt; </div><div class=\"line\">* upload completely sent off: 139 out of 139 bytes</div><div class=\"line\">&lt; HTTP/1.1 201 Created</div><div class=\"line\">&lt; X-Marathon-Leader: http://ec054cabb9af:8080</div><div class=\"line\">&lt; Cache-Control: no-cache, no-store, must-revalidate</div><div class=\"line\">&lt; Pragma: no-cache</div><div class=\"line\">&lt; Expires: 0</div><div class=\"line\">&lt; Location: http://127.0.0.1:8080/v2/apps/hello</div><div class=\"line\">&lt; Content-Type: application/json; qs=2</div><div class=\"line\">&lt; Transfer-Encoding: chunked</div><div class=\"line\">* Server Jetty(8.y.z-SNAPSHOT) is not blacklisted</div><div class=\"line\">&lt; Server: Jetty(8.y.z-SNAPSHOT)</div><div class=\"line\">&lt; </div><div class=\"line\">* Connection <span class=\"comment\">#0 to host 127.0.0.1 left intact</span></div><div class=\"line\">{<span class=\"string\">&quot;id&quot;</span>:<span class=\"string\">&quot;/hello&quot;</span>,<span class=\"string\">&quot;cmd&quot;</span>:<span class=\"string\">&quot;while [ true ] ; do echo hello &gt;&gt; /root/output.txt; sleep 1; done&quot;</span>,<span class=\"string\">&quot;args&quot;</span>:null,<span class=\"string\">&quot;user&quot;</span>:null,<span class=\"string\">&quot;env&quot;</span>:{},<span class=\"string\">&quot;instances&quot;</span>:1,<span class=\"string\">&quot;cpus&quot;</span>:0.1,<span class=\"string\">&quot;mem&quot;</span>:10.0,<span class=\"string\">&quot;disk&quot;</span>:0.0,<span class=\"string\">&quot;executor&quot;</span>:<span class=\"string\">&quot;&quot;</span>,<span class=\"string\">&quot;constraints&quot;</span>:[],<span class=\"string\">&quot;uris&quot;</span>:[],<span class=\"string\">&quot;storeUrls&quot;</span>:[],<span class=\"string\">&quot;ports&quot;</span>:[0],<span class=\"string\">&quot;requirePorts&quot;</span>:<span class=\"literal\">false</span>,<span class=\"string\">&quot;backoffFactor&quot;</span>:1.15,<span class=\"string\">&quot;container&quot;</span>:null,<span class=\"string\">&quot;healthChecks&quot;</span>:[],<span class=\"string\">&quot;dependencies&quot;</span>:[],<span class=\"string\">&quot;upgradeStrategy&quot;</span>:{<span class=\"string\">&quot;minimumHealthCapacity&quot;</span>:1.0,<span class=\"string\">&quot;maximumOverCapacity&quot;</span>:1.0},<span class=\"string\">&quot;labels&quot;</span>:{},<span class=\"string\">&quot;acceptedResourceRoles&quot;</span>:null,<span class=\"string\">&quot;version&quot;</span>:<span class=\"string\">&quot;2015-09-16T11:22:27.967Z&quot;</span>,<span class=\"string\">&quot;deployments&quot;</span>:[{<span class=\"string\">&quot;id&quot;</span>:<span class=\"string\">&quot;2cd2fdd4-e5f9-4088-895f-7976349b7a19&quot;</span>}],<span class=\"string\">&quot;tasks&quot;</span>:[],<span class=\"string\">&quot;tasksStaged&quot;</span>:0,<span class=\"string\">&quot;tasksRunning&quot;</span>:0,<span class=\"string\">&quot;tasksHealthy&quot;</span>:0,<span class=\"string\">&quot;tasksUnhealthy&quot;</span>:0,<span class=\"string\">&quot;backoffSeconds&quot;</span>:1,<span class=\"string\">&quot;maxLaunchDelaySeconds&quot;</span>:3600}</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;\"><a href=\"#2-&#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;\" class=\"headerlink\" title=\"2. &#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;\"></a><strong>2. &#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">tail <span class=\"_\">-f</span> output.txt</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x4F60;&#x770B;&#x5230;&#x7EC8;&#x7AEF;&#x4E0D;&#x65AD;&#x8F93;&#x51FA;&#x201D;hello&#x201D;&#x65F6;&#x8BF4;&#x660E;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x3002;</p>\n<h4 id=\"3-&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;\"><a href=\"#3-&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;\" class=\"headerlink\" title=\"3. &#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;\"></a><strong>3. &#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;</strong></h4><p><strong>&#x6CE8;&#x610F;</strong>&#x5C06;IP&#x66FF;&#x6362;&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;IP&#x5730;&#x5740;</p>\n<p>Mesos&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5730;&#x5740;&#xFF1A;<a href=\"http://192.168.59.10:5050\" target=\"_blank\" rel=\"external\">http://192.168.59.10:5050</a></p>\n<p>Mesos&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5982;&#x56FE;&#xFF0C;&#x53EF;&#x77E5;hello&#x7A0B;&#x5E8F;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/Mesos.png\" width=\"500\"></p>\n<p>Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5730;&#x5740;&#xFF1A;<a href=\"http://192.168.59.10:8080\" target=\"_blank\" rel=\"external\">http://192.168.59.10:8080</a></p>\n<p>Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5982;&#x56FE;&#xFF0C;&#x53EF;&#x77E5;hello&#x7A0B;&#x5E8F;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/Marathon.png\" width=\"500\"></p>\n<h4 id=\"4-&#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;\"><a href=\"#4-&#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;\" class=\"headerlink\" title=\"4. &#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;\"></a><strong>4. &#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;</strong></h4><p>&#x5728;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x4E0A;&#x70B9;&#x51FB;&#x201D;New APP&#x201D;&#xFF0C;&#x5728;&#x5F39;&#x6846;&#x4E2D;&#x914D;&#x7F6E;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;&#x3002;ID&#x4E3A;&#x201D;hello&#x201D;, Command&#x4E3A;&#x201D;echo hello &gt;&gt; /root/output.txt&#x201D;, &#x7136;&#x540E;&#x70B9;&#x51FB;&#x201D;Create&#x201D;&#x5373;&#x53EF;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/hello.png\" width=\"300\"></p>\n<h2 id=\"&#x56DB;-&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"><a href=\"#&#x56DB;-&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x56DB;. &#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"></a>&#x56DB;. &#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;</h2><p>&#x5176;&#x5B9E;&#xFF0C;&#x53C2;&#x8003;<a href=\"https://open.mesosphere.com/getting-started/developer/single-node-install/\" target=\"_blank\" rel=\"external\">Setting up a Single Node Mesosphere Cluster</a>&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x5FEB;&#x5730;&#x5728;ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x76F4;&#x63A5;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x5355;&#x8282;&#x70B9;&#x7684;Mesos/Marathon&#x96C6;&#x7FA4;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x6211;&#x5B89;&#x88C5;&#x8BE5;&#x6559;&#x7A0B;&#x7684;&#x6B65;&#x9AA4;&#x5C06;Mesos/Marathon&#x96C6;&#x7FA4;&#x6253;&#x5305;&#x5230;Docker&#x955C;&#x50CF;&#x4E2D;&#x65F6;&#xFF0C;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5947;&#x602A;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x4F7F;&#x7528;<strong>&#x201C;sudo service mesos-master start&#x201D;</strong>&#x548C;<strong>&#x201C;sudo service mesos-slave start&#x201D;</strong>&#x547D;&#x4EE4;&#x542F;&#x52A8;Mesos Master&#x548C;Mesos Slave&#x65F6;&#xFF0C;&#x51FA;&#x73B0;<strong>&#x201C;mesos-master: unrecognized service&#x201D;</strong>&#x548C;<strong>&#x201C;mesos-slave: unrecognized service&#x201D;</strong>&#x9519;&#x8BEF;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6211;&#x5728;ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;Mesos/Marathon&#x96C6;&#x7FA4;&#x540E;&#xFF0C;&#x4F7F;&#x7528;&#x540C;&#x6837;&#x7684;&#x547D;&#x4EE4;&#x542F;&#x52A8;Mesos&#x5E76;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x540E;&#x6765;&#xFF0C;&#x6211;&#x662F;&#x901A;&#x8FC7;&#x76F4;&#x63A5;&#x6267;&#x884C;mesos-master&#x548C;mesos-slave&#x547D;&#x4EE4;&#x542F;&#x52A8;Mesos&#xFF0C;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">/usr/sbin/mesos-master --zk=zk://127.0.0.1:2181/mesos --quorum=1 --work_dir=/var/lib/mesos --log_dir=/<span class=\"built_in\">log</span>/mesos</div></pre></td></tr></table></figure>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">/usr/sbin/mesos-slave --master=zk://127.0.0.1:2181/mesos --log_dir=/<span class=\"built_in\">log</span>/mesos</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x53EF;&#x77E5;&#xFF0C;&#x867D;&#x7136;&#x5728;Docker&#x5BB9;&#x5668;&#x51E0;&#x4E4E;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4EFB;&#x610F;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F3C;&#x4E4E;&#x548C;Ubuntu&#x4E3B;&#x673A;&#x6CA1;&#x6709;&#x533A;&#x522B;&#x3002;&#x4F46;&#x662F;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;<strong>Docker&#x5BB9;&#x5668;&#x4E0E;ubuntu&#x4E3B;&#x673A;&#x5E76;&#x975E;&#x5B8C;&#x5168;&#x4E00;&#x81F4;</strong>&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x7EC6;&#x8282;&#x7684;&#x4E0D;&#x540C;&#x70B9;&#x6BD4;&#x8F83;&#x5751;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x5F88;&#x503C;&#x5F97;&#x63A2;&#x8BA8;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x5927;&#x5BB6;&#x5728;&#x4F7F;&#x7528;Docker&#x65F6;&#x5C11;&#x8D70;&#x4E9B;&#x5F2F;&#x8DEF;&#x3002;&#x5BF9;&#x4E8E;&#x63D0;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x867D;&#x7136;&#x662F;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x6211;&#x4ECD;&#x7136;&#x4E0D;&#x6E05;&#x695A;&#x5176;&#x4E2D;&#x7684;&#x539F;&#x56E0;:(</p>\n<h2 id=\"&#x4E94;-Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;\"><a href=\"#&#x4E94;-Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x4E94;. Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;\"></a>&#x4E94;. Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;</h2><p>&#x6211;&#x5C06;Docker&#x955C;&#x50CF;&#x4E0A;&#x4F20;&#x5230;&#x4E86;&#x7075;&#x96C0;&#x4E91;&#xFF08;Alaudo&#xFF09;&#x7684;Docker&#x4ED3;&#x5E93;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x4E0B;&#x8F7D;&#x548C;&#x8FD0;&#x884C;&#xFF1A;</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root index.alauda.cn/kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<h2 id=\"&#x516D;-&#x53C2;&#x8003;\"><a href=\"#&#x516D;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x516D;. &#x53C2;&#x8003;\"></a>&#x516D;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"https://open.mesosphere.com/getting-started/developer/single-node-install/\" target=\"_blank\" rel=\"external\">Setting up a Single Node Mesosphere Cluster</a></li>\n<li><a href=\"https://open.mesosphere.com/getting-started/datacenter/install/#master-setup\" target=\"_blank\" rel=\"external\">Setting up a Cluster on Mesos and Marathon</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/an-introduction-to-mesosphere\" target=\"_blank\" rel=\"external\">An Introduction to Mesosphere</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-configure-a-production-ready-mesosphere-cluster-on-ubuntu-14-04\" target=\"_blank\" rel=\"external\">How To Configure a Production-Ready Mesosphere Cluster on Ubuntu 14.04</a></li>\n<li><a href=\"https://medium.com/@gargar454/deploy-a-mesos-cluster-with-7-commands-using-docker-57951e020586\" target=\"_blank\" rel=\"external\">Deploy a Mesos Cluster with 7 Commands Using Docker</a></li>\n<li><a href=\"https://github.com/sekka1/mesosphere-docker\" target=\"_blank\" rel=\"external\">sekka1/mesosphere-docker</a></li>\n<li><a href=\"http://mesosphere.github.io/marathon/docs/application-basics.html\" target=\"_blank\" rel=\"external\">Marathon: Application Basics</a></li>\n<li><a href=\"http://mesosphere.github.io/marathon/docs/rest-api.html\" target=\"_blank\" rel=\"external\">Marathon: REST API</a></li>\n</ol>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Mesos/Marathon&#x7684;&#x65B9;&#x6CD5;&#xFF0C;Mesos/Marathon&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x5747;&#x8FD0;&#x884C;&#x4E8E;&#x5355;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/single-mesos-docker\">kiwenlau/single-mesos-docker</a></li>\n</ul>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/\">2015-09-18</a></li>\n</ul>\n<h2 id=\"&#x4E00;-&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. &#x7B80;&#x4ECB;\"></a>&#x4E00;. &#x7B80;&#x4ECB;</h2><p><a href=\"http://mesos.apache.org\">Mesos</a>&#x662F;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;<a href=\"http://mesosphere.github.io/marathon\">Marathon</a>&#x662F;&#x8FD0;&#x884C;&#x5728;Mesos&#x4E4B;&#x4E0A;&#x7684;&#x96C6;&#x7FA4;&#x8BA1;&#x7B97;&#x67B6;&#x6784;&#x3002;&#x5C06;Mesos&#x548C;Marathon&#x6253;&#x5305;&#x5230;<a href=\"https://www.docker.com/\">Docker</a>&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x4FBF;&#x53EF;&#x4EE5;&#x5728;&#x672C;&#x673A;&#x4E0A;&#x5FEB;&#x901F;&#x642D;&#x5EFA;Mesos/Marathon&#x96C6;&#x7FA4;&#xFF0C;&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#x548C;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p><strong>kiwenlau/single-mesos</strong>&#x955C;&#x50CF;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;Docker&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5728;Ubuntu&#x4E3B;&#x673A;&#x4E4B;&#x4E0A;&#xFF0C;Mesos&#x548C;Marathon&#x8FD0;&#x884C;&#x5728;&#x8BE5;&#x5BB9;&#x5668;&#x4E4B;&#x4E2D;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BB2;&#xFF0C;Docker&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;Mesos Master&#x548C;&#x4E00;&#x4E2A;Mesos Slave&#xFF0C;&#x4EE5;&#x53CA;Marathon&#x548C;<a href=\"https://zookeeper.apache.org/\">ZooKeeper</a>&#x3002;&#x96C6;&#x7FA4;&#x67B6;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.png\" width=\"500\"></p>\n<h2 id=\"&#x4E8C;-&#x642D;&#x5EFA;Mesos-Marathon&#x96C6;&#x7FA4;\"><a href=\"#&#x4E8C;-&#x642D;&#x5EFA;Mesos-Marathon&#x96C6;&#x7FA4;\" class=\"headerlink\" title=\"&#x4E8C;. &#x642D;&#x5EFA;Mesos/Marathon&#x96C6;&#x7FA4;\"></a>&#x4E8C;. &#x642D;&#x5EFA;Mesos/Marathon&#x96C6;&#x7FA4;</h2><h4 id=\"1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;:\"></a><strong>1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;:</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"><a href=\"#2-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"2. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;:\"></a><strong>2. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;:</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<p>docker run&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x540E;&#x5373;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#xFF0C;&#x4EE5;&#x4E0B;&#x4E3A;&#x8F93;&#x51FA;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">Start ZooKeeper...</div><div class=\"line\">Start Mesos master...</div><div class=\"line\">Start Mesos slave...</div><div class=\"line\">Start Marathon...</div></pre></td></tr></table></figure>\n<h2 id=\"&#x4E09;-&#x6D4B;&#x8BD5;Mesos-Marathon&#x96C6;&#x7FA4;\"><a href=\"#&#x4E09;-&#x6D4B;&#x8BD5;Mesos-Marathon&#x96C6;&#x7FA4;\" class=\"headerlink\" title=\"&#x4E09;. &#x6D4B;&#x8BD5;Mesos/Marathon&#x96C6;&#x7FA4;\"></a>&#x4E09;. &#x6D4B;&#x8BD5;Mesos/Marathon&#x96C6;&#x7FA4;</h2><h4 id=\"1-&#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST-API-&#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;\"><a href=\"#1-&#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST-API-&#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;\" class=\"headerlink\" title=\"1. &#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST API, &#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;\"></a><strong>1. &#x901A;&#x8FC7;curl&#x547D;&#x4EE4;&#x8C03;&#x7528;Marathon&#x7684;REST API, &#x521B;&#x5EFA;&#x4E00;&#x4E2A;hello&#x7A0B;&#x5E8F;&#xFF1A;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -v -H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> -X POST --data <span class=\"string\">&quot;@hello.json&quot;</span> http://127.0.0.1:8080/v2/apps</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x4E3A;hello.json&#x3002;&#x7531;cmd&#x53EF;&#x77E5;&#xFF0C;&#x8BE5;&#x7A0B;&#x5E8F;&#x6BCF;&#x9694;1&#x79D2;&#x5F80;output.txt&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#x5165;hello&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">  <span class=\"string\">&quot;id&quot;</span>: <span class=\"string\">&quot;hello&quot;</span>,</div><div class=\"line\">  <span class=\"string\">&quot;cmd&quot;</span>: <span class=\"string\">&quot;while [ true ] ; do echo hello &gt;&gt; /root/output.txt; sleep 1; done&quot;</span>,</div><div class=\"line\">  <span class=\"string\">&quot;cpus&quot;</span>: 0.1,</div><div class=\"line\">  <span class=\"string\">&quot;mem&quot;</span>: 10.0,</div><div class=\"line\">  <span class=\"string\">&quot;instances&quot;</span>: 1</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>curl&#x6267;&#x884C;&#x7ED3;&#x679C;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">* Hostname was NOT found <span class=\"keyword\">in</span> DNS cache</div><div class=\"line\">*   Trying 127.0.0.1...</div><div class=\"line\">* Connected to 127.0.0.1 (127.0.0.1) port 8080 (<span class=\"comment\">#0)</span></div><div class=\"line\">&gt; POST /v2/apps HTTP/1.1</div><div class=\"line\">&gt; User-Agent: curl/7.35.0</div><div class=\"line\">&gt; Host: 127.0.0.1:8080</div><div class=\"line\">&gt; Accept: */*</div><div class=\"line\">&gt; Content-Type: application/json</div><div class=\"line\">&gt; Content-Length: 139</div><div class=\"line\">&gt; </div><div class=\"line\">* upload completely sent off: 139 out of 139 bytes</div><div class=\"line\">&lt; HTTP/1.1 201 Created</div><div class=\"line\">&lt; X-Marathon-Leader: http://ec054cabb9af:8080</div><div class=\"line\">&lt; Cache-Control: no-cache, no-store, must-revalidate</div><div class=\"line\">&lt; Pragma: no-cache</div><div class=\"line\">&lt; Expires: 0</div><div class=\"line\">&lt; Location: http://127.0.0.1:8080/v2/apps/hello</div><div class=\"line\">&lt; Content-Type: application/json; qs=2</div><div class=\"line\">&lt; Transfer-Encoding: chunked</div><div class=\"line\">* Server Jetty(8.y.z-SNAPSHOT) is not blacklisted</div><div class=\"line\">&lt; Server: Jetty(8.y.z-SNAPSHOT)</div><div class=\"line\">&lt; </div><div class=\"line\">* Connection <span class=\"comment\">#0 to host 127.0.0.1 left intact</span></div><div class=\"line\">{<span class=\"string\">&quot;id&quot;</span>:<span class=\"string\">&quot;/hello&quot;</span>,<span class=\"string\">&quot;cmd&quot;</span>:<span class=\"string\">&quot;while [ true ] ; do echo hello &gt;&gt; /root/output.txt; sleep 1; done&quot;</span>,<span class=\"string\">&quot;args&quot;</span>:null,<span class=\"string\">&quot;user&quot;</span>:null,<span class=\"string\">&quot;env&quot;</span>:{},<span class=\"string\">&quot;instances&quot;</span>:1,<span class=\"string\">&quot;cpus&quot;</span>:0.1,<span class=\"string\">&quot;mem&quot;</span>:10.0,<span class=\"string\">&quot;disk&quot;</span>:0.0,<span class=\"string\">&quot;executor&quot;</span>:<span class=\"string\">&quot;&quot;</span>,<span class=\"string\">&quot;constraints&quot;</span>:[],<span class=\"string\">&quot;uris&quot;</span>:[],<span class=\"string\">&quot;storeUrls&quot;</span>:[],<span class=\"string\">&quot;ports&quot;</span>:[0],<span class=\"string\">&quot;requirePorts&quot;</span>:<span class=\"literal\">false</span>,<span class=\"string\">&quot;backoffFactor&quot;</span>:1.15,<span class=\"string\">&quot;container&quot;</span>:null,<span class=\"string\">&quot;healthChecks&quot;</span>:[],<span class=\"string\">&quot;dependencies&quot;</span>:[],<span class=\"string\">&quot;upgradeStrategy&quot;</span>:{<span class=\"string\">&quot;minimumHealthCapacity&quot;</span>:1.0,<span class=\"string\">&quot;maximumOverCapacity&quot;</span>:1.0},<span class=\"string\">&quot;labels&quot;</span>:{},<span class=\"string\">&quot;acceptedResourceRoles&quot;</span>:null,<span class=\"string\">&quot;version&quot;</span>:<span class=\"string\">&quot;2015-09-16T11:22:27.967Z&quot;</span>,<span class=\"string\">&quot;deployments&quot;</span>:[{<span class=\"string\">&quot;id&quot;</span>:<span class=\"string\">&quot;2cd2fdd4-e5f9-4088-895f-7976349b7a19&quot;</span>}],<span class=\"string\">&quot;tasks&quot;</span>:[],<span class=\"string\">&quot;tasksStaged&quot;</span>:0,<span class=\"string\">&quot;tasksRunning&quot;</span>:0,<span class=\"string\">&quot;tasksHealthy&quot;</span>:0,<span class=\"string\">&quot;tasksUnhealthy&quot;</span>:0,<span class=\"string\">&quot;backoffSeconds&quot;</span>:1,<span class=\"string\">&quot;maxLaunchDelaySeconds&quot;</span>:3600}</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;\"><a href=\"#2-&#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;\" class=\"headerlink\" title=\"2. &#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;\"></a><strong>2. &#x67E5;&#x770B;hello&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;</strong></h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">tail <span class=\"_\">-f</span> output.txt</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x4F60;&#x770B;&#x5230;&#x7EC8;&#x7AEF;&#x4E0D;&#x65AD;&#x8F93;&#x51FA;&#x201D;hello&#x201D;&#x65F6;&#x8BF4;&#x660E;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x3002;</p>\n<h4 id=\"3-&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;\"><a href=\"#3-&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;\" class=\"headerlink\" title=\"3. &#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;\"></a><strong>3. &#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;Mesos&#x548C;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;</strong></h4><p><strong>&#x6CE8;&#x610F;</strong>&#x5C06;IP&#x66FF;&#x6362;&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;IP&#x5730;&#x5740;</p>\n<p>Mesos&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5730;&#x5740;&#xFF1A;<a href=\"http://192.168.59.10:5050\">http://192.168.59.10:5050</a></p>\n<p>Mesos&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5982;&#x56FE;&#xFF0C;&#x53EF;&#x77E5;hello&#x7A0B;&#x5E8F;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/Mesos.png\" width=\"500\"></p>\n<p>Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5730;&#x5740;&#xFF1A;<a href=\"http://192.168.59.10:8080\">http://192.168.59.10:8080</a></p>\n<p>Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x5982;&#x56FE;&#xFF0C;&#x53EF;&#x77E5;hello&#x7A0B;&#x5E8F;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/Marathon.png\" width=\"500\"></p>\n<h4 id=\"4-&#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;\"><a href=\"#4-&#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;\" class=\"headerlink\" title=\"4. &#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;\"></a><strong>4. &#x901A;&#x8FC7;Marathon&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;</strong></h4><p>&#x5728;Marathon&#x7684;&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x4E0A;&#x70B9;&#x51FB;&#x201D;New APP&#x201D;&#xFF0C;&#x5728;&#x5F39;&#x6846;&#x4E2D;&#x914D;&#x7F6E;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;&#x3002;ID&#x4E3A;&#x201D;hello&#x201D;, Command&#x4E3A;&#x201D;echo hello &gt;&gt; /root/output.txt&#x201D;, &#x7136;&#x540E;&#x70B9;&#x51FB;&#x201D;Create&#x201D;&#x5373;&#x53EF;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2015/09/18/150918-single-mesos-docker/hello.png\" width=\"300\"></p>\n<h2 id=\"&#x56DB;-&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"><a href=\"#&#x56DB;-&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x56DB;. &#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"></a>&#x56DB;. &#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;</h2><p>&#x5176;&#x5B9E;&#xFF0C;&#x53C2;&#x8003;<a href=\"https://open.mesosphere.com/getting-started/developer/single-node-install/\">Setting up a Single Node Mesosphere Cluster</a>&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x5FEB;&#x5730;&#x5728;ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x76F4;&#x63A5;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x5355;&#x8282;&#x70B9;&#x7684;Mesos/Marathon&#x96C6;&#x7FA4;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x6211;&#x5B89;&#x88C5;&#x8BE5;&#x6559;&#x7A0B;&#x7684;&#x6B65;&#x9AA4;&#x5C06;Mesos/Marathon&#x96C6;&#x7FA4;&#x6253;&#x5305;&#x5230;Docker&#x955C;&#x50CF;&#x4E2D;&#x65F6;&#xFF0C;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5947;&#x602A;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x4F7F;&#x7528;<strong>&#x201C;sudo service mesos-master start&#x201D;</strong>&#x548C;<strong>&#x201C;sudo service mesos-slave start&#x201D;</strong>&#x547D;&#x4EE4;&#x542F;&#x52A8;Mesos Master&#x548C;Mesos Slave&#x65F6;&#xFF0C;&#x51FA;&#x73B0;<strong>&#x201C;mesos-master: unrecognized service&#x201D;</strong>&#x548C;<strong>&#x201C;mesos-slave: unrecognized service&#x201D;</strong>&#x9519;&#x8BEF;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6211;&#x5728;ubuntu&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;Mesos/Marathon&#x96C6;&#x7FA4;&#x540E;&#xFF0C;&#x4F7F;&#x7528;&#x540C;&#x6837;&#x7684;&#x547D;&#x4EE4;&#x542F;&#x52A8;Mesos&#x5E76;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x540E;&#x6765;&#xFF0C;&#x6211;&#x662F;&#x901A;&#x8FC7;&#x76F4;&#x63A5;&#x6267;&#x884C;mesos-master&#x548C;mesos-slave&#x547D;&#x4EE4;&#x542F;&#x52A8;Mesos&#xFF0C;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">/usr/sbin/mesos-master --zk=zk://127.0.0.1:2181/mesos --quorum=1 --work_dir=/var/lib/mesos --log_dir=/<span class=\"built_in\">log</span>/mesos</div></pre></td></tr></table></figure>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">/usr/sbin/mesos-slave --master=zk://127.0.0.1:2181/mesos --log_dir=/<span class=\"built_in\">log</span>/mesos</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x53EF;&#x77E5;&#xFF0C;&#x867D;&#x7136;&#x5728;Docker&#x5BB9;&#x5668;&#x51E0;&#x4E4E;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4EFB;&#x610F;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F3C;&#x4E4E;&#x548C;Ubuntu&#x4E3B;&#x673A;&#x6CA1;&#x6709;&#x533A;&#x522B;&#x3002;&#x4F46;&#x662F;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;<strong>Docker&#x5BB9;&#x5668;&#x4E0E;ubuntu&#x4E3B;&#x673A;&#x5E76;&#x975E;&#x5B8C;&#x5168;&#x4E00;&#x81F4;</strong>&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x7EC6;&#x8282;&#x7684;&#x4E0D;&#x540C;&#x70B9;&#x6BD4;&#x8F83;&#x5751;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x5F88;&#x503C;&#x5F97;&#x63A2;&#x8BA8;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x5927;&#x5BB6;&#x5728;&#x4F7F;&#x7528;Docker&#x65F6;&#x5C11;&#x8D70;&#x4E9B;&#x5F2F;&#x8DEF;&#x3002;&#x5BF9;&#x4E8E;&#x63D0;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x867D;&#x7136;&#x662F;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x6211;&#x4ECD;&#x7136;&#x4E0D;&#x6E05;&#x695A;&#x5176;&#x4E2D;&#x7684;&#x539F;&#x56E0;:(</p>\n<h2 id=\"&#x4E94;-Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;\"><a href=\"#&#x4E94;-Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x4E94;. Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;\"></a>&#x4E94;. Docker&#x955C;&#x50CF;&#x5907;&#x4EFD;</h2><p>&#x6211;&#x5C06;Docker&#x955C;&#x50CF;&#x4E0A;&#x4F20;&#x5230;&#x4E86;&#x7075;&#x96C0;&#x4E91;&#xFF08;Alaudo&#xFF09;&#x7684;Docker&#x4ED3;&#x5E93;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x4E0B;&#x8F7D;&#x548C;&#x8FD0;&#x884C;&#xFF1A;</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull index.alauda.cn/kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker run -p 5050:5050 -p 8080:8080 --name mesos -it -w /root index.alauda.cn/kiwenlau/single-mesos:3.0</div></pre></td></tr></table></figure>\n<h2 id=\"&#x516D;-&#x53C2;&#x8003;\"><a href=\"#&#x516D;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x516D;. &#x53C2;&#x8003;\"></a>&#x516D;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"https://open.mesosphere.com/getting-started/developer/single-node-install/\">Setting up a Single Node Mesosphere Cluster</a></li>\n<li><a href=\"https://open.mesosphere.com/getting-started/datacenter/install/#master-setup\">Setting up a Cluster on Mesos and Marathon</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/an-introduction-to-mesosphere\">An Introduction to Mesosphere</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-configure-a-production-ready-mesosphere-cluster-on-ubuntu-14-04\">How To Configure a Production-Ready Mesosphere Cluster on Ubuntu 14.04</a></li>\n<li><a href=\"https://medium.com/@gargar454/deploy-a-mesos-cluster-with-7-commands-using-docker-57951e020586\">Deploy a Mesos Cluster with 7 Commands Using Docker</a></li>\n<li><a href=\"https://github.com/sekka1/mesosphere-docker\">sekka1/mesosphere-docker</a></li>\n<li><a href=\"http://mesosphere.github.io/marathon/docs/application-basics.html\">Marathon: Application Basics</a></li>\n<li><a href=\"http://mesosphere.github.io/marathon/docs/rest-api.html\">Marathon: REST API</a></li>\n</ol>"},{"title":"Run Hadoop Cluster in Docker Update","date":"2016-06-26T02:00:00.000Z","_content":"\n**Abstract:** Last year, I developed [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau/hadoop-cluster-docker) project, which aims to help user quickly build [Hadoop](http://hadoop.apache.org/) cluster on local host using [Docker](https://www.docker.com/). The project is quite popular with 250+ stars on [GitHub](https://github.com/kiwenlau/hadoop-cluster-docker) and 2500+ pulls on [Docker Hub](https://hub.docker.com/r/kiwenlau/hadoop-master/). In this blog, I'd like to introduce the update version.\n\n<!-- more -->\n\n- Author: [KiwenLau](http://kiwenlau.com/)\n- Date: [2016-06-26](http://kiwenlau.com/2016/06/26/hadoop-cluster-docker-update-english/)\n\n## Introduction\n\nBy packaging [Hadoop](http://hadoop.apache.org/) into [Docker](https://www.docker.com/) image, we can easily build a Hadoop cluster within Docker containers on local host. This is very help for beginners, who want to learn:\n\n- How to configure Hadoop cluster correctly?\n- How to run word count application?\n- How to manage HDFS?\n- How to run test program on local host?\n\nFollowing figure shows the architecture of [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau/hadoop-cluster-docker) project. Hadoop master and slaves run within different Docker containers, NameNode and ResourceManager run within hadoop-master container while DataNode and NodeManager run within hadoop-slave container. NameNode and DataNode are the components of Hadoop Distributed File System(**HDFS**), while ResourceManager and NodeManager are the components of Hadoop cluster resource management system called Yet Another Resource Manager(**YARN**). HDFS is in charge of storing input and output data, while YARN is in charge of managing CPU and Memory resources. \n\n<img src=\"hadoop-cluster-docker-update-english/hadoop-cluster-docker.png\" width = \"500\"/>\n\nIn the old version, I use [serf](https://www.serfdom.io/)/[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html) to provide DNS service for Hadoop cluster, which is not an elegant solution because it requires extra installation/configuration and it will delay the cluster startup procedure. Thanks to the enhancement of Docker network function, we don't need to use [serf](https://www.serfdom.io/)/[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html) any more. We can create a independent network for Hadoop cluster using following command:\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\nBy using \"--net=hadoop\" option when we start Hadoop containers, these containers will attach to the \"hadoop\" network and they are able to communicate with container name.\n\n**Key points of update**\n\n- eliminate [serf](https://www.serfdom.io/)/[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html) \n- merge master and slave image\n- install Hadoop using [kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)\n- simplify Hadoop configuration\n\n## 3 Nodes Hadoop Cluster\n\n#### **1. pull docker image**\n\n```\nsudo docker pull kiwenlau/hadoop:1.0\n```\n\n#### **2. clone github repository**\n\n```\ngit clone https://github.com/kiwenlau/hadoop-cluster-docker\n```\n\n#### **3. create hadoop network**\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\n#### **4. start container**\n\n```\ncd hadoop-cluster-docker\nsudo ./start-container.sh\n```\n\n**output:**\n\n```\nstart hadoop-master container...\nstart hadoop-slave1 container...\nstart hadoop-slave2 container...\nroot@hadoop-master:~# \n```\n- start 3 containers with 1 master and 2 slaves\n- you will get into the /root directory of hadoop-master container\n\n#### **5. start hadoop**\n\n```\n./start-hadoop.sh\n```\n\n#### **6. run wordcount**\n\n```\n./run-wordcount.sh\n```\n\n**output**\n\n```\ninput file1.txt:\nHello Hadoop\n\ninput file2.txt:\nHello Docker\n\nwordcount output:\nDocker    1\nHadoop    1\nHello    2\n```\n\n## Arbitrary size Hadoop cluster\n\n#### **1. pull docker images and clone github repository**\n\ndo 1~3 like previous section\n\n#### **2. rebuild docker image**\n\n```\nsudo ./resize-cluster.sh 5\n```\n- specify parameter > 1: 2, 3..\n- this script just rebuild hadoop image with different **slaves** file, which pecifies the name of all slave nodes\n\n\n#### **3. start container**\n\n```\ncd hadoop-cluster-docker\nsudo ./start-container.sh 5\n```\n- use the same parameter as the step 2\n\n#### **4. run hadoop cluster** \n\ndo 5~6 like previous section\n\n## References\n\n1. [Quickly build arbitrary size Hadoop Cluster based on Docker](http://kiwenlau.blogspot.jp/2015/05/quickly-build-arbitrary-size-hadoop.html)\n2. [How to Install Hadoop on Ubuntu 13.10](https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10)\n\n","source":"_posts/2016/06/26/hadoop-cluster-docker-update-english.md","raw":"title: Run Hadoop Cluster in Docker Update\n\ndate: 2016-06-26 10:00\n\ntags: [Docker, Hadoop]\n\n---\n\n**Abstract:** Last year, I developed [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau/hadoop-cluster-docker) project, which aims to help user quickly build [Hadoop](http://hadoop.apache.org/) cluster on local host using [Docker](https://www.docker.com/). The project is quite popular with 250+ stars on [GitHub](https://github.com/kiwenlau/hadoop-cluster-docker) and 2500+ pulls on [Docker Hub](https://hub.docker.com/r/kiwenlau/hadoop-master/). In this blog, I'd like to introduce the update version.\n\n<!-- more -->\n\n- Author: [KiwenLau](http://kiwenlau.com/)\n- Date: [2016-06-26](http://kiwenlau.com/2016/06/26/hadoop-cluster-docker-update-english/)\n\n## Introduction\n\nBy packaging [Hadoop](http://hadoop.apache.org/) into [Docker](https://www.docker.com/) image, we can easily build a Hadoop cluster within Docker containers on local host. This is very help for beginners, who want to learn:\n\n- How to configure Hadoop cluster correctly?\n- How to run word count application?\n- How to manage HDFS?\n- How to run test program on local host?\n\nFollowing figure shows the architecture of [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau/hadoop-cluster-docker) project. Hadoop master and slaves run within different Docker containers, NameNode and ResourceManager run within hadoop-master container while DataNode and NodeManager run within hadoop-slave container. NameNode and DataNode are the components of Hadoop Distributed File System(**HDFS**), while ResourceManager and NodeManager are the components of Hadoop cluster resource management system called Yet Another Resource Manager(**YARN**). HDFS is in charge of storing input and output data, while YARN is in charge of managing CPU and Memory resources. \n\n<img src=\"hadoop-cluster-docker-update-english/hadoop-cluster-docker.png\" width = \"500\"/>\n\nIn the old version, I use [serf](https://www.serfdom.io/)/[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html) to provide DNS service for Hadoop cluster, which is not an elegant solution because it requires extra installation/configuration and it will delay the cluster startup procedure. Thanks to the enhancement of Docker network function, we don't need to use [serf](https://www.serfdom.io/)/[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html) any more. We can create a independent network for Hadoop cluster using following command:\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\nBy using \"--net=hadoop\" option when we start Hadoop containers, these containers will attach to the \"hadoop\" network and they are able to communicate with container name.\n\n**Key points of update**\n\n- eliminate [serf](https://www.serfdom.io/)/[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html) \n- merge master and slave image\n- install Hadoop using [kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)\n- simplify Hadoop configuration\n\n## 3 Nodes Hadoop Cluster\n\n#### **1. pull docker image**\n\n```\nsudo docker pull kiwenlau/hadoop:1.0\n```\n\n#### **2. clone github repository**\n\n```\ngit clone https://github.com/kiwenlau/hadoop-cluster-docker\n```\n\n#### **3. create hadoop network**\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\n#### **4. start container**\n\n```\ncd hadoop-cluster-docker\nsudo ./start-container.sh\n```\n\n**output:**\n\n```\nstart hadoop-master container...\nstart hadoop-slave1 container...\nstart hadoop-slave2 container...\nroot@hadoop-master:~# \n```\n- start 3 containers with 1 master and 2 slaves\n- you will get into the /root directory of hadoop-master container\n\n#### **5. start hadoop**\n\n```\n./start-hadoop.sh\n```\n\n#### **6. run wordcount**\n\n```\n./run-wordcount.sh\n```\n\n**output**\n\n```\ninput file1.txt:\nHello Hadoop\n\ninput file2.txt:\nHello Docker\n\nwordcount output:\nDocker    1\nHadoop    1\nHello    2\n```\n\n## Arbitrary size Hadoop cluster\n\n#### **1. pull docker images and clone github repository**\n\ndo 1~3 like previous section\n\n#### **2. rebuild docker image**\n\n```\nsudo ./resize-cluster.sh 5\n```\n- specify parameter > 1: 2, 3..\n- this script just rebuild hadoop image with different **slaves** file, which pecifies the name of all slave nodes\n\n\n#### **3. start container**\n\n```\ncd hadoop-cluster-docker\nsudo ./start-container.sh 5\n```\n- use the same parameter as the step 2\n\n#### **4. run hadoop cluster** \n\ndo 5~6 like previous section\n\n## References\n\n1. [Quickly build arbitrary size Hadoop Cluster based on Docker](http://kiwenlau.blogspot.jp/2015/05/quickly-build-arbitrary-size-hadoop.html)\n2. [How to Install Hadoop on Ubuntu 13.10](https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10)\n\n","slug":"2016/06/26/hadoop-cluster-docker-update-english","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtlj000c71fyjnkgjad9","content":"<p><strong>Abstract:</strong> Last year, I developed <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\" target=\"_blank\" rel=\"external\">kiwenlau/hadoop-cluster-docker</a> project, which aims to help user quickly build <a href=\"http://hadoop.apache.org/\" target=\"_blank\" rel=\"external\">Hadoop</a> cluster on local host using <a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>. The project is quite popular with 250+ stars on <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\" target=\"_blank\" rel=\"external\">GitHub</a> and 2500+ pulls on <a href=\"https://hub.docker.com/r/kiwenlau/hadoop-master/\" target=\"_blank\" rel=\"external\">Docker Hub</a>. In this blog, I&#x2019;d like to introduce the update version.</p>\n<a id=\"more\"></a>\n<ul>\n<li>Author: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>Date: <a href=\"http://kiwenlau.com/2016/06/26/hadoop-cluster-docker-update-english/\">2016-06-26</a></li>\n</ul>\n<h2 id=\"Introduction\"><a href=\"#Introduction\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><p>By packaging <a href=\"http://hadoop.apache.org/\" target=\"_blank\" rel=\"external\">Hadoop</a> into <a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a> image, we can easily build a Hadoop cluster within Docker containers on local host. This is very help for beginners, who want to learn:</p>\n<ul>\n<li>How to configure Hadoop cluster correctly?</li>\n<li>How to run word count application?</li>\n<li>How to manage HDFS?</li>\n<li>How to run test program on local host?</li>\n</ul>\n<p>Following figure shows the architecture of <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\" target=\"_blank\" rel=\"external\">kiwenlau/hadoop-cluster-docker</a> project. Hadoop master and slaves run within different Docker containers, NameNode and ResourceManager run within hadoop-master container while DataNode and NodeManager run within hadoop-slave container. NameNode and DataNode are the components of Hadoop Distributed File System(<strong>HDFS</strong>), while ResourceManager and NodeManager are the components of Hadoop cluster resource management system called Yet Another Resource Manager(<strong>YARN</strong>). HDFS is in charge of storing input and output data, while YARN is in charge of managing CPU and Memory resources. </p>\n<p><img src=\"/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.png\" width=\"500\"></p>\n<p>In the old version, I use <a href=\"https://www.serfdom.io/\" target=\"_blank\" rel=\"external\">serf</a>/<a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\" target=\"_blank\" rel=\"external\">dnsmasq</a> to provide DNS service for Hadoop cluster, which is not an elegant solution because it requires extra installation/configuration and it will delay the cluster startup procedure. Thanks to the enhancement of Docker network function, we don&#x2019;t need to use <a href=\"https://www.serfdom.io/\" target=\"_blank\" rel=\"external\">serf</a>/<a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\" target=\"_blank\" rel=\"external\">dnsmasq</a> any more. We can create a independent network for Hadoop cluster using following command:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<p>By using &#x201C;&#x2013;net=hadoop&#x201D; option when we start Hadoop containers, these containers will attach to the &#x201C;hadoop&#x201D; network and they are able to communicate with container name.</p>\n<p><strong>Key points of update&#xFF1A;</strong></p>\n<ul>\n<li>eliminate <a href=\"https://www.serfdom.io/\" target=\"_blank\" rel=\"external\">serf</a>/<a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\" target=\"_blank\" rel=\"external\">dnsmasq</a> </li>\n<li>merge master and slave image</li>\n<li>install Hadoop using <a href=\"https://github.com/kiwenlau/compile-hadoop\" target=\"_blank\" rel=\"external\">kiwenlau/compile-hadoop</a></li>\n<li>simplify Hadoop configuration</li>\n</ul>\n<h2 id=\"3-Nodes-Hadoop-Cluster\"><a href=\"#3-Nodes-Hadoop-Cluster\" class=\"headerlink\" title=\"3 Nodes Hadoop Cluster\"></a>3 Nodes Hadoop Cluster</h2><h4 id=\"1-pull-docker-image\"><a href=\"#1-pull-docker-image\" class=\"headerlink\" title=\"1. pull docker image\"></a><strong>1. pull docker image</strong></h4><figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">hadoop:</span><span class=\"number\">1.0</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-clone-github-repository\"><a href=\"#2-clone-github-repository\" class=\"headerlink\" title=\"2. clone github repository\"></a><strong>2. clone github repository</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<h4 id=\"3-create-hadoop-network\"><a href=\"#3-create-hadoop-network\" class=\"headerlink\" title=\"3. create hadoop network\"></a><strong>3. create hadoop network</strong></h4><figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-start-container\"><a href=\"#4-start-container\" class=\"headerlink\" title=\"4. start container\"></a><strong>4. start container</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> hadoop-<span class=\"keyword\">cluster</span>-docker</div><div class=\"line\">sudo ./start-container.<span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p><strong>output:</strong></p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"literal\">start</span> hadoop-<span class=\"keyword\">master</span> <span class=\"title\">container</span>...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave1 container...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave2 container...</div><div class=\"line\">root@hadoop-<span class=\"literal\">master</span>:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<ul>\n<li>start 3 containers with 1 master and 2 slaves</li>\n<li>you will get into the /root directory of hadoop-master container</li>\n</ul>\n<h4 id=\"5-start-hadoop\"><a href=\"#5-start-hadoop\" class=\"headerlink\" title=\"5. start hadoop\"></a><strong>5. start hadoop</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"literal\">start</span>-hadoop.sh</div></pre></td></tr></table></figure>\n<h4 id=\"6-run-wordcount\"><a href=\"#6-run-wordcount\" class=\"headerlink\" title=\"6. run wordcount\"></a><strong>6. run wordcount</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"keyword\">run</span><span class=\"bash\">-wordcount.sh</span></div></pre></td></tr></table></figure>\n<p><strong>output</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">input</span> file1<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Hadoop</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">input</span> file2<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Docker</div><div class=\"line\"></div><div class=\"line\">wordcount output:</div><div class=\"line\">Docker    <span class=\"number\">1</span></div><div class=\"line\">Hadoop    <span class=\"number\">1</span></div><div class=\"line\">Hello    <span class=\"number\">2</span></div></pre></td></tr></table></figure>\n<h2 id=\"Arbitrary-size-Hadoop-cluster\"><a href=\"#Arbitrary-size-Hadoop-cluster\" class=\"headerlink\" title=\"Arbitrary size Hadoop cluster\"></a>Arbitrary size Hadoop cluster</h2><h4 id=\"1-pull-docker-images-and-clone-github-repository\"><a href=\"#1-pull-docker-images-and-clone-github-repository\" class=\"headerlink\" title=\"1. pull docker images and clone github repository\"></a><strong>1. pull docker images and clone github repository</strong></h4><p>do 1~3 like previous section</p>\n<h4 id=\"2-rebuild-docker-image\"><a href=\"#2-rebuild-docker-image\" class=\"headerlink\" title=\"2. rebuild docker image\"></a><strong>2. rebuild docker image</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo ./resize-<span class=\"keyword\">cluster</span>.<span class=\"keyword\">sh</span> 5</div></pre></td></tr></table></figure>\n<ul>\n<li>specify parameter &gt; 1: 2, 3..</li>\n<li>this script just rebuild hadoop image with different <strong>slaves</strong> file, which pecifies the name of all slave nodes</li>\n</ul>\n<h4 id=\"3-start-container\"><a href=\"#3-start-container\" class=\"headerlink\" title=\"3. start container\"></a><strong>3. start container</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> hadoop-<span class=\"keyword\">cluster</span>-docker</div><div class=\"line\">sudo ./start-container.<span class=\"keyword\">sh</span> 5</div></pre></td></tr></table></figure>\n<ul>\n<li>use the same parameter as the step 2</li>\n</ul>\n<h4 id=\"4-run-hadoop-cluster\"><a href=\"#4-run-hadoop-cluster\" class=\"headerlink\" title=\"4. run hadoop cluster\"></a><strong>4. run hadoop cluster</strong></h4><p>do 5~6 like previous section</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ol>\n<li><a href=\"http://kiwenlau.blogspot.jp/2015/05/quickly-build-arbitrary-size-hadoop.html\" target=\"_blank\" rel=\"external\">Quickly build arbitrary size Hadoop Cluster based on Docker</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10\" target=\"_blank\" rel=\"external\">How to Install Hadoop on Ubuntu 13.10</a></li>\n</ol>\n","excerpt":"<p><strong>Abstract:</strong> Last year, I developed <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\">kiwenlau/hadoop-cluster-docker</a> project, which aims to help user quickly build <a href=\"http://hadoop.apache.org/\">Hadoop</a> cluster on local host using <a href=\"https://www.docker.com/\">Docker</a>. The project is quite popular with 250+ stars on <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\">GitHub</a> and 2500+ pulls on <a href=\"https://hub.docker.com/r/kiwenlau/hadoop-master/\">Docker Hub</a>. In this blog, I&#x2019;d like to introduce the update version.</p>","more":"<ul>\n<li>Author: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>Date: <a href=\"http://kiwenlau.com/2016/06/26/hadoop-cluster-docker-update-english/\">2016-06-26</a></li>\n</ul>\n<h2 id=\"Introduction\"><a href=\"#Introduction\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><p>By packaging <a href=\"http://hadoop.apache.org/\">Hadoop</a> into <a href=\"https://www.docker.com/\">Docker</a> image, we can easily build a Hadoop cluster within Docker containers on local host. This is very help for beginners, who want to learn:</p>\n<ul>\n<li>How to configure Hadoop cluster correctly?</li>\n<li>How to run word count application?</li>\n<li>How to manage HDFS?</li>\n<li>How to run test program on local host?</li>\n</ul>\n<p>Following figure shows the architecture of <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\">kiwenlau/hadoop-cluster-docker</a> project. Hadoop master and slaves run within different Docker containers, NameNode and ResourceManager run within hadoop-master container while DataNode and NodeManager run within hadoop-slave container. NameNode and DataNode are the components of Hadoop Distributed File System(<strong>HDFS</strong>), while ResourceManager and NodeManager are the components of Hadoop cluster resource management system called Yet Another Resource Manager(<strong>YARN</strong>). HDFS is in charge of storing input and output data, while YARN is in charge of managing CPU and Memory resources. </p>\n<p><img src=\"/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.png\" width=\"500\"></p>\n<p>In the old version, I use <a href=\"https://www.serfdom.io/\">serf</a>/<a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\">dnsmasq</a> to provide DNS service for Hadoop cluster, which is not an elegant solution because it requires extra installation/configuration and it will delay the cluster startup procedure. Thanks to the enhancement of Docker network function, we don&#x2019;t need to use <a href=\"https://www.serfdom.io/\">serf</a>/<a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\">dnsmasq</a> any more. We can create a independent network for Hadoop cluster using following command:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<p>By using &#x201C;&#x2013;net=hadoop&#x201D; option when we start Hadoop containers, these containers will attach to the &#x201C;hadoop&#x201D; network and they are able to communicate with container name.</p>\n<p><strong>Key points of update&#xFF1A;</strong></p>\n<ul>\n<li>eliminate <a href=\"https://www.serfdom.io/\">serf</a>/<a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\">dnsmasq</a> </li>\n<li>merge master and slave image</li>\n<li>install Hadoop using <a href=\"https://github.com/kiwenlau/compile-hadoop\">kiwenlau/compile-hadoop</a></li>\n<li>simplify Hadoop configuration</li>\n</ul>\n<h2 id=\"3-Nodes-Hadoop-Cluster\"><a href=\"#3-Nodes-Hadoop-Cluster\" class=\"headerlink\" title=\"3 Nodes Hadoop Cluster\"></a>3 Nodes Hadoop Cluster</h2><h4 id=\"1-pull-docker-image\"><a href=\"#1-pull-docker-image\" class=\"headerlink\" title=\"1. pull docker image\"></a><strong>1. pull docker image</strong></h4><figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">hadoop:</span><span class=\"number\">1.0</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-clone-github-repository\"><a href=\"#2-clone-github-repository\" class=\"headerlink\" title=\"2. clone github repository\"></a><strong>2. clone github repository</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<h4 id=\"3-create-hadoop-network\"><a href=\"#3-create-hadoop-network\" class=\"headerlink\" title=\"3. create hadoop network\"></a><strong>3. create hadoop network</strong></h4><figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-start-container\"><a href=\"#4-start-container\" class=\"headerlink\" title=\"4. start container\"></a><strong>4. start container</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> hadoop-<span class=\"keyword\">cluster</span>-docker</div><div class=\"line\">sudo ./start-container.<span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p><strong>output:</strong></p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"literal\">start</span> hadoop-<span class=\"keyword\">master</span> <span class=\"title\">container</span>...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave1 container...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave2 container...</div><div class=\"line\">root@hadoop-<span class=\"literal\">master</span>:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<ul>\n<li>start 3 containers with 1 master and 2 slaves</li>\n<li>you will get into the /root directory of hadoop-master container</li>\n</ul>\n<h4 id=\"5-start-hadoop\"><a href=\"#5-start-hadoop\" class=\"headerlink\" title=\"5. start hadoop\"></a><strong>5. start hadoop</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"literal\">start</span>-hadoop.sh</div></pre></td></tr></table></figure>\n<h4 id=\"6-run-wordcount\"><a href=\"#6-run-wordcount\" class=\"headerlink\" title=\"6. run wordcount\"></a><strong>6. run wordcount</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"keyword\">run</span><span class=\"bash\">-wordcount.sh</span></div></pre></td></tr></table></figure>\n<p><strong>output</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">input</span> file1<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Hadoop</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">input</span> file2<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Docker</div><div class=\"line\"></div><div class=\"line\">wordcount output:</div><div class=\"line\">Docker    <span class=\"number\">1</span></div><div class=\"line\">Hadoop    <span class=\"number\">1</span></div><div class=\"line\">Hello    <span class=\"number\">2</span></div></pre></td></tr></table></figure>\n<h2 id=\"Arbitrary-size-Hadoop-cluster\"><a href=\"#Arbitrary-size-Hadoop-cluster\" class=\"headerlink\" title=\"Arbitrary size Hadoop cluster\"></a>Arbitrary size Hadoop cluster</h2><h4 id=\"1-pull-docker-images-and-clone-github-repository\"><a href=\"#1-pull-docker-images-and-clone-github-repository\" class=\"headerlink\" title=\"1. pull docker images and clone github repository\"></a><strong>1. pull docker images and clone github repository</strong></h4><p>do 1~3 like previous section</p>\n<h4 id=\"2-rebuild-docker-image\"><a href=\"#2-rebuild-docker-image\" class=\"headerlink\" title=\"2. rebuild docker image\"></a><strong>2. rebuild docker image</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo ./resize-<span class=\"keyword\">cluster</span>.<span class=\"keyword\">sh</span> 5</div></pre></td></tr></table></figure>\n<ul>\n<li>specify parameter &gt; 1: 2, 3..</li>\n<li>this script just rebuild hadoop image with different <strong>slaves</strong> file, which pecifies the name of all slave nodes</li>\n</ul>\n<h4 id=\"3-start-container\"><a href=\"#3-start-container\" class=\"headerlink\" title=\"3. start container\"></a><strong>3. start container</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> hadoop-<span class=\"keyword\">cluster</span>-docker</div><div class=\"line\">sudo ./start-container.<span class=\"keyword\">sh</span> 5</div></pre></td></tr></table></figure>\n<ul>\n<li>use the same parameter as the step 2</li>\n</ul>\n<h4 id=\"4-run-hadoop-cluster\"><a href=\"#4-run-hadoop-cluster\" class=\"headerlink\" title=\"4. run hadoop cluster\"></a><strong>4. run hadoop cluster</strong></h4><p>do 5~6 like previous section</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ol>\n<li><a href=\"http://kiwenlau.blogspot.jp/2015/05/quickly-build-arbitrary-size-hadoop.html\">Quickly build arbitrary size Hadoop Cluster based on Docker</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10\">How to Install Hadoop on Ubuntu 13.10</a></li>\n</ol>"},{"title":"DockerHadoop","date":"2016-06-12T02:00:00.000Z","_content":"\n**:** [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau/hadoop-cluster-docker)[Docker](http://www.alauda.cn/2015/04/28/docker-great/)[](http://www.alauda.cn/2015/06/11/presentation/)GitHub236StarDockerHub2000+\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-06-12](http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/)\n\n## . \n\n[Hadoop](http://hadoop.apache.org/)[Docker](https://www.docker.com/)Hadoop\n\nHadoopmasterslaveDockerhadoop-masterNameNodeResourceManagerhadoop-slaveDataNodeNodeManagerNameNodeDataNodeHadoopHDFSResourceManagerNodeManagerHadoopYARNCPU\n\n<img src=\"160612-hadoop-cluster-docker-update/hadoop-cluster-docker.png\" width = \"500\"/>\n\nserf/dnsmasqHadoopDNSDockerHadoop:\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\nHadoop\"--net=hadoop\"hadoop\n\n****\n\n- serf/dnsmasq\n- MasterSlave\n- [kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)Hadoo\n- Hadoop\n\n## . 3Hadoop\n\n#### **1. Docker**\n\n```\nsudo docker pull kiwenlau/hadoop:1.0\n```\n\n#### **2. GitHub**\n\n```\ngit clone https://github.com/kiwenlau/hadoop-cluster-docker\n```\n\n#### **3. Hadoop**\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\n#### **4. Docker**\n\n```\ncd hadoop-cluster-docker\n./start-container.sh\n```\n\n****\n\n```\nstart hadoop-master container...\nstart hadoop-slave1 container...\nstart hadoop-slave2 container...\nroot@hadoop-master:~# \n```\n\n- 31master, 2slave\n- hadoop-master/root\n\n#### **5. hadoop**\n\n```\n./start-hadoop.sh\n```\n\n#### **6. wordcount**\n\n```\n./run-wordcount.sh\n```\n\n****\n\n```\ninput file1.txt:\nHello Hadoop\ninput file2.txt:\nHello Docker\nwordcount output:\nDocker\t1\nHadoop\t1\nHello\t2\n```\n\nHadoop:\n\n- NameNode: [http://192.168.59.1:50070/](http://192.168.59.1:50070/)\n- ResourceManager: [http://192.168.59.1:8088/](http://192.168.59.1:8088/)\n\n192.168.59.1IP\n\n## . NHadoop\n\n#### **1. **\n\n- 1~3DockerGitHubHadoop\n\n#### **2. Docker**\n\n```\n./resize-cluster.sh 5\n```\n- N(N>1)\n\n#### **3. Docker**\n\n```\n./start-container.sh 5\n```\n- 2N\n\n#### **4. Hadoop**\n\n- 5~6Hadoopwordcount\n\n## \n\n1. [DockerHadoop](http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/)\n2. [How to Install Hadoop on Ubuntu 13.10](https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10)\n\n","source":"_posts/2016/06/12/160612-hadoop-cluster-docker-update.md","raw":"title: DockerHadoop\n\ndate: 2016-06-12 10:00\n\ntags: [Docker, Hadoop]\n\n---\n\n**:** [kiwenlau/hadoop-cluster-docker](https://github.com/kiwenlau/hadoop-cluster-docker)[Docker](http://www.alauda.cn/2015/04/28/docker-great/)[](http://www.alauda.cn/2015/06/11/presentation/)GitHub236StarDockerHub2000+\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-06-12](http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/)\n\n## . \n\n[Hadoop](http://hadoop.apache.org/)[Docker](https://www.docker.com/)Hadoop\n\nHadoopmasterslaveDockerhadoop-masterNameNodeResourceManagerhadoop-slaveDataNodeNodeManagerNameNodeDataNodeHadoopHDFSResourceManagerNodeManagerHadoopYARNCPU\n\n<img src=\"160612-hadoop-cluster-docker-update/hadoop-cluster-docker.png\" width = \"500\"/>\n\nserf/dnsmasqHadoopDNSDockerHadoop:\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\nHadoop\"--net=hadoop\"hadoop\n\n****\n\n- serf/dnsmasq\n- MasterSlave\n- [kiwenlau/compile-hadoop](https://github.com/kiwenlau/compile-hadoop)Hadoo\n- Hadoop\n\n## . 3Hadoop\n\n#### **1. Docker**\n\n```\nsudo docker pull kiwenlau/hadoop:1.0\n```\n\n#### **2. GitHub**\n\n```\ngit clone https://github.com/kiwenlau/hadoop-cluster-docker\n```\n\n#### **3. Hadoop**\n\n```\nsudo docker network create --driver=bridge hadoop\n```\n\n#### **4. Docker**\n\n```\ncd hadoop-cluster-docker\n./start-container.sh\n```\n\n****\n\n```\nstart hadoop-master container...\nstart hadoop-slave1 container...\nstart hadoop-slave2 container...\nroot@hadoop-master:~# \n```\n\n- 31master, 2slave\n- hadoop-master/root\n\n#### **5. hadoop**\n\n```\n./start-hadoop.sh\n```\n\n#### **6. wordcount**\n\n```\n./run-wordcount.sh\n```\n\n****\n\n```\ninput file1.txt:\nHello Hadoop\ninput file2.txt:\nHello Docker\nwordcount output:\nDocker\t1\nHadoop\t1\nHello\t2\n```\n\nHadoop:\n\n- NameNode: [http://192.168.59.1:50070/](http://192.168.59.1:50070/)\n- ResourceManager: [http://192.168.59.1:8088/](http://192.168.59.1:8088/)\n\n192.168.59.1IP\n\n## . NHadoop\n\n#### **1. **\n\n- 1~3DockerGitHubHadoop\n\n#### **2. Docker**\n\n```\n./resize-cluster.sh 5\n```\n- N(N>1)\n\n#### **3. Docker**\n\n```\n./start-container.sh 5\n```\n- 2N\n\n#### **4. Hadoop**\n\n- 5~6Hadoopwordcount\n\n## \n\n1. [DockerHadoop](http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/)\n2. [How to Install Hadoop on Ubuntu 13.10](https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10)\n\n","slug":"2016/06/12/160612-hadoop-cluster-docker-update","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtls000e71fyqxj2pqjf","content":"<p><strong>&#x6458;&#x8981;:</strong> <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\" target=\"_blank\" rel=\"external\">kiwenlau/hadoop-cluster-docker</a>&#x662F;&#x53BB;&#x5E74;&#x53C2;&#x52A0;<a href=\"http://www.alauda.cn/2015/04/28/docker-great/\" target=\"_blank\" rel=\"external\">Docker&#x5DE8;&#x597D;&#x73A9;</a>&#x6BD4;&#x8D5B;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x5F97;&#x4E86;<a href=\"http://www.alauda.cn/2015/06/11/presentation/\" target=\"_blank\" rel=\"external\">&#x4E8C;&#x7B49;&#x5956;</a>&#x5E76;&#x8D62;&#x4E86;&#x4E00;&#x5757;&#x82F9;&#x679C;&#x624B;&#x8868;&#xFF0C;&#x76EE;&#x524D;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x5DF2;&#x7ECF;&#x5728;GitHub&#x4E0A;&#x83B7;&#x5F97;&#x4E86;236&#x4E2A;Star&#xFF0C;DockerHub&#x7684;&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x6B21;&#x6570;2000+&#x3002;&#x603B;&#x4E4B;&#xFF0C;&#x9879;&#x76EE;&#x8FD8;&#x7B97;&#x5F88;&#x53D7;&#x6B22;&#x8FCE;&#x5427;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;&#x9879;&#x76EE;&#x7684;&#x5347;&#x7EA7;&#x7248;&#x3002;</p>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/\">2016-06-12</a></li>\n</ul>\n<h2 id=\"&#x4E00;-&#x9879;&#x76EE;&#x4ECB;&#x7ECD;\"><a href=\"#&#x4E00;-&#x9879;&#x76EE;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"&#x4E00;. &#x9879;&#x76EE;&#x4ECB;&#x7ECD;\"></a>&#x4E00;. &#x9879;&#x76EE;&#x4ECB;&#x7ECD;</h2><p>&#x5C06;<a href=\"http://hadoop.apache.org/\" target=\"_blank\" rel=\"external\">Hadoop</a>&#x6253;&#x5305;&#x5230;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5730;&#x5728;&#x5355;&#x4E2A;&#x673A;&#x5668;&#x4E0A;&#x642D;&#x5EFA;Hadoop&#x96C6;&#x7FA4;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x65B0;&#x624B;&#x6D4B;&#x8BD5;&#x548C;&#x5B66;&#x4E60;&#x3002;</p>\n<p>&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;Hadoop&#x7684;master&#x548C;slave&#x5206;&#x522B;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x7684;Docker&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x5176;&#x4E2D;hadoop-master&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;NameNode&#x548C;ResourceManager&#xFF0C;hadoop-slave&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;DataNode&#x548C;NodeManager&#x3002;NameNode&#x548C;DataNode&#x662F;Hadoop&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;HDFS&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x8D1F;&#x8D23;&#x50A8;&#x5B58;&#x8F93;&#x5165;&#x4EE5;&#x53CA;&#x8F93;&#x51FA;&#x6570;&#x636E;&#xFF0C;&#x800C;ResourceManager&#x548C;NodeManager&#x662F;Hadoop&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;YARN&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x8D1F;&#x8D23;CPU&#x548C;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x7684;&#x8C03;&#x5EA6;&#x3002;</p>\n<p><img src=\"/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.png\" width=\"500\"></p>\n<p>&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x4F7F;&#x7528;serf/dnsmasq&#x4E3A;Hadoop&#x96C6;&#x7FA4;&#x63D0;&#x4F9B;DNS&#x670D;&#x52A1;&#xFF0C;&#x7531;&#x4E8E;Docker&#x7F51;&#x7EDC;&#x529F;&#x80FD;&#x66F4;&#x65B0;&#xFF0C;&#x73B0;&#x5728;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#x3002;&#x66F4;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x4E3A;Hadoop&#x96C6;&#x7FA4;&#x521B;&#x5EFA;&#x5355;&#x72EC;&#x7684;&#x7F51;&#x7EDC;:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5728;&#x8FD0;&#x884C;Hadoop&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x201D;&#x2013;net=hadoop&#x201D;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x65F6;&#x6240;&#x6709;&#x5BB9;&#x5668;&#x5C06;&#x8FD0;&#x884C;&#x5728;hadoop&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BB9;&#x5668;&#x540D;&#x79F0;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<p><strong>&#x9879;&#x76EE;&#x66F4;&#x65B0;&#x8981;&#x70B9;&#xFF1A;</strong></p>\n<ul>\n<li>&#x53BB;&#x9664;serf/dnsmasq</li>\n<li>&#x5408;&#x5E76;Master&#x548C;Slave&#x955C;&#x50CF;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://github.com/kiwenlau/compile-hadoop\" target=\"_blank\" rel=\"external\">kiwenlau/compile-hadoop</a>&#x9879;&#x76EE;&#x7F16;&#x8BD1;&#x7684;Hadoo&#x8FDB;&#x884C;&#x5B89;&#x88C5;</li>\n<li>&#x4F18;&#x5316;Hadoop&#x914D;&#x7F6E;</li>\n</ul>\n<h2 id=\"&#x4E8C;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E8C;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E8C;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E8C;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">hadoop:</span><span class=\"number\">1.0</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"><a href=\"#2-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"></a><strong>2. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;\"><a href=\"#3-&#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;\" class=\"headerlink\" title=\"3. &#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;\"></a><strong>3. &#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;</strong></h4><figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"><a href=\"#4-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"4. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"></a><strong>4. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> hadoop-<span class=\"keyword\">cluster</span>-docker</div><div class=\"line\">./start-container.<span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p><strong>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</strong></p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"literal\">start</span> hadoop-<span class=\"keyword\">master</span> <span class=\"title\">container</span>...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave1 container...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave2 container...</div><div class=\"line\">root@hadoop-<span class=\"literal\">master</span>:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x542F;&#x52A8;&#x4E86;3&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;1&#x4E2A;master, 2&#x4E2A;slave</li>\n<li>&#x8FD0;&#x884C;&#x540E;&#x5C31;&#x8FDB;&#x5165;&#x4E86;hadoop-master&#x5BB9;&#x5668;&#x7684;/root&#x76EE;&#x5F55;</li>\n</ul>\n<h4 id=\"5-&#x542F;&#x52A8;hadoop\"><a href=\"#5-&#x542F;&#x52A8;hadoop\" class=\"headerlink\" title=\"5. &#x542F;&#x52A8;hadoop\"></a><strong>5. &#x542F;&#x52A8;hadoop</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"literal\">start</span>-hadoop.sh</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x8FD0;&#x884C;wordcount\"><a href=\"#6-&#x8FD0;&#x884C;wordcount\" class=\"headerlink\" title=\"6. &#x8FD0;&#x884C;wordcount\"></a><strong>6. &#x8FD0;&#x884C;wordcount</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"keyword\">run</span><span class=\"bash\">-wordcount.sh</span></div></pre></td></tr></table></figure>\n<p><strong>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">input</span> file1<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Hadoop</div><div class=\"line\"><span class=\"selector-tag\">input</span> file2<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Docker</div><div class=\"line\">wordcount output:</div><div class=\"line\">Docker\t<span class=\"number\">1</span></div><div class=\"line\">Hadoop\t<span class=\"number\">1</span></div><div class=\"line\">Hello\t<span class=\"number\">2</span></div></pre></td></tr></table></figure>\n<p>Hadoop&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x5730;&#x5740;:</p>\n<ul>\n<li>NameNode: <a href=\"http://192.168.59.1:50070/\" target=\"_blank\" rel=\"external\">http://192.168.59.1:50070/</a></li>\n<li>ResourceManager: <a href=\"http://192.168.59.1:8088/\" target=\"_blank\" rel=\"external\">http://192.168.59.1:8088/</a></li>\n</ul>\n<p>192.168.59.1&#x4E3A;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;&#x7684;IP&#x3002;</p>\n<h2 id=\"&#x4E09;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E09;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E09;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E09;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x51C6;&#x5907;\"><a href=\"#1-&#x51C6;&#x5907;\" class=\"headerlink\" title=\"1. &#x51C6;&#x5907;\"></a><strong>1. &#x51C6;&#x5907;</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;1~3&#xFF1A;&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;&#xFF0C;&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;&#xFF0C;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;</li>\n</ul>\n<h4 id=\"2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"><a href=\"#2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"></a><strong>2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\">./resize-<span class=\"keyword\">cluster</span>.<span class=\"keyword\">sh</span> 5</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4EFB;&#x610F;N(N&gt;1)</li>\n</ul>\n<h4 id=\"3-&#x542F;&#x52A8;Docker&#x5BB9;&#x5668;\"><a href=\"#3-&#x542F;&#x52A8;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"3. &#x542F;&#x52A8;Docker&#x5BB9;&#x5668;\"></a><strong>3. &#x542F;&#x52A8;Docker&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">./start-container<span class=\"selector-class\">.sh</span> <span class=\"number\">5</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E0E;&#x7B2C;2&#x6B65;&#x4E2D;&#x7684;N&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x3002;</li>\n</ul>\n<h4 id=\"4-&#x8FD0;&#x884C;Hadoop\"><a href=\"#4-&#x8FD0;&#x884C;Hadoop\" class=\"headerlink\" title=\"4. &#x8FD0;&#x884C;Hadoop\"></a><strong>4. &#x8FD0;&#x884C;Hadoop</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;5~6&#xFF1A;&#x542F;&#x52A8;Hadoop&#xFF0C;&#x5E76;&#x8FD0;&#x884C;wordcount&#x3002;</li>\n</ul>\n<h2 id=\"&#x53C2;&#x8003;\"><a href=\"#&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;\"></a>&#x53C2;&#x8003;</h2><ol>\n<li><a href=\"http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10\" target=\"_blank\" rel=\"external\">How to Install Hadoop on Ubuntu 13.10</a></li>\n</ol>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> <a href=\"https://github.com/kiwenlau/hadoop-cluster-docker\">kiwenlau/hadoop-cluster-docker</a>&#x662F;&#x53BB;&#x5E74;&#x53C2;&#x52A0;<a href=\"http://www.alauda.cn/2015/04/28/docker-great/\">Docker&#x5DE8;&#x597D;&#x73A9;</a>&#x6BD4;&#x8D5B;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x5F97;&#x4E86;<a href=\"http://www.alauda.cn/2015/06/11/presentation/\">&#x4E8C;&#x7B49;&#x5956;</a>&#x5E76;&#x8D62;&#x4E86;&#x4E00;&#x5757;&#x82F9;&#x679C;&#x624B;&#x8868;&#xFF0C;&#x76EE;&#x524D;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x5DF2;&#x7ECF;&#x5728;GitHub&#x4E0A;&#x83B7;&#x5F97;&#x4E86;236&#x4E2A;Star&#xFF0C;DockerHub&#x7684;&#x955C;&#x50CF;&#x4E0B;&#x8F7D;&#x6B21;&#x6570;2000+&#x3002;&#x603B;&#x4E4B;&#xFF0C;&#x9879;&#x76EE;&#x8FD8;&#x7B97;&#x5F88;&#x53D7;&#x6B22;&#x8FCE;&#x5427;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;&#x9879;&#x76EE;&#x7684;&#x5347;&#x7EA7;&#x7248;&#x3002;</p>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/\">2016-06-12</a></li>\n</ul>\n<h2 id=\"&#x4E00;-&#x9879;&#x76EE;&#x4ECB;&#x7ECD;\"><a href=\"#&#x4E00;-&#x9879;&#x76EE;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"&#x4E00;. &#x9879;&#x76EE;&#x4ECB;&#x7ECD;\"></a>&#x4E00;. &#x9879;&#x76EE;&#x4ECB;&#x7ECD;</h2><p>&#x5C06;<a href=\"http://hadoop.apache.org/\">Hadoop</a>&#x6253;&#x5305;&#x5230;<a href=\"https://www.docker.com/\">Docker</a>&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5730;&#x5728;&#x5355;&#x4E2A;&#x673A;&#x5668;&#x4E0A;&#x642D;&#x5EFA;Hadoop&#x96C6;&#x7FA4;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x65B0;&#x624B;&#x6D4B;&#x8BD5;&#x548C;&#x5B66;&#x4E60;&#x3002;</p>\n<p>&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;Hadoop&#x7684;master&#x548C;slave&#x5206;&#x522B;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x7684;Docker&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x5176;&#x4E2D;hadoop-master&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;NameNode&#x548C;ResourceManager&#xFF0C;hadoop-slave&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;DataNode&#x548C;NodeManager&#x3002;NameNode&#x548C;DataNode&#x662F;Hadoop&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;HDFS&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x8D1F;&#x8D23;&#x50A8;&#x5B58;&#x8F93;&#x5165;&#x4EE5;&#x53CA;&#x8F93;&#x51FA;&#x6570;&#x636E;&#xFF0C;&#x800C;ResourceManager&#x548C;NodeManager&#x662F;Hadoop&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;YARN&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x8D1F;&#x8D23;CPU&#x548C;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x7684;&#x8C03;&#x5EA6;&#x3002;</p>\n<p><img src=\"/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.png\" width=\"500\"></p>\n<p>&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x4F7F;&#x7528;serf/dnsmasq&#x4E3A;Hadoop&#x96C6;&#x7FA4;&#x63D0;&#x4F9B;DNS&#x670D;&#x52A1;&#xFF0C;&#x7531;&#x4E8E;Docker&#x7F51;&#x7EDC;&#x529F;&#x80FD;&#x66F4;&#x65B0;&#xFF0C;&#x73B0;&#x5728;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#x3002;&#x66F4;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x4E3A;Hadoop&#x96C6;&#x7FA4;&#x521B;&#x5EFA;&#x5355;&#x72EC;&#x7684;&#x7F51;&#x7EDC;:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5728;&#x8FD0;&#x884C;Hadoop&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x201D;&#x2013;net=hadoop&#x201D;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x65F6;&#x6240;&#x6709;&#x5BB9;&#x5668;&#x5C06;&#x8FD0;&#x884C;&#x5728;hadoop&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BB9;&#x5668;&#x540D;&#x79F0;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<p><strong>&#x9879;&#x76EE;&#x66F4;&#x65B0;&#x8981;&#x70B9;&#xFF1A;</strong></p>\n<ul>\n<li>&#x53BB;&#x9664;serf/dnsmasq</li>\n<li>&#x5408;&#x5E76;Master&#x548C;Slave&#x955C;&#x50CF;</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://github.com/kiwenlau/compile-hadoop\">kiwenlau/compile-hadoop</a>&#x9879;&#x76EE;&#x7F16;&#x8BD1;&#x7684;Hadoo&#x8FDB;&#x884C;&#x5B89;&#x88C5;</li>\n<li>&#x4F18;&#x5316;Hadoop&#x914D;&#x7F6E;</li>\n</ul>\n<h2 id=\"&#x4E8C;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E8C;-3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E8C;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E8C;. 3&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>1. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">hadoop:</span><span class=\"number\">1.0</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"><a href=\"#2-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"2. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"></a><strong>2. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/kiwenlau/hadoop-cluster-docker</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;\"><a href=\"#3-&#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;\" class=\"headerlink\" title=\"3. &#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;\"></a><strong>3. &#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;</strong></h4><figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker network <span class=\"built_in\">create</span> <span class=\"comment\">--driver=bridge hadoop</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"><a href=\"#4-&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"4. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"></a><strong>4. &#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> hadoop-<span class=\"keyword\">cluster</span>-docker</div><div class=\"line\">./start-container.<span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<p><strong>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</strong></p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"literal\">start</span> hadoop-<span class=\"keyword\">master</span> <span class=\"title\">container</span>...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave1 container...</div><div class=\"line\"><span class=\"literal\">start</span> hadoop-slave2 container...</div><div class=\"line\">root@hadoop-<span class=\"literal\">master</span>:~<span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x542F;&#x52A8;&#x4E86;3&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;1&#x4E2A;master, 2&#x4E2A;slave</li>\n<li>&#x8FD0;&#x884C;&#x540E;&#x5C31;&#x8FDB;&#x5165;&#x4E86;hadoop-master&#x5BB9;&#x5668;&#x7684;/root&#x76EE;&#x5F55;</li>\n</ul>\n<h4 id=\"5-&#x542F;&#x52A8;hadoop\"><a href=\"#5-&#x542F;&#x52A8;hadoop\" class=\"headerlink\" title=\"5. &#x542F;&#x52A8;hadoop\"></a><strong>5. &#x542F;&#x52A8;hadoop</strong></h4><figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"literal\">start</span>-hadoop.sh</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x8FD0;&#x884C;wordcount\"><a href=\"#6-&#x8FD0;&#x884C;wordcount\" class=\"headerlink\" title=\"6. &#x8FD0;&#x884C;wordcount\"></a><strong>6. &#x8FD0;&#x884C;wordcount</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">./<span class=\"keyword\">run</span><span class=\"bash\">-wordcount.sh</span></div></pre></td></tr></table></figure>\n<p><strong>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">input</span> file1<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Hadoop</div><div class=\"line\"><span class=\"selector-tag\">input</span> file2<span class=\"selector-class\">.txt</span>:</div><div class=\"line\">Hello Docker</div><div class=\"line\">wordcount output:</div><div class=\"line\">Docker\t<span class=\"number\">1</span></div><div class=\"line\">Hadoop\t<span class=\"number\">1</span></div><div class=\"line\">Hello\t<span class=\"number\">2</span></div></pre></td></tr></table></figure>\n<p>Hadoop&#x7F51;&#x9875;&#x7BA1;&#x7406;&#x5730;&#x5740;:</p>\n<ul>\n<li>NameNode: <a href=\"http://192.168.59.1:50070/\">http://192.168.59.1:50070/</a></li>\n<li>ResourceManager: <a href=\"http://192.168.59.1:8088/\">http://192.168.59.1:8088/</a></li>\n</ul>\n<p>192.168.59.1&#x4E3A;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;&#x7684;IP&#x3002;</p>\n<h2 id=\"&#x4E09;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E09;-N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E09;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E09;. N&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x51C6;&#x5907;\"><a href=\"#1-&#x51C6;&#x5907;\" class=\"headerlink\" title=\"1. &#x51C6;&#x5907;\"></a><strong>1. &#x51C6;&#x5907;</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;1~3&#xFF1A;&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;&#xFF0C;&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;&#xFF0C;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;Hadoop&#x7F51;&#x7EDC;</li>\n</ul>\n<h4 id=\"2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"><a href=\"#2-&#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"></a><strong>2. &#x91CD;&#x65B0;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\">./resize-<span class=\"keyword\">cluster</span>.<span class=\"keyword\">sh</span> 5</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4EFB;&#x610F;N(N&gt;1)</li>\n</ul>\n<h4 id=\"3-&#x542F;&#x52A8;Docker&#x5BB9;&#x5668;\"><a href=\"#3-&#x542F;&#x52A8;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"3. &#x542F;&#x52A8;Docker&#x5BB9;&#x5668;\"></a><strong>3. &#x542F;&#x52A8;Docker&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">./start-container<span class=\"selector-class\">.sh</span> <span class=\"number\">5</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x4E0E;&#x7B2C;2&#x6B65;&#x4E2D;&#x7684;N&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x3002;</li>\n</ul>\n<h4 id=\"4-&#x8FD0;&#x884C;Hadoop\"><a href=\"#4-&#x8FD0;&#x884C;Hadoop\" class=\"headerlink\" title=\"4. &#x8FD0;&#x884C;Hadoop\"></a><strong>4. &#x8FD0;&#x884C;Hadoop</strong></h4><ul>\n<li>&#x53C2;&#x8003;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;5~6&#xFF1A;&#x542F;&#x52A8;Hadoop&#xFF0C;&#x5E76;&#x8FD0;&#x884C;wordcount&#x3002;</li>\n</ul>\n<h2 id=\"&#x53C2;&#x8003;\"><a href=\"#&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;\"></a>&#x53C2;&#x8003;</h2><ol>\n<li><a href=\"http://kiwenlau.com/2015/06/08/150608-hadoop-cluster-docker/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Hadoop&#x96C6;&#x7FA4;</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-on-ubuntu-13-10\">How to Install Hadoop on Ubuntu 13.10</a></li>\n</ol>"},{"title":"Vagrant","date":"2016-06-19T02:00:00.000Z","_content":"\n**:** [Vagrant](https://www.vagrantup.com/)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-06-19](http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/)\n\nMacBookWindows\n\n<img src=\"160619-vagrant-virtual-machine/vagrant-vm.png\" width = \"300\"/>\n\n## . \n\n#### **1. [VirtualBox](https://www.virtualbox.org/wiki/Downloads)**\n\n#### **2. [Vagrant](https://www.vagrantup.com/downloads.html)**\n\n#### **3. **\n\n```\nmkdir vagrant-ubuntu\ncd vagrant-ubuntu\nvagrant box add ubuntu/trusty64\nvagrant init ubuntu/trusty64\nvagrant up --provider virtualbox\nvagrant ssh\n```\n\n- **vagrant box add:** **box**\n- **vagrant init:** **Vagrantfile**\n- **vagrant up:** \n- **vagrant ssh:** SSH\n\nVagrant**Vagrantfile**, \n\n```\nVagrant.configure(2) do |config|\n   config.vm.box = \"ubuntu/trusty64\"\nend\n```\n**Vagrantfile****Box****ubuntu/trusty64****Box**ubuntu trusty(14.04)LinuxDebianCentOS[](https://atlas.hashicorp.com/boxes/search)**Box**.\n\nVagrant:\n\n- /: vagrant/vagrant\n- : vagrant-ubuntu/vagrant\n- 512MB\n- CPU: 1\n\n\n\n\n## . \n\n#### **1. Vagrantfile**\n\n```\nvim Vagrantfile\n```\n\n\n\n```\nVagrant.configure(2) do |config|\n\n  # Box\n  config.vm.box = \"ubuntu/trusty64\"\n  \n  # \n  config.vm.hostname=\"ubuntu\"\n  \n  # IP\n  config.vm.network \"private_network\", ip: \"192.168.0.2\"\n  \n  # \n  config.vm.synced_folder \"~/Desktop/share\", \"/home/vagrant/share\"\n\n  # VirtaulBox\n  config.vm.provider \"virtualbox\" do |v|\n\n      # \n      v.name = \"ubuntu\"\n\n      # \n      v.memory = 2048\n\n      # CPU\n      v.cpus = 1\n  end\n  \n  # shell\n  config.vm.provision \"shell\", inline: <<-SHELL\n\n     # Docker 1.11.0\n     apt-get update\n     apt-get install apt-transport-https ca-certificates\n     apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n     echo deb https://apt.dockerproject.org/repo ubuntu-trusty main > /etc/apt/sources.list.d/docker.list\n     apt-get update;\n     apt-get install -y -q docker-engine=1.11.0-0~trusty\n     usermod -aG docker vagrant\n\n  SHELL\n\nend\n```\n\n#### **2. share**\n\nshare/home/vagrant/share\n\n```\nmkdir ~/Desktop/share\n```\n\n#### **3. **\n\n```\nvagrant destroy\nvagrant up --provider virtualbox\n```\n\n#### **4. SSH**\n\n**vagrant ssh**VagrantfileIP:\n\n```\nssh vagrant@192.168.0.2\n```\n\nSSHvagrant**vagrant**\n\nauthorized_keysSSH:\n\n```\ncat $HOME/.ssh/id_rsa.pub | ssh vagrant@127.0.0.1 -p 2222 'cat >> $HOME/.ssh/authorized_keys'\n```\n\n2222SSH:\n\n```\nvagrant ssh-config | grep Port\n  Port 2222\n```\n\nSSH\n\n#### **5. Provision**\n\nVagrant\n\n```\n# shell\n  config.vm.provision \"shell\", inline: <<-SHELL\n\n     # Docker 1.11.0\n     apt-get update\n     apt-get install apt-transport-https ca-certificates\n     apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n     echo deb https://apt.dockerproject.org/repo ubuntu-trusty main > /etc/apt/sources.list.d/docker.list\n     apt-get update;\n     apt-get install -y -q docker-engine=1.11.0-0~trusty\n     usermod -aG docker vagrant\n\n  SHELL\n```\n\nShell[Docker](https://www.docker.com/)\"--provision\"\n\n```\nvagrant halt\nvagrant up --provider virtualbox --provision\n```\n\nVagrant[Docker Provision](https://www.vagrantup.com/docs/provisioning/docker.html)DockerShell\n\n## . VagrantDocker\n\n[Vagrant](https://www.vagrantup.com/)[Docker](https://www.docker.com/)VagrantDockerVagrantDockerMacBookVagrantDocker\n\nVagrantVagrantfileDockerDockerfileVagrantfileDockerfileVagrant\n\nVagrant[Docker Machine](https://docs.docker.com/machine/)Docker MachineDockerVagrantDockerDocker MachineDocker MachineDocker MachineDockerLinux[boot2docker](https://github.com/boot2docker/boot2docker)ubuntuLinuxVagrantLinuxVagrantVagrantfileDocker MachineVagrant\n\n","source":"_posts/2016/06/19/160619-vagrant-virtual-machine.md","raw":"title: Vagrant\n\ndate: 2016-06-19 10:00\n\ntags: [Vagrant]\n\n---\n\n**:** [Vagrant](https://www.vagrantup.com/)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-06-19](http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/)\n\nMacBookWindows\n\n<img src=\"160619-vagrant-virtual-machine/vagrant-vm.png\" width = \"300\"/>\n\n## . \n\n#### **1. [VirtualBox](https://www.virtualbox.org/wiki/Downloads)**\n\n#### **2. [Vagrant](https://www.vagrantup.com/downloads.html)**\n\n#### **3. **\n\n```\nmkdir vagrant-ubuntu\ncd vagrant-ubuntu\nvagrant box add ubuntu/trusty64\nvagrant init ubuntu/trusty64\nvagrant up --provider virtualbox\nvagrant ssh\n```\n\n- **vagrant box add:** **box**\n- **vagrant init:** **Vagrantfile**\n- **vagrant up:** \n- **vagrant ssh:** SSH\n\nVagrant**Vagrantfile**, \n\n```\nVagrant.configure(2) do |config|\n   config.vm.box = \"ubuntu/trusty64\"\nend\n```\n**Vagrantfile****Box****ubuntu/trusty64****Box**ubuntu trusty(14.04)LinuxDebianCentOS[](https://atlas.hashicorp.com/boxes/search)**Box**.\n\nVagrant:\n\n- /: vagrant/vagrant\n- : vagrant-ubuntu/vagrant\n- 512MB\n- CPU: 1\n\n\n\n\n## . \n\n#### **1. Vagrantfile**\n\n```\nvim Vagrantfile\n```\n\n\n\n```\nVagrant.configure(2) do |config|\n\n  # Box\n  config.vm.box = \"ubuntu/trusty64\"\n  \n  # \n  config.vm.hostname=\"ubuntu\"\n  \n  # IP\n  config.vm.network \"private_network\", ip: \"192.168.0.2\"\n  \n  # \n  config.vm.synced_folder \"~/Desktop/share\", \"/home/vagrant/share\"\n\n  # VirtaulBox\n  config.vm.provider \"virtualbox\" do |v|\n\n      # \n      v.name = \"ubuntu\"\n\n      # \n      v.memory = 2048\n\n      # CPU\n      v.cpus = 1\n  end\n  \n  # shell\n  config.vm.provision \"shell\", inline: <<-SHELL\n\n     # Docker 1.11.0\n     apt-get update\n     apt-get install apt-transport-https ca-certificates\n     apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n     echo deb https://apt.dockerproject.org/repo ubuntu-trusty main > /etc/apt/sources.list.d/docker.list\n     apt-get update;\n     apt-get install -y -q docker-engine=1.11.0-0~trusty\n     usermod -aG docker vagrant\n\n  SHELL\n\nend\n```\n\n#### **2. share**\n\nshare/home/vagrant/share\n\n```\nmkdir ~/Desktop/share\n```\n\n#### **3. **\n\n```\nvagrant destroy\nvagrant up --provider virtualbox\n```\n\n#### **4. SSH**\n\n**vagrant ssh**VagrantfileIP:\n\n```\nssh vagrant@192.168.0.2\n```\n\nSSHvagrant**vagrant**\n\nauthorized_keysSSH:\n\n```\ncat $HOME/.ssh/id_rsa.pub | ssh vagrant@127.0.0.1 -p 2222 'cat >> $HOME/.ssh/authorized_keys'\n```\n\n2222SSH:\n\n```\nvagrant ssh-config | grep Port\n  Port 2222\n```\n\nSSH\n\n#### **5. Provision**\n\nVagrant\n\n```\n# shell\n  config.vm.provision \"shell\", inline: <<-SHELL\n\n     # Docker 1.11.0\n     apt-get update\n     apt-get install apt-transport-https ca-certificates\n     apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n     echo deb https://apt.dockerproject.org/repo ubuntu-trusty main > /etc/apt/sources.list.d/docker.list\n     apt-get update;\n     apt-get install -y -q docker-engine=1.11.0-0~trusty\n     usermod -aG docker vagrant\n\n  SHELL\n```\n\nShell[Docker](https://www.docker.com/)\"--provision\"\n\n```\nvagrant halt\nvagrant up --provider virtualbox --provision\n```\n\nVagrant[Docker Provision](https://www.vagrantup.com/docs/provisioning/docker.html)DockerShell\n\n## . VagrantDocker\n\n[Vagrant](https://www.vagrantup.com/)[Docker](https://www.docker.com/)VagrantDockerVagrantDockerMacBookVagrantDocker\n\nVagrantVagrantfileDockerDockerfileVagrantfileDockerfileVagrant\n\nVagrant[Docker Machine](https://docs.docker.com/machine/)Docker MachineDockerVagrantDockerDocker MachineDocker MachineDocker MachineDockerLinux[boot2docker](https://github.com/boot2docker/boot2docker)ubuntuLinuxVagrantLinuxVagrantVagrantfileDocker MachineVagrant\n\n","slug":"2016/06/19/160619-vagrant-virtual-machine","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtm0000g71fyszj03vl1","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x624B;&#x52A8;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x975E;&#x5E38;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x91CD;&#x88C5;&#x8D77;&#x6765;&#x4E5F;&#x5F88;&#x9EBB;&#x70E6;&#xFF0C;&#x6253;&#x5305;&#x6210;&#x955C;&#x50CF;&#x7684;&#x8BDD;&#x5219;&#x4E0D;&#x6613;&#x4FEE;&#x6539;&#xFF0C;&#x5F88;&#x96BE;&#x8FDB;&#x884C;&#x7248;&#x672C;&#x63A7;&#x5236;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x79FB;&#x690D;&#x5230;&#x4E91;&#x7AEF;&#x3002;<a href=\"https://www.vagrantup.com/\" target=\"_blank\" rel=\"external\">Vagrant</a>&#x53EF;&#x4EE5;&#x5C06;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x7684;&#x8FC7;&#x7A0B;&#x4EE3;&#x7801;&#x5316;&#xFF0C;&#x6709;&#x6548;&#x5730;&#x89E3;&#x51B3;&#x4E86;&#x4EE5;&#x4E0A;&#x6240;&#x63D0;&#x7684;&#x75DB;&#x70B9;&#x3002;</p>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/\">2016-06-19</a></li>\n</ul>\n<p>&#x672C;&#x6587;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x662F;&#x5728;MacBook&#x4E0A;&#x8FDB;&#x884C;&#x7684;&#xFF0C;Windows&#x4E0A;&#x7684;&#x64CD;&#x4F5C;&#x5927;&#x90E8;&#x5206;&#x4E00;&#x81F4;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x3002;</p>\n<p><img src=\"/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.png\" width=\"300\"></p>\n<h2 id=\"&#x4E00;-&#x5FEB;&#x901F;&#x5165;&#x95E8;\"><a href=\"#&#x4E00;-&#x5FEB;&#x901F;&#x5165;&#x95E8;\" class=\"headerlink\" title=\"&#x4E00;. &#x5FEB;&#x901F;&#x5165;&#x95E8;\"></a>&#x4E00;. &#x5FEB;&#x901F;&#x5165;&#x95E8;</h2><h4 id=\"1-&#x5B89;&#x88C5;VirtualBox\"><a href=\"#1-&#x5B89;&#x88C5;VirtualBox\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;VirtualBox\"></a><strong>1. &#x5B89;&#x88C5;<a href=\"https://www.virtualbox.org/wiki/Downloads\" target=\"_blank\" rel=\"external\">VirtualBox</a></strong></h4><h4 id=\"2-&#x5B89;&#x88C5;Vagrant\"><a href=\"#2-&#x5B89;&#x88C5;Vagrant\" class=\"headerlink\" title=\"2. &#x5B89;&#x88C5;Vagrant\"></a><strong>2. &#x5B89;&#x88C5;<a href=\"https://www.vagrantup.com/downloads.html\" target=\"_blank\" rel=\"external\">Vagrant</a></strong></h4><h4 id=\"3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"><a href=\"#3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\" class=\"headerlink\" title=\"3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">mkdir</span> vagrant-ubuntu</div><div class=\"line\"><span class=\"keyword\">cd</span> vagrant-ubuntu</div><div class=\"line\">vagrant box <span class=\"built_in\">add</span> ubuntu/trusty64</div><div class=\"line\">vagrant init ubuntu/trusty64</div><div class=\"line\">vagrant <span class=\"keyword\">up</span> --provider virtualbox</div><div class=\"line\">vagrant ssh</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>vagrant box add:</strong> &#x4E0B;&#x8F7D;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;<strong>box</strong></li>\n<li><strong>vagrant init:</strong> &#x751F;&#x6210;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x7684;&#x6240;&#x4F9D;&#x8D56;&#x7684;<strong>Vagrantfile</strong></li>\n<li><strong>vagrant up:</strong> &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant ssh:</strong> SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;</li>\n</ul>\n<p>&#x4E0D;&#x59A8;&#x67E5;&#x770B;&#x4E00;&#x4E0B;Vagrant&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;<strong>Vagrantfile</strong>, &#x6211;&#x5220;&#x9664;&#x4E86;&#x6240;&#x6709;&#x6CE8;&#x91CA;&#xFF1A;</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\">Vagrant.configure(<span class=\"number\">2</span>) <span class=\"built_in\">do</span> |<span class=\"built_in\">config</span>|</div><div class=\"line\">   <span class=\"built_in\">config</span>.vm.box = <span class=\"string\">&quot;ubuntu/trusty64&quot;</span></div><div class=\"line\"><span class=\"built_in\">end</span></div></pre></td></tr></table></figure>\n<p><strong>Vagrantfile</strong>&#x7684;&#x5185;&#x5BB9;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4EC5;&#x5B9A;&#x4E49;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;<strong>Box</strong>&#x4E3A;<strong>ubuntu/trusty64</strong>&#x3002;<strong>Box</strong>&#x76F8;&#x5F53;&#x4E8E;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x7684;&#x865A;&#x62DF;&#x673A;&#x662F;ubuntu trusty(14.04)&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x5176;&#x4ED6;Linux&#x53D1;&#x884C;&#x7248;&#x4F8B;&#x5982;Debian&#x6216;&#x8005;CentOS&#xFF0C;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://atlas.hashicorp.com/boxes/search\" target=\"_blank\" rel=\"external\">&#x8FD9;&#x91CC;</a>&#x641C;&#x7D22;&#x5BF9;&#x5E94;&#x7684;<strong>Box</strong>.</p>\n<p>Vagrant&#x865A;&#x62DF;&#x673A;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;:</p>\n<ul>\n<li>&#x7528;&#x6237;/&#x5BC6;&#x7801;: vagrant/vagrant</li>\n<li>&#x5171;&#x4EAB;&#x76EE;&#x5F55;: &#x4E3B;&#x673A;&#x4E0A;&#x7684;vagrant-ubuntu&#x76EE;&#x5F55;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/vagrant&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</li>\n<li>&#x5185;&#x5B58;&#xFF1A;512MB</li>\n<li>CPU: 1</li>\n</ul>\n<p>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x6EE1;&#x8DB3;&#x5F00;&#x53D1;&#x9700;&#x6C42;&#xFF0C;&#x4E0B;&#x4E00;&#x5C0F;&#x8282;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;\"><a href=\"#&#x4E8C;-&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x4E8C;. &#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;\"></a>&#x4E8C;. &#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;</h2><h4 id=\"1-&#x4FEE;&#x6539;Vagrantfile\"><a href=\"#1-&#x4FEE;&#x6539;Vagrantfile\" class=\"headerlink\" title=\"1. &#x4FEE;&#x6539;Vagrantfile\"></a><strong>1. &#x4FEE;&#x6539;Vagrantfile</strong></h4><figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vim Vagrantfile</span></div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6CE8;&#x91CA;&#x7406;&#x89E3;&#x6BCF;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x7684;&#x542B;&#x4E49;&#x3002;</p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"code\"><pre><div class=\"line\">Vagrant.configure(<span class=\"number\">2</span>) <span class=\"keyword\">do</span> |config|</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;Box</span></div><div class=\"line\">  config.vm.<span class=\"built_in\">box</span> = <span class=\"string\">&quot;ubuntu/trusty64&quot;</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;</span></div><div class=\"line\">  config.vm.hostname=<span class=\"string\">&quot;ubuntu&quot;</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;IP</span></div><div class=\"line\">  config.vm.network <span class=\"string\">&quot;private_network&quot;</span>, ip: <span class=\"string\">&quot;192.168.0.2&quot;</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x673A;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5171;&#x4EAB;&#x76EE;&#x5F55;</span></div><div class=\"line\">  config.vm.synced_folder <span class=\"string\">&quot;~/Desktop/share&quot;</span>, <span class=\"string\">&quot;/home/vagrant/share&quot;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\"># VirtaulBox&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></div><div class=\"line\">  config.vm.provider <span class=\"string\">&quot;virtualbox&quot;</span> <span class=\"keyword\">do</span> |v|</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x540D;&#x79F0;</span></div><div class=\"line\">      v.name = <span class=\"string\">&quot;ubuntu&quot;</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;</span></div><div class=\"line\">      v.memory = <span class=\"number\">2048</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;CPU&#x4E2A;&#x6570;</span></div><div class=\"line\">      v.cpus = <span class=\"number\">1</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</span></div><div class=\"line\">  config.vm.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-<span class=\"built_in\">SHELL</span></div><div class=\"line\"></div><div class=\"line\">     <span class=\"meta\"># &#x5B89;&#x88C5;Docker 1.11.0</span></div><div class=\"line\">     apt-get update</div><div class=\"line\">     apt-get install apt-transport-https ca-certificates</div><div class=\"line\">     apt-<span class=\"built_in\">key</span> adv --keyserver hkp:<span class=\"comment\">//p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D</span></div><div class=\"line\">     echo deb https:<span class=\"comment\">//apt.dockerproject.org/repo ubuntu-trusty main &gt; /etc/apt/sources.list.d/docker.list</span></div><div class=\"line\">     apt-get update;</div><div class=\"line\">     apt-get install -y -q docker-engine=<span class=\"number\">1.11</span><span class=\"number\">.0</span><span class=\"number\">-0</span>~trusty</div><div class=\"line\">     usermod -aG docker vagrant</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">SHELL</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"><a href=\"#2-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\" class=\"headerlink\" title=\"2. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"></a><strong>2. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;</strong></h4><p>&#x4E3B;&#x673A;&#x4E0A;&#x7684;share&#x76EE;&#x5F55;&#x5C06;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/home/vagrant/share&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">mkdir</span> ~/Desktop/share</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;-1\"><a href=\"#3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;-1\" class=\"headerlink\" title=\"3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant destroy</div><div class=\"line\">vagrant up <span class=\"comment\">--provider virtualbox</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"><a href=\"#4-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\" class=\"headerlink\" title=\"4. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"></a><strong>4. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;</strong></h4><p>&#x4F7F;&#x7528;<strong>vagrant ssh</strong>&#x547D;&#x4EE4;&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5FC5;&#x987B;&#x5207;&#x6362;&#x5230;Vagrantfile&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x673A;IP&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5219;&#x66F4;&#x4E3A;&#x65B9;&#x4FBF;:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">ssh</span> <span class=\"selector-tag\">vagrant</span>@<span class=\"keyword\">192</span>.<span class=\"keyword\">168</span>.<span class=\"keyword\">0</span>.<span class=\"keyword\">2</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;SSH&#x767B;&#x9646;&#x9700;&#x8981;&#x8F93;&#x5165;&#x865A;&#x62DF;&#x673A;vagrant&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5373;<strong>vagrant</strong></p>\n<p>&#x5C06;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x590D;&#x5236;&#x5230;&#x865A;&#x62DF;&#x673A;&#x7684;authorized_keys&#x6587;&#x4EF6;&#x4E2D;&#x5373;&#x53EF;&#x5B9E;&#x73B0;SSH&#x65E0;&#x5BC6;&#x7801;&#x767B;&#x9646;:</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">cat</span> <span class=\"variable\">$HOME</span>/.ssh/id_rsa.pub | ssh vagrant@<span class=\"number\">127.0.0.1</span> -p <span class=\"number\">2222</span> <span class=\"string\">&apos;cat &gt;&gt; <span class=\"variable\">$HOME</span>/.ssh/authorized_keys&apos;</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;2222&#x662F;&#x4E3B;&#x673A;SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x7684;&#x8F6C;&#x53D1;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;:</p>\n<figure class=\"highlight vhdl\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant ssh-config | grep <span class=\"keyword\">Port</span></div><div class=\"line\">  <span class=\"keyword\">Port</span> <span class=\"number\">2222</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5219;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x3002;</p>\n<h4 id=\"5-&#x5173;&#x4E8E;Provision\"><a href=\"#5-&#x5173;&#x4E8E;Provision\" class=\"headerlink\" title=\"5. &#x5173;&#x4E8E;Provision\"></a><strong>5. &#x5173;&#x4E8E;Provision</strong></h4><p>Vagrant&#x4E2D;&#x6709;&#x4E0B;&#x9762;&#x4E00;&#x6BB5;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight q\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</div><div class=\"line\">  config.vm.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-SHELL</div><div class=\"line\"></div><div class=\"line\">     # &#x5B89;&#x88C5;Docker <span class=\"number\">1.11</span><span class=\"number\">.0</span></div><div class=\"line\">     apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">     apt-<span class=\"built_in\">get</span> install apt-transport-https ca-certificates</div><div class=\"line\">     apt-<span class=\"built_in\">key</span> adv --keyserver hkp:<span class=\"comment\">//p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D</span></div><div class=\"line\">     echo deb https:<span class=\"comment\">//apt.dockerproject.org/repo ubuntu-trusty main &gt; /etc/apt/sources.list.d/docker.list</span></div><div class=\"line\">     apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span>;</div><div class=\"line\">     apt-<span class=\"built_in\">get</span> install -y -q docker-engine=<span class=\"number\">1.11</span><span class=\"number\">.0</span><span class=\"number\">-0</span>~trusty</div><div class=\"line\">     usermod -aG docker vagrant</div><div class=\"line\"></div><div class=\"line\">  SHELL</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5D4C;&#x5165;&#x4E86;&#x4E00;&#x6BB5;Shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x5B89;&#x88C5;&#x4E86;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x5176;&#x4ED6;&#x6240;&#x9700;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#x3002;&#x4FEE;&#x6539;&#x6B64;&#x6BB5;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x201D;&#x2013;provision&#x201D;&#x9009;&#x9879;&#x3002;</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">vagrant</span> <span class=\"comment\">halt</span></div><div class=\"line\"><span class=\"comment\">vagrant</span> <span class=\"comment\">up</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">provider</span> <span class=\"comment\">virtualbox</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">provision</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#xFF0C;Vagrant&#x652F;&#x6301;&#x521B;&#x5EFA;<a href=\"https://www.vagrantup.com/docs/provisioning/docker.html\" target=\"_blank\" rel=\"external\">Docker Provision</a>&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;Docker&#x4E3B;&#x673A;&#xFF0C;&#x529F;&#x80FD;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x7528;&#x8D77;&#x6765;&#x4E0D;&#x5982;&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x7075;&#x6D3B;&#x3002;</p>\n<h2 id=\"&#x4E09;-Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;\"><a href=\"#&#x4E09;-Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;\" class=\"headerlink\" title=\"&#x4E09;. Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;\"></a>&#x4E09;. Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;</h2><p><a href=\"https://www.vagrantup.com/\" target=\"_blank\" rel=\"external\">Vagrant</a>&#x4E0E;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>&#x90FD;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5FEB;&#x901F;&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;Vagrant&#x662F;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x7684;&#xFF0C;&#x800C;Docker&#x662F;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E24;&#x8005;&#x7684;&#x529F;&#x80FD;&#x5E76;&#x4E0D;&#x76F8;&#x540C;&#x3002;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x6211;&#x4E24;&#x4E2A;&#x90FD;&#x7528;&#xFF0C;Vagrant&#x4EC5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#xFF0C;&#x800C;Docker&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x548C;&#x8FD0;&#x884C;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x3002;&#x8FD9;&#x6837;&#x5B9E;&#x73B0;&#x4E86;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E24;&#x5C42;&#x9694;&#x79BB;&#xFF0C;MacBook&#x4E0D;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x591A;&#x4F59;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;Vagrant&#x6240;&#x521B;&#x5EFA;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4E5F;&#x4EC5;&#x9700;&#x8981;&#x5B89;&#x88C5;Docker&#x7B49;&#x5C11;&#x6570;&#x8F6F;&#x4EF6;&#xFF0C;&#x8FD9;&#x6837;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;&#x548C;&#x5B89;&#x5168;&#x3002;</p>\n<p>Vagrant&#x662F;&#x57FA;&#x4E8E;Vagrantfile&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x800C;Docker&#x662F;&#x57FA;&#x4E8E;Dockerfile&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x955C;&#x50CF;&#x3002;&#x4E24;&#x8005;&#x90FD;&#x662F;&#x5C06;&#x5E94;&#x7528;&#x7684;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x4EE3;&#x7801;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x975E;&#x5E38;&#x7075;&#x6D3B;&#xFF0C;&#x6613;&#x4E8E;&#x91CD;&#x590D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x7248;&#x672C;&#x63A7;&#x5236;&#x3002;&#x4F46;&#x662F;&#xFF0C;Vagrantfile&#x7684;&#x8BED;&#x6CD5;&#x5176;&#x5B9E;&#x975E;&#x5E38;&#x7B80;&#x964B;&#xFF0C;&#x8FDC;&#x6CA1;&#x6709;Dockerfile&#x7075;&#x6D3B;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Vagrant&#x4EC5;&#x9002;&#x5408;&#x4E8E;&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x6216;&#x8005;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x6253;&#x5305;&#x5E94;&#x7528;&#x3002;</p>\n<p>Vagrant&#x7684;&#x529F;&#x80FD;&#x4E0E;<a href=\"https://docs.docker.com/machine/\" target=\"_blank\" rel=\"external\">Docker Machine</a>&#x529F;&#x80FD;&#x4E00;&#x81F4;&#xFF0C;&#x90FD;&#x662F;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x3002;&#x4F46;&#x662F;&#xFF0C;Docker Machine&#x662F;&#x4E13;&#x7528;&#x4E8E;&#x521B;&#x5EFA;Docker&#x4E3B;&#x673A;&#x7684;&#xFF0C;&#x800C;Vagrant&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x3002;&#x7406;&#x8BBA;&#x4E0A;Docker&#x7528;&#x6237;&#x4F7F;&#x7528;Docker Machine&#x4F1A;&#x66F4;&#x65B9;&#x4FBF;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x5E76;&#x6CA1;&#x6709;&#x9009;&#x62E9;Docker Machine&#xFF0C;&#x56E0;&#x4E3A;&#x611F;&#x89C9;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x3002;Docker Machine&#x6240;&#x521B;&#x5EFA;&#x7684;&#x672C;&#x5730;&#x865A;&#x62DF;&#x673A;&#x9ED8;&#x8BA4;&#x57FA;&#x4E8E;Docker&#x4E13;&#x7528;&#x7684;Linux&#x53D1;&#x884C;&#x7248;<a href=\"https://github.com/boot2docker/boot2docker\" target=\"_blank\" rel=\"external\">boot2docker</a>&#xFF0C;&#x4E91;&#x7AEF;&#x865A;&#x62DF;&#x673A;&#x9ED8;&#x8BA4;&#x57FA;&#x4E8E;ubuntu&#xFF0C;&#x5BF9;&#x5176;&#x4ED6;Linux&#x53D1;&#x884C;&#x7248;&#x7684;&#x652F;&#x6301;&#x8FD8;&#x5904;&#x4E8E;&#x5B9E;&#x9A8C;&#x9636;&#x6BB5;&#x3002;&#x800C;Vagrant&#x7A33;&#x5B9A;&#x652F;&#x6301;&#x66F4;&#x591A;Linux&#x53D1;&#x884C;&#x7248;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x66F4;&#x591A;&#x9700;&#x6C42;&#x3002;Vagrant&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Vagrantfile&#x8FDB;&#x884C;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#xFF0C;&#x800C;Docker Machine&#x5E76;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x6B64;Vagrant&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x3002;</p>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x624B;&#x52A8;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x975E;&#x5E38;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x91CD;&#x88C5;&#x8D77;&#x6765;&#x4E5F;&#x5F88;&#x9EBB;&#x70E6;&#xFF0C;&#x6253;&#x5305;&#x6210;&#x955C;&#x50CF;&#x7684;&#x8BDD;&#x5219;&#x4E0D;&#x6613;&#x4FEE;&#x6539;&#xFF0C;&#x5F88;&#x96BE;&#x8FDB;&#x884C;&#x7248;&#x672C;&#x63A7;&#x5236;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x79FB;&#x690D;&#x5230;&#x4E91;&#x7AEF;&#x3002;<a href=\"https://www.vagrantup.com/\">Vagrant</a>&#x53EF;&#x4EE5;&#x5C06;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x7684;&#x8FC7;&#x7A0B;&#x4EE3;&#x7801;&#x5316;&#xFF0C;&#x6709;&#x6548;&#x5730;&#x89E3;&#x51B3;&#x4E86;&#x4EE5;&#x4E0A;&#x6240;&#x63D0;&#x7684;&#x75DB;&#x70B9;&#x3002;</p>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/\">2016-06-19</a></li>\n</ul>\n<p>&#x672C;&#x6587;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x662F;&#x5728;MacBook&#x4E0A;&#x8FDB;&#x884C;&#x7684;&#xFF0C;Windows&#x4E0A;&#x7684;&#x64CD;&#x4F5C;&#x5927;&#x90E8;&#x5206;&#x4E00;&#x81F4;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x3002;</p>\n<p><img src=\"/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.png\" width=\"300\"></p>\n<h2 id=\"&#x4E00;-&#x5FEB;&#x901F;&#x5165;&#x95E8;\"><a href=\"#&#x4E00;-&#x5FEB;&#x901F;&#x5165;&#x95E8;\" class=\"headerlink\" title=\"&#x4E00;. &#x5FEB;&#x901F;&#x5165;&#x95E8;\"></a>&#x4E00;. &#x5FEB;&#x901F;&#x5165;&#x95E8;</h2><h4 id=\"1-&#x5B89;&#x88C5;VirtualBox\"><a href=\"#1-&#x5B89;&#x88C5;VirtualBox\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;VirtualBox\"></a><strong>1. &#x5B89;&#x88C5;<a href=\"https://www.virtualbox.org/wiki/Downloads\">VirtualBox</a></strong></h4><h4 id=\"2-&#x5B89;&#x88C5;Vagrant\"><a href=\"#2-&#x5B89;&#x88C5;Vagrant\" class=\"headerlink\" title=\"2. &#x5B89;&#x88C5;Vagrant\"></a><strong>2. &#x5B89;&#x88C5;<a href=\"https://www.vagrantup.com/downloads.html\">Vagrant</a></strong></h4><h4 id=\"3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"><a href=\"#3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\" class=\"headerlink\" title=\"3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">mkdir</span> vagrant-ubuntu</div><div class=\"line\"><span class=\"keyword\">cd</span> vagrant-ubuntu</div><div class=\"line\">vagrant box <span class=\"built_in\">add</span> ubuntu/trusty64</div><div class=\"line\">vagrant init ubuntu/trusty64</div><div class=\"line\">vagrant <span class=\"keyword\">up</span> --provider virtualbox</div><div class=\"line\">vagrant ssh</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>vagrant box add:</strong> &#x4E0B;&#x8F7D;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;<strong>box</strong></li>\n<li><strong>vagrant init:</strong> &#x751F;&#x6210;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x7684;&#x6240;&#x4F9D;&#x8D56;&#x7684;<strong>Vagrantfile</strong></li>\n<li><strong>vagrant up:</strong> &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant ssh:</strong> SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;</li>\n</ul>\n<p>&#x4E0D;&#x59A8;&#x67E5;&#x770B;&#x4E00;&#x4E0B;Vagrant&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;<strong>Vagrantfile</strong>, &#x6211;&#x5220;&#x9664;&#x4E86;&#x6240;&#x6709;&#x6CE8;&#x91CA;&#xFF1A;</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\">Vagrant.configure(<span class=\"number\">2</span>) <span class=\"built_in\">do</span> |<span class=\"built_in\">config</span>|</div><div class=\"line\">   <span class=\"built_in\">config</span>.vm.box = <span class=\"string\">&quot;ubuntu/trusty64&quot;</span></div><div class=\"line\"><span class=\"built_in\">end</span></div></pre></td></tr></table></figure>\n<p><strong>Vagrantfile</strong>&#x7684;&#x5185;&#x5BB9;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4EC5;&#x5B9A;&#x4E49;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;<strong>Box</strong>&#x4E3A;<strong>ubuntu/trusty64</strong>&#x3002;<strong>Box</strong>&#x76F8;&#x5F53;&#x4E8E;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x7684;&#x865A;&#x62DF;&#x673A;&#x662F;ubuntu trusty(14.04)&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x5176;&#x4ED6;Linux&#x53D1;&#x884C;&#x7248;&#x4F8B;&#x5982;Debian&#x6216;&#x8005;CentOS&#xFF0C;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://atlas.hashicorp.com/boxes/search\">&#x8FD9;&#x91CC;</a>&#x641C;&#x7D22;&#x5BF9;&#x5E94;&#x7684;<strong>Box</strong>.</p>\n<p>Vagrant&#x865A;&#x62DF;&#x673A;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;:</p>\n<ul>\n<li>&#x7528;&#x6237;/&#x5BC6;&#x7801;: vagrant/vagrant</li>\n<li>&#x5171;&#x4EAB;&#x76EE;&#x5F55;: &#x4E3B;&#x673A;&#x4E0A;&#x7684;vagrant-ubuntu&#x76EE;&#x5F55;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/vagrant&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</li>\n<li>&#x5185;&#x5B58;&#xFF1A;512MB</li>\n<li>CPU: 1</li>\n</ul>\n<p>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x6EE1;&#x8DB3;&#x5F00;&#x53D1;&#x9700;&#x6C42;&#xFF0C;&#x4E0B;&#x4E00;&#x5C0F;&#x8282;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;\"><a href=\"#&#x4E8C;-&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x4E8C;. &#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;\"></a>&#x4E8C;. &#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;</h2><h4 id=\"1-&#x4FEE;&#x6539;Vagrantfile\"><a href=\"#1-&#x4FEE;&#x6539;Vagrantfile\" class=\"headerlink\" title=\"1. &#x4FEE;&#x6539;Vagrantfile\"></a><strong>1. &#x4FEE;&#x6539;Vagrantfile</strong></h4><figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vim Vagrantfile</span></div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6CE8;&#x91CA;&#x7406;&#x89E3;&#x6BCF;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x7684;&#x542B;&#x4E49;&#x3002;</p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"code\"><pre><div class=\"line\">Vagrant.configure(<span class=\"number\">2</span>) <span class=\"keyword\">do</span> |config|</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;Box</span></div><div class=\"line\">  config.vm.<span class=\"built_in\">box</span> = <span class=\"string\">&quot;ubuntu/trusty64&quot;</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;</span></div><div class=\"line\">  config.vm.hostname=<span class=\"string\">&quot;ubuntu&quot;</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;IP</span></div><div class=\"line\">  config.vm.network <span class=\"string\">&quot;private_network&quot;</span>, ip: <span class=\"string\">&quot;192.168.0.2&quot;</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x673A;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5171;&#x4EAB;&#x76EE;&#x5F55;</span></div><div class=\"line\">  config.vm.synced_folder <span class=\"string\">&quot;~/Desktop/share&quot;</span>, <span class=\"string\">&quot;/home/vagrant/share&quot;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\"># VirtaulBox&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></div><div class=\"line\">  config.vm.provider <span class=\"string\">&quot;virtualbox&quot;</span> <span class=\"keyword\">do</span> |v|</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x540D;&#x79F0;</span></div><div class=\"line\">      v.name = <span class=\"string\">&quot;ubuntu&quot;</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;</span></div><div class=\"line\">      v.memory = <span class=\"number\">2048</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;CPU&#x4E2A;&#x6570;</span></div><div class=\"line\">      v.cpus = <span class=\"number\">1</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  </div><div class=\"line\">  <span class=\"meta\"># &#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</span></div><div class=\"line\">  config.vm.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-<span class=\"built_in\">SHELL</span></div><div class=\"line\"></div><div class=\"line\">     <span class=\"meta\"># &#x5B89;&#x88C5;Docker 1.11.0</span></div><div class=\"line\">     apt-get update</div><div class=\"line\">     apt-get install apt-transport-https ca-certificates</div><div class=\"line\">     apt-<span class=\"built_in\">key</span> adv --keyserver hkp:<span class=\"comment\">//p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D</span></div><div class=\"line\">     echo deb https:<span class=\"comment\">//apt.dockerproject.org/repo ubuntu-trusty main &gt; /etc/apt/sources.list.d/docker.list</span></div><div class=\"line\">     apt-get update;</div><div class=\"line\">     apt-get install -y -q docker-engine=<span class=\"number\">1.11</span><span class=\"number\">.0</span><span class=\"number\">-0</span>~trusty</div><div class=\"line\">     usermod -aG docker vagrant</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">SHELL</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"><a href=\"#2-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\" class=\"headerlink\" title=\"2. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"></a><strong>2. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;</strong></h4><p>&#x4E3B;&#x673A;&#x4E0A;&#x7684;share&#x76EE;&#x5F55;&#x5C06;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/home/vagrant/share&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">mkdir</span> ~/Desktop/share</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;-1\"><a href=\"#3-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;-1\" class=\"headerlink\" title=\"3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>3. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant destroy</div><div class=\"line\">vagrant up <span class=\"comment\">--provider virtualbox</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"><a href=\"#4-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\" class=\"headerlink\" title=\"4. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"></a><strong>4. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;</strong></h4><p>&#x4F7F;&#x7528;<strong>vagrant ssh</strong>&#x547D;&#x4EE4;&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5FC5;&#x987B;&#x5207;&#x6362;&#x5230;Vagrantfile&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x673A;IP&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5219;&#x66F4;&#x4E3A;&#x65B9;&#x4FBF;:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">ssh</span> <span class=\"selector-tag\">vagrant</span>@<span class=\"keyword\">192</span>.<span class=\"keyword\">168</span>.<span class=\"keyword\">0</span>.<span class=\"keyword\">2</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;SSH&#x767B;&#x9646;&#x9700;&#x8981;&#x8F93;&#x5165;&#x865A;&#x62DF;&#x673A;vagrant&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5373;<strong>vagrant</strong></p>\n<p>&#x5C06;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x590D;&#x5236;&#x5230;&#x865A;&#x62DF;&#x673A;&#x7684;authorized_keys&#x6587;&#x4EF6;&#x4E2D;&#x5373;&#x53EF;&#x5B9E;&#x73B0;SSH&#x65E0;&#x5BC6;&#x7801;&#x767B;&#x9646;:</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">cat</span> <span class=\"variable\">$HOME</span>/.ssh/id_rsa.pub | ssh vagrant@<span class=\"number\">127.0.0.1</span> -p <span class=\"number\">2222</span> <span class=\"string\">&apos;cat &gt;&gt; <span class=\"variable\">$HOME</span>/.ssh/authorized_keys&apos;</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;2222&#x662F;&#x4E3B;&#x673A;SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x7684;&#x8F6C;&#x53D1;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;:</p>\n<figure class=\"highlight vhdl\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant ssh-config | grep <span class=\"keyword\">Port</span></div><div class=\"line\">  <span class=\"keyword\">Port</span> <span class=\"number\">2222</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5219;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x3002;</p>\n<h4 id=\"5-&#x5173;&#x4E8E;Provision\"><a href=\"#5-&#x5173;&#x4E8E;Provision\" class=\"headerlink\" title=\"5. &#x5173;&#x4E8E;Provision\"></a><strong>5. &#x5173;&#x4E8E;Provision</strong></h4><p>Vagrant&#x4E2D;&#x6709;&#x4E0B;&#x9762;&#x4E00;&#x6BB5;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight q\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</div><div class=\"line\">  config.vm.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-SHELL</div><div class=\"line\"></div><div class=\"line\">     # &#x5B89;&#x88C5;Docker <span class=\"number\">1.11</span><span class=\"number\">.0</span></div><div class=\"line\">     apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">     apt-<span class=\"built_in\">get</span> install apt-transport-https ca-certificates</div><div class=\"line\">     apt-<span class=\"built_in\">key</span> adv --keyserver hkp:<span class=\"comment\">//p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D</span></div><div class=\"line\">     echo deb https:<span class=\"comment\">//apt.dockerproject.org/repo ubuntu-trusty main &gt; /etc/apt/sources.list.d/docker.list</span></div><div class=\"line\">     apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span>;</div><div class=\"line\">     apt-<span class=\"built_in\">get</span> install -y -q docker-engine=<span class=\"number\">1.11</span><span class=\"number\">.0</span><span class=\"number\">-0</span>~trusty</div><div class=\"line\">     usermod -aG docker vagrant</div><div class=\"line\"></div><div class=\"line\">  SHELL</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5D4C;&#x5165;&#x4E86;&#x4E00;&#x6BB5;Shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x5B89;&#x88C5;&#x4E86;<a href=\"https://www.docker.com/\">Docker</a>&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x5176;&#x4ED6;&#x6240;&#x9700;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#x3002;&#x4FEE;&#x6539;&#x6B64;&#x6BB5;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x201D;&#x2013;provision&#x201D;&#x9009;&#x9879;&#x3002;</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">vagrant</span> <span class=\"comment\">halt</span></div><div class=\"line\"><span class=\"comment\">vagrant</span> <span class=\"comment\">up</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">provider</span> <span class=\"comment\">virtualbox</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">provision</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#xFF0C;Vagrant&#x652F;&#x6301;&#x521B;&#x5EFA;<a href=\"https://www.vagrantup.com/docs/provisioning/docker.html\">Docker Provision</a>&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;Docker&#x4E3B;&#x673A;&#xFF0C;&#x529F;&#x80FD;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x7528;&#x8D77;&#x6765;&#x4E0D;&#x5982;&#x4F7F;&#x7528;Shell&#x811A;&#x672C;&#x7075;&#x6D3B;&#x3002;</p>\n<h2 id=\"&#x4E09;-Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;\"><a href=\"#&#x4E09;-Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;\" class=\"headerlink\" title=\"&#x4E09;. Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;\"></a>&#x4E09;. Vagrant&#x4E0E;Docker&#x6BD4;&#x8F83;</h2><p><a href=\"https://www.vagrantup.com/\">Vagrant</a>&#x4E0E;<a href=\"https://www.docker.com/\">Docker</a>&#x90FD;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5FEB;&#x901F;&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;Vagrant&#x662F;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x7684;&#xFF0C;&#x800C;Docker&#x662F;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E24;&#x8005;&#x7684;&#x529F;&#x80FD;&#x5E76;&#x4E0D;&#x76F8;&#x540C;&#x3002;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x6211;&#x4E24;&#x4E2A;&#x90FD;&#x7528;&#xFF0C;Vagrant&#x4EC5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#xFF0C;&#x800C;Docker&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x548C;&#x8FD0;&#x884C;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x3002;&#x8FD9;&#x6837;&#x5B9E;&#x73B0;&#x4E86;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E24;&#x5C42;&#x9694;&#x79BB;&#xFF0C;MacBook&#x4E0D;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x591A;&#x4F59;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;Vagrant&#x6240;&#x521B;&#x5EFA;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4E5F;&#x4EC5;&#x9700;&#x8981;&#x5B89;&#x88C5;Docker&#x7B49;&#x5C11;&#x6570;&#x8F6F;&#x4EF6;&#xFF0C;&#x8FD9;&#x6837;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;&#x548C;&#x5B89;&#x5168;&#x3002;</p>\n<p>Vagrant&#x662F;&#x57FA;&#x4E8E;Vagrantfile&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x800C;Docker&#x662F;&#x57FA;&#x4E8E;Dockerfile&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x955C;&#x50CF;&#x3002;&#x4E24;&#x8005;&#x90FD;&#x662F;&#x5C06;&#x5E94;&#x7528;&#x7684;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x4EE3;&#x7801;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x975E;&#x5E38;&#x7075;&#x6D3B;&#xFF0C;&#x6613;&#x4E8E;&#x91CD;&#x590D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x7248;&#x672C;&#x63A7;&#x5236;&#x3002;&#x4F46;&#x662F;&#xFF0C;Vagrantfile&#x7684;&#x8BED;&#x6CD5;&#x5176;&#x5B9E;&#x975E;&#x5E38;&#x7B80;&#x964B;&#xFF0C;&#x8FDC;&#x6CA1;&#x6709;Dockerfile&#x7075;&#x6D3B;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Vagrant&#x4EC5;&#x9002;&#x5408;&#x4E8E;&#x521B;&#x5EFA;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x6216;&#x8005;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x6253;&#x5305;&#x5E94;&#x7528;&#x3002;</p>\n<p>Vagrant&#x7684;&#x529F;&#x80FD;&#x4E0E;<a href=\"https://docs.docker.com/machine/\">Docker Machine</a>&#x529F;&#x80FD;&#x4E00;&#x81F4;&#xFF0C;&#x90FD;&#x662F;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x3002;&#x4F46;&#x662F;&#xFF0C;Docker Machine&#x662F;&#x4E13;&#x7528;&#x4E8E;&#x521B;&#x5EFA;Docker&#x4E3B;&#x673A;&#x7684;&#xFF0C;&#x800C;Vagrant&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x3002;&#x7406;&#x8BBA;&#x4E0A;Docker&#x7528;&#x6237;&#x4F7F;&#x7528;Docker Machine&#x4F1A;&#x66F4;&#x65B9;&#x4FBF;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x5E76;&#x6CA1;&#x6709;&#x9009;&#x62E9;Docker Machine&#xFF0C;&#x56E0;&#x4E3A;&#x611F;&#x89C9;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x3002;Docker Machine&#x6240;&#x521B;&#x5EFA;&#x7684;&#x672C;&#x5730;&#x865A;&#x62DF;&#x673A;&#x9ED8;&#x8BA4;&#x57FA;&#x4E8E;Docker&#x4E13;&#x7528;&#x7684;Linux&#x53D1;&#x884C;&#x7248;<a href=\"https://github.com/boot2docker/boot2docker\">boot2docker</a>&#xFF0C;&#x4E91;&#x7AEF;&#x865A;&#x62DF;&#x673A;&#x9ED8;&#x8BA4;&#x57FA;&#x4E8E;ubuntu&#xFF0C;&#x5BF9;&#x5176;&#x4ED6;Linux&#x53D1;&#x884C;&#x7248;&#x7684;&#x652F;&#x6301;&#x8FD8;&#x5904;&#x4E8E;&#x5B9E;&#x9A8C;&#x9636;&#x6BB5;&#x3002;&#x800C;Vagrant&#x7A33;&#x5B9A;&#x652F;&#x6301;&#x66F4;&#x591A;Linux&#x53D1;&#x884C;&#x7248;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x66F4;&#x591A;&#x9700;&#x6C42;&#x3002;Vagrant&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Vagrantfile&#x8FDB;&#x884C;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#xFF0C;&#x800C;Docker Machine&#x5E76;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x6B64;Vagrant&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x3002;</p>"},{"title":"DockerMesos/Marathon","date":"2016-07-10T02:00:00.000Z","_content":"\n**:** [DockerMesos/Marathon](http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/)[DockerMesos/Marathon](http://kiwenlau.com/2016/07/10/mesos-marathon-platform/)3********[Marathon LB](https://github.com/mesosphere/marathon-lb)\n\n**GitHub:** [kiwenlau/mesos-marathon-platform](https://github.com/kiwenlau/mesos-marathon-platform)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-07-10](http://kiwenlau.com/2016/07/10/mesos-marathon-platform/)\n\n<img src=\"mesos-marathon-platform/mesos-marathon-platform.png\" width = \"500\"/>\n\n## . Mesos/Marathon\n\n#### **1. Mesos**\n\n[Mesos](http://mesos.apache.org/)****CPUHadoop MapReduce, SparkStorm****Mesos****\n\nMesos: MesosMesos: Mesos; MesosMesos\n\nHadoop YARNKubernetesSwarmHadoop YARNSparkKubernetesSwarmMesosKubernetesSwarmMesosKubernetesSwarm**MesosMarathon**\n\n#### **2. Marathon**\n\n[Marathon](https://mesosphere.github.io/marathon/)MesosMarathonMesos[Aurora](http://aurora.apache.org/)MarathonMarathonAurora[Docker](https://www.docker.com/)MarathonMesosphere\n\nMarathon****Marathon[Supervisor](http://supervisord.org/)Supervisor(volume)MongoDBMySQL**Marathon**\n\n#### **3. Marathon LB**\n\n[Marathon LB](https://github.com/mesosphere/marathon-lb)Marathon********Marathon LB[Haproxy](http://www.haproxy.org/)\n\nMarathon(IP)(PORT)Mesos/MarathonIPPORTIPPORTMarathon LBIPMarathon LBIPIPPORTMarathon LBMarathonIPPORTHaproxyIPPORT****\n\nMarathon LB****Round Robin\n                           \n## . \n\n#### **1. **\n\n[Vagrant](http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/)Mesos/Marathon3\n\nnode1(Master)zookeeper, mesos_master, marathonmarathon-lb; node2node3(Slave)mesos_slavemarathonnginxnginx:\n\n|     | IP           |                                       |\n|:------- |:-------------| :----------------------------------------------|\n| node1  | 192.168.59.1 | zookeeper, mesos_master, marathon, marathon-lb |\n| node2  | 192.168.59.2 | mesos_slave1, nginx                                   |\n| node3  | 192.168.59.3 | mesos_slave2, nginx                                   |\n\n#### **2. Docker daemon**\n\n**start-containers.sh**Docker daemonTCP**Docker daemon**Docker daemonstart-containers.sh\n\nMaster, Slave1Slave2:\n\n```\nsudo vim /etc/default/docker\n```\n\n**DOCKER_OPTS**\n\n```\nDOCKER_OPTS=\"-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock\"\n```\n\nDocker\n\n```\nsudo restart docker\n```\n\n#### **3. Docker** \n\nMaster:\n\n```\nsudo docker pull kiwenlau/zookeeper:3.4.8 \nsudo docker pull kiwenlau/mesos:0.26.0 \nsudo docker pull kiwenlau/marathon:1.1.1  \nsudo docker pull kiwenlau/marathonlb:1.3.0\n```\n\nSlave1  Slave2:\n\n```\nsudo docker pull kiwenlau/mesos:0.26.0\n```\n\n#### **4. GitHub** \n\nMaster:\n\n```\ngit clone https://github.com/kiwenlau/mesos-marathon-platform\n```\n\n\n#### **5. ** \n\nMaster:\n\n```\ncd mesos-marathon-platform\nsudo ./start-containers.sh\n```\n\n:\n\n- Mesos: [http://192.168.59.1:5050/](http://192.168.59.1:5050/)\n- Marathon: [http://192.168.59.1:8080/](http://192.168.59.1:8080/)  \n\n\nSlaveIPstart-contaniers.sh\n\n```\nMASTER_IP=192.168.59.1\nSLAVE_IP=(192.168.59.2 192.168.59.3)\n```\n\n#### **6. Nginx:** \n\nnginx(Slave1Slave2):\n\n```\nsudo docker pull nginx:1.10\n```\n\nNginx(Master):\n\n```\nsudo ./run-nginx.sh \n```\n\nNginx(nginx.json):\n\n```\n{\n    \"id\": \"nginx\",\n    \"labels\": {\n        \"HAPROXY_GROUP\": \"external\"\n    },\n    \"cpus\": 0.2,\n    \"mem\": 20.0,\n    \"instances\": 2,\n    \"healthChecks\": [{\n        \"path\": \"/\"\n    }],\n    \"container\": {\n        \"type\": \"DOCKER\",\n        \"docker\": {\n            \"image\": \"nginx:1.10\",\n            \"network\": \"BRIDGE\",\n            \"portMappings\": [{ \"containerPort\": 80, \"hostPort\": 0, \"servicePort\": 10000, \"protocol\": \"tcp\" }]\n        }\n    }\n}\n```\n\nservicePortnginx**10000**marathon-lbIP**192.168.59.1**nginx\n\n- [http://192.168.59.1:10000/](http://192.168.59.1:10000/)\n\nnginxSlave\n\n\n## . \n\n1. [Mesos: A Platform for Fine-Grained Resource Sharing in the Data Center](http://mesos.berkeley.edu/mesos_tech_report.pdf)\n","source":"_posts/2016/07/10/mesos-marathon-platform.md","raw":"title: DockerMesos/Marathon\n\ndate: 2016-07-10 10:00\n\ntags: [Docker, Mesos, Marathon]\n\n---\n\n**:** [DockerMesos/Marathon](http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/)[DockerMesos/Marathon](http://kiwenlau.com/2016/07/10/mesos-marathon-platform/)3********[Marathon LB](https://github.com/mesosphere/marathon-lb)\n\n**GitHub:** [kiwenlau/mesos-marathon-platform](https://github.com/kiwenlau/mesos-marathon-platform)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-07-10](http://kiwenlau.com/2016/07/10/mesos-marathon-platform/)\n\n<img src=\"mesos-marathon-platform/mesos-marathon-platform.png\" width = \"500\"/>\n\n## . Mesos/Marathon\n\n#### **1. Mesos**\n\n[Mesos](http://mesos.apache.org/)****CPUHadoop MapReduce, SparkStorm****Mesos****\n\nMesos: MesosMesos: Mesos; MesosMesos\n\nHadoop YARNKubernetesSwarmHadoop YARNSparkKubernetesSwarmMesosKubernetesSwarmMesosKubernetesSwarm**MesosMarathon**\n\n#### **2. Marathon**\n\n[Marathon](https://mesosphere.github.io/marathon/)MesosMarathonMesos[Aurora](http://aurora.apache.org/)MarathonMarathonAurora[Docker](https://www.docker.com/)MarathonMesosphere\n\nMarathon****Marathon[Supervisor](http://supervisord.org/)Supervisor(volume)MongoDBMySQL**Marathon**\n\n#### **3. Marathon LB**\n\n[Marathon LB](https://github.com/mesosphere/marathon-lb)Marathon********Marathon LB[Haproxy](http://www.haproxy.org/)\n\nMarathon(IP)(PORT)Mesos/MarathonIPPORTIPPORTMarathon LBIPMarathon LBIPIPPORTMarathon LBMarathonIPPORTHaproxyIPPORT****\n\nMarathon LB****Round Robin\n                           \n## . \n\n#### **1. **\n\n[Vagrant](http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/)Mesos/Marathon3\n\nnode1(Master)zookeeper, mesos_master, marathonmarathon-lb; node2node3(Slave)mesos_slavemarathonnginxnginx:\n\n|     | IP           |                                       |\n|:------- |:-------------| :----------------------------------------------|\n| node1  | 192.168.59.1 | zookeeper, mesos_master, marathon, marathon-lb |\n| node2  | 192.168.59.2 | mesos_slave1, nginx                                   |\n| node3  | 192.168.59.3 | mesos_slave2, nginx                                   |\n\n#### **2. Docker daemon**\n\n**start-containers.sh**Docker daemonTCP**Docker daemon**Docker daemonstart-containers.sh\n\nMaster, Slave1Slave2:\n\n```\nsudo vim /etc/default/docker\n```\n\n**DOCKER_OPTS**\n\n```\nDOCKER_OPTS=\"-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock\"\n```\n\nDocker\n\n```\nsudo restart docker\n```\n\n#### **3. Docker** \n\nMaster:\n\n```\nsudo docker pull kiwenlau/zookeeper:3.4.8 \nsudo docker pull kiwenlau/mesos:0.26.0 \nsudo docker pull kiwenlau/marathon:1.1.1  \nsudo docker pull kiwenlau/marathonlb:1.3.0\n```\n\nSlave1  Slave2:\n\n```\nsudo docker pull kiwenlau/mesos:0.26.0\n```\n\n#### **4. GitHub** \n\nMaster:\n\n```\ngit clone https://github.com/kiwenlau/mesos-marathon-platform\n```\n\n\n#### **5. ** \n\nMaster:\n\n```\ncd mesos-marathon-platform\nsudo ./start-containers.sh\n```\n\n:\n\n- Mesos: [http://192.168.59.1:5050/](http://192.168.59.1:5050/)\n- Marathon: [http://192.168.59.1:8080/](http://192.168.59.1:8080/)  \n\n\nSlaveIPstart-contaniers.sh\n\n```\nMASTER_IP=192.168.59.1\nSLAVE_IP=(192.168.59.2 192.168.59.3)\n```\n\n#### **6. Nginx:** \n\nnginx(Slave1Slave2):\n\n```\nsudo docker pull nginx:1.10\n```\n\nNginx(Master):\n\n```\nsudo ./run-nginx.sh \n```\n\nNginx(nginx.json):\n\n```\n{\n    \"id\": \"nginx\",\n    \"labels\": {\n        \"HAPROXY_GROUP\": \"external\"\n    },\n    \"cpus\": 0.2,\n    \"mem\": 20.0,\n    \"instances\": 2,\n    \"healthChecks\": [{\n        \"path\": \"/\"\n    }],\n    \"container\": {\n        \"type\": \"DOCKER\",\n        \"docker\": {\n            \"image\": \"nginx:1.10\",\n            \"network\": \"BRIDGE\",\n            \"portMappings\": [{ \"containerPort\": 80, \"hostPort\": 0, \"servicePort\": 10000, \"protocol\": \"tcp\" }]\n        }\n    }\n}\n```\n\nservicePortnginx**10000**marathon-lbIP**192.168.59.1**nginx\n\n- [http://192.168.59.1:10000/](http://192.168.59.1:10000/)\n\nnginxSlave\n\n\n## . \n\n1. [Mesos: A Platform for Fine-Grained Resource Sharing in the Data Center](http://mesos.berkeley.edu/mesos_tech_report.pdf)\n","slug":"2016/07/10/mesos-marathon-platform","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtm9000j71fyk4f1xf2l","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x5728;&#x4E4B;&#x524D;&#x7684;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E86;<a href=\"http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Mesos/Marathon</a>&#xFF0C;&#x4F46;&#x662F;&#x4EC5;&#x4EC5;&#x4F7F;&#x7528;&#x4E86;&#x5355;&#x4E2A;&#x8282;&#x70B9;&#x3002;&#x800C;&#x5728;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x5C06;&#x4ECB;&#x7ECD;<a href=\"http://kiwenlau.com/2016/07/10/mesos-marathon-platform/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Mesos/Marathon</a>&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;3&#x4E2A;&#x8282;&#x70B9;&#x5FEB;&#x901F;&#x5730;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x771F;&#x6B63;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x3002;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x548C;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x662F;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6211;&#x9009;&#x62E9;&#x4E86;<a href=\"https://github.com/mesosphere/marathon-lb\" target=\"_blank\" rel=\"external\">Marathon LB</a>&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong> <a href=\"https://github.com/kiwenlau/mesos-marathon-platform\" target=\"_blank\" rel=\"external\">kiwenlau/mesos-marathon-platform</a></p>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/07/10/mesos-marathon-platform/\">2016-07-10</a></li>\n</ul>\n<p><img src=\"/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-Mesos-Marathon&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-Mesos-Marathon&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. Mesos/Marathon&#x7B80;&#x4ECB;\"></a>&#x4E00;. Mesos/Marathon&#x7B80;&#x4ECB;</h2><h4 id=\"1-Mesos\"><a href=\"#1-Mesos\" class=\"headerlink\" title=\"1. Mesos\"></a><strong>1. Mesos</strong></h4><p><a href=\"http://mesos.apache.org/\" target=\"_blank\" rel=\"external\">Mesos</a>&#x662F;<strong>&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;</strong>&#xFF0C;&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#x96C6;&#x7FA4;&#x5185;&#x7684;CPU&#xFF0C;&#x5185;&#x5B58;&#x4EE5;&#x53CA;&#x78C1;&#x76D8;&#x7B49;&#x8D44;&#x6E90;&#x3002;Hadoop MapReduce, Spark&#x4EE5;&#x53CA;Storm&#x7B49;<strong>&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;</strong>&#x5F88;&#x6D41;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x642D;&#x5EFA;&#x5355;&#x72EC;&#x7684;&#x96C6;&#x7FA4;&#x975E;&#x5E38;&#x5730;&#x6D6A;&#x8D39;&#x8D44;&#x6E90;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5171;&#x4EAB;&#xFF0C;&#x800C;Mesos&#x7684;&#x8BBE;&#x8BA1;&#x521D;&#x8877;&#x5C31;&#x662F;&#x8BA9;&#x4E0D;&#x540C;&#x7684;<strong>&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;</strong>&#x80FD;&#x591F;&#x5171;&#x4EAB;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x3002;</p>\n<p>Mesos&#x8D44;&#x6E90;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x5C42;&#x6B21;: Mesos&#x76D1;&#x63A7;&#x96C6;&#x7FA4;&#x7684;&#x7A7A;&#x4F59;&#x8D44;&#x6E90;&#xFF0C;&#x5E76;&#x5C06;&#x7A7A;&#x4F59;&#x8D44;&#x6E90;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x89C4;&#x5219;&#x5206;&#x914D;&#x7ED9;&#x5404;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#xFF1B;&#x800C;&#x5404;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4F1A;&#x6839;&#x636E;&#x9700;&#x8981;&#x9009;&#x62E9;&#x63A5;&#x53D7;&#x6216;&#x8005;&#x62D2;&#x7EDD;&#x6240;&#x5206;&#x914D;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;Mesos&#x4E0E;&#x5404;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x90FD;&#x53C2;&#x4E0E;&#x4E86;&#x8D44;&#x6E90;&#x7684;&#x8C03;&#x5EA6;: Mesos&#x8D1F;&#x8D23;&#x5206;&#x914D;&#x8D44;&#x6E90;; &#x800C;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x63A5;&#x53D7;&#x6216;&#x8005;&#x62D2;&#x7EDD;&#x8D44;&#x6E90;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Mesos&#x7684;&#x8D23;&#x4EFB;&#x975E;&#x5E38;&#x6E05;&#x6670;&#x800C;&#x4E14;&#x7B80;&#x5355;&#xFF1A;&#x5206;&#x914D;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x3002;Mesos&#x7684;&#x53CC;&#x5C42;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x63D0;&#x9AD8;&#x4E86;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x652F;&#x6301;&#x4E0D;&#x540C;&#x7684;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x3002;</p>\n<p>&#x76EE;&#x524D;&#x4E3B;&#x6D41;&#x7684;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x8FD8;&#x6709;Hadoop YARN&#xFF0C;Kubernetes&#x4EE5;&#x53CA;Swarm&#x3002;Hadoop YARN&#x76EE;&#x524D;&#x4EC5;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4F8B;&#x5982;Spark&#xFF1B;Kubernetes&#x4E0E;Swarm&#x4EC5;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#xFF1B;&#x800C;Mesos&#x5BF9;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4EE5;&#x53CA;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x7684;&#x652F;&#x6301;&#x90FD;&#x5F88;&#x6210;&#x719F;&#x3002;&#x5E76;&#x4E14;&#xFF0C;Kubernetes&#x4E0E;Swarm&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x8FD0;&#x884C;&#x5728;Mesos&#x4E4B;&#x4E0A;&#x3002;Kubernetes&#x7684;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x8FC7;&#x5EA6;&#x8BBE;&#x8BA1;&#x5BFC;&#x81F4;&#x590D;&#x6742;&#x5EA6;&#x5F88;&#x9AD8;&#xFF0C;&#x800C;Swarm&#x7684;&#x8BBE;&#x8BA1;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x4F46;&#x662F;&#x529F;&#x80FD;&#x76F8;&#x5BF9;&#x7F3A;&#x4E4F;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x9009;&#x62E9;&#x3002;&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#xFF0C;<strong>&#x4F7F;&#x7528;Mesos&#x7684;&#x8BDD;&#xFF0C;&#x6700;&#x597D;&#x9009;&#x62E9;Marathon&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x7F16;&#x6392;&#x7CFB;&#x7EDF;</strong>&#xFF0C;&#x67B6;&#x6784;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4E14;&#x529F;&#x80FD;&#x4E30;&#x5BCC;&#x3002;</p>\n<h4 id=\"2-Marathon\"><a href=\"#2-Marathon\" class=\"headerlink\" title=\"2. Marathon\"></a><strong>2. Marathon</strong></h4><p><a href=\"https://mesosphere.github.io/marathon/\" target=\"_blank\" rel=\"external\">Marathon</a>&#x662F;&#x5BB9;&#x5668;&#x7F16;&#x6392;&#x7CFB;&#x7EDF;&#xFF0C;&#x662F;&#x8FD0;&#x884C;&#x4E8E;Mesos&#x4E4B;&#x4E0A;&#x7684;&#x4F17;&#x591A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4E4B;&#x4E00;&#x3002;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Marathon&#x63D0;&#x4EA4;&#xFF0C;&#x76D1;&#x63A7;&#x5E76;&#x8C03;&#x5EA6;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#xFF0C;&#x7136;&#x540E;Mesos&#x8D1F;&#x8D23;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x3002;&#x53E6;&#x5916;&#xFF0C;<a href=\"http://aurora.apache.org/\" target=\"_blank\" rel=\"external\">Aurora</a>&#x4E0E;Marathon&#x529F;&#x80FD;&#x4E00;&#x81F4;&#xFF0C;&#x540C;&#x4E3A;&#x5BB9;&#x5668;&#x7F16;&#x6392;&#x7CFB;&#x7EDF;&#x3002;&#x76F8;&#x6BD4;&#x800C;&#x8A00;&#xFF0C;Marathon&#x7684;&#x67B6;&#x6784;&#x6BD4;Aurora&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x6CA1;&#x6709;&#x4ECE;&#x8282;&#x70B9;&#xFF0C;&#x4E14;&#x5BF9;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>&#x7684;&#x652F;&#x6301;&#x66F4;&#x4E3A;&#x5B8C;&#x5584;&#x3002;Marathon&#x7531;Mesosphere&#x516C;&#x53F8;&#x8D1F;&#x8D23;&#x5F00;&#x53D1;&#xFF0C;&#x793E;&#x533A;&#x5F88;&#x6D3B;&#x8DC3;&#xFF0C;&#x6587;&#x6863;&#x4E5F;&#x5F88;&#x5B8C;&#x5584;&#x3002;</p>\n<p>Marathon&#x5177;&#x6709;<strong>&#x5BB9;&#x9519;&#x529F;&#x80FD;</strong>&#xFF1A;&#x5F53;&#x5BB9;&#x5668;&#x7531;&#x4E8E;&#x8282;&#x70B9;&#x5D29;&#x6E83;&#x7B49;&#x539F;&#x56E0;&#x610F;&#x5916;&#x505C;&#x6B62;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;Marathon&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x5BB9;&#x5668;&#x8C03;&#x5EA6;&#x5230;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x7C7B;&#x4F3C;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x4F8B;&#x5982;<a href=\"http://supervisord.org/\" target=\"_blank\" rel=\"external\">Supervisor</a>&#xFF1A;&#x5F53;&#x8FDB;&#x7A0B;&#x610F;&#x5916;&#x9000;&#x51FA;&#x65F6;&#xFF0C;Supervisor&#x4F1A;&#x91CD;&#x542F;&#x8FDB;&#x7A0B;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x81EA;&#x52A8;&#x5BB9;&#x9519;&#x529F;&#x80FD;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x6709;&#x72B6;&#x6001;&#x670D;&#x52A1;&#xFF0C;&#x5373;&#x5E26;&#x6709;&#x6570;&#x636E;&#x5377;(volume)&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x4F8B;&#x5982;MongoDB&#x4E0E;MySQL&#x3002;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x5F88;&#x96BE;&#x8DE8;&#x8282;&#x70B9;&#x79FB;&#x52A8;&#xFF0C;&#x76EE;&#x524D;&#x7684;&#x6280;&#x672F;&#x8FD8;&#x4E0D;&#x591F;&#x6210;&#x719F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;<strong>Marathon&#x76EE;&#x524D;&#x4EC5;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x6570;&#x636E;&#x5E93;&#x7B49;&#x6709;&#x72B6;&#x6001;&#x670D;&#x52A1;&#x5E94;&#x8BE5;&#x5355;&#x72EC;&#x90E8;&#x7F72;</strong>&#x3002;&#x8FD9;&#x6837;&#x505A;&#x4E5F;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;</p>\n<h4 id=\"3-Marathon-LB\"><a href=\"#3-Marathon-LB\" class=\"headerlink\" title=\"3. Marathon LB\"></a><strong>3. Marathon LB</strong></h4><p><a href=\"https://github.com/mesosphere/marathon-lb\" target=\"_blank\" rel=\"external\">Marathon LB</a>&#x662F;Marathon&#x7684;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x4E0E;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x7CFB;&#x7EDF;&#x3002;Marathon LB&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a href=\"http://www.haproxy.org/\" target=\"_blank\" rel=\"external\">Haproxy</a>&#x5B9E;&#x73B0;&#x4E86;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x5F53;&#x4F7F;&#x7528;Marathon&#x90E8;&#x7F72;&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x8282;&#x70B9;(IP)&#x4E0E;&#x4F7F;&#x7528;&#x7684;&#x7AEF;&#x53E3;(PORT)&#x662F;Mesos/Marathon&#x5E73;&#x53F0;&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#x7684;&#xFF0C;&#x65E0;&#x6CD5;&#x4E8B;&#x5148;&#x786E;&#x5B9A;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x6BCF;&#x6B21;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x53BB;&#x67E5;&#x8BE2;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;PORT&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x5BB9;&#x5668;&#x51FA;&#x9519;&#x65F6;&#x4F1A;&#x53D1;&#x751F;&#x91CD;&#x65B0;&#x8C03;&#x5EA6;&#xFF0C;IP&#x4E0E;PORT&#x4F1A;&#x53D8;&#x5316;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x4F1A;&#x975E;&#x5E38;&#x4E0D;&#x65B9;&#x4FBF;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;Marathon LB&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x7684;&#x56FA;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x7684;IP&#x5C31;&#x662F;&#x8FD0;&#x884C;Marathon LB&#x7684;&#x8282;&#x70B9;IP&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x6B21;&#x90E8;&#x7F72;&#x670D;&#x52A1;&#x65F6;&#xFF0C;IP&#x4E0E;PORT&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x5C31;&#x65B9;&#x4FBF;&#x5F88;&#x591A;&#x4E86;&#x3002;Marathon LB&#x4F1A;&#x76D1;&#x542C;Marathon&#x7684;&#x8C03;&#x5EA6;&#x4E8B;&#x4EF6;&#xFF0C;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;PORT&#xFF0C;&#x7136;&#x540E;&#x66F4;&#x65B0;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x90E8;&#x7F72;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x6216;&#x8005;&#x5BB9;&#x5668;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x56FA;&#x5B9A;&#x7684;IP&#x4E0E;PORT&#x8BBF;&#x95EE;&#x8BE5;&#x5BB9;&#x5668;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x3002;</p>\n<p>&#x540C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5F80;&#x5F80;&#x5BF9;&#x5E94;&#x7740;&#x591A;&#x4E2A;&#x5BB9;&#x5668;&#x526F;&#x672C;&#xFF0C;Marathon LB&#x4F5C;&#x4E3A;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x7684;&#x529F;&#x80FD;&#x3002;&#x670D;&#x52A1;&#x8BF7;&#x6C42;&#x80FD;&#x591F;&#x4F7F;&#x7528;Round Robin&#x65B9;&#x5F0F;&#x53D1;&#x9001;&#x7ED9;&#x5404;&#x4E2A;&#x5BB9;&#x5668;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E8C;-&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E8C;. &#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E8C;. &#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"><a href=\"#1-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\" class=\"headerlink\" title=\"1. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>1. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><p>&#x6309;&#x7167;<a href=\"http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/\">&#x4F7F;&#x7528;Vagrant&#x521B;&#x5EFA;&#x591A;&#x8282;&#x70B9;&#x865A;&#x62DF;&#x673A;&#x96C6;&#x7FA4;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5730;&#x5728;&#x5355;&#x4E2A;&#x673A;&#x5668;&#x4E0A;&#x521B;&#x5EFA;Mesos/Marathon&#x5E73;&#x53F0;&#x8FD0;&#x884C;&#x6240;&#x9700;&#x8981;&#x7684;3&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x8282;&#x70B9;&#x3002;</p>\n<p>&#x5176;&#x4E2D;&#xFF0C;node1&#x4E3A;&#x4E3B;&#x673A;&#x70B9;(Master)&#xFF0C;&#x8FD0;&#x884C;zookeeper, mesos_master, marathon&#x4EE5;&#x53CA;marathon-lb&#x5BB9;&#x5668;; node2&#x4E0E;node3&#x4E3A;&#x4ECE;&#x8282;&#x70B9;(Slave)&#xFF0C;&#x8FD0;&#x884C;mesos_slave&#x5BB9;&#x5668;&#xFF1B;&#x4F7F;&#x7528;marathon&#x90E8;&#x7F72;nginx&#x65F6;&#xFF0C;nginx&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5728;&#x4ECE;&#x8282;&#x70B9;&#x4E0A;&#x3002;&#x5982;&#x4E0B;&#x8868;&#x6240;&#x793A;:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x8282;&#x70B9;</th>\n<th style=\"text-align:left\">IP</th>\n<th style=\"text-align:left\">&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">node1</td>\n<td style=\"text-align:left\">192.168.59.1</td>\n<td style=\"text-align:left\">zookeeper, mesos_master, marathon, marathon-lb</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">node2</td>\n<td style=\"text-align:left\">192.168.59.2</td>\n<td style=\"text-align:left\">mesos_slave1, nginx</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">node3</td>\n<td style=\"text-align:left\">192.168.59.3</td>\n<td style=\"text-align:left\">mesos_slave2, nginx</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"2-&#x5F00;&#x542F;Docker-daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"><a href=\"#2-&#x5F00;&#x542F;Docker-daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;\" class=\"headerlink\" title=\"2. &#x5F00;&#x542F;Docker daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"></a><strong>2. &#x5F00;&#x542F;Docker daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;</strong></h4><p>&#x56E0;&#x4E3A;<strong>start-containers.sh</strong>&#x4F7F;&#x7528;&#x4E86;&#x8FDC;&#x7A0B;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5F00;&#x542F;Docker daemon&#x7684;TCP&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x3002;&#x63D0;&#x9192;&#x4E00;&#x4E0B;&#xFF0C;<strong>&#x5F00;&#x542F;Docker daemon&#x7AEF;&#x53E3;&#x662F;&#x4E0D;&#x5B89;&#x5168;&#x7684;</strong>&#xFF0C;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4E0D;&#x80FD;&#x6253;&#x5F00;&#xFF0C;&#x6216;&#x8005;&#x505A;&#x597D;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x3002;&#x4E0D;&#x5E0C;&#x671B;&#x5F00;&#x542F;Docker daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;start-containers.sh&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x53EA;&#x662F;&#x7A0D;&#x5FAE;&#x9EBB;&#x70E6;&#x4E00;&#x70B9;&#x3002;</p>\n<p>Master, Slave1&#x548C;Slave2:</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo vim <span class=\"regexp\">/etc/</span><span class=\"keyword\">default</span><span class=\"regexp\">/docker</span></div></pre></td></tr></table></figure>\n<p>&#x4FEE;&#x6539;<strong>DOCKER_OPTS</strong></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DOCKER_OPTS</span>=<span class=\"string\">&quot;-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock&quot;</span></div></pre></td></tr></table></figure>\n<p>&#x91CD;&#x542F;Docker</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">sudo restart docker</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#3-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"3. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>3. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><p>Master:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">zookeeper:</span><span class=\"number\">3.4</span><span class=\"number\">.8</span> </div><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">mesos:</span><span class=\"number\">0.26</span><span class=\"number\">.0</span> </div><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">marathon:</span><span class=\"number\">1.1</span><span class=\"number\">.1</span>  </div><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">marathonlb:</span><span class=\"number\">1.3</span><span class=\"number\">.0</span></div></pre></td></tr></table></figure>\n<p>Slave1 &#x548C; Slave2:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">mesos:</span><span class=\"number\">0.26</span><span class=\"number\">.0</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"><a href=\"#4-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"4. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"></a><strong>4. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;</strong></h4><p>Master:</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/kiwenlau/mesos-marathon-platform</div></pre></td></tr></table></figure>\n<h4 id=\"5-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"><a href=\"#5-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"5. &#x8FD0;&#x884C;&#x5BB9;&#x5668;\"></a><strong>5. &#x8FD0;&#x884C;&#x5BB9;&#x5668;</strong></h4><p>Master:</p>\n<figure class=\"highlight dos\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> mesos-marathon-platform</div><div class=\"line\">sudo ./<span class=\"built_in\">start</span>-containers.sh</div></pre></td></tr></table></figure>\n<p>&#x7F51;&#x9875;&#x7BA1;&#x7406;:</p>\n<ul>\n<li>Mesos: <a href=\"http://192.168.59.1:5050/\" target=\"_blank\" rel=\"external\">http://192.168.59.1:5050/</a></li>\n<li>Marathon: <a href=\"http://192.168.59.1:8080/\" target=\"_blank\" rel=\"external\">http://192.168.59.1:8080/</a>  </li>\n</ul>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x589E;&#x52A0;Slave&#x8282;&#x70B9;&#xFF0C;&#x6216;&#x8005;&#x914D;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x8282;&#x70B9;IP&#xFF0C;&#x4EC5;&#x9700;&#x4FEE;&#x6539;start-contaniers.sh&#x811A;&#x672C;&#x4E2D;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">MASTER_IP=<span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.1</span></div><div class=\"line\">SLAVE_IP=(<span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.2</span> <span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.3</span>)</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x8FD0;&#x884C;Nginx\"><a href=\"#6-&#x8FD0;&#x884C;Nginx\" class=\"headerlink\" title=\"6. &#x8FD0;&#x884C;Nginx:\"></a><strong>6. &#x8FD0;&#x884C;Nginx:</strong></h4><p>&#x4E0B;&#x8F7D;nginx&#x955C;&#x50CF;(Slave1&#x548C;Slave2):</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">sudo</span> <span class=\"selector-tag\">docker</span> <span class=\"selector-tag\">pull</span> <span class=\"selector-tag\">nginx</span><span class=\"selector-pseudo\">:1.10</span></div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;Nginx(Master):</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo ./<span class=\"keyword\">run</span><span class=\"bash\">-nginx.sh</span></div></pre></td></tr></table></figure>\n<p>Nginx&#x7684;&#x7684;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;(nginx.json):</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;nginx&quot;</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;labels&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;HAPROXY_GROUP&quot;</span>: <span class=\"string\">&quot;external&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    <span class=\"attr\">&quot;cpus&quot;</span>: <span class=\"number\">0.2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;mem&quot;</span>: <span class=\"number\">20.0</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;instances&quot;</span>: <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;healthChecks&quot;</span>: [{</div><div class=\"line\">        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/&quot;</span></div><div class=\"line\">    }],</div><div class=\"line\">    <span class=\"attr\">&quot;container&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;DOCKER&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;docker&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;image&quot;</span>: <span class=\"string\">&quot;nginx:1.10&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;network&quot;</span>: <span class=\"string\">&quot;BRIDGE&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;portMappings&quot;</span>: [{ <span class=\"attr\">&quot;containerPort&quot;</span>: <span class=\"number\">80</span>, <span class=\"attr\">&quot;hostPort&quot;</span>: <span class=\"number\">0</span>, <span class=\"attr\">&quot;servicePort&quot;</span>: <span class=\"number\">10000</span>, <span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;tcp&quot;</span> }]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;servicePort&#x8868;&#x793A;nginx&#x7ED1;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;&#x4E3A;<strong>10000</strong>&#xFF0C;&#x800C;marathon-lb&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x8282;&#x70B9;IP&#x4E3A;<strong>192.168.59.1</strong>&#x3002;&#x56E0;&#x6B64;nginx&#x7684;&#x8BBF;&#x95EE;&#x5730;&#x5740;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li><a href=\"http://192.168.59.1:10000/\" target=\"_blank\" rel=\"external\">http://192.168.59.1:10000/</a></li>\n</ul>\n<p>&#x800C;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x4E24;&#x4E2A;nginx&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5728;Slave&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x4E14;&#x7AEF;&#x53E3;&#x662F;&#x968F;&#x673A;&#x5206;&#x914D;&#x7684;&#x3002;</p>\n<h2 id=\"&#x4E09;-&#x53C2;&#x8003;\"><a href=\"#&#x4E09;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x4E09;. &#x53C2;&#x8003;\"></a>&#x4E09;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"http://mesos.berkeley.edu/mesos_tech_report.pdf\" target=\"_blank\" rel=\"external\">Mesos: A Platform for Fine-Grained Resource Sharing in the Data Center</a></li>\n</ol>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x5728;&#x4E4B;&#x524D;&#x7684;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E86;<a href=\"http://kiwenlau.com/2015/09/18/150918-single-mesos-docker/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x5355;&#x673A;&#x7248;Mesos/Marathon</a>&#xFF0C;&#x4F46;&#x662F;&#x4EC5;&#x4EC5;&#x4F7F;&#x7528;&#x4E86;&#x5355;&#x4E2A;&#x8282;&#x70B9;&#x3002;&#x800C;&#x5728;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x5C06;&#x4ECB;&#x7ECD;<a href=\"http://kiwenlau.com/2016/07/10/mesos-marathon-platform/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Mesos/Marathon</a>&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;3&#x4E2A;&#x8282;&#x70B9;&#x5FEB;&#x901F;&#x5730;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x771F;&#x6B63;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x3002;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x548C;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x662F;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6211;&#x9009;&#x62E9;&#x4E86;<a href=\"https://github.com/mesosphere/marathon-lb\">Marathon LB</a>&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong> <a href=\"https://github.com/kiwenlau/mesos-marathon-platform\">kiwenlau/mesos-marathon-platform</a></p>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/07/10/mesos-marathon-platform/\">2016-07-10</a></li>\n</ul>\n<p><img src=\"/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-Mesos-Marathon&#x7B80;&#x4ECB;\"><a href=\"#&#x4E00;-Mesos-Marathon&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E00;. Mesos/Marathon&#x7B80;&#x4ECB;\"></a>&#x4E00;. Mesos/Marathon&#x7B80;&#x4ECB;</h2><h4 id=\"1-Mesos\"><a href=\"#1-Mesos\" class=\"headerlink\" title=\"1. Mesos\"></a><strong>1. Mesos</strong></h4><p><a href=\"http://mesos.apache.org/\">Mesos</a>&#x662F;<strong>&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;</strong>&#xFF0C;&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#x96C6;&#x7FA4;&#x5185;&#x7684;CPU&#xFF0C;&#x5185;&#x5B58;&#x4EE5;&#x53CA;&#x78C1;&#x76D8;&#x7B49;&#x8D44;&#x6E90;&#x3002;Hadoop MapReduce, Spark&#x4EE5;&#x53CA;Storm&#x7B49;<strong>&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;</strong>&#x5F88;&#x6D41;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x642D;&#x5EFA;&#x5355;&#x72EC;&#x7684;&#x96C6;&#x7FA4;&#x975E;&#x5E38;&#x5730;&#x6D6A;&#x8D39;&#x8D44;&#x6E90;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5171;&#x4EAB;&#xFF0C;&#x800C;Mesos&#x7684;&#x8BBE;&#x8BA1;&#x521D;&#x8877;&#x5C31;&#x662F;&#x8BA9;&#x4E0D;&#x540C;&#x7684;<strong>&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;</strong>&#x80FD;&#x591F;&#x5171;&#x4EAB;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x3002;</p>\n<p>Mesos&#x8D44;&#x6E90;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x5C42;&#x6B21;: Mesos&#x76D1;&#x63A7;&#x96C6;&#x7FA4;&#x7684;&#x7A7A;&#x4F59;&#x8D44;&#x6E90;&#xFF0C;&#x5E76;&#x5C06;&#x7A7A;&#x4F59;&#x8D44;&#x6E90;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x89C4;&#x5219;&#x5206;&#x914D;&#x7ED9;&#x5404;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#xFF1B;&#x800C;&#x5404;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4F1A;&#x6839;&#x636E;&#x9700;&#x8981;&#x9009;&#x62E9;&#x63A5;&#x53D7;&#x6216;&#x8005;&#x62D2;&#x7EDD;&#x6240;&#x5206;&#x914D;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;Mesos&#x4E0E;&#x5404;&#x4E2A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x90FD;&#x53C2;&#x4E0E;&#x4E86;&#x8D44;&#x6E90;&#x7684;&#x8C03;&#x5EA6;: Mesos&#x8D1F;&#x8D23;&#x5206;&#x914D;&#x8D44;&#x6E90;; &#x800C;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x63A5;&#x53D7;&#x6216;&#x8005;&#x62D2;&#x7EDD;&#x8D44;&#x6E90;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Mesos&#x7684;&#x8D23;&#x4EFB;&#x975E;&#x5E38;&#x6E05;&#x6670;&#x800C;&#x4E14;&#x7B80;&#x5355;&#xFF1A;&#x5206;&#x914D;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x3002;Mesos&#x7684;&#x53CC;&#x5C42;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x63D0;&#x9AD8;&#x4E86;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x652F;&#x6301;&#x4E0D;&#x540C;&#x7684;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x3002;</p>\n<p>&#x76EE;&#x524D;&#x4E3B;&#x6D41;&#x7684;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x8FD8;&#x6709;Hadoop YARN&#xFF0C;Kubernetes&#x4EE5;&#x53CA;Swarm&#x3002;Hadoop YARN&#x76EE;&#x524D;&#x4EC5;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4F8B;&#x5982;Spark&#xFF1B;Kubernetes&#x4E0E;Swarm&#x4EC5;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#xFF1B;&#x800C;Mesos&#x5BF9;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4EE5;&#x53CA;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x7684;&#x652F;&#x6301;&#x90FD;&#x5F88;&#x6210;&#x719F;&#x3002;&#x5E76;&#x4E14;&#xFF0C;Kubernetes&#x4E0E;Swarm&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x8FD0;&#x884C;&#x5728;Mesos&#x4E4B;&#x4E0A;&#x3002;Kubernetes&#x7684;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x8FC7;&#x5EA6;&#x8BBE;&#x8BA1;&#x5BFC;&#x81F4;&#x590D;&#x6742;&#x5EA6;&#x5F88;&#x9AD8;&#xFF0C;&#x800C;Swarm&#x7684;&#x8BBE;&#x8BA1;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x4F46;&#x662F;&#x529F;&#x80FD;&#x76F8;&#x5BF9;&#x7F3A;&#x4E4F;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x9009;&#x62E9;&#x3002;&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#xFF0C;<strong>&#x4F7F;&#x7528;Mesos&#x7684;&#x8BDD;&#xFF0C;&#x6700;&#x597D;&#x9009;&#x62E9;Marathon&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x7F16;&#x6392;&#x7CFB;&#x7EDF;</strong>&#xFF0C;&#x67B6;&#x6784;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4E14;&#x529F;&#x80FD;&#x4E30;&#x5BCC;&#x3002;</p>\n<h4 id=\"2-Marathon\"><a href=\"#2-Marathon\" class=\"headerlink\" title=\"2. Marathon\"></a><strong>2. Marathon</strong></h4><p><a href=\"https://mesosphere.github.io/marathon/\">Marathon</a>&#x662F;&#x5BB9;&#x5668;&#x7F16;&#x6392;&#x7CFB;&#x7EDF;&#xFF0C;&#x662F;&#x8FD0;&#x884C;&#x4E8E;Mesos&#x4E4B;&#x4E0A;&#x7684;&#x4F17;&#x591A;&#x8BA1;&#x7B97;&#x6846;&#x67B6;&#x4E4B;&#x4E00;&#x3002;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Marathon&#x63D0;&#x4EA4;&#xFF0C;&#x76D1;&#x63A7;&#x5E76;&#x8C03;&#x5EA6;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#xFF0C;&#x7136;&#x540E;Mesos&#x8D1F;&#x8D23;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x3002;&#x53E6;&#x5916;&#xFF0C;<a href=\"http://aurora.apache.org/\">Aurora</a>&#x4E0E;Marathon&#x529F;&#x80FD;&#x4E00;&#x81F4;&#xFF0C;&#x540C;&#x4E3A;&#x5BB9;&#x5668;&#x7F16;&#x6392;&#x7CFB;&#x7EDF;&#x3002;&#x76F8;&#x6BD4;&#x800C;&#x8A00;&#xFF0C;Marathon&#x7684;&#x67B6;&#x6784;&#x6BD4;Aurora&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x6CA1;&#x6709;&#x4ECE;&#x8282;&#x70B9;&#xFF0C;&#x4E14;&#x5BF9;<a href=\"https://www.docker.com/\">Docker</a>&#x7684;&#x652F;&#x6301;&#x66F4;&#x4E3A;&#x5B8C;&#x5584;&#x3002;Marathon&#x7531;Mesosphere&#x516C;&#x53F8;&#x8D1F;&#x8D23;&#x5F00;&#x53D1;&#xFF0C;&#x793E;&#x533A;&#x5F88;&#x6D3B;&#x8DC3;&#xFF0C;&#x6587;&#x6863;&#x4E5F;&#x5F88;&#x5B8C;&#x5584;&#x3002;</p>\n<p>Marathon&#x5177;&#x6709;<strong>&#x5BB9;&#x9519;&#x529F;&#x80FD;</strong>&#xFF1A;&#x5F53;&#x5BB9;&#x5668;&#x7531;&#x4E8E;&#x8282;&#x70B9;&#x5D29;&#x6E83;&#x7B49;&#x539F;&#x56E0;&#x610F;&#x5916;&#x505C;&#x6B62;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;Marathon&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x5BB9;&#x5668;&#x8C03;&#x5EA6;&#x5230;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x7C7B;&#x4F3C;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x4F8B;&#x5982;<a href=\"http://supervisord.org/\">Supervisor</a>&#xFF1A;&#x5F53;&#x8FDB;&#x7A0B;&#x610F;&#x5916;&#x9000;&#x51FA;&#x65F6;&#xFF0C;Supervisor&#x4F1A;&#x91CD;&#x542F;&#x8FDB;&#x7A0B;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x81EA;&#x52A8;&#x5BB9;&#x9519;&#x529F;&#x80FD;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x6709;&#x72B6;&#x6001;&#x670D;&#x52A1;&#xFF0C;&#x5373;&#x5E26;&#x6709;&#x6570;&#x636E;&#x5377;(volume)&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x4F8B;&#x5982;MongoDB&#x4E0E;MySQL&#x3002;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x5F88;&#x96BE;&#x8DE8;&#x8282;&#x70B9;&#x79FB;&#x52A8;&#xFF0C;&#x76EE;&#x524D;&#x7684;&#x6280;&#x672F;&#x8FD8;&#x4E0D;&#x591F;&#x6210;&#x719F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;<strong>Marathon&#x76EE;&#x524D;&#x4EC5;&#x9002;&#x5408;&#x8FD0;&#x884C;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x6570;&#x636E;&#x5E93;&#x7B49;&#x6709;&#x72B6;&#x6001;&#x670D;&#x52A1;&#x5E94;&#x8BE5;&#x5355;&#x72EC;&#x90E8;&#x7F72;</strong>&#x3002;&#x8FD9;&#x6837;&#x505A;&#x4E5F;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;</p>\n<h4 id=\"3-Marathon-LB\"><a href=\"#3-Marathon-LB\" class=\"headerlink\" title=\"3. Marathon LB\"></a><strong>3. Marathon LB</strong></h4><p><a href=\"https://github.com/mesosphere/marathon-lb\">Marathon LB</a>&#x662F;Marathon&#x7684;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x4E0E;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x7CFB;&#x7EDF;&#x3002;Marathon LB&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a href=\"http://www.haproxy.org/\">Haproxy</a>&#x5B9E;&#x73B0;&#x4E86;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x5F53;&#x4F7F;&#x7528;Marathon&#x90E8;&#x7F72;&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x8282;&#x70B9;(IP)&#x4E0E;&#x4F7F;&#x7528;&#x7684;&#x7AEF;&#x53E3;(PORT)&#x662F;Mesos/Marathon&#x5E73;&#x53F0;&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#x7684;&#xFF0C;&#x65E0;&#x6CD5;&#x4E8B;&#x5148;&#x786E;&#x5B9A;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x6BCF;&#x6B21;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x53BB;&#x67E5;&#x8BE2;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;PORT&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x5BB9;&#x5668;&#x51FA;&#x9519;&#x65F6;&#x4F1A;&#x53D1;&#x751F;&#x91CD;&#x65B0;&#x8C03;&#x5EA6;&#xFF0C;IP&#x4E0E;PORT&#x4F1A;&#x53D8;&#x5316;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x4F1A;&#x975E;&#x5E38;&#x4E0D;&#x65B9;&#x4FBF;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;Marathon LB&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x7684;&#x56FA;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x7684;IP&#x5C31;&#x662F;&#x8FD0;&#x884C;Marathon LB&#x7684;&#x8282;&#x70B9;IP&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x6B21;&#x90E8;&#x7F72;&#x670D;&#x52A1;&#x65F6;&#xFF0C;IP&#x4E0E;PORT&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x5C31;&#x65B9;&#x4FBF;&#x5F88;&#x591A;&#x4E86;&#x3002;Marathon LB&#x4F1A;&#x76D1;&#x542C;Marathon&#x7684;&#x8C03;&#x5EA6;&#x4E8B;&#x4EF6;&#xFF0C;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;PORT&#xFF0C;&#x7136;&#x540E;&#x66F4;&#x65B0;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x90E8;&#x7F72;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x6216;&#x8005;&#x5BB9;&#x5668;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x56FA;&#x5B9A;&#x7684;IP&#x4E0E;PORT&#x8BBF;&#x95EE;&#x8BE5;&#x5BB9;&#x5668;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x3002;</p>\n<p>&#x540C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5F80;&#x5F80;&#x5BF9;&#x5E94;&#x7740;&#x591A;&#x4E2A;&#x5BB9;&#x5668;&#x526F;&#x672C;&#xFF0C;Marathon LB&#x4F5C;&#x4E3A;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x7684;&#x529F;&#x80FD;&#x3002;&#x670D;&#x52A1;&#x8BF7;&#x6C42;&#x80FD;&#x591F;&#x4F7F;&#x7528;Round Robin&#x65B9;&#x5F0F;&#x53D1;&#x9001;&#x7ED9;&#x5404;&#x4E2A;&#x5BB9;&#x5668;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"><a href=\"#&#x4E8C;-&#x642D;&#x5EFA;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x4E8C;. &#x642D;&#x5EFA;&#x6B65;&#x9AA4;\"></a>&#x4E8C;. &#x642D;&#x5EFA;&#x6B65;&#x9AA4;</h2><h4 id=\"1-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"><a href=\"#1-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\" class=\"headerlink\" title=\"1. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>1. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><p>&#x6309;&#x7167;<a href=\"http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/\">&#x4F7F;&#x7528;Vagrant&#x521B;&#x5EFA;&#x591A;&#x8282;&#x70B9;&#x865A;&#x62DF;&#x673A;&#x96C6;&#x7FA4;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5730;&#x5728;&#x5355;&#x4E2A;&#x673A;&#x5668;&#x4E0A;&#x521B;&#x5EFA;Mesos/Marathon&#x5E73;&#x53F0;&#x8FD0;&#x884C;&#x6240;&#x9700;&#x8981;&#x7684;3&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x8282;&#x70B9;&#x3002;</p>\n<p>&#x5176;&#x4E2D;&#xFF0C;node1&#x4E3A;&#x4E3B;&#x673A;&#x70B9;(Master)&#xFF0C;&#x8FD0;&#x884C;zookeeper, mesos_master, marathon&#x4EE5;&#x53CA;marathon-lb&#x5BB9;&#x5668;; node2&#x4E0E;node3&#x4E3A;&#x4ECE;&#x8282;&#x70B9;(Slave)&#xFF0C;&#x8FD0;&#x884C;mesos_slave&#x5BB9;&#x5668;&#xFF1B;&#x4F7F;&#x7528;marathon&#x90E8;&#x7F72;nginx&#x65F6;&#xFF0C;nginx&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5728;&#x4ECE;&#x8282;&#x70B9;&#x4E0A;&#x3002;&#x5982;&#x4E0B;&#x8868;&#x6240;&#x793A;:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">&#x8282;&#x70B9;</th>\n<th style=\"text-align:left\">IP</th>\n<th style=\"text-align:left\">&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">node1</td>\n<td style=\"text-align:left\">192.168.59.1</td>\n<td style=\"text-align:left\">zookeeper, mesos_master, marathon, marathon-lb</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">node2</td>\n<td style=\"text-align:left\">192.168.59.2</td>\n<td style=\"text-align:left\">mesos_slave1, nginx</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">node3</td>\n<td style=\"text-align:left\">192.168.59.3</td>\n<td style=\"text-align:left\">mesos_slave2, nginx</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"2-&#x5F00;&#x542F;Docker-daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"><a href=\"#2-&#x5F00;&#x542F;Docker-daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;\" class=\"headerlink\" title=\"2. &#x5F00;&#x542F;Docker daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"></a><strong>2. &#x5F00;&#x542F;Docker daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;</strong></h4><p>&#x56E0;&#x4E3A;<strong>start-containers.sh</strong>&#x4F7F;&#x7528;&#x4E86;&#x8FDC;&#x7A0B;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5F00;&#x542F;Docker daemon&#x7684;TCP&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x3002;&#x63D0;&#x9192;&#x4E00;&#x4E0B;&#xFF0C;<strong>&#x5F00;&#x542F;Docker daemon&#x7AEF;&#x53E3;&#x662F;&#x4E0D;&#x5B89;&#x5168;&#x7684;</strong>&#xFF0C;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4E0D;&#x80FD;&#x6253;&#x5F00;&#xFF0C;&#x6216;&#x8005;&#x505A;&#x597D;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x3002;&#x4E0D;&#x5E0C;&#x671B;&#x5F00;&#x542F;Docker daemon&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;start-containers.sh&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x53EA;&#x662F;&#x7A0D;&#x5FAE;&#x9EBB;&#x70E6;&#x4E00;&#x70B9;&#x3002;</p>\n<p>Master, Slave1&#x548C;Slave2:</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo vim <span class=\"regexp\">/etc/</span><span class=\"keyword\">default</span><span class=\"regexp\">/docker</span></div></pre></td></tr></table></figure>\n<p>&#x4FEE;&#x6539;<strong>DOCKER_OPTS</strong></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">DOCKER_OPTS</span>=<span class=\"string\">&quot;-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock&quot;</span></div></pre></td></tr></table></figure>\n<p>&#x91CD;&#x542F;Docker</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">sudo restart docker</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"><a href=\"#3-&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"3. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;\"></a><strong>3. &#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;</strong></h4><p>Master:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">zookeeper:</span><span class=\"number\">3.4</span><span class=\"number\">.8</span> </div><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">mesos:</span><span class=\"number\">0.26</span><span class=\"number\">.0</span> </div><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">marathon:</span><span class=\"number\">1.1</span><span class=\"number\">.1</span>  </div><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">marathonlb:</span><span class=\"number\">1.3</span><span class=\"number\">.0</span></div></pre></td></tr></table></figure>\n<p>Slave1 &#x548C; Slave2:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker pull kiwenlau/<span class=\"string\">mesos:</span><span class=\"number\">0.26</span><span class=\"number\">.0</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"><a href=\"#4-&#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"4. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;\"></a><strong>4. &#x4E0B;&#x8F7D;GitHub&#x4ED3;&#x5E93;</strong></h4><p>Master:</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/kiwenlau/mesos-marathon-platform</div></pre></td></tr></table></figure>\n<h4 id=\"5-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"><a href=\"#5-&#x8FD0;&#x884C;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"5. &#x8FD0;&#x884C;&#x5BB9;&#x5668;\"></a><strong>5. &#x8FD0;&#x884C;&#x5BB9;&#x5668;</strong></h4><p>Master:</p>\n<figure class=\"highlight dos\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> mesos-marathon-platform</div><div class=\"line\">sudo ./<span class=\"built_in\">start</span>-containers.sh</div></pre></td></tr></table></figure>\n<p>&#x7F51;&#x9875;&#x7BA1;&#x7406;:</p>\n<ul>\n<li>Mesos: <a href=\"http://192.168.59.1:5050/\">http://192.168.59.1:5050/</a></li>\n<li>Marathon: <a href=\"http://192.168.59.1:8080/\">http://192.168.59.1:8080/</a>  </li>\n</ul>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x589E;&#x52A0;Slave&#x8282;&#x70B9;&#xFF0C;&#x6216;&#x8005;&#x914D;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x8282;&#x70B9;IP&#xFF0C;&#x4EC5;&#x9700;&#x4FEE;&#x6539;start-contaniers.sh&#x811A;&#x672C;&#x4E2D;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">MASTER_IP=<span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.1</span></div><div class=\"line\">SLAVE_IP=(<span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.2</span> <span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.3</span>)</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x8FD0;&#x884C;Nginx\"><a href=\"#6-&#x8FD0;&#x884C;Nginx\" class=\"headerlink\" title=\"6. &#x8FD0;&#x884C;Nginx:\"></a><strong>6. &#x8FD0;&#x884C;Nginx:</strong></h4><p>&#x4E0B;&#x8F7D;nginx&#x955C;&#x50CF;(Slave1&#x548C;Slave2):</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">sudo</span> <span class=\"selector-tag\">docker</span> <span class=\"selector-tag\">pull</span> <span class=\"selector-tag\">nginx</span><span class=\"selector-pseudo\">:1.10</span></div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;Nginx(Master):</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo ./<span class=\"keyword\">run</span><span class=\"bash\">-nginx.sh</span></div></pre></td></tr></table></figure>\n<p>Nginx&#x7684;&#x7684;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;(nginx.json):</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;nginx&quot;</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;labels&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;HAPROXY_GROUP&quot;</span>: <span class=\"string\">&quot;external&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    <span class=\"attr\">&quot;cpus&quot;</span>: <span class=\"number\">0.2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;mem&quot;</span>: <span class=\"number\">20.0</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;instances&quot;</span>: <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;healthChecks&quot;</span>: [{</div><div class=\"line\">        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/&quot;</span></div><div class=\"line\">    }],</div><div class=\"line\">    <span class=\"attr\">&quot;container&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;DOCKER&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;docker&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;image&quot;</span>: <span class=\"string\">&quot;nginx:1.10&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;network&quot;</span>: <span class=\"string\">&quot;BRIDGE&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;portMappings&quot;</span>: [{ <span class=\"attr\">&quot;containerPort&quot;</span>: <span class=\"number\">80</span>, <span class=\"attr\">&quot;hostPort&quot;</span>: <span class=\"number\">0</span>, <span class=\"attr\">&quot;servicePort&quot;</span>: <span class=\"number\">10000</span>, <span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;tcp&quot;</span> }]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;servicePort&#x8868;&#x793A;nginx&#x7ED1;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;&#x4E3A;<strong>10000</strong>&#xFF0C;&#x800C;marathon-lb&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x8282;&#x70B9;IP&#x4E3A;<strong>192.168.59.1</strong>&#x3002;&#x56E0;&#x6B64;nginx&#x7684;&#x8BBF;&#x95EE;&#x5730;&#x5740;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li><a href=\"http://192.168.59.1:10000/\">http://192.168.59.1:10000/</a></li>\n</ul>\n<p>&#x800C;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x4E24;&#x4E2A;nginx&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5728;Slave&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x4E14;&#x7AEF;&#x53E3;&#x662F;&#x968F;&#x673A;&#x5206;&#x914D;&#x7684;&#x3002;</p>\n<h2 id=\"&#x4E09;-&#x53C2;&#x8003;\"><a href=\"#&#x4E09;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x4E09;. &#x53C2;&#x8003;\"></a>&#x4E09;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"http://mesos.berkeley.edu/mesos_tech_report.pdf\">Mesos: A Platform for Fine-Grained Resource Sharing in the Data Center</a></li>\n</ol>"},{"title":"Vagrant","date":"2016-07-03T02:00:00.000Z","_content":"\n**:** [Vagrant](http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/)[Vagrant](http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/)[Hadoop](http://hadoop.apache.org/)[Spark](http://spark.apache.org/)[Storm](http://storm.apache.org/)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-07-03](http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/)\n\n<img src=\"vagrant-vm-cluster/vagrant-vm-cluster.png\" width = \"500\"/>\n\nMacBookWindows\n\n## . \n\n#### **1. [VirtualBox](https://www.virtualbox.org/wiki/Downloads)**\n\n#### **2. [Vagrant](https://www.vagrantup.com/downloads.html)**\n\n#### **3. Box**\n\n```\nvagrant box add ubuntu/trusty64\n```\n\n**Box**\n\n#### **4. Vagrantfile**\n\n```\nmkdir vagrant-cluster\ncd vagrant-cluster\nvim Vagrantfile\n```\n\nVagrantfile\n\n```\nVagrant.configure(\"2\") do |config|\n\n\t(1..3).each do |i|\n\n\t\tconfig.vm.define \"node#{i}\" do |node|\n\n\t\t# Box\n\t\tnode.vm.box = \"ubuntu/trusty64\"\n\n\t\t# \n\t\tnode.vm.hostname=\"node#{i}\"\n\n\t\t# IP\n\t\tnode.vm.network \"private_network\", ip: \"192.168.59.#{i}\"\n\n\t\t# \n\t\tnode.vm.synced_folder \"~/Desktop/share\", \"/home/vagrant/share\"\n\n\t\t# VirtaulBox\n\t\tnode.vm.provider \"virtualbox\" do |v|\n\n\t\t\t# \n\t\t\tv.name = \"node#{i}\"\n\n\t\t\t#   \n\t\t\tv.memory = 2048\n\n\t\t\t# CPU\n\t\t\tv.cpus = 1\n\t\tend\n  \n\t\t# shell\n\t\tnode.vm.provision \"shell\", inline: <<-SHELL\n\n\t\t\t# docker 1.11.0\n\t\t\twget -qO- https://get.docker.com/ | sed 's/docker-engine/docker-engine=1.11.0-0~trusty/' | sh\n\t\t\tusermod -aG docker vagrant\n\t\t\t\n\t\tSHELL\n\n\t\tend\n\tend\nend\n```\n\niIP**#{i}**\n\n```\n(1..3).each do |i|\n\nend\n```\n\n3\n\n#### **5. share**\n\nshare/home/vagrant/share\n\n```\nmkdir ~/Desktop/share\n```\n\n#### **6. **\n\n```\nvagrant up\n```\n\n315Docker\n\n```\n# shell\nnode.vm.provision \"shell\", inline: <<-SHELL\n\n\t# docker 1.11.0\n\twget -qO- https://get.docker.com/ | sed 's/docker-engine/docker-engine=1.11.0-0~trusty/' | sh\n\tusermod -aG docker vagrant\n\nSHELL\n```\n\nVagrant:\n\n- /: vagrant/vagrant\n- : share/home/vagrant/share\n- 2GB\n- CPU: 1\n\n\n## . \n\n#### **1. **\n\nVagrant\n\n- **vagrant ssh:** SSH\n- **vagrant halt:** \n- **vagrant destroy:** \n- **vagrant ssh-config** SSH\n\n****\n\n```\nvagrant up node1\n```\n\n****\n\n```\nvagrant up node1 node3\n```\n\n****\n\n```\nvagrant up\n```\n\n#### **2. SSH**\n\n**vagrant ssh**VagrantfileIP:\n\n```\nssh vagrant@192.168.59.2\n```\n\nSSHvagrant**vagrant**\n\nauthorized_keysSSH:\n\n```\ncat $HOME/.ssh/id_rsa.pub | ssh vagrant@192.168.59.2 'cat >> $HOME/.ssh/authorized_keys'\n```\n\n#### **3. **\n\nVagrant\n\n```\n# shell\nnode.vm.provision \"shell\", inline: <<-SHELL\n\n\t# docker 1.11.0\n\twget -qO- https://get.docker.com/ | sed 's/docker-engine/docker-engine=1.11.0-0~trusty/' | sh\n\tusermod -aG docker vagrant\nSHELL\n```\n\nShell[Docker](https://www.docker.com/)\"--provision\"\n\n```\nvagrant halt\nvagrant up --provision\n```\n\n#### **4. **\n\nVirtualBoxVirtualBox Guest AdditionsVagrantVirtualBox Guest AdditionsVirtualBox Guest Additions:\n\n```\nFailed to mount folders in Linux guest. This is usually because\nthe \"vboxsf\" file system is not available. Please verify that\nthe guest additions are properly installed in the guest and\ncan work properly. The command attempted was:\n\nmount -t vboxsf -o uid=`id -u vagrant`,gid=`getent group vagrant | cut -d: -f3` vagrant /vagrant\nmount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` vagrant /vagrant\n\nThe error output from the last command was:\n\nstdin: is not a tty\n/sbin/mount.vboxsf: mounting failed with the error: No such device\n```\n\nVagrant[vagrant-vbguest](https://github.com/dotless-de/vagrant-vbguest)VirtualBox Guest Additions\n\n```\nvagrant plugin install vagrant-vbguest\n```","source":"_posts/2016/07/03/vagrant-vm-cluster.md","raw":"title: Vagrant\n\ndate: 2016-07-03 10:00\n\ntags: [Vagrant]\n\n---\n\n**:** [Vagrant](http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/)[Vagrant](http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/)[Hadoop](http://hadoop.apache.org/)[Spark](http://spark.apache.org/)[Storm](http://storm.apache.org/)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-07-03](http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/)\n\n<img src=\"vagrant-vm-cluster/vagrant-vm-cluster.png\" width = \"500\"/>\n\nMacBookWindows\n\n## . \n\n#### **1. [VirtualBox](https://www.virtualbox.org/wiki/Downloads)**\n\n#### **2. [Vagrant](https://www.vagrantup.com/downloads.html)**\n\n#### **3. Box**\n\n```\nvagrant box add ubuntu/trusty64\n```\n\n**Box**\n\n#### **4. Vagrantfile**\n\n```\nmkdir vagrant-cluster\ncd vagrant-cluster\nvim Vagrantfile\n```\n\nVagrantfile\n\n```\nVagrant.configure(\"2\") do |config|\n\n\t(1..3).each do |i|\n\n\t\tconfig.vm.define \"node#{i}\" do |node|\n\n\t\t# Box\n\t\tnode.vm.box = \"ubuntu/trusty64\"\n\n\t\t# \n\t\tnode.vm.hostname=\"node#{i}\"\n\n\t\t# IP\n\t\tnode.vm.network \"private_network\", ip: \"192.168.59.#{i}\"\n\n\t\t# \n\t\tnode.vm.synced_folder \"~/Desktop/share\", \"/home/vagrant/share\"\n\n\t\t# VirtaulBox\n\t\tnode.vm.provider \"virtualbox\" do |v|\n\n\t\t\t# \n\t\t\tv.name = \"node#{i}\"\n\n\t\t\t#   \n\t\t\tv.memory = 2048\n\n\t\t\t# CPU\n\t\t\tv.cpus = 1\n\t\tend\n  \n\t\t# shell\n\t\tnode.vm.provision \"shell\", inline: <<-SHELL\n\n\t\t\t# docker 1.11.0\n\t\t\twget -qO- https://get.docker.com/ | sed 's/docker-engine/docker-engine=1.11.0-0~trusty/' | sh\n\t\t\tusermod -aG docker vagrant\n\t\t\t\n\t\tSHELL\n\n\t\tend\n\tend\nend\n```\n\niIP**#{i}**\n\n```\n(1..3).each do |i|\n\nend\n```\n\n3\n\n#### **5. share**\n\nshare/home/vagrant/share\n\n```\nmkdir ~/Desktop/share\n```\n\n#### **6. **\n\n```\nvagrant up\n```\n\n315Docker\n\n```\n# shell\nnode.vm.provision \"shell\", inline: <<-SHELL\n\n\t# docker 1.11.0\n\twget -qO- https://get.docker.com/ | sed 's/docker-engine/docker-engine=1.11.0-0~trusty/' | sh\n\tusermod -aG docker vagrant\n\nSHELL\n```\n\nVagrant:\n\n- /: vagrant/vagrant\n- : share/home/vagrant/share\n- 2GB\n- CPU: 1\n\n\n## . \n\n#### **1. **\n\nVagrant\n\n- **vagrant ssh:** SSH\n- **vagrant halt:** \n- **vagrant destroy:** \n- **vagrant ssh-config** SSH\n\n****\n\n```\nvagrant up node1\n```\n\n****\n\n```\nvagrant up node1 node3\n```\n\n****\n\n```\nvagrant up\n```\n\n#### **2. SSH**\n\n**vagrant ssh**VagrantfileIP:\n\n```\nssh vagrant@192.168.59.2\n```\n\nSSHvagrant**vagrant**\n\nauthorized_keysSSH:\n\n```\ncat $HOME/.ssh/id_rsa.pub | ssh vagrant@192.168.59.2 'cat >> $HOME/.ssh/authorized_keys'\n```\n\n#### **3. **\n\nVagrant\n\n```\n# shell\nnode.vm.provision \"shell\", inline: <<-SHELL\n\n\t# docker 1.11.0\n\twget -qO- https://get.docker.com/ | sed 's/docker-engine/docker-engine=1.11.0-0~trusty/' | sh\n\tusermod -aG docker vagrant\nSHELL\n```\n\nShell[Docker](https://www.docker.com/)\"--provision\"\n\n```\nvagrant halt\nvagrant up --provision\n```\n\n#### **4. **\n\nVirtualBoxVirtualBox Guest AdditionsVagrantVirtualBox Guest AdditionsVirtualBox Guest Additions:\n\n```\nFailed to mount folders in Linux guest. This is usually because\nthe \"vboxsf\" file system is not available. Please verify that\nthe guest additions are properly installed in the guest and\ncan work properly. The command attempted was:\n\nmount -t vboxsf -o uid=`id -u vagrant`,gid=`getent group vagrant | cut -d: -f3` vagrant /vagrant\nmount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` vagrant /vagrant\n\nThe error output from the last command was:\n\nstdin: is not a tty\n/sbin/mount.vboxsf: mounting failed with the error: No such device\n```\n\nVagrant[vagrant-vbguest](https://github.com/dotless-de/vagrant-vbguest)VirtualBox Guest Additions\n\n```\nvagrant plugin install vagrant-vbguest\n```","slug":"2016/07/03/vagrant-vm-cluster","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmb000l71fycfn0ko43","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x5728;&#x524D;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E86;<a href=\"http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/\">&#x4F7F;&#x7528;Vagrant&#x5FEB;&#x901F;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</a>&#xFF0C;&#x4F46;&#x662F;&#x6240;&#x521B;&#x5EFA;&#x7684;&#x53EA;&#x662F;&#x5355;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;<a href=\"http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/\">&#x4F7F;&#x7528;Vagrant&#x521B;&#x5EFA;&#x591A;&#x8282;&#x70B9;&#x865A;&#x62DF;&#x673A;&#x96C6;&#x7FA4;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;<a href=\"http://hadoop.apache.org/\" target=\"_blank\" rel=\"external\">Hadoop</a>&#xFF0C;<a href=\"http://spark.apache.org/\" target=\"_blank\" rel=\"external\">Spark</a>&#x4EE5;&#x53CA;<a href=\"http://storm.apache.org/\" target=\"_blank\" rel=\"external\">Storm</a>&#x7B49;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x3002;</p>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/\">2016-07-03</a></li>\n</ul>\n<p><img src=\"/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.png\" width=\"500\"></p>\n<p>&#x672C;&#x6587;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x662F;&#x5728;MacBook&#x4E0A;&#x8FDB;&#x884C;&#x7684;&#xFF0C;Windows&#x4E0A;&#x7684;&#x64CD;&#x4F5C;&#x5927;&#x90E8;&#x5206;&#x4E00;&#x81F4;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x3002;</p>\n<h2 id=\"&#x4E00;-&#x96C6;&#x7FA4;&#x521B;&#x5EFA;\"><a href=\"#&#x4E00;-&#x96C6;&#x7FA4;&#x521B;&#x5EFA;\" class=\"headerlink\" title=\"&#x4E00;. &#x96C6;&#x7FA4;&#x521B;&#x5EFA;\"></a>&#x4E00;. &#x96C6;&#x7FA4;&#x521B;&#x5EFA;</h2><h4 id=\"1-&#x5B89;&#x88C5;VirtualBox\"><a href=\"#1-&#x5B89;&#x88C5;VirtualBox\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;VirtualBox\"></a><strong>1. &#x5B89;&#x88C5;<a href=\"https://www.virtualbox.org/wiki/Downloads\" target=\"_blank\" rel=\"external\">VirtualBox</a></strong></h4><h4 id=\"2-&#x5B89;&#x88C5;Vagrant\"><a href=\"#2-&#x5B89;&#x88C5;Vagrant\" class=\"headerlink\" title=\"2. &#x5B89;&#x88C5;Vagrant\"></a><strong>2. &#x5B89;&#x88C5;<a href=\"https://www.vagrantup.com/downloads.html\" target=\"_blank\" rel=\"external\">Vagrant</a></strong></h4><h4 id=\"3-&#x4E0B;&#x8F7D;Box\"><a href=\"#3-&#x4E0B;&#x8F7D;Box\" class=\"headerlink\" title=\"3. &#x4E0B;&#x8F7D;Box\"></a><strong>3. &#x4E0B;&#x8F7D;Box</strong></h4><figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">vagrant</span> <span class=\"keyword\">box </span><span class=\"keyword\">add </span>ubuntu/trusty64</div></pre></td></tr></table></figure>\n<p><strong>Box</strong>&#x76F8;&#x5F53;&#x4E8E;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x3002;</p>\n<h4 id=\"4-&#x7F16;&#x8F91;Vagrantfile\"><a href=\"#4-&#x7F16;&#x8F91;Vagrantfile\" class=\"headerlink\" title=\"4. &#x7F16;&#x8F91;Vagrantfile\"></a><strong>4. &#x7F16;&#x8F91;Vagrantfile</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">mkdir</span> vagrant-<span class=\"keyword\">cluster</span></div><div class=\"line\"><span class=\"keyword\">cd</span> vagrant-<span class=\"keyword\">cluster</span></div><div class=\"line\">vim Vagrantfile</div></pre></td></tr></table></figure>\n<p>Vagrantfile&#x5982;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6CE8;&#x91CA;&#x7406;&#x89E3;&#x6BCF;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x7684;&#x542B;&#x4E49;&#xFF1A;</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">Vagrant.configure(<span class=\"string\">&quot;2&quot;</span>) do |config|</div><div class=\"line\"></div><div class=\"line\">\t(<span class=\"number\">1</span>..<span class=\"number\">3</span>).each do |i|</div><div class=\"line\"></div><div class=\"line\">\t\tconfig.vm.define <span class=\"string\">&quot;node#{i}&quot;</span> do |<span class=\"keyword\">node</span><span class=\"title\">|</span></div><div class=\"line\"></div><div class=\"line\">\t\t# &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;Box</div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.box = <span class=\"string\">&quot;ubuntu/trusty64&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.<span class=\"attr\">hostname=</span><span class=\"string\">&quot;node#{i}&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;IP</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.network <span class=\"string\">&quot;private_network&quot;</span>, ip: <span class=\"string\">&quot;192.168.59.#{i}&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x673A;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5171;&#x4EAB;&#x76EE;&#x5F55;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.synced_folder <span class=\"string\">&quot;~/Desktop/share&quot;</span>, <span class=\"string\">&quot;/home/vagrant/share&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># VirtaulBox&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.provider <span class=\"string\">&quot;virtualbox&quot;</span> do |v|</div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x540D;&#x79F0;</span></div><div class=\"line\">\t\t\tv.name = <span class=\"string\">&quot;node#{i}&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;  </span></div><div class=\"line\">\t\t\tv.memory = <span class=\"number\">2048</span></div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;CPU&#x4E2A;&#x6570;</span></div><div class=\"line\">\t\t\tv.cpus = <span class=\"number\">1</span></div><div class=\"line\">\t\tend</div><div class=\"line\">  </div><div class=\"line\">\t\t<span class=\"comment\"># &#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.provision <span class=\"string\">&quot;shell&quot;</span>, inline: <span class=\"tag\">&lt;&lt;-SHELL</span></div><div class=\"line\"></div><div class=\"line\">\t\t\t# &#x5B89;&#x88C5;docker 1.11.0</div><div class=\"line\">\t\t\twget -qO- https://get.docker.com/ | sed &apos;s/docker-engine/docker-engine=1.11.0-0~trusty/&apos; | sh</div><div class=\"line\">\t\t\tusermod -aG docker vagrant</div><div class=\"line\">\t\t\t</div><div class=\"line\">\t\tSHELL</div><div class=\"line\"></div><div class=\"line\">\t\tend</div><div class=\"line\">\tend</div><div class=\"line\">end</div></pre></td></tr></table></figure>\n<p>&#x4E0E;&#x521B;&#x5EFA;&#x5355;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x76F8;&#x6BD4;&#xFF0C;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x65F6;&#x591A;&#x4E86;&#x4E00;&#x5C42;&#x5FAA;&#x73AF;&#xFF0C;&#x800C;&#x53D8;&#x91CF;i&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x8282;&#x70B9;&#x7684;&#x540D;&#x79F0;&#x4E0E;IP&#xFF0C;&#x4F7F;&#x7528;<strong>#{i}</strong>&#x53D6;&#x503C;&#xFF1A;</p>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><div class=\"line\">(<span class=\"number\">1.</span><span class=\"number\">.3</span>).each <span class=\"built_in\">do</span> |<span class=\"type\">i</span>|</div><div class=\"line\"></div><div class=\"line\"><span class=\"type\">end</span></div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4E00;&#x5171;&#x521B;&#x5EFA;&#x4E86;3&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x3002;</p>\n<h4 id=\"5-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"><a href=\"#5-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\" class=\"headerlink\" title=\"5. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"></a><strong>5. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;</strong></h4><p>&#x684C;&#x9762;&#x4E0A;&#x7684;share&#x76EE;&#x5F55;&#x5C06;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/home/vagrant/share&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">mkdir</span> ~/Desktop/share</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"><a href=\"#6-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\" class=\"headerlink\" title=\"6. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>6. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant up</span></div></pre></td></tr></table></figure>\n<p>&#x521B;&#x5EFA;3&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x5927;&#x6982;&#x9700;&#x8981;15&#x5206;&#x949F;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x548C;&#x673A;&#x5668;&#x6027;&#x80FD;&#x8FD8;&#x6709;&#x7F51;&#x901F;&#x76F8;&#x5173;&#x3002;&#x5B89;&#x88C5;Docker&#x53EF;&#x80FD;&#x4F1A;&#x6BD4;&#x8F83;&#x6162;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x8BDD;&#x5220;&#x9664;&#x4E0B;&#x9762;&#x51E0;&#x884C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF1A;</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x4F7F;&#x7528;<span class=\"keyword\">shell</span>&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</div><div class=\"line\">node.<span class=\"keyword\">vm</span>.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-SHELL</div><div class=\"line\"></div><div class=\"line\">\t# &#x5B89;&#x88C5;docker <span class=\"number\">1.11</span>.<span class=\"number\">0</span></div><div class=\"line\">\twget -qO- http<span class=\"variable\">s:</span>//<span class=\"built_in\">get</span>.docker.<span class=\"keyword\">com</span>/ | sed <span class=\"string\">&apos;s/docker-engine/docker-engine=1.11.0-0~trusty/&apos;</span> | <span class=\"keyword\">sh</span></div><div class=\"line\">\tusermod -aG docker vagrant</div><div class=\"line\"></div><div class=\"line\">SHELL</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x662F;Vagrant&#x865A;&#x62DF;&#x673A;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x66F4;&#x6539;:</p>\n<ul>\n<li>&#x7528;&#x6237;/&#x5BC6;&#x7801;: vagrant/vagrant</li>\n<li>&#x5171;&#x4EAB;&#x76EE;&#x5F55;: &#x684C;&#x9762;&#x4E0A;&#x7684;share&#x76EE;&#x5F55;&#x5C06;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/home/vagrant/share&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</li>\n<li>&#x5185;&#x5B58;&#xFF1A;2GB</li>\n<li>CPU: 1</li>\n</ul>\n<h2 id=\"&#x4E8C;-&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"><a href=\"#&#x4E8C;-&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"&#x4E8C;. &#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"></a>&#x4E8C;. &#x96C6;&#x7FA4;&#x7BA1;&#x7406;</h2><h4 id=\"1-&#x5E38;&#x7528;&#x547D;&#x4EE4;\"><a href=\"#1-&#x5E38;&#x7528;&#x547D;&#x4EE4;\" class=\"headerlink\" title=\"1. &#x5E38;&#x7528;&#x547D;&#x4EE4;\"></a><strong>1. &#x5E38;&#x7528;&#x547D;&#x4EE4;</strong></h4><p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;Vagrant&#x7BA1;&#x7406;&#x547D;&#x4EE4;&#xFF0C;&#x64CD;&#x4F5C;&#x7279;&#x5B9A;&#x865A;&#x62DF;&#x673A;&#x65F6;&#x4EC5;&#x9700;&#x6307;&#x5B9A;&#x865A;&#x62DF;&#x673A;&#x7684;&#x540D;&#x79F0;&#x3002;</p>\n<ul>\n<li><strong>vagrant ssh:</strong> SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant halt:</strong> &#x5173;&#x95ED;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant destroy:</strong> &#x5220;&#x9664;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant ssh-config</strong> &#x67E5;&#x770B;&#x865A;&#x62DF;&#x673A;SSH&#x914D;&#x7F6E;</li>\n</ul>\n<p><strong>&#x542F;&#x52A8;&#x5355;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF1A;</strong></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant</span> up node1</div></pre></td></tr></table></figure>\n<p><strong>&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF1A;</strong></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant</span> up node1 node3</div></pre></td></tr></table></figure>\n<p><strong>&#x542F;&#x52A8;&#x6240;&#x6709;&#x865A;&#x62DF;&#x673A;&#xFF1A;</strong></p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant up</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"><a href=\"#2-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\" class=\"headerlink\" title=\"2. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"></a><strong>2. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;</strong></h4><p>&#x4F7F;&#x7528;<strong>vagrant ssh</strong>&#x547D;&#x4EE4;&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5FC5;&#x987B;&#x5207;&#x6362;&#x5230;Vagrantfile&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x673A;IP&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5219;&#x66F4;&#x4E3A;&#x65B9;&#x4FBF;:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">ssh</span> <span class=\"selector-tag\">vagrant</span>@<span class=\"keyword\">192</span>.<span class=\"keyword\">168</span>.<span class=\"keyword\">59</span>.<span class=\"keyword\">2</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;SSH&#x767B;&#x9646;&#x9700;&#x8981;&#x8F93;&#x5165;&#x865A;&#x62DF;&#x673A;vagrant&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5373;<strong>vagrant</strong></p>\n<p>&#x5C06;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x590D;&#x5236;&#x5230;&#x865A;&#x62DF;&#x673A;&#x7684;authorized_keys&#x6587;&#x4EF6;&#x4E2D;&#x5373;&#x53EF;&#x5B9E;&#x73B0;SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;:</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">cat</span> <span class=\"variable\">$HOME</span>/.ssh/id_rsa.pub | ssh vagrant@<span class=\"number\">192.168.59.2</span> <span class=\"string\">&apos;cat &gt;&gt; <span class=\"variable\">$HOME</span>/.ssh/authorized_keys&apos;</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;\"><a href=\"#3-&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;\" class=\"headerlink\" title=\"3. &#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;\"></a><strong>3. &#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;</strong></h4><p>Vagrant&#x4E2D;&#x6709;&#x4E0B;&#x9762;&#x4E00;&#x6BB5;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x4F7F;&#x7528;<span class=\"keyword\">shell</span>&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</div><div class=\"line\">node.<span class=\"keyword\">vm</span>.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-SHELL</div><div class=\"line\"></div><div class=\"line\">\t# &#x5B89;&#x88C5;docker <span class=\"number\">1.11</span>.<span class=\"number\">0</span></div><div class=\"line\">\twget -qO- http<span class=\"variable\">s:</span>//<span class=\"built_in\">get</span>.docker.<span class=\"keyword\">com</span>/ | sed <span class=\"string\">&apos;s/docker-engine/docker-engine=1.11.0-0~trusty/&apos;</span> | <span class=\"keyword\">sh</span></div><div class=\"line\">\tusermod -aG docker vagrant</div><div class=\"line\">SHELL</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5D4C;&#x5165;&#x4E86;&#x4E00;&#x6BB5;Shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x5B89;&#x88C5;&#x4E86;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x5176;&#x4ED6;&#x6240;&#x9700;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#x3002;&#x4FEE;&#x6539;&#x6B64;&#x6BB5;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x201D;&#x2013;provision&#x201D;&#x9009;&#x9879;&#x3002;</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant halt</div><div class=\"line\">vagrant up <span class=\"comment\">--provision</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;\"><a href=\"#4-&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;\" class=\"headerlink\" title=\"4. &#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;\"></a><strong>4. &#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;</strong></h4><p>VirtualBox&#x8BBE;&#x7F6E;&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x65F6;&#x9700;&#x8981;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x5B89;&#x88C5;VirtualBox Guest Additions&#xFF0C;&#x8FD9;&#x4E2A;Vagrant&#x4F1A;&#x81EA;&#x52A8;&#x5B89;&#x88C5;&#x3002;&#x4F46;&#x662F;&#xFF0C;VirtualBox Guest Additions&#x662F;&#x5185;&#x6838;&#x6A21;&#x5757;&#xFF0C;&#x5F53;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5185;&#x6838;&#x5347;&#x7EA7;&#x4E4B;&#x540E;&#xFF0C;VirtualBox Guest Additions&#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x5BFC;&#x81F4;&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">Failed <span class=\"built_in\">to</span> mount <span class=\"built_in\">folders</span> <span class=\"keyword\">in</span> Linux guest. This is usually because</div><div class=\"line\"><span class=\"keyword\">the</span> <span class=\"string\">&quot;vboxsf&quot;</span> <span class=\"built_in\">file</span> <span class=\"keyword\">system</span> is <span class=\"keyword\">not</span> available. Please verify that</div><div class=\"line\"><span class=\"keyword\">the</span> guest additions are properly installed <span class=\"keyword\">in</span> <span class=\"keyword\">the</span> guest <span class=\"keyword\">and</span></div><div class=\"line\">can work properly. The <span class=\"keyword\">command</span> <span class=\"title\">attempted</span> <span class=\"title\">was</span>:</div><div class=\"line\"></div><div class=\"line\">mount -t vboxsf -o uid=`id -u vagrant`,gid=`getent group vagrant | cut -d: -f3` vagrant /vagrant</div><div class=\"line\">mount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` vagrant /vagrant</div><div class=\"line\"></div><div class=\"line\">The error output <span class=\"built_in\">from</span> <span class=\"keyword\">the</span> <span class=\"keyword\">last</span> <span class=\"keyword\">command</span> <span class=\"title\">was</span>:</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">stdin</span>: is <span class=\"keyword\">not</span> <span class=\"keyword\">a</span> tty</div><div class=\"line\">/sbin/mount.vboxsf: mounting failed <span class=\"keyword\">with</span> <span class=\"keyword\">the</span> error: No such device</div></pre></td></tr></table></figure>\n<p>&#x5B89;&#x88C5;Vagrant&#x63D2;&#x4EF6;<a href=\"https://github.com/dotless-de/vagrant-vbguest\" target=\"_blank\" rel=\"external\">vagrant-vbguest</a>&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x63D2;&#x4EF6;&#x4F1A;&#x5728;&#x865A;&#x62DF;&#x673A;&#x5185;&#x6838;&#x5347;&#x7EA7;&#x4E4B;&#x540E;&#x91CD;&#x65B0;&#x5B89;&#x88C5;VirtualBox Guest Additions&#x3002;</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant plugin <span class=\"keyword\">install</span> vagrant-vbguest</div></pre></td></tr></table></figure>","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x5728;&#x524D;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E86;<a href=\"http://kiwenlau.com/2016/06/19/160619-vagrant-virtual-machine/\">&#x4F7F;&#x7528;Vagrant&#x5FEB;&#x901F;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</a>&#xFF0C;&#x4F46;&#x662F;&#x6240;&#x521B;&#x5EFA;&#x7684;&#x53EA;&#x662F;&#x5355;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;<a href=\"http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/\">&#x4F7F;&#x7528;Vagrant&#x521B;&#x5EFA;&#x591A;&#x8282;&#x70B9;&#x865A;&#x62DF;&#x673A;&#x96C6;&#x7FA4;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;<a href=\"http://hadoop.apache.org/\">Hadoop</a>&#xFF0C;<a href=\"http://spark.apache.org/\">Spark</a>&#x4EE5;&#x53CA;<a href=\"http://storm.apache.org/\">Storm</a>&#x7B49;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x3002;</p>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/07/03/vagrant-vm-cluster/\">2016-07-03</a></li>\n</ul>\n<p><img src=\"/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.png\" width=\"500\"></p>\n<p>&#x672C;&#x6587;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x662F;&#x5728;MacBook&#x4E0A;&#x8FDB;&#x884C;&#x7684;&#xFF0C;Windows&#x4E0A;&#x7684;&#x64CD;&#x4F5C;&#x5927;&#x90E8;&#x5206;&#x4E00;&#x81F4;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x3002;</p>\n<h2 id=\"&#x4E00;-&#x96C6;&#x7FA4;&#x521B;&#x5EFA;\"><a href=\"#&#x4E00;-&#x96C6;&#x7FA4;&#x521B;&#x5EFA;\" class=\"headerlink\" title=\"&#x4E00;. &#x96C6;&#x7FA4;&#x521B;&#x5EFA;\"></a>&#x4E00;. &#x96C6;&#x7FA4;&#x521B;&#x5EFA;</h2><h4 id=\"1-&#x5B89;&#x88C5;VirtualBox\"><a href=\"#1-&#x5B89;&#x88C5;VirtualBox\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;VirtualBox\"></a><strong>1. &#x5B89;&#x88C5;<a href=\"https://www.virtualbox.org/wiki/Downloads\">VirtualBox</a></strong></h4><h4 id=\"2-&#x5B89;&#x88C5;Vagrant\"><a href=\"#2-&#x5B89;&#x88C5;Vagrant\" class=\"headerlink\" title=\"2. &#x5B89;&#x88C5;Vagrant\"></a><strong>2. &#x5B89;&#x88C5;<a href=\"https://www.vagrantup.com/downloads.html\">Vagrant</a></strong></h4><h4 id=\"3-&#x4E0B;&#x8F7D;Box\"><a href=\"#3-&#x4E0B;&#x8F7D;Box\" class=\"headerlink\" title=\"3. &#x4E0B;&#x8F7D;Box\"></a><strong>3. &#x4E0B;&#x8F7D;Box</strong></h4><figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">vagrant</span> <span class=\"keyword\">box </span><span class=\"keyword\">add </span>ubuntu/trusty64</div></pre></td></tr></table></figure>\n<p><strong>Box</strong>&#x76F8;&#x5F53;&#x4E8E;&#x865A;&#x62DF;&#x673A;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x3002;</p>\n<h4 id=\"4-&#x7F16;&#x8F91;Vagrantfile\"><a href=\"#4-&#x7F16;&#x8F91;Vagrantfile\" class=\"headerlink\" title=\"4. &#x7F16;&#x8F91;Vagrantfile\"></a><strong>4. &#x7F16;&#x8F91;Vagrantfile</strong></h4><figure class=\"highlight stata\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">mkdir</span> vagrant-<span class=\"keyword\">cluster</span></div><div class=\"line\"><span class=\"keyword\">cd</span> vagrant-<span class=\"keyword\">cluster</span></div><div class=\"line\">vim Vagrantfile</div></pre></td></tr></table></figure>\n<p>Vagrantfile&#x5982;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6CE8;&#x91CA;&#x7406;&#x89E3;&#x6BCF;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x7684;&#x542B;&#x4E49;&#xFF1A;</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"code\"><pre><div class=\"line\">Vagrant.configure(<span class=\"string\">&quot;2&quot;</span>) do |config|</div><div class=\"line\"></div><div class=\"line\">\t(<span class=\"number\">1</span>..<span class=\"number\">3</span>).each do |i|</div><div class=\"line\"></div><div class=\"line\">\t\tconfig.vm.define <span class=\"string\">&quot;node#{i}&quot;</span> do |<span class=\"keyword\">node</span><span class=\"title\">|</span></div><div class=\"line\"></div><div class=\"line\">\t\t# &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;Box</div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.box = <span class=\"string\">&quot;ubuntu/trusty64&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.<span class=\"attr\">hostname=</span><span class=\"string\">&quot;node#{i}&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;IP</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.network <span class=\"string\">&quot;private_network&quot;</span>, ip: <span class=\"string\">&quot;192.168.59.#{i}&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x673A;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5171;&#x4EAB;&#x76EE;&#x5F55;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.synced_folder <span class=\"string\">&quot;~/Desktop/share&quot;</span>, <span class=\"string\">&quot;/home/vagrant/share&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"comment\"># VirtaulBox&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.provider <span class=\"string\">&quot;virtualbox&quot;</span> do |v|</div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x540D;&#x79F0;</span></div><div class=\"line\">\t\t\tv.name = <span class=\"string\">&quot;node#{i}&quot;</span></div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;  </span></div><div class=\"line\">\t\t\tv.memory = <span class=\"number\">2048</span></div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"comment\"># &#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x673A;&#x7684;CPU&#x4E2A;&#x6570;</span></div><div class=\"line\">\t\t\tv.cpus = <span class=\"number\">1</span></div><div class=\"line\">\t\tend</div><div class=\"line\">  </div><div class=\"line\">\t\t<span class=\"comment\"># &#x4F7F;&#x7528;shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</span></div><div class=\"line\">\t\t<span class=\"keyword\">node</span>.<span class=\"title\">vm</span>.provision <span class=\"string\">&quot;shell&quot;</span>, inline: <span class=\"tag\">&lt;&lt;-SHELL</span></div><div class=\"line\"></div><div class=\"line\">\t\t\t# &#x5B89;&#x88C5;docker 1.11.0</div><div class=\"line\">\t\t\twget -qO- https://get.docker.com/ | sed &apos;s/docker-engine/docker-engine=1.11.0-0~trusty/&apos; | sh</div><div class=\"line\">\t\t\tusermod -aG docker vagrant</div><div class=\"line\">\t\t\t</div><div class=\"line\">\t\tSHELL</div><div class=\"line\"></div><div class=\"line\">\t\tend</div><div class=\"line\">\tend</div><div class=\"line\">end</div></pre></td></tr></table></figure>\n<p>&#x4E0E;&#x521B;&#x5EFA;&#x5355;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x76F8;&#x6BD4;&#xFF0C;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x65F6;&#x591A;&#x4E86;&#x4E00;&#x5C42;&#x5FAA;&#x73AF;&#xFF0C;&#x800C;&#x53D8;&#x91CF;i&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x8282;&#x70B9;&#x7684;&#x540D;&#x79F0;&#x4E0E;IP&#xFF0C;&#x4F7F;&#x7528;<strong>#{i}</strong>&#x53D6;&#x503C;&#xFF1A;</p>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><div class=\"line\">(<span class=\"number\">1.</span><span class=\"number\">.3</span>).each <span class=\"built_in\">do</span> |<span class=\"type\">i</span>|</div><div class=\"line\"></div><div class=\"line\"><span class=\"type\">end</span></div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4E00;&#x5171;&#x521B;&#x5EFA;&#x4E86;3&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x3002;</p>\n<h4 id=\"5-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"><a href=\"#5-&#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\" class=\"headerlink\" title=\"5. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;\"></a><strong>5. &#x5728;&#x684C;&#x9762;&#x4E0A;&#x521B;&#x5EFA;share&#x76EE;&#x5F55;</strong></h4><p>&#x684C;&#x9762;&#x4E0A;&#x7684;share&#x76EE;&#x5F55;&#x5C06;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/home/vagrant/share&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">mkdir</span> ~/Desktop/share</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"><a href=\"#6-&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\" class=\"headerlink\" title=\"6. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;\"></a><strong>6. &#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;</strong></h4><figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant up</span></div></pre></td></tr></table></figure>\n<p>&#x521B;&#x5EFA;3&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x5927;&#x6982;&#x9700;&#x8981;15&#x5206;&#x949F;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x548C;&#x673A;&#x5668;&#x6027;&#x80FD;&#x8FD8;&#x6709;&#x7F51;&#x901F;&#x76F8;&#x5173;&#x3002;&#x5B89;&#x88C5;Docker&#x53EF;&#x80FD;&#x4F1A;&#x6BD4;&#x8F83;&#x6162;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x8BDD;&#x5220;&#x9664;&#x4E0B;&#x9762;&#x51E0;&#x884C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF1A;</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x4F7F;&#x7528;<span class=\"keyword\">shell</span>&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</div><div class=\"line\">node.<span class=\"keyword\">vm</span>.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-SHELL</div><div class=\"line\"></div><div class=\"line\">\t# &#x5B89;&#x88C5;docker <span class=\"number\">1.11</span>.<span class=\"number\">0</span></div><div class=\"line\">\twget -qO- http<span class=\"variable\">s:</span>//<span class=\"built_in\">get</span>.docker.<span class=\"keyword\">com</span>/ | sed <span class=\"string\">&apos;s/docker-engine/docker-engine=1.11.0-0~trusty/&apos;</span> | <span class=\"keyword\">sh</span></div><div class=\"line\">\tusermod -aG docker vagrant</div><div class=\"line\"></div><div class=\"line\">SHELL</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x662F;Vagrant&#x865A;&#x62DF;&#x673A;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x66F4;&#x6539;:</p>\n<ul>\n<li>&#x7528;&#x6237;/&#x5BC6;&#x7801;: vagrant/vagrant</li>\n<li>&#x5171;&#x4EAB;&#x76EE;&#x5F55;: &#x684C;&#x9762;&#x4E0A;&#x7684;share&#x76EE;&#x5F55;&#x5C06;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;/home/vagrant/share&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</li>\n<li>&#x5185;&#x5B58;&#xFF1A;2GB</li>\n<li>CPU: 1</li>\n</ul>\n<h2 id=\"&#x4E8C;-&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"><a href=\"#&#x4E8C;-&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"&#x4E8C;. &#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"></a>&#x4E8C;. &#x96C6;&#x7FA4;&#x7BA1;&#x7406;</h2><h4 id=\"1-&#x5E38;&#x7528;&#x547D;&#x4EE4;\"><a href=\"#1-&#x5E38;&#x7528;&#x547D;&#x4EE4;\" class=\"headerlink\" title=\"1. &#x5E38;&#x7528;&#x547D;&#x4EE4;\"></a><strong>1. &#x5E38;&#x7528;&#x547D;&#x4EE4;</strong></h4><p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;Vagrant&#x7BA1;&#x7406;&#x547D;&#x4EE4;&#xFF0C;&#x64CD;&#x4F5C;&#x7279;&#x5B9A;&#x865A;&#x62DF;&#x673A;&#x65F6;&#x4EC5;&#x9700;&#x6307;&#x5B9A;&#x865A;&#x62DF;&#x673A;&#x7684;&#x540D;&#x79F0;&#x3002;</p>\n<ul>\n<li><strong>vagrant ssh:</strong> SSH&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant halt:</strong> &#x5173;&#x95ED;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant destroy:</strong> &#x5220;&#x9664;&#x865A;&#x62DF;&#x673A;</li>\n<li><strong>vagrant ssh-config</strong> &#x67E5;&#x770B;&#x865A;&#x62DF;&#x673A;SSH&#x914D;&#x7F6E;</li>\n</ul>\n<p><strong>&#x542F;&#x52A8;&#x5355;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF1A;</strong></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant</span> up node1</div></pre></td></tr></table></figure>\n<p><strong>&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF1A;</strong></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant</span> up node1 node3</div></pre></td></tr></table></figure>\n<p><strong>&#x542F;&#x52A8;&#x6240;&#x6709;&#x865A;&#x62DF;&#x673A;&#xFF1A;</strong></p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vagrant up</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"><a href=\"#2-SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\" class=\"headerlink\" title=\"2. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;\"></a><strong>2. SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;</strong></h4><p>&#x4F7F;&#x7528;<strong>vagrant ssh</strong>&#x547D;&#x4EE4;&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5FC5;&#x987B;&#x5207;&#x6362;&#x5230;Vagrantfile&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x673A;IP&#x767B;&#x9646;&#x865A;&#x62DF;&#x673A;&#x5219;&#x66F4;&#x4E3A;&#x65B9;&#x4FBF;:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">ssh</span> <span class=\"selector-tag\">vagrant</span>@<span class=\"keyword\">192</span>.<span class=\"keyword\">168</span>.<span class=\"keyword\">59</span>.<span class=\"keyword\">2</span></div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;SSH&#x767B;&#x9646;&#x9700;&#x8981;&#x8F93;&#x5165;&#x865A;&#x62DF;&#x673A;vagrant&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5373;<strong>vagrant</strong></p>\n<p>&#x5C06;&#x4E3B;&#x673A;&#x7684;&#x516C;&#x94A5;&#x590D;&#x5236;&#x5230;&#x865A;&#x62DF;&#x673A;&#x7684;authorized_keys&#x6587;&#x4EF6;&#x4E2D;&#x5373;&#x53EF;&#x5B9E;&#x73B0;SSH&#x514D;&#x5BC6;&#x7801;&#x767B;&#x9646;:</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">cat</span> <span class=\"variable\">$HOME</span>/.ssh/id_rsa.pub | ssh vagrant@<span class=\"number\">192.168.59.2</span> <span class=\"string\">&apos;cat &gt;&gt; <span class=\"variable\">$HOME</span>/.ssh/authorized_keys&apos;</span></div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;\"><a href=\"#3-&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;\" class=\"headerlink\" title=\"3. &#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;\"></a><strong>3. &#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;</strong></h4><p>Vagrant&#x4E2D;&#x6709;&#x4E0B;&#x9762;&#x4E00;&#x6BB5;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x4F7F;&#x7528;<span class=\"keyword\">shell</span>&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</div><div class=\"line\">node.<span class=\"keyword\">vm</span>.provision <span class=\"string\">&quot;shell&quot;</span>, inline: &lt;&lt;-SHELL</div><div class=\"line\"></div><div class=\"line\">\t# &#x5B89;&#x88C5;docker <span class=\"number\">1.11</span>.<span class=\"number\">0</span></div><div class=\"line\">\twget -qO- http<span class=\"variable\">s:</span>//<span class=\"built_in\">get</span>.docker.<span class=\"keyword\">com</span>/ | sed <span class=\"string\">&apos;s/docker-engine/docker-engine=1.11.0-0~trusty/&apos;</span> | <span class=\"keyword\">sh</span></div><div class=\"line\">\tusermod -aG docker vagrant</div><div class=\"line\">SHELL</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5D4C;&#x5165;&#x4E86;&#x4E00;&#x6BB5;Shell&#x811A;&#x672C;&#x8FDB;&#x884C;&#x8F6F;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x5B89;&#x88C5;&#x4E86;<a href=\"https://www.docker.com/\">Docker</a>&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x5176;&#x4ED6;&#x6240;&#x9700;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#x3002;&#x4FEE;&#x6539;&#x6B64;&#x6BB5;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x673A;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x201D;&#x2013;provision&#x201D;&#x9009;&#x9879;&#x3002;</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant halt</div><div class=\"line\">vagrant up <span class=\"comment\">--provision</span></div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;\"><a href=\"#4-&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;\" class=\"headerlink\" title=\"4. &#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;\"></a><strong>4. &#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x51FA;&#x9519;</strong></h4><p>VirtualBox&#x8BBE;&#x7F6E;&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x65F6;&#x9700;&#x8981;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x5B89;&#x88C5;VirtualBox Guest Additions&#xFF0C;&#x8FD9;&#x4E2A;Vagrant&#x4F1A;&#x81EA;&#x52A8;&#x5B89;&#x88C5;&#x3002;&#x4F46;&#x662F;&#xFF0C;VirtualBox Guest Additions&#x662F;&#x5185;&#x6838;&#x6A21;&#x5757;&#xFF0C;&#x5F53;&#x865A;&#x62DF;&#x673A;&#x7684;&#x5185;&#x6838;&#x5347;&#x7EA7;&#x4E4B;&#x540E;&#xFF0C;VirtualBox Guest Additions&#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x5BFC;&#x81F4;&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\">Failed <span class=\"built_in\">to</span> mount <span class=\"built_in\">folders</span> <span class=\"keyword\">in</span> Linux guest. This is usually because</div><div class=\"line\"><span class=\"keyword\">the</span> <span class=\"string\">&quot;vboxsf&quot;</span> <span class=\"built_in\">file</span> <span class=\"keyword\">system</span> is <span class=\"keyword\">not</span> available. Please verify that</div><div class=\"line\"><span class=\"keyword\">the</span> guest additions are properly installed <span class=\"keyword\">in</span> <span class=\"keyword\">the</span> guest <span class=\"keyword\">and</span></div><div class=\"line\">can work properly. The <span class=\"keyword\">command</span> <span class=\"title\">attempted</span> <span class=\"title\">was</span>:</div><div class=\"line\"></div><div class=\"line\">mount -t vboxsf -o uid=`id -u vagrant`,gid=`getent group vagrant | cut -d: -f3` vagrant /vagrant</div><div class=\"line\">mount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` vagrant /vagrant</div><div class=\"line\"></div><div class=\"line\">The error output <span class=\"built_in\">from</span> <span class=\"keyword\">the</span> <span class=\"keyword\">last</span> <span class=\"keyword\">command</span> <span class=\"title\">was</span>:</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">stdin</span>: is <span class=\"keyword\">not</span> <span class=\"keyword\">a</span> tty</div><div class=\"line\">/sbin/mount.vboxsf: mounting failed <span class=\"keyword\">with</span> <span class=\"keyword\">the</span> error: No such device</div></pre></td></tr></table></figure>\n<p>&#x5B89;&#x88C5;Vagrant&#x63D2;&#x4EF6;<a href=\"https://github.com/dotless-de/vagrant-vbguest\">vagrant-vbguest</a>&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x63D2;&#x4EF6;&#x4F1A;&#x5728;&#x865A;&#x62DF;&#x673A;&#x5185;&#x6838;&#x5347;&#x7EA7;&#x4E4B;&#x540E;&#x91CD;&#x65B0;&#x5B89;&#x88C5;VirtualBox Guest Additions&#x3002;</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"code\"><pre><div class=\"line\">vagrant plugin <span class=\"keyword\">install</span> vagrant-vbguest</div></pre></td></tr></table></figure>"},{"title":"","date":"2016-09-04T02:00:00.000Z","_content":"\n**:** **IP******, **(Service Discovery)**Nginx\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-09-04](http://kiwenlau.com/2016/09/04/what-is-service-discovery/)\n\n<img src=\"what-is-service-discovery/service-discovery.png\" width = \"500\"/>\n\n## . Nginx\n\n[Nginx](https://nginx.org)Apache[Docker](https://www.docker.com/), Nginx\n\n#### **1. Nginx**\n\n```\nsudo docker pull nginx:1.10\n```\n\n#### **2. Nginx**\n\n```\nsudo docker run -d \\\n                -p 8080:80 \\\n                nginx:1.10\n```\n\n**-d**Nginx**-p****8080****80**\n\n#### **3. Nginx**\n\nNginx\n\n[http://192.168.59.1:8080](http://192.168.59.1:8080)\n\ncurlNginx, html\n\n```\ncurl 192.168.59.1:8080\n```\n\nNginx192.168.59.1:8080**192.168.59.1**NginxIP**8080**Nginx\n\nIPIP**-p**\n\n## . Mesos/MarathonNginx\n\n[DockerMesos/Marathon](http://kiwenlau.com/2016/07/10/mesos-marathon-platform/)3Mesos/MarathonNginx[Marathon LB](https://github.com/mesosphere/marathon-lb)\n\n**1. **\n\nNginx(nginx1.json):\n\n```\n{\n    \"id\": \"nginx1\",\n    \"cpus\": 0.2,\n    \"mem\": 20.0,\n    \"instances\": 1,\n    \"healthChecks\": [{\n        \"path\": \"/\"\n    }],\n    \"container\": {\n        \"type\": \"DOCKER\",\n        \"docker\": {\n            \"image\": \"nginx:1.10\",\n            \"network\": \"BRIDGE\",\n            \"portMappings\": [{ \"containerPort\": 80, \"hostPort\": 0, \"protocol\": \"tcp\" }]\n        }\n    }\n}\n```\n\n**instances**1Nginx; **hostPort**0NginxMarathon\n\nNginx:\n\n```\ncurl -Ss \\\n     -X POST \\\n     -H \"Content-Type: application/json\" \\\n     --data \"@nginx1.json\" \\\n     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool\n```\n\nNginxnode2(192.168.59.2)node3(192.168.59.3)NginxIPNginxMarathon\n\n**hostPort******\n\nSlave**docker ps**NginxIP\n\nnode2(192.168.59.2)\n\n```\nsudo docker ps | grep nginx\nb863d407b880        nginx:1.10              \"nginx -g 'daemon off\"   15 minutes ago      Up 15 minutes       443/tcp, 0.0.0.0:31575->80/tcp   mesos-d34d0b5b-c3b1-4020-9bb2-bb8582252bf3-S0.d2de6d05-9751-4fbe-af10-d7e35e9e6c7b\n```\n\nnode3(192.168.59.3)\n\n```\nsudo docker ps | grep nginx\n```\n\nNginxIP**192.168.59.2****31575**Nginx[http://192.168.59.2:31575](http://192.168.59.2:31575)\n\nNginxIP****\n\n\n**2. [Marathon LB](https://github.com/mesosphere/marathon-lb)**\n\n[Marathon LB](https://github.com/mesosphere/marathon-lb)Marathon****Marathon LB[Haproxy](http://www.haproxy.org/)\n\nMarathon LBIPMarathon LBIPMarathon LBMarathonIPHaproxyNginxIP\n\nNginx(nginx2.json):\n\n```\n{\n    \"id\": \"nginx2\",\n    \"labels\": {\n        \"HAPROXY_GROUP\": \"external\"\n    },\n    \"cpus\": 0.2,\n    \"mem\": 20.0,\n    \"instances\": 1,\n    \"healthChecks\": [{\n        \"path\": \"/\"\n    }],\n    \"container\": {\n        \"type\": \"DOCKER\",\n        \"docker\": {\n            \"image\": \"nginx:1.10\",\n            \"network\": \"BRIDGE\",\n            \"portMappings\": [{ \"containerPort\": 80, \"hostPort\": 0, \"servicePort\": 10000, \"protocol\": \"tcp\" }]\n        }\n    }\n}\n```\n\nnginx2.json**HAPROXY_GROUP****servicePort****HAPROXY_GROUP**externalNginxexternal**Marathon LB****servicePort**10000Nginx**Marathon LB**10000\n\nNginx:\n\n```\ncurl -Ss \\\n     -X POST \\\n     -H \"Content-Type: application/json\" \\\n     --data \"@nginx2.json\" \\\n     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool\n```\n\nNginxIPMarathon LBIP**192.168.59.1**Nginx**servicePort**10000Nginx[http://192.168.59.1:10000](http://192.168.59.1:10000)Nginx[http://192.168.59.2:31270](http://192.168.59.2:31270)Marathon LBHaproxyMarathon LBMarathonIPHaproxyMarathon LBHaproxy: \n\n```\nfrontend nginx2_10000\n  bind *:10000\n  mode http\n  use_backend nginx2_10000\n\nbackend nginx2_10000\n  balance roundrobin\n  mode http\n  option forwardfor\n  http-request set-header X-Forwarded-Port %[dst_port]\n  http-request add-header X-Forwarded-Proto https if { ssl_fc }\n  option  httpchk GET /\n  timeout check 20s\n  server 192_168_59_2_31270 192.168.59.2:31270 check inter 60s fall 4\n```\n\nHaproxyniginx(frontend): *:10000(backend): 192.168.59.2:31270HaproxyNginx\n\nNginxNginxIPMarathon LBHaproxy[http://192.168.59.1:10000](http://192.168.59.1:10000)\n\nMarathon LB(IP)[bamboo](https://github.com/QubitProducts/bamboo)[nixy](https://github.com/martensson/nixy)\n\n## . \n\n1. [Understanding Modern Service Discovery with Docker](http://progrium.com/blog/2014/07/29/understanding-modern-service-discovery-with-docker/)\n2. [DockerPaaS](http://www.eurekao.com/build-paas-platform-base-on-docker/)\n3. [Youzan ](http://tech.youzan.com/haunt-youzan-service-discovery/)\n\n\n","source":"_posts/2016/09/04/what-is-service-discovery.md","raw":"title: \n\ndate: 2016-09-04 10:00\n\ntags: [Docker]\n\n---\n\n**:** **IP******, **(Service Discovery)**Nginx\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-09-04](http://kiwenlau.com/2016/09/04/what-is-service-discovery/)\n\n<img src=\"what-is-service-discovery/service-discovery.png\" width = \"500\"/>\n\n## . Nginx\n\n[Nginx](https://nginx.org)Apache[Docker](https://www.docker.com/), Nginx\n\n#### **1. Nginx**\n\n```\nsudo docker pull nginx:1.10\n```\n\n#### **2. Nginx**\n\n```\nsudo docker run -d \\\n                -p 8080:80 \\\n                nginx:1.10\n```\n\n**-d**Nginx**-p****8080****80**\n\n#### **3. Nginx**\n\nNginx\n\n[http://192.168.59.1:8080](http://192.168.59.1:8080)\n\ncurlNginx, html\n\n```\ncurl 192.168.59.1:8080\n```\n\nNginx192.168.59.1:8080**192.168.59.1**NginxIP**8080**Nginx\n\nIPIP**-p**\n\n## . Mesos/MarathonNginx\n\n[DockerMesos/Marathon](http://kiwenlau.com/2016/07/10/mesos-marathon-platform/)3Mesos/MarathonNginx[Marathon LB](https://github.com/mesosphere/marathon-lb)\n\n**1. **\n\nNginx(nginx1.json):\n\n```\n{\n    \"id\": \"nginx1\",\n    \"cpus\": 0.2,\n    \"mem\": 20.0,\n    \"instances\": 1,\n    \"healthChecks\": [{\n        \"path\": \"/\"\n    }],\n    \"container\": {\n        \"type\": \"DOCKER\",\n        \"docker\": {\n            \"image\": \"nginx:1.10\",\n            \"network\": \"BRIDGE\",\n            \"portMappings\": [{ \"containerPort\": 80, \"hostPort\": 0, \"protocol\": \"tcp\" }]\n        }\n    }\n}\n```\n\n**instances**1Nginx; **hostPort**0NginxMarathon\n\nNginx:\n\n```\ncurl -Ss \\\n     -X POST \\\n     -H \"Content-Type: application/json\" \\\n     --data \"@nginx1.json\" \\\n     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool\n```\n\nNginxnode2(192.168.59.2)node3(192.168.59.3)NginxIPNginxMarathon\n\n**hostPort******\n\nSlave**docker ps**NginxIP\n\nnode2(192.168.59.2)\n\n```\nsudo docker ps | grep nginx\nb863d407b880        nginx:1.10              \"nginx -g 'daemon off\"   15 minutes ago      Up 15 minutes       443/tcp, 0.0.0.0:31575->80/tcp   mesos-d34d0b5b-c3b1-4020-9bb2-bb8582252bf3-S0.d2de6d05-9751-4fbe-af10-d7e35e9e6c7b\n```\n\nnode3(192.168.59.3)\n\n```\nsudo docker ps | grep nginx\n```\n\nNginxIP**192.168.59.2****31575**Nginx[http://192.168.59.2:31575](http://192.168.59.2:31575)\n\nNginxIP****\n\n\n**2. [Marathon LB](https://github.com/mesosphere/marathon-lb)**\n\n[Marathon LB](https://github.com/mesosphere/marathon-lb)Marathon****Marathon LB[Haproxy](http://www.haproxy.org/)\n\nMarathon LBIPMarathon LBIPMarathon LBMarathonIPHaproxyNginxIP\n\nNginx(nginx2.json):\n\n```\n{\n    \"id\": \"nginx2\",\n    \"labels\": {\n        \"HAPROXY_GROUP\": \"external\"\n    },\n    \"cpus\": 0.2,\n    \"mem\": 20.0,\n    \"instances\": 1,\n    \"healthChecks\": [{\n        \"path\": \"/\"\n    }],\n    \"container\": {\n        \"type\": \"DOCKER\",\n        \"docker\": {\n            \"image\": \"nginx:1.10\",\n            \"network\": \"BRIDGE\",\n            \"portMappings\": [{ \"containerPort\": 80, \"hostPort\": 0, \"servicePort\": 10000, \"protocol\": \"tcp\" }]\n        }\n    }\n}\n```\n\nnginx2.json**HAPROXY_GROUP****servicePort****HAPROXY_GROUP**externalNginxexternal**Marathon LB****servicePort**10000Nginx**Marathon LB**10000\n\nNginx:\n\n```\ncurl -Ss \\\n     -X POST \\\n     -H \"Content-Type: application/json\" \\\n     --data \"@nginx2.json\" \\\n     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool\n```\n\nNginxIPMarathon LBIP**192.168.59.1**Nginx**servicePort**10000Nginx[http://192.168.59.1:10000](http://192.168.59.1:10000)Nginx[http://192.168.59.2:31270](http://192.168.59.2:31270)Marathon LBHaproxyMarathon LBMarathonIPHaproxyMarathon LBHaproxy: \n\n```\nfrontend nginx2_10000\n  bind *:10000\n  mode http\n  use_backend nginx2_10000\n\nbackend nginx2_10000\n  balance roundrobin\n  mode http\n  option forwardfor\n  http-request set-header X-Forwarded-Port %[dst_port]\n  http-request add-header X-Forwarded-Proto https if { ssl_fc }\n  option  httpchk GET /\n  timeout check 20s\n  server 192_168_59_2_31270 192.168.59.2:31270 check inter 60s fall 4\n```\n\nHaproxyniginx(frontend): *:10000(backend): 192.168.59.2:31270HaproxyNginx\n\nNginxNginxIPMarathon LBHaproxy[http://192.168.59.1:10000](http://192.168.59.1:10000)\n\nMarathon LB(IP)[bamboo](https://github.com/QubitProducts/bamboo)[nixy](https://github.com/martensson/nixy)\n\n## . \n\n1. [Understanding Modern Service Discovery with Docker](http://progrium.com/blog/2014/07/29/understanding-modern-service-discovery-with-docker/)\n2. [DockerPaaS](http://www.eurekao.com/build-paas-platform-base-on-docker/)\n3. [Youzan ](http://tech.youzan.com/haunt-youzan-service-discovery/)\n\n\n","slug":"2016/09/04/what-is-service-discovery","published":1,"updated":"2017-04-10T02:14:09.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtme000o71fyi4vg9esy","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x5C06;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x5230;&#x96C6;&#x7FA4;&#x65F6;&#xFF0C;&#x5176;&#x670D;&#x52A1;&#x5730;&#x5740;&#xFF0C;&#x5373;<strong>IP</strong>&#x548C;<strong>&#x7AEF;&#x53E3;</strong>, &#x662F;&#x7531;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x52A8;&#x6001;&#x5206;&#x914D;&#x7684;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x5B83;&#x7684;&#x5730;&#x5740;&#x5462;&#xFF1F;&#x8FD9;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;(Service Discovery)</strong>&#x4E86;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4EE5;Nginx&#x7684;&#x90E8;&#x7F72;&#x4E3A;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x7684;&#x539F;&#x7406;&#x4E0E;&#x5B9E;&#x8DF5;&#x3002;</p>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/09/04/what-is-service-discovery/\">2016-09-04</a></li>\n</ul>\n<p><img src=\"/2016/09/04/what-is-service-discovery/service-discovery.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-&#x5355;&#x673A;&#x90E8;&#x7F72;Nginx\"><a href=\"#&#x4E00;-&#x5355;&#x673A;&#x90E8;&#x7F72;Nginx\" class=\"headerlink\" title=\"&#x4E00;. &#x5355;&#x673A;&#x90E8;&#x7F72;Nginx\"></a>&#x4E00;. &#x5355;&#x673A;&#x90E8;&#x7F72;Nginx</h2><p><a href=\"https://nginx.org\" target=\"_blank\" rel=\"external\">Nginx</a>&#x4F5C;&#x4E3A;&#x7F51;&#x9875;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x529F;&#x80FD;&#x4E0E;Apache&#x4E00;&#x81F4;&#x3002;&#x4F7F;&#x7528;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>, &#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x90E8;&#x7F72;Nginx&#x3002;</p>\n<h4 id=\"1-&#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;\"></a><strong>1. &#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;</strong></h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">sudo</span> <span class=\"selector-tag\">docker</span> <span class=\"selector-tag\">pull</span> <span class=\"selector-tag\">nginx</span><span class=\"selector-pseudo\">:1.10</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;\"><a href=\"#2-&#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"2. &#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;\"></a><strong>2. &#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"keyword\">run</span><span class=\"bash\"> <span class=\"_\">-d</span> \\</span></div><div class=\"line\">                -p 8080:80 \\</div><div class=\"line\">                nginx:1.10</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;<strong>-d</strong>&#x9009;&#x9879;&#x8868;&#x793A;Nginx&#x5BB9;&#x5668;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;<strong>-p</strong>&#x9009;&#x9879;&#x8868;&#x793A;&#x4E3B;&#x673A;&#x7684;<strong>8080</strong>&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x4E3A;&#x5BB9;&#x5668;&#x7684;<strong>80</strong>&#x7AEF;&#x53E3;&#x3002;</p>\n<h4 id=\"3-&#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;\"><a href=\"#3-&#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;\" class=\"headerlink\" title=\"3. &#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;\"></a><strong>3. &#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;</strong></h4><p>&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x670D;&#x52A1;Nginx</p>\n<p><a href=\"http://192.168.59.1:8080\" target=\"_blank\" rel=\"external\">http://192.168.59.1:8080</a></p>\n<p>&#x6216;&#x8005;&#x4F7F;&#x7528;curl&#x547D;&#x4EE4;&#x8BBF;&#x95EE;Nginx, &#x5176;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4E3A;html&#x6587;&#x4EF6;&#x3002;</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">curl</span> 192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.59</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:8080</span></div></pre></td></tr></table></figure>\n<p>Nginx&#x7684;&#x670D;&#x52A1;&#x5730;&#x5740;&#x662F;192.168.59.1:8080&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;<strong>192.168.59.1</strong>&#x662F;&#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;&#x7684;IP&#xFF0C;&#x800C;<strong>8080</strong>&#x662F;Nginx&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x3002;</p>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5C06;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x5230;&#x5355;&#x4E2A;&#x4E3B;&#x673A;&#x4E0A;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x7684;IP&#x5373;&#x4E3A;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;IP&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>-p</strong>&#x9009;&#x9879;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#xFF0C;&#x8FD9;&#x65F6;&#x670D;&#x52A1;&#x5730;&#x5740;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x9759;&#x6001;&#x5206;&#x914D;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5C06;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x5230;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x96C6;&#x7FA4;&#x65F6;&#x5462;&#xFF1F;</p>\n<h2 id=\"&#x4E8C;-Mesos-Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx\"><a href=\"#&#x4E8C;-Mesos-Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx\" class=\"headerlink\" title=\"&#x4E8C;. Mesos/Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx\"></a>&#x4E8C;. Mesos/Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx</h2><p>&#x9996;&#x5148;&#xFF0C;&#x53EF;&#x4EE5;&#x6309;&#x7167;<a href=\"http://kiwenlau.com/2016/07/10/mesos-marathon-platform/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Mesos/Marathon</a>&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5FEB;&#x901F;&#x642D;&#x5EFA;3&#x4E2A;&#x8282;&#x70B9;&#x7684;Mesos/Marathon&#x96C6;&#x7FA4;&#x3002;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"https://github.com/mesosphere/marathon-lb\" target=\"_blank\" rel=\"external\">Marathon LB</a>&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3002;&#x901A;&#x8FC7;&#x5BF9;&#x6BD4;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3002;</p>\n<p><strong>1. &#x4E0D;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong></p>\n<p>Nginx&#x5B9A;&#x4E49;(nginx1.json):</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;nginx1&quot;</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;cpus&quot;</span>: <span class=\"number\">0.2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;mem&quot;</span>: <span class=\"number\">20.0</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;instances&quot;</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;healthChecks&quot;</span>: [{</div><div class=\"line\">        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/&quot;</span></div><div class=\"line\">    }],</div><div class=\"line\">    <span class=\"attr\">&quot;container&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;DOCKER&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;docker&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;image&quot;</span>: <span class=\"string\">&quot;nginx:1.10&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;network&quot;</span>: <span class=\"string\">&quot;BRIDGE&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;portMappings&quot;</span>: [{ <span class=\"attr\">&quot;containerPort&quot;</span>: <span class=\"number\">80</span>, <span class=\"attr\">&quot;hostPort&quot;</span>: <span class=\"number\">0</span>, <span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;tcp&quot;</span> }]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;<strong>instances</strong>&#x4E3A;1&#xFF0C;&#x8868;&#x793A;&#x4EC5;&#x90E8;&#x7F72;&#x5355;&#x4E2A;Nginx&#x5BB9;&#x5668;; <strong>hostPort</strong>&#x4E3A;0&#xFF0C;&#x8868;&#x793A;Nginx&#x5BB9;&#x5668;&#x7ED1;&#x5B9A;&#x7684;&#x4E3B;&#x673A;&#x7AEF;&#x53E3;&#x7531;Marathon&#x968F;&#x673A;&#x5206;&#x914D;&#x3002;</p>\n<p>&#x90E8;&#x7F72;Nginx:</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -Ss \\</div><div class=\"line\">     -<span class=\"ruby\">X POST \\</span></div><div class=\"line\">     -<span class=\"ruby\">H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> \\</span></div><div class=\"line\">     -<span class=\"ruby\">-data <span class=\"string\">&quot;@nginx1.json&quot;</span> \\</span></div><div class=\"line\">     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;Nginx&#x5BB9;&#x5668;&#x53EF;&#x80FD;&#x8FD0;&#x884C;node2(192.168.59.2)&#x4E0A;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x8FD0;&#x884C;&#x5728;node3(192.168.59.3)&#x4E0A;&#xFF0C;&#x56E0;&#x6B64;Nginx&#x670D;&#x52A1;&#x7684;IP&#x662F;&#x65E0;&#x6CD5;&#x4E8B;&#x5148;&#x786E;&#x5B9A;&#x7684;&#x3002;&#x800C;Nginx&#x5BB9;&#x5668;&#x7ED1;&#x5B9A;&#x7684;&#x4E3B;&#x673A;&#x7AEF;&#x53E3;&#x7531;Marathon&#x968F;&#x673A;&#x5206;&#x914D;&#xFF0C;&#x4E5F;&#x4E0D;&#x786E;&#x5B9A;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>hostPort</strong>&#x6307;&#x5B9A;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x5E76;&#x4E0D;&#x5408;&#x9002;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x7AEF;&#x53E3;&#x51B2;&#x7A81;&#x3002;&#x5F53;&#x96C6;&#x7FA4;&#x4E2D;&#x8FD0;&#x884C;&#x4E86;&#x975E;&#x5E38;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x65F6;&#xFF0C;<strong>&#x9759;&#x6001;&#x5206;&#x914D;&#x7AEF;&#x53E3;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#xFF0C;&#x4E5F;&#x9650;&#x5236;&#x4E86;&#x96C6;&#x7FA4;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x4E0E;&#x6269;&#x5C55;&#x6027;</strong>&#x3002;</p>\n<p>&#x5728;Slave&#x8282;&#x70B9;&#x4E0A;&#x4F7F;&#x7528;<strong>docker ps</strong>&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;Nginx&#x670D;&#x52A1;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#x3002;</p>\n<p>node2(192.168.59.2)</p>\n<figure class=\"highlight dns\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker ps | grep nginx</div><div class=\"line\">b863d<span class=\"number\">407b880</span>        nginx:<span class=\"number\">1</span>.<span class=\"number\">10</span>              &quot;nginx -g &apos;daemon off&quot;   <span class=\"number\">15</span> minutes ago      Up <span class=\"number\">15</span> minutes       <span class=\"number\">443</span>/tcp, <span class=\"number\">0.0.0.0</span>:<span class=\"number\">31575</span>-&gt;<span class=\"number\">80</span>/tcp   mesos-d34d0b5b-c<span class=\"number\">3b1-4020</span>-<span class=\"number\">9</span>bb2-bb8582252bf3-S0.d2de<span class=\"number\">6d05-9751</span>-<span class=\"number\">4</span>fbe-af10-d7e35e9e6c7b</div></pre></td></tr></table></figure>\n<p>node3(192.168.59.3)</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"keyword\">ps</span> | <span class=\"keyword\">grep</span> nginx</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;Nginx&#x670D;&#x52A1;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#x5206;&#x522B;&#x4E3A;<strong>192.168.59.2</strong>&#x548C;<strong>31575</strong>&#xFF0C;&#x5373;Nginx&#x7684;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A;&#xFF1A;<a href=\"http://192.168.59.2:31575\" target=\"_blank\" rel=\"external\">http://192.168.59.2:31575</a></p>\n<p>&#x6BCF;&#x6B21;&#x91CD;&#x65B0;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;&#x5176;IP&#x548C;&#x7AEF;&#x53E3;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x6BCF;&#x6B21;&#x90FD;&#x8981;&#x624B;&#x52A8;&#x53BB;&#x67E5;&#x8BE2;&#x670D;&#x52A1;&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x5F88;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x4E14;&#x65E0;&#x6CD5;&#x5C06;&#x90E8;&#x7F72;&#x4EFB;&#x52A1;&#x81EA;&#x52A8;&#x5316;&#x3002;&#x5728;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x975E;&#x5E38;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x662F;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x7684;&#x5FC5;&#x5907;&#x529F;&#x80FD;&#x3002;</p>\n<p><strong>2. &#x4F7F;&#x7528;<a href=\"https://github.com/mesosphere/marathon-lb\" target=\"_blank\" rel=\"external\">Marathon LB</a>&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong></p>\n<p><a href=\"https://github.com/mesosphere/marathon-lb\" target=\"_blank\" rel=\"external\">Marathon LB</a>&#x662F;Marathon&#x7684;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x7CFB;&#x7EDF;&#x3002;Marathon LB&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a href=\"http://www.haproxy.org/\" target=\"_blank\" rel=\"external\">Haproxy</a>&#x5B9E;&#x73B0;&#x4E86;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x901A;&#x8FC7;&#x4F7F;&#x7528;Marathon LB&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x7684;&#x56FA;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x7684;IP&#x5C31;&#x662F;&#x8FD0;&#x884C;Marathon LB&#x7684;&#x8282;&#x70B9;IP&#x3002;Marathon LB&#x4F1A;&#x76D1;&#x542C;Marathon&#x7684;&#x8C03;&#x5EA6;&#x4E8B;&#x4EF6;&#xFF0C;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x66F4;&#x65B0;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x91CD;&#x65B0;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x56FA;&#x5B9A;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#x8BE5;&#x670D;&#x52A1;&#x3002;</p>\n<p>Nginx&#x5B9A;&#x4E49;(nginx2.json):</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;nginx2&quot;</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;labels&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;HAPROXY_GROUP&quot;</span>: <span class=\"string\">&quot;external&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    <span class=\"attr\">&quot;cpus&quot;</span>: <span class=\"number\">0.2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;mem&quot;</span>: <span class=\"number\">20.0</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;instances&quot;</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;healthChecks&quot;</span>: [{</div><div class=\"line\">        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/&quot;</span></div><div class=\"line\">    }],</div><div class=\"line\">    <span class=\"attr\">&quot;container&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;DOCKER&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;docker&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;image&quot;</span>: <span class=\"string\">&quot;nginx:1.10&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;network&quot;</span>: <span class=\"string\">&quot;BRIDGE&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;portMappings&quot;</span>: [{ <span class=\"attr\">&quot;containerPort&quot;</span>: <span class=\"number\">80</span>, <span class=\"attr\">&quot;hostPort&quot;</span>: <span class=\"number\">0</span>, <span class=\"attr\">&quot;servicePort&quot;</span>: <span class=\"number\">10000</span>, <span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;tcp&quot;</span> }]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;nginx2.json&#x53EA;&#x6709;<strong>HAPROXY_GROUP</strong>&#x4E0E;<strong>servicePort</strong>&#x4E24;&#x5904;&#x4FEE;&#x6539;&#x3002;<strong>HAPROXY_GROUP</strong>&#x4E3A;external&#xFF0C;&#x8868;&#x793A;Nginx&#x5C06;&#x4F7F;&#x7528;&#x5206;&#x7EC4;&#x4E3A;external&#x7684;<strong>Marathon LB</strong>&#x505A;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3002;<strong>servicePort</strong>&#x4E3A;10000&#xFF0C;&#x8868;&#x793A;Nginx&#x5C06;&#x4F7F;&#x7528;<strong>Marathon LB</strong>&#x8282;&#x70B9;&#x7684;10000&#x7AEF;&#x53E3;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x90E8;&#x7F72;Nginx:</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -Ss \\</div><div class=\"line\">     -<span class=\"ruby\">X POST \\</span></div><div class=\"line\">     -<span class=\"ruby\">H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> \\</span></div><div class=\"line\">     -<span class=\"ruby\">-data <span class=\"string\">&quot;@nginx2.json&quot;</span> \\</span></div><div class=\"line\">     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;Nginx&#x670D;&#x52A1;&#x7684;IP&#x4E3A;&#x8FD0;&#x884C;Marathon LB&#x7684;&#x8282;&#x70B9;IP&#xFF0C;&#x5373;<strong>192.168.59.1</strong>&#xFF0C;&#x800C;Nginx&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x4E3A;<strong>servicePort</strong>&#x6307;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5373;10000&#x3002;&#x56E0;&#x6B64;&#xFF0C;Nginx&#x7684;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A;&#xFF1A;<a href=\"http://192.168.59.1:10000\" target=\"_blank\" rel=\"external\">http://192.168.59.1:10000</a>&#x3002;&#x800C;Nginx&#x5BB9;&#x5668;&#x7684;&#x5B9E;&#x9645;&#x5730;&#x5740;&#x4E3A;<a href=\"http://192.168.59.2:31270\" target=\"_blank\" rel=\"external\">http://192.168.59.2:31270</a>&#xFF0C;Marathon LB&#x4F7F;&#x7528;Haproxy&#x4F5C;&#x4E3A;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x8F6C;&#x53D1;&#x7684;&#x670D;&#x52A1;&#x8BF7;&#x6C42;&#x3002;Marathon LB&#x4F1A;&#x76D1;&#x542C;Marathon&#x7684;&#x8C03;&#x5EA6;&#x4E8B;&#x4EF6;&#xFF0C;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x66F4;&#x65B0;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x4E0B;&#x9762;&#x5373;&#x4E3A;Marathon LB&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;Haproxy&#x914D;&#x7F6E;&#x6587;&#x4EF6;: </p>\n<figure class=\"highlight smali\"><table><tr><td class=\"code\"><pre><div class=\"line\">frontend nginx2_10000</div><div class=\"line\">  bind *:10000</div><div class=\"line\">  mode http</div><div class=\"line\">  use_backend nginx2_10000</div><div class=\"line\"></div><div class=\"line\">backend nginx2_10000</div><div class=\"line\">  balance roundrobin</div><div class=\"line\">  mode http</div><div class=\"line\">  option forwardfor</div><div class=\"line\">  http-request set-header X-Forwarded-Port %[dst_port]</div><div class=\"line\">  http-request<span class=\"built_in\"> add-header </span>X-Forwarded-Proto https<span class=\"built_in\"> if </span>{ ssl_fc }</div><div class=\"line\">  option  httpchk GET /</div><div class=\"line\">  timeout<span class=\"built_in\"> check </span>20s</div><div class=\"line\">  server 192_168_59_2_31270 192.168.59.2:31270<span class=\"built_in\"> check </span>inter 60s fall 4</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;Haproxy&#x4E2D;&#xFF0C;niginx&#x670D;&#x52A1;&#x7684;&#x524D;&#x7AEF;(frontend)&#x5730;&#x5740;&#x4E3A;: *:10000&#xFF0C;&#x800C;&#x540E;&#x7AEF;(backend)&#x5730;&#x5740;&#x4E3A;: 192.168.59.2:31270&#x3002;Haproxy&#x8D1F;&#x8D23;&#x5C06;&#x670D;&#x52A1;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;Nginx&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x5F53;&#x6211;&#x4EEC;&#x91CD;&#x65B0;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;Nginx&#x5BB9;&#x5668;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;Marathon LB&#x4F1A;&#x66F4;&#x65B0;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"http://192.168.59.1:10000\" target=\"_blank\" rel=\"external\">http://192.168.59.1:10000</a>&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;Marathon LB&#x7684;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x53D1;&#x73B0;&#x670D;&#x52A1;&#x7684;&#x5730;&#x5740;(IP&#x548C;&#x7AEF;&#x53E3;)&#xFF0C;&#x7136;&#x540E;&#x7528;&#x6237;&#x5C31;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x624B;&#x52A8;&#x67E5;&#x8BE2;&#x4E86;&#x3002;<a href=\"https://github.com/QubitProducts/bamboo\" target=\"_blank\" rel=\"external\">bamboo</a>&#x4E0E;<a href=\"https://github.com/martensson/nixy\" target=\"_blank\" rel=\"external\">nixy</a>&#x5B9E;&#x73B0;&#x4E86;&#x540C;&#x6837;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<h2 id=\"&#x4E09;-&#x53C2;&#x8003;\"><a href=\"#&#x4E09;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x4E09;. &#x53C2;&#x8003;\"></a>&#x4E09;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"http://progrium.com/blog/2014/07/29/understanding-modern-service-discovery-with-docker/\" target=\"_blank\" rel=\"external\">Understanding Modern Service Discovery with Docker</a></li>\n<li><a href=\"http://www.eurekao.com/build-paas-platform-base-on-docker/\" target=\"_blank\" rel=\"external\">&#x57FA;&#x4E8E;Docker&#x6280;&#x672F;&#x6784;&#x5EFA;PaaS&#x4E91;&#x5E73;&#x53F0;</a></li>\n<li><a href=\"http://tech.youzan.com/haunt-youzan-service-discovery/\" target=\"_blank\" rel=\"external\">Youzan &#x670D;&#x52A1;&#x53D1;&#x73B0;&#x6982;&#x8FF0;</a></li>\n</ol>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x5C06;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x5230;&#x96C6;&#x7FA4;&#x65F6;&#xFF0C;&#x5176;&#x670D;&#x52A1;&#x5730;&#x5740;&#xFF0C;&#x5373;<strong>IP</strong>&#x548C;<strong>&#x7AEF;&#x53E3;</strong>, &#x662F;&#x7531;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x52A8;&#x6001;&#x5206;&#x914D;&#x7684;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x5B83;&#x7684;&#x5730;&#x5740;&#x5462;&#xFF1F;&#x8FD9;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;(Service Discovery)</strong>&#x4E86;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4EE5;Nginx&#x7684;&#x90E8;&#x7F72;&#x4E3A;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x7684;&#x539F;&#x7406;&#x4E0E;&#x5B9E;&#x8DF5;&#x3002;</p>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/09/04/what-is-service-discovery/\">2016-09-04</a></li>\n</ul>\n<p><img src=\"/2016/09/04/what-is-service-discovery/service-discovery.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-&#x5355;&#x673A;&#x90E8;&#x7F72;Nginx\"><a href=\"#&#x4E00;-&#x5355;&#x673A;&#x90E8;&#x7F72;Nginx\" class=\"headerlink\" title=\"&#x4E00;. &#x5355;&#x673A;&#x90E8;&#x7F72;Nginx\"></a>&#x4E00;. &#x5355;&#x673A;&#x90E8;&#x7F72;Nginx</h2><p><a href=\"https://nginx.org\">Nginx</a>&#x4F5C;&#x4E3A;&#x7F51;&#x9875;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x529F;&#x80FD;&#x4E0E;Apache&#x4E00;&#x81F4;&#x3002;&#x4F7F;&#x7528;<a href=\"https://www.docker.com/\">Docker</a>, &#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x90E8;&#x7F72;Nginx&#x3002;</p>\n<h4 id=\"1-&#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;\"><a href=\"#1-&#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;\"></a><strong>1. &#x4E0B;&#x8F7D;Nginx&#x955C;&#x50CF;</strong></h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">sudo</span> <span class=\"selector-tag\">docker</span> <span class=\"selector-tag\">pull</span> <span class=\"selector-tag\">nginx</span><span class=\"selector-pseudo\">:1.10</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;\"><a href=\"#2-&#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"2. &#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;\"></a><strong>2. &#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;</strong></h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"keyword\">run</span><span class=\"bash\"> <span class=\"_\">-d</span> \\</span></div><div class=\"line\">                -p 8080:80 \\</div><div class=\"line\">                nginx:1.10</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;<strong>-d</strong>&#x9009;&#x9879;&#x8868;&#x793A;Nginx&#x5BB9;&#x5668;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;<strong>-p</strong>&#x9009;&#x9879;&#x8868;&#x793A;&#x4E3B;&#x673A;&#x7684;<strong>8080</strong>&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x4E3A;&#x5BB9;&#x5668;&#x7684;<strong>80</strong>&#x7AEF;&#x53E3;&#x3002;</p>\n<h4 id=\"3-&#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;\"><a href=\"#3-&#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;\" class=\"headerlink\" title=\"3. &#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;\"></a><strong>3. &#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;</strong></h4><p>&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x670D;&#x52A1;Nginx</p>\n<p><a href=\"http://192.168.59.1:8080\">http://192.168.59.1:8080</a></p>\n<p>&#x6216;&#x8005;&#x4F7F;&#x7528;curl&#x547D;&#x4EE4;&#x8BBF;&#x95EE;Nginx, &#x5176;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4E3A;html&#x6587;&#x4EF6;&#x3002;</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">curl</span> 192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.59</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:8080</span></div></pre></td></tr></table></figure>\n<p>Nginx&#x7684;&#x670D;&#x52A1;&#x5730;&#x5740;&#x662F;192.168.59.1:8080&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;<strong>192.168.59.1</strong>&#x662F;&#x8FD0;&#x884C;Nginx&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;&#x7684;IP&#xFF0C;&#x800C;<strong>8080</strong>&#x662F;Nginx&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x3002;</p>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5C06;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x5230;&#x5355;&#x4E2A;&#x4E3B;&#x673A;&#x4E0A;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x7684;IP&#x5373;&#x4E3A;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x4E3B;&#x673A;IP&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>-p</strong>&#x9009;&#x9879;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#xFF0C;&#x8FD9;&#x65F6;&#x670D;&#x52A1;&#x5730;&#x5740;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x9759;&#x6001;&#x5206;&#x914D;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5C06;&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x5230;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x96C6;&#x7FA4;&#x65F6;&#x5462;&#xFF1F;</p>\n<h2 id=\"&#x4E8C;-Mesos-Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx\"><a href=\"#&#x4E8C;-Mesos-Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx\" class=\"headerlink\" title=\"&#x4E8C;. Mesos/Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx\"></a>&#x4E8C;. Mesos/Marathon&#x96C6;&#x7FA4;&#x4E2D;&#x90E8;&#x7F72;Nginx</h2><p>&#x9996;&#x5148;&#xFF0C;&#x53EF;&#x4EE5;&#x6309;&#x7167;<a href=\"http://kiwenlau.com/2016/07/10/mesos-marathon-platform/\">&#x57FA;&#x4E8E;Docker&#x642D;&#x5EFA;&#x591A;&#x8282;&#x70B9;Mesos/Marathon</a>&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5FEB;&#x901F;&#x642D;&#x5EFA;3&#x4E2A;&#x8282;&#x70B9;&#x7684;Mesos/Marathon&#x96C6;&#x7FA4;&#x3002;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"https://github.com/mesosphere/marathon-lb\">Marathon LB</a>&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3002;&#x901A;&#x8FC7;&#x5BF9;&#x6BD4;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3002;</p>\n<p><strong>1. &#x4E0D;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong></p>\n<p>Nginx&#x5B9A;&#x4E49;(nginx1.json):</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;nginx1&quot;</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;cpus&quot;</span>: <span class=\"number\">0.2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;mem&quot;</span>: <span class=\"number\">20.0</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;instances&quot;</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;healthChecks&quot;</span>: [{</div><div class=\"line\">        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/&quot;</span></div><div class=\"line\">    }],</div><div class=\"line\">    <span class=\"attr\">&quot;container&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;DOCKER&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;docker&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;image&quot;</span>: <span class=\"string\">&quot;nginx:1.10&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;network&quot;</span>: <span class=\"string\">&quot;BRIDGE&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;portMappings&quot;</span>: [{ <span class=\"attr\">&quot;containerPort&quot;</span>: <span class=\"number\">80</span>, <span class=\"attr\">&quot;hostPort&quot;</span>: <span class=\"number\">0</span>, <span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;tcp&quot;</span> }]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;<strong>instances</strong>&#x4E3A;1&#xFF0C;&#x8868;&#x793A;&#x4EC5;&#x90E8;&#x7F72;&#x5355;&#x4E2A;Nginx&#x5BB9;&#x5668;; <strong>hostPort</strong>&#x4E3A;0&#xFF0C;&#x8868;&#x793A;Nginx&#x5BB9;&#x5668;&#x7ED1;&#x5B9A;&#x7684;&#x4E3B;&#x673A;&#x7AEF;&#x53E3;&#x7531;Marathon&#x968F;&#x673A;&#x5206;&#x914D;&#x3002;</p>\n<p>&#x90E8;&#x7F72;Nginx:</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -Ss \\</div><div class=\"line\">     -<span class=\"ruby\">X POST \\</span></div><div class=\"line\">     -<span class=\"ruby\">H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> \\</span></div><div class=\"line\">     -<span class=\"ruby\">-data <span class=\"string\">&quot;@nginx1.json&quot;</span> \\</span></div><div class=\"line\">     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;Nginx&#x5BB9;&#x5668;&#x53EF;&#x80FD;&#x8FD0;&#x884C;node2(192.168.59.2)&#x4E0A;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x8FD0;&#x884C;&#x5728;node3(192.168.59.3)&#x4E0A;&#xFF0C;&#x56E0;&#x6B64;Nginx&#x670D;&#x52A1;&#x7684;IP&#x662F;&#x65E0;&#x6CD5;&#x4E8B;&#x5148;&#x786E;&#x5B9A;&#x7684;&#x3002;&#x800C;Nginx&#x5BB9;&#x5668;&#x7ED1;&#x5B9A;&#x7684;&#x4E3B;&#x673A;&#x7AEF;&#x53E3;&#x7531;Marathon&#x968F;&#x673A;&#x5206;&#x914D;&#xFF0C;&#x4E5F;&#x4E0D;&#x786E;&#x5B9A;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>hostPort</strong>&#x6307;&#x5B9A;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x5E76;&#x4E0D;&#x5408;&#x9002;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x7AEF;&#x53E3;&#x51B2;&#x7A81;&#x3002;&#x5F53;&#x96C6;&#x7FA4;&#x4E2D;&#x8FD0;&#x884C;&#x4E86;&#x975E;&#x5E38;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x65F6;&#xFF0C;<strong>&#x9759;&#x6001;&#x5206;&#x914D;&#x7AEF;&#x53E3;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#xFF0C;&#x4E5F;&#x9650;&#x5236;&#x4E86;&#x96C6;&#x7FA4;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x4E0E;&#x6269;&#x5C55;&#x6027;</strong>&#x3002;</p>\n<p>&#x5728;Slave&#x8282;&#x70B9;&#x4E0A;&#x4F7F;&#x7528;<strong>docker ps</strong>&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;Nginx&#x670D;&#x52A1;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#x3002;</p>\n<p>node2(192.168.59.2)</p>\n<figure class=\"highlight dns\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker ps | grep nginx</div><div class=\"line\">b863d<span class=\"number\">407b880</span>        nginx:<span class=\"number\">1</span>.<span class=\"number\">10</span>              &quot;nginx -g &apos;daemon off&quot;   <span class=\"number\">15</span> minutes ago      Up <span class=\"number\">15</span> minutes       <span class=\"number\">443</span>/tcp, <span class=\"number\">0.0.0.0</span>:<span class=\"number\">31575</span>-&gt;<span class=\"number\">80</span>/tcp   mesos-d34d0b5b-c<span class=\"number\">3b1-4020</span>-<span class=\"number\">9</span>bb2-bb8582252bf3-S0.d2de<span class=\"number\">6d05-9751</span>-<span class=\"number\">4</span>fbe-af10-d7e35e9e6c7b</div></pre></td></tr></table></figure>\n<p>node3(192.168.59.3)</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"keyword\">ps</span> | <span class=\"keyword\">grep</span> nginx</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;Nginx&#x670D;&#x52A1;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#x5206;&#x522B;&#x4E3A;<strong>192.168.59.2</strong>&#x548C;<strong>31575</strong>&#xFF0C;&#x5373;Nginx&#x7684;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A;&#xFF1A;<a href=\"http://192.168.59.2:31575\">http://192.168.59.2:31575</a></p>\n<p>&#x6BCF;&#x6B21;&#x91CD;&#x65B0;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;&#x5176;IP&#x548C;&#x7AEF;&#x53E3;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x6BCF;&#x6B21;&#x90FD;&#x8981;&#x624B;&#x52A8;&#x53BB;&#x67E5;&#x8BE2;&#x670D;&#x52A1;&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x5F88;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x4E14;&#x65E0;&#x6CD5;&#x5C06;&#x90E8;&#x7F72;&#x4EFB;&#x52A1;&#x81EA;&#x52A8;&#x5316;&#x3002;&#x5728;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x975E;&#x5E38;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x662F;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x7684;&#x5FC5;&#x5907;&#x529F;&#x80FD;&#x3002;</p>\n<p><strong>2. &#x4F7F;&#x7528;<a href=\"https://github.com/mesosphere/marathon-lb\">Marathon LB</a>&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong></p>\n<p><a href=\"https://github.com/mesosphere/marathon-lb\">Marathon LB</a>&#x662F;Marathon&#x7684;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#x7CFB;&#x7EDF;&#x3002;Marathon LB&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a href=\"http://www.haproxy.org/\">Haproxy</a>&#x5B9E;&#x73B0;&#x4E86;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x901A;&#x8FC7;&#x4F7F;&#x7528;Marathon LB&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x7684;&#x56FA;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x7684;IP&#x5C31;&#x662F;&#x8FD0;&#x884C;Marathon LB&#x7684;&#x8282;&#x70B9;IP&#x3002;Marathon LB&#x4F1A;&#x76D1;&#x542C;Marathon&#x7684;&#x8C03;&#x5EA6;&#x4E8B;&#x4EF6;&#xFF0C;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x66F4;&#x65B0;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x91CD;&#x65B0;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x56FA;&#x5B9A;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#x8BE5;&#x670D;&#x52A1;&#x3002;</p>\n<p>Nginx&#x5B9A;&#x4E49;(nginx2.json):</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;nginx2&quot;</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;labels&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;HAPROXY_GROUP&quot;</span>: <span class=\"string\">&quot;external&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    <span class=\"attr\">&quot;cpus&quot;</span>: <span class=\"number\">0.2</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;mem&quot;</span>: <span class=\"number\">20.0</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;instances&quot;</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">&quot;healthChecks&quot;</span>: [{</div><div class=\"line\">        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/&quot;</span></div><div class=\"line\">    }],</div><div class=\"line\">    <span class=\"attr\">&quot;container&quot;</span>: {</div><div class=\"line\">        <span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;DOCKER&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;docker&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;image&quot;</span>: <span class=\"string\">&quot;nginx:1.10&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;network&quot;</span>: <span class=\"string\">&quot;BRIDGE&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">&quot;portMappings&quot;</span>: [{ <span class=\"attr\">&quot;containerPort&quot;</span>: <span class=\"number\">80</span>, <span class=\"attr\">&quot;hostPort&quot;</span>: <span class=\"number\">0</span>, <span class=\"attr\">&quot;servicePort&quot;</span>: <span class=\"number\">10000</span>, <span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;tcp&quot;</span> }]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;nginx2.json&#x53EA;&#x6709;<strong>HAPROXY_GROUP</strong>&#x4E0E;<strong>servicePort</strong>&#x4E24;&#x5904;&#x4FEE;&#x6539;&#x3002;<strong>HAPROXY_GROUP</strong>&#x4E3A;external&#xFF0C;&#x8868;&#x793A;Nginx&#x5C06;&#x4F7F;&#x7528;&#x5206;&#x7EC4;&#x4E3A;external&#x7684;<strong>Marathon LB</strong>&#x505A;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3002;<strong>servicePort</strong>&#x4E3A;10000&#xFF0C;&#x8868;&#x793A;Nginx&#x5C06;&#x4F7F;&#x7528;<strong>Marathon LB</strong>&#x8282;&#x70B9;&#x7684;10000&#x7AEF;&#x53E3;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x90E8;&#x7F72;Nginx:</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -Ss \\</div><div class=\"line\">     -<span class=\"ruby\">X POST \\</span></div><div class=\"line\">     -<span class=\"ruby\">H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> \\</span></div><div class=\"line\">     -<span class=\"ruby\">-data <span class=\"string\">&quot;@nginx2.json&quot;</span> \\</span></div><div class=\"line\">     http://127.0.0.1:8080/v2/apps | python2.7 -mjson.tool</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;Nginx&#x670D;&#x52A1;&#x7684;IP&#x4E3A;&#x8FD0;&#x884C;Marathon LB&#x7684;&#x8282;&#x70B9;IP&#xFF0C;&#x5373;<strong>192.168.59.1</strong>&#xFF0C;&#x800C;Nginx&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x4E3A;<strong>servicePort</strong>&#x6307;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5373;10000&#x3002;&#x56E0;&#x6B64;&#xFF0C;Nginx&#x7684;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A;&#xFF1A;<a href=\"http://192.168.59.1:10000\">http://192.168.59.1:10000</a>&#x3002;&#x800C;Nginx&#x5BB9;&#x5668;&#x7684;&#x5B9E;&#x9645;&#x5730;&#x5740;&#x4E3A;<a href=\"http://192.168.59.2:31270\">http://192.168.59.2:31270</a>&#xFF0C;Marathon LB&#x4F7F;&#x7528;Haproxy&#x4F5C;&#x4E3A;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x8F6C;&#x53D1;&#x7684;&#x670D;&#x52A1;&#x8BF7;&#x6C42;&#x3002;Marathon LB&#x4F1A;&#x76D1;&#x542C;Marathon&#x7684;&#x8C03;&#x5EA6;&#x4E8B;&#x4EF6;&#xFF0C;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x7684;IP&#x4E0E;&#x7AEF;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x66F4;&#x65B0;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x4E0B;&#x9762;&#x5373;&#x4E3A;Marathon LB&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;Haproxy&#x914D;&#x7F6E;&#x6587;&#x4EF6;: </p>\n<figure class=\"highlight smali\"><table><tr><td class=\"code\"><pre><div class=\"line\">frontend nginx2_10000</div><div class=\"line\">  bind *:10000</div><div class=\"line\">  mode http</div><div class=\"line\">  use_backend nginx2_10000</div><div class=\"line\"></div><div class=\"line\">backend nginx2_10000</div><div class=\"line\">  balance roundrobin</div><div class=\"line\">  mode http</div><div class=\"line\">  option forwardfor</div><div class=\"line\">  http-request set-header X-Forwarded-Port %[dst_port]</div><div class=\"line\">  http-request<span class=\"built_in\"> add-header </span>X-Forwarded-Proto https<span class=\"built_in\"> if </span>{ ssl_fc }</div><div class=\"line\">  option  httpchk GET /</div><div class=\"line\">  timeout<span class=\"built_in\"> check </span>20s</div><div class=\"line\">  server 192_168_59_2_31270 192.168.59.2:31270<span class=\"built_in\"> check </span>inter 60s fall 4</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;Haproxy&#x4E2D;&#xFF0C;niginx&#x670D;&#x52A1;&#x7684;&#x524D;&#x7AEF;(frontend)&#x5730;&#x5740;&#x4E3A;: *:10000&#xFF0C;&#x800C;&#x540E;&#x7AEF;(backend)&#x5730;&#x5740;&#x4E3A;: 192.168.59.2:31270&#x3002;Haproxy&#x8D1F;&#x8D23;&#x5C06;&#x670D;&#x52A1;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;Nginx&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x5F53;&#x6211;&#x4EEC;&#x91CD;&#x65B0;&#x90E8;&#x7F72;Nginx&#x65F6;&#xFF0C;Nginx&#x5BB9;&#x5668;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;Marathon LB&#x4F1A;&#x66F4;&#x65B0;Haproxy&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"http://192.168.59.1:10000\">http://192.168.59.1:10000</a>&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;Marathon LB&#x7684;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x53D1;&#x73B0;&#x670D;&#x52A1;&#x7684;&#x5730;&#x5740;(IP&#x548C;&#x7AEF;&#x53E3;)&#xFF0C;&#x7136;&#x540E;&#x7528;&#x6237;&#x5C31;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x624B;&#x52A8;&#x67E5;&#x8BE2;&#x4E86;&#x3002;<a href=\"https://github.com/QubitProducts/bamboo\">bamboo</a>&#x4E0E;<a href=\"https://github.com/martensson/nixy\">nixy</a>&#x5B9E;&#x73B0;&#x4E86;&#x540C;&#x6837;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<h2 id=\"&#x4E09;-&#x53C2;&#x8003;\"><a href=\"#&#x4E09;-&#x53C2;&#x8003;\" class=\"headerlink\" title=\"&#x4E09;. &#x53C2;&#x8003;\"></a>&#x4E09;. &#x53C2;&#x8003;</h2><ol>\n<li><a href=\"http://progrium.com/blog/2014/07/29/understanding-modern-service-discovery-with-docker/\">Understanding Modern Service Discovery with Docker</a></li>\n<li><a href=\"http://www.eurekao.com/build-paas-platform-base-on-docker/\">&#x57FA;&#x4E8E;Docker&#x6280;&#x672F;&#x6784;&#x5EFA;PaaS&#x4E91;&#x5E73;&#x53F0;</a></li>\n<li><a href=\"http://tech.youzan.com/haunt-youzan-service-discovery/\">Youzan &#x670D;&#x52A1;&#x53D1;&#x73B0;&#x6982;&#x8FF0;</a></li>\n</ol>"},{"title":"MongoDB","date":"2016-09-11T02:00:00.000Z","_content":"\n**:** MongoDB(Inverted Index)[MapReduce](https://docs.mongodb.com/manual/core/map-reduce/)[Aggregation Pipeline](https://docs.mongodb.com/manual/core/aggregation-pipeline/)\n\n**GitHub:**\n\n- [kiwenlau/mongodb-inverted-index](https://github.com/kiwenlau/mongodb-inverted-index)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-09-11](http://kiwenlau.com/2016/09/11/mongodb-inverted-index/)\n\n<img src=\"mongodb-inverted-index/mongodb-inverted-index.png\" width = \"500\"/>\n\n## . \n\n(Inverted Index)[](https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95):\n\n> \n\n...\n\nKey(url)Value(word):\n\n```\n<url1, [word2, word3]>\n<url2, [word2]>\n<url3, [word1, word2]>\n```\n\n\n\n(word)Key(url)Value:\n\n```\n<word1, [url3]>\n<word2, [ur1, url2, url3]>\n<word3, [url1]>\n```\n\nword2: [ur1, url2, url3]\n\n**KeyValue**\n\n## . \n\n[MongoDB](https://www.mongodb.com/): (database)(collection)(document): (database), (table)(row)MongDBJSONmovie:\n\n```\n{\n\t\"_id\" : ObjectId(\"57d02d60b128567fc130287d\"),\n\t\"movie\" : \"Pride & Prejudice\",\n\t\"starList\" : [\n\t\t\"Keira Knightley\",\n\t\t\"Matthew Macfadyen\"\n\t],\n\t\"__v\" : 0\n}\n```\n\n4:\n\n- _id: IDMongoDB\n- __v: MongoDBNodeJSMongoose\n- movie: \n- starList:  \n\n[](https://movie.douban.com/subject/1418200/)[](https://movie.douban.com/celebrity/1054448/)\n\n`_id``__v`movie:\n\n```\n{\n    \"movie\": \"Pride & Prejudice\",\n    \"starList\": [\"Keira Knightley\", \"Matthew Macfadyen\"]\n},\n{\n    \"movie\": \"Begin Again\",\n    \"starList\": [\"Keira Knightley\", \"Mark Ruffalo\"]\n},\n{\n    \"movie\": \"The Imitation Game\",\n    \"starList\": [\"Keira Knightley\", \"Benedict Cumberbatch\"]\n}\n```\n\nKey(movie)Value(starList)\n\nKeira KnightleyNodeJS[](https://github.com/kiwenlau/mongodb-inverted-index/blob/master/search.js):\n\n```\nMovie.find(\n{\n    starList: \"Keira Knightley\"\n},\n{\n    _id: 0,\n    movie: 1\n}, function(err, results)\n{\n    if (err)\n    {\n        console.log(err);\n        process.exit(1);\n    }\n    console.log(\"search movie success:\\n\");\n    console.log(JSON.stringify(results, null, 4));\n    process.exit(0);\n});\n```\n\n- MongoDBNodeJS[Mongoose](http://mongoosejs.com/)MongoDB Shell\n\n:\n\n- movie\n- startList\n\nMongoDB[MapReduce](https://docs.mongodb.com/manual/core/map-reduce/)[Aggregation Pipeline](https://docs.mongodb.com/manual/core/aggregation-pipeline/)\n\n\n##  MapReduce\n\n[MapReduce](http://research.google.com/archive/mapreduce.html)MapReducePageRank()\n\nMapReduceMapReduce: MapReduce\n\n- Map`<k1, v1>``<k2, v2>`\n- MapReduce`<k2, v2>`Key`<k2, list(v2)>`\n- Reduce`<k2, list(v2)>`Value`<k2, v3>`\n\nMapReduceNodeJS[](https://github.com/kiwenlau/mongodb-inverted-index/blob/master/mapreduce.js):\n\n```\nvar option = {};\n\noption.map = function()\n{\n    var movie = this.movie;\n    this.starList.forEach(function(star)\n    {\n        emit(star,\n        {\n            movieList: [movie]\n        });\n    });\n};\n\noption.reduce = function(key, values)\n{\n    var movieList = [];\n    values.forEach(function(value)\n    {\n        movieList.push(value.movieList[0]);\n    });\n    return {\n        movieList: movieList\n    };\n};\n\nMovie.mapReduce(option, function(err, results)\n{\n    if (err)\n    {\n        console.log(err);\n        process.exit(1);\n    }\n    console.log(\"create inverted index success:\\n\");\n    console.log(JSON.stringify(results, null, 4));\n    process.exit(0);\n});\n```\n\n:\n\n- MapMoviethismoviestarList`<movie, starList>`MapstarListstart`<star, movieList>`KeyValuestarListmovieListmovie\n- MongoDBMapReduce`<star, movieList>`star`<star, list(movieList)>`\n- Reduce`<star, list(movieList)>`starkeylist(movieList)valuesReduceReducelist(movieList)`<star, movieList>`movieListstarmovie\n\nMapReduceValue`{ movieList: movieList }``movieList`MongoDBMapReduceReducemovieList\n\n:\n\n```\n[\n    {\n        \"_id\": \"Benedict Cumberbatch\",\n        \"value\": {\n            \"movieList\": [\n                \"The Imitation Game\"\n            ]\n        }\n    },\n    {\n        \"_id\": \"Keira Knightley\",\n        \"value\": {\n            \"movieList\": [\n                \"Pride & Prejudice\",\n                \"Begin Again\",\n                \"The Imitation Game\"\n            ]\n        }\n    },\n    {\n        \"_id\": \"Mark Ruffalo\",\n        \"value\": {\n            \"movieList\": [\n                \"Begin Again\"\n            ]\n        }\n    },\n    {\n        \"_id\": \"Matthew Macfadyen\",\n        \"value\": {\n            \"movieList\": [\n                \"Pride & Prejudice\"\n            ]\n        }\n    }\n]\n```\n\n## . Aggregation Pipeline\n\n[Aggregation Pipeline](https://docs.mongodb.com/manual/core/aggregation-pipeline/)MongoDB\n\nAggregation Pipeline[](https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/)Linux\n\nAggregation PipelineNodeJS[](https://github.com/kiwenlau/mongodb-inverted-index/blob/master/aggregation Pipeline.js):\n\n```\nMovie.aggregate([\n{\n    \"$unwind\": \"$starList\"\n},\n{\n    \"$group\":\n    {\n        \"_id\": \"$starList\",\n        \"movieList\":\n        {\n            \"$push\": \"$movie\"\n        }\n    }\n},\n{\n    \"$project\":\n    {\n        \"_id\": 0,\n        \"star\": \"$_id\",\n        \"movieList\": 1\n    }\n}], function(err, results)\n{\n    if (err)\n    {\n        console.log(err);\n        process.exit(1);\n    }\n    console.log(\"create inverted index success:\\n\");\n    console.log(JSON.stringify(results, null, 4));\n    process.exit(0);\n});\n```\n\n:\n\n- $unwind: starList(`_id``__v`):\n\n```\n[\n    {\n        \"movie\": \"Pride & Prejudice\",\n        \"starList\": \"Keira Knightley\"\n    },\n    {\n        \"movie\": \"Pride & Prejudice\",\n        \"starList\": \"Matthew Macfadyen\"\n    },\n    {\n        \"movie\": \"Begin Again\",\n        \"starList\": \"Keira Knightley\"\n    },\n    {\n        \"movie\": \"Begin Again\",\n        \"starList\": \"Mark Ruffalo\"\n    },\n    {\n        \"movie\": \"The Imitation Game\",\n        \"starList\": \"Keira Knightley\"\n    },\n    {\n        \"movie\": \"The Imitation Game\",\n        \"starList\": \"Benedict Cumberbatch\"\n    }\n]\n```\n\n- $group: starListmoviemovieList:\n\n```\n[\n    {\n        \"_id\": \"Benedict Cumberbatch\",\n        \"movieList\": [\n            \"The Imitation Game\"\n        ]\n    },\n    {\n        \"_id\": \"Matthew Macfadyen\",\n        \"movieList\": [\n            \"Pride & Prejudice\"\n        ]\n    },\n    {\n        \"_id\": \"Mark Ruffalo\",\n        \"movieList\": [\n            \"Begin Again\"\n        ]\n    },\n    {\n        \"_id\": \"Keira Knightley\",\n        \"movieList\": [\n            \"Pride & Prejudice\",\n            \"Begin Again\",\n            \"The Imitation Game\"\n        ]\n    }\n]\n```\n","source":"_posts/2016/09/11/mongodb-inverted-index.md","raw":"title: MongoDB\n\ndate: 2016-09-11 10:00\n\ntags: [MongoDB]\n\n---\n\n**:** MongoDB(Inverted Index)[MapReduce](https://docs.mongodb.com/manual/core/map-reduce/)[Aggregation Pipeline](https://docs.mongodb.com/manual/core/aggregation-pipeline/)\n\n**GitHub:**\n\n- [kiwenlau/mongodb-inverted-index](https://github.com/kiwenlau/mongodb-inverted-index)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-09-11](http://kiwenlau.com/2016/09/11/mongodb-inverted-index/)\n\n<img src=\"mongodb-inverted-index/mongodb-inverted-index.png\" width = \"500\"/>\n\n## . \n\n(Inverted Index)[](https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95):\n\n> \n\n...\n\nKey(url)Value(word):\n\n```\n<url1, [word2, word3]>\n<url2, [word2]>\n<url3, [word1, word2]>\n```\n\n\n\n(word)Key(url)Value:\n\n```\n<word1, [url3]>\n<word2, [ur1, url2, url3]>\n<word3, [url1]>\n```\n\nword2: [ur1, url2, url3]\n\n**KeyValue**\n\n## . \n\n[MongoDB](https://www.mongodb.com/): (database)(collection)(document): (database), (table)(row)MongDBJSONmovie:\n\n```\n{\n\t\"_id\" : ObjectId(\"57d02d60b128567fc130287d\"),\n\t\"movie\" : \"Pride & Prejudice\",\n\t\"starList\" : [\n\t\t\"Keira Knightley\",\n\t\t\"Matthew Macfadyen\"\n\t],\n\t\"__v\" : 0\n}\n```\n\n4:\n\n- _id: IDMongoDB\n- __v: MongoDBNodeJSMongoose\n- movie: \n- starList:  \n\n[](https://movie.douban.com/subject/1418200/)[](https://movie.douban.com/celebrity/1054448/)\n\n`_id``__v`movie:\n\n```\n{\n    \"movie\": \"Pride & Prejudice\",\n    \"starList\": [\"Keira Knightley\", \"Matthew Macfadyen\"]\n},\n{\n    \"movie\": \"Begin Again\",\n    \"starList\": [\"Keira Knightley\", \"Mark Ruffalo\"]\n},\n{\n    \"movie\": \"The Imitation Game\",\n    \"starList\": [\"Keira Knightley\", \"Benedict Cumberbatch\"]\n}\n```\n\nKey(movie)Value(starList)\n\nKeira KnightleyNodeJS[](https://github.com/kiwenlau/mongodb-inverted-index/blob/master/search.js):\n\n```\nMovie.find(\n{\n    starList: \"Keira Knightley\"\n},\n{\n    _id: 0,\n    movie: 1\n}, function(err, results)\n{\n    if (err)\n    {\n        console.log(err);\n        process.exit(1);\n    }\n    console.log(\"search movie success:\\n\");\n    console.log(JSON.stringify(results, null, 4));\n    process.exit(0);\n});\n```\n\n- MongoDBNodeJS[Mongoose](http://mongoosejs.com/)MongoDB Shell\n\n:\n\n- movie\n- startList\n\nMongoDB[MapReduce](https://docs.mongodb.com/manual/core/map-reduce/)[Aggregation Pipeline](https://docs.mongodb.com/manual/core/aggregation-pipeline/)\n\n\n##  MapReduce\n\n[MapReduce](http://research.google.com/archive/mapreduce.html)MapReducePageRank()\n\nMapReduceMapReduce: MapReduce\n\n- Map`<k1, v1>``<k2, v2>`\n- MapReduce`<k2, v2>`Key`<k2, list(v2)>`\n- Reduce`<k2, list(v2)>`Value`<k2, v3>`\n\nMapReduceNodeJS[](https://github.com/kiwenlau/mongodb-inverted-index/blob/master/mapreduce.js):\n\n```\nvar option = {};\n\noption.map = function()\n{\n    var movie = this.movie;\n    this.starList.forEach(function(star)\n    {\n        emit(star,\n        {\n            movieList: [movie]\n        });\n    });\n};\n\noption.reduce = function(key, values)\n{\n    var movieList = [];\n    values.forEach(function(value)\n    {\n        movieList.push(value.movieList[0]);\n    });\n    return {\n        movieList: movieList\n    };\n};\n\nMovie.mapReduce(option, function(err, results)\n{\n    if (err)\n    {\n        console.log(err);\n        process.exit(1);\n    }\n    console.log(\"create inverted index success:\\n\");\n    console.log(JSON.stringify(results, null, 4));\n    process.exit(0);\n});\n```\n\n:\n\n- MapMoviethismoviestarList`<movie, starList>`MapstarListstart`<star, movieList>`KeyValuestarListmovieListmovie\n- MongoDBMapReduce`<star, movieList>`star`<star, list(movieList)>`\n- Reduce`<star, list(movieList)>`starkeylist(movieList)valuesReduceReducelist(movieList)`<star, movieList>`movieListstarmovie\n\nMapReduceValue`{ movieList: movieList }``movieList`MongoDBMapReduceReducemovieList\n\n:\n\n```\n[\n    {\n        \"_id\": \"Benedict Cumberbatch\",\n        \"value\": {\n            \"movieList\": [\n                \"The Imitation Game\"\n            ]\n        }\n    },\n    {\n        \"_id\": \"Keira Knightley\",\n        \"value\": {\n            \"movieList\": [\n                \"Pride & Prejudice\",\n                \"Begin Again\",\n                \"The Imitation Game\"\n            ]\n        }\n    },\n    {\n        \"_id\": \"Mark Ruffalo\",\n        \"value\": {\n            \"movieList\": [\n                \"Begin Again\"\n            ]\n        }\n    },\n    {\n        \"_id\": \"Matthew Macfadyen\",\n        \"value\": {\n            \"movieList\": [\n                \"Pride & Prejudice\"\n            ]\n        }\n    }\n]\n```\n\n## . Aggregation Pipeline\n\n[Aggregation Pipeline](https://docs.mongodb.com/manual/core/aggregation-pipeline/)MongoDB\n\nAggregation Pipeline[](https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/)Linux\n\nAggregation PipelineNodeJS[](https://github.com/kiwenlau/mongodb-inverted-index/blob/master/aggregation Pipeline.js):\n\n```\nMovie.aggregate([\n{\n    \"$unwind\": \"$starList\"\n},\n{\n    \"$group\":\n    {\n        \"_id\": \"$starList\",\n        \"movieList\":\n        {\n            \"$push\": \"$movie\"\n        }\n    }\n},\n{\n    \"$project\":\n    {\n        \"_id\": 0,\n        \"star\": \"$_id\",\n        \"movieList\": 1\n    }\n}], function(err, results)\n{\n    if (err)\n    {\n        console.log(err);\n        process.exit(1);\n    }\n    console.log(\"create inverted index success:\\n\");\n    console.log(JSON.stringify(results, null, 4));\n    process.exit(0);\n});\n```\n\n:\n\n- $unwind: starList(`_id``__v`):\n\n```\n[\n    {\n        \"movie\": \"Pride & Prejudice\",\n        \"starList\": \"Keira Knightley\"\n    },\n    {\n        \"movie\": \"Pride & Prejudice\",\n        \"starList\": \"Matthew Macfadyen\"\n    },\n    {\n        \"movie\": \"Begin Again\",\n        \"starList\": \"Keira Knightley\"\n    },\n    {\n        \"movie\": \"Begin Again\",\n        \"starList\": \"Mark Ruffalo\"\n    },\n    {\n        \"movie\": \"The Imitation Game\",\n        \"starList\": \"Keira Knightley\"\n    },\n    {\n        \"movie\": \"The Imitation Game\",\n        \"starList\": \"Benedict Cumberbatch\"\n    }\n]\n```\n\n- $group: starListmoviemovieList:\n\n```\n[\n    {\n        \"_id\": \"Benedict Cumberbatch\",\n        \"movieList\": [\n            \"The Imitation Game\"\n        ]\n    },\n    {\n        \"_id\": \"Matthew Macfadyen\",\n        \"movieList\": [\n            \"Pride & Prejudice\"\n        ]\n    },\n    {\n        \"_id\": \"Mark Ruffalo\",\n        \"movieList\": [\n            \"Begin Again\"\n        ]\n    },\n    {\n        \"_id\": \"Keira Knightley\",\n        \"movieList\": [\n            \"Pride & Prejudice\",\n            \"Begin Again\",\n            \"The Imitation Game\"\n        ]\n    }\n]\n```\n","slug":"2016/09/11/mongodb-inverted-index","published":1,"updated":"2016-11-07T01:32:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmg000q71fyys9tx3zq","content":"<p><strong>&#x6458;&#x8981;:</strong> &#x4E3A;MongoDB&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;(Inverted Index)&#xFF0C;&#x7136;&#x540E;&#x7F13;&#x5B58;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x63D0;&#x5347;&#x641C;&#x7D22;&#x6027;&#x80FD;&#x3002;&#x672C;&#x6587;&#x5C06;&#x901A;&#x8FC7;&#x4E3A;&#x7535;&#x5F71;&#x6570;&#x636E;&#x6784;&#x5EFA;&#x6F14;&#x5458;&#x7D22;&#x5F15;&#xFF0C;&#x4ECB;&#x7ECD;&#x4E24;&#x79CD;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;<a href=\"https://docs.mongodb.com/manual/core/map-reduce/\" target=\"_blank\" rel=\"external\">MapReduce</a>&#x548C;<a href=\"https://docs.mongodb.com/manual/core/aggregation-pipeline/\" target=\"_blank\" rel=\"external\">Aggregation Pipeline</a>&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/mongodb-inverted-index\" target=\"_blank\" rel=\"external\">kiwenlau/mongodb-inverted-index</a></li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/09/11/mongodb-inverted-index/\">2016-09-11</a></li>\n</ul>\n<p><img src=\"/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-&#x5012;&#x6392;&#x7D22;&#x5F15;\"><a href=\"#&#x4E00;-&#x5012;&#x6392;&#x7D22;&#x5F15;\" class=\"headerlink\" title=\"&#x4E00;. &#x5012;&#x6392;&#x7D22;&#x5F15;\"></a>&#x4E00;. &#x5012;&#x6392;&#x7D22;&#x5F15;</h2><p>&#x5012;&#x6392;&#x7D22;&#x5F15;(Inverted Index)&#xFF0C;&#x4E5F;&#x79F0;&#x4E3A;&#x53CD;&#x5411;&#x7D22;&#x5F15;&#xFF0C;<a href=\"https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95\" target=\"_blank\" rel=\"external\">&#x7EF4;&#x57FA;&#x767E;&#x79D1;</a>&#x7684;&#x5B9A;&#x4E49;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<blockquote>\n<p>&#x662F;&#x4E00;&#x79CD;&#x7D22;&#x5F15;&#x65B9;&#x6CD5;&#xFF0C;&#x88AB;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x5728;&#x5168;&#x6587;&#x641C;&#x7D22;&#x4E0B;&#x67D0;&#x4E2A;&#x5355;&#x8BCD;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x6216;&#x8005;&#x4E00;&#x7EC4;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x7684;&#x6620;&#x5C04;&#x3002;</p>\n</blockquote>\n<p>&#x8FD9;&#x4E2A;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5B66;&#x672F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6BD4;&#x8F83;&#x53CD;&#x4EBA;&#x7C7B;&#xFF0C;&#x5FFD;&#x7565;&#x2026;</p>\n<p>&#x5012;&#x6392;&#x7D22;&#x5F15;&#x662F;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4E2D;&#x7684;&#x6838;&#x5FC3;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7684;&#x722C;&#x866B;&#x83B7;&#x53D6;&#x7684;&#x7F51;&#x9875;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x89C6;&#x4E3A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;Key&#x662F;&#x7F51;&#x9875;&#x5730;&#x5740;(url)&#xFF0C;&#x800C;Value&#x662F;&#x7F51;&#x9875;&#x5185;&#x5BB9;&#x3002;&#x7F51;&#x9875;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x7531;&#x5F88;&#x591A;&#x5173;&#x952E;&#x8BCD;(word)&#x7EC4;&#x6210;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x89C6;&#x4E3A;&#x5173;&#x952E;&#x8BCD;&#x6570;&#x7EC4;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x722C;&#x866B;&#x83B7;&#x53D6;&#x7684;&#x7F51;&#x9875;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8868;&#x793A;:</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;url1, <span class=\"string\">[word2, word3]</span>&gt;</div><div class=\"line\">&lt;url2, <span class=\"string\">[word2]</span>&gt;</div><div class=\"line\">&lt;url3, <span class=\"string\">[word1, word2]</span>&gt;</div></pre></td></tr></table></figure>\n<p>&#x4F46;&#x662F;&#xFF0C;&#x7528;&#x6237;&#x662F;&#x901A;&#x8FC7;&#x5173;&#x952E;&#x8BCD;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x539F;&#x59CB;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x7684;&#x8BDD;&#x5219;&#x9700;&#x8981;&#x904D;&#x5386;&#x6240;&#x6709;&#x952E;&#x503C;&#x5BF9;&#x4E2D;&#x7684;&#x5173;&#x952E;&#x8BCD;&#x6570;&#x7EC4;&#xFF0C;&#x6548;&#x7387;&#x662F;&#x975E;&#x5E38;&#x4F4E;&#x7684;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x7528;&#x4E8E;&#x641C;&#x7D22;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5E94;&#x8BE5;&#x4EE5;&#x5173;&#x952E;&#x8BCD;(word)&#x4E3A;Key&#xFF0C;&#x4EE5;&#x7F51;&#x9875;&#x5730;&#x5740;(url)&#x4E3A;Value:</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;word1, <span class=\"string\">[url3]</span>&gt;</div><div class=\"line\">&lt;word2, <span class=\"string\">[ur1, url2, url3]</span>&gt;</div><div class=\"line\">&lt;word3, <span class=\"string\">[url1]</span>&gt;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x67E5;&#x8BE2;&#x5173;&#x952E;&#x8BCD;word2&#xFF0C;&#x7ACB;&#x5373;&#x80FD;&#x591F;&#x83B7;&#x53D6;&#x7ED3;&#x679C;: [ur1, url2, url3]&#x3002;</p>\n<p>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;<strong>&#x5012;&#x6392;&#x7D22;&#x5F15;&#x5C31;&#x662F;&#x628A;Key&#x4E0E;Value&#x5BF9;&#x8C03;&#x4E4B;&#x540E;&#x7684;&#x7D22;&#x5F15;</strong>&#xFF0C;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;&#x76EE;&#x7684;&#x662F;&#x63D0;&#x5347;&#x641C;&#x7D22;&#x6027;&#x80FD;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x6D4B;&#x8BD5;&#x6570;&#x636E;\"><a href=\"#&#x4E8C;-&#x6D4B;&#x8BD5;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x4E8C;. &#x6D4B;&#x8BD5;&#x6570;&#x636E;\"></a>&#x4E8C;. &#x6D4B;&#x8BD5;&#x6570;&#x636E;</h2><p><a href=\"https://www.mongodb.com/\" target=\"_blank\" rel=\"external\">MongoDB</a>&#x662F;&#x6587;&#x6863;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5176;&#x6570;&#x636E;&#x6709;&#x4E09;&#x4E2A;&#x5C42;&#x7EA7;: &#x6570;&#x636E;&#x5E93;(database)&#xFF0C;&#x96C6;&#x5408;(collection)&#x548C;&#x6587;&#x6863;(document)&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x4E09;&#x4E2A;&#x5C42;&#x7EA7;&#x7684;: &#x6570;&#x636E;&#x5E93;(database), &#x8868;(table)&#xFF0C;&#x884C;(row)&#x3002;MongDB&#x4E2D;&#x6BCF;&#x4E2A;&#x7684;&#x6587;&#x6863;&#x662F;&#x4E00;&#x4E2A;JSON&#x6587;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x672C;&#x6587;&#x4F7F;&#x7528;&#x7684;movie&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x5982;&#x4E0B;&#x6240;&#x793A;:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">\t<span class=\"attr\">&quot;_id&quot;</span> : ObjectId(<span class=\"string\">&quot;57d02d60b128567fc130287d&quot;</span>),</div><div class=\"line\">\t<span class=\"attr\">&quot;movie&quot;</span> : <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">\t<span class=\"attr\">&quot;starList&quot;</span> : [</div><div class=\"line\">\t\t<span class=\"string\">&quot;Keira Knightley&quot;</span>,</div><div class=\"line\">\t\t<span class=\"string\">&quot;Matthew Macfadyen&quot;</span></div><div class=\"line\">\t],</div><div class=\"line\">\t<span class=\"attr\">&quot;__v&quot;</span> : <span class=\"number\">0</span></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8BE5;&#x6587;&#x6863;&#x4E00;&#x5171;&#x6709;4&#x4E2A;&#x5C5E;&#x6027;:</p>\n<ul>\n<li>_id: &#x6587;&#x6863;ID&#xFF0C;&#x7531;MongoDB&#x81EA;&#x52A8;&#x751F;&#x6210;&#x3002;</li>\n<li>__v: &#x6587;&#x6863;&#x7248;&#x672C;&#xFF0C;&#x7531;MongoDB&#x7684;NodeJS&#x63A5;&#x53E3;Mongoose&#x81EA;&#x52A8;&#x751F;&#x6210;&#x3002;</li>\n<li>movie: &#x7535;&#x5F71;&#x540D;&#x79F0;&#x3002;</li>\n<li>starList: &#x6F14;&#x5458;&#x5217;&#x8868;&#x3002; </li>\n</ul>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x6863;&#x8868;&#x793A;&#x7535;&#x5F71;<a href=\"https://movie.douban.com/subject/1418200/\" target=\"_blank\" rel=\"external\">&#x300A;&#x50B2;&#x6162;&#x4E0E;&#x504F;&#x89C1;&#x300B;</a>&#xFF0C;&#x7531;&#x5973;&#x795E;<a href=\"https://movie.douban.com/celebrity/1054448/\" target=\"_blank\" rel=\"external\">&#x51EF;&#x62C9;&#xB7;&#x5948;&#x7279;&#x8389;</a>&#x4E3B;&#x6F14;&#x3002;</p>\n<p>&#x5FFD;&#x7565;<code>_id</code>&#x4E0E;<code>__v</code>&#xFF0C;movie&#x96C6;&#x5408;&#x7684;&#x6570;&#x636E;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;starList&quot;</span>: [<span class=\"string\">&quot;Keira Knightley&quot;</span>, <span class=\"string\">&quot;Matthew Macfadyen&quot;</span>]</div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;starList&quot;</span>: [<span class=\"string\">&quot;Keira Knightley&quot;</span>, <span class=\"string\">&quot;Mark Ruffalo&quot;</span>]</div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;movie&quot;</span>: <span class=\"string\">&quot;The Imitation Game&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;starList&quot;</span>: [<span class=\"string\">&quot;Keira Knightley&quot;</span>, <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span>]</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;Key&#x4E3A;&#x7535;&#x5F71;&#x540D;&#x79F0;(movie)&#xFF0C;&#x800C;Value&#x4E3A;&#x6F14;&#x5458;&#x5217;&#x8868;(starList)&#x3002;</p>\n<p>&#x8FD9;&#x65F6;&#x67E5;&#x8BE2;Keira Knightley&#x6240;&#x4E3B;&#x6F14;&#x7684;&#x7535;&#x5F71;&#x7684;NodeJS<a href=\"https://github.com/kiwenlau/mongodb-inverted-index/blob/master/search.js\" target=\"_blank\" rel=\"external\">&#x4EE3;&#x7801;</a>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">Movie.find(</div><div class=\"line\">{</div><div class=\"line\">    starList: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    _id: <span class=\"number\">0</span>,</div><div class=\"line\">    movie: <span class=\"number\">1</span></div><div class=\"line\">}, <span class=\"keyword\">function</span>(err, results)</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        console.log(err);</div><div class=\"line\">        process.<span class=\"keyword\">exit</span>(<span class=\"number\">1</span>);</div><div class=\"line\">    }</div><div class=\"line\">    console.log(<span class=\"string\">&quot;search movie success:\\n&quot;</span>);</div><div class=\"line\">    console.log(JSON.stringify(results, null, <span class=\"number\">4</span>));</div><div class=\"line\">    process.<span class=\"keyword\">exit</span>(<span class=\"number\">0</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x6CE8;&#xFF1A;&#x672C;&#x6587;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#x4E86;MongoDB&#x7684;NodeJS&#x63A5;&#x53E3;<a href=\"http://mongoosejs.com/\" target=\"_blank\" rel=\"external\">Mongoose</a>&#xFF0C;&#x5B83;&#x4E0E;MongoDB Shell&#x7684;&#x63A5;&#x53E3;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#x3002;</li>\n</ul>\n<p>&#x4EE3;&#x7801;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x662F;&#x6570;&#x636E;&#x91CF;&#x5927;&#x65F6;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x4F1A;&#x5F88;&#x5DEE;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x67E5;&#x8BE2;&#x9700;&#x8981;:</p>\n<ul>\n<li>&#x904D;&#x5386;&#x6574;&#x4E2A;movie&#x96C6;&#x5408;&#x7684;&#x6240;&#x6709;&#x6587;&#x6863;</li>\n<li>&#x904D;&#x5386;&#x6BCF;&#x4E2A;&#x6587;&#x6863;&#x7684;startList&#x6570;&#x7EC4;</li>\n</ul>\n<p>&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x5730;&#x63D0;&#x5347;&#x641C;&#x7D22;&#x6027;&#x80FD;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4ECB;&#x7ECD;MongoDB&#x4E2D;&#x4E24;&#x79CD;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;<a href=\"https://docs.mongodb.com/manual/core/map-reduce/\" target=\"_blank\" rel=\"external\">MapReduce</a>&#x4E0E;<a href=\"https://docs.mongodb.com/manual/core/aggregation-pipeline/\" target=\"_blank\" rel=\"external\">Aggregation Pipeline</a>&#x3002;</p>\n<h2 id=\"&#x4E09;-MapReduce\"><a href=\"#&#x4E09;-MapReduce\" class=\"headerlink\" title=\"&#x4E09; MapReduce\"></a>&#x4E09; MapReduce</h2><p><a href=\"http://research.google.com/archive/mapreduce.html\" target=\"_blank\" rel=\"external\">MapReduce</a>&#x662F;&#x7531;&#x8C37;&#x6B4C;&#x63D0;&#x51FA;&#x7684;&#x7F16;&#x7A0B;&#x6A21;&#x578B;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x591A;&#x79CD;&#x5927;&#x6570;&#x636E;&#x5904;&#x7406;&#x573A;&#x666F;&#xFF0C;&#x5728;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4E2D;&#xFF0C;MapReduce&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x7F51;&#x9875;&#x6570;&#x636E;&#x7684;&#x5012;&#x6392;&#x7D22;&#x5F15;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x7F16;&#x5199;&#x7F51;&#x9875;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;PageRank(&#x7531;&#x8C37;&#x6B4C;&#x521B;&#x59CB;&#x4EBA;&#x4F69;&#x5947;&#x548C;&#x5E03;&#x6797;&#x63D0;&#x51FA;)&#x3002;</p>\n<p>MapReduce&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E0E;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x5747;&#x4E3A;&#x952E;&#x503C;&#x5BF9;&#x3002;MapReduce&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x51FD;&#x6570;: Map&#x4E0E;Reduce&#x3002;</p>\n<ul>\n<li>Map&#x51FD;&#x6570;&#x5C06;&#x8F93;&#x5165;&#x952E;&#x503C;<code>&lt;k1, v1&gt;</code>&#x5BF9;&#x8FDB;&#x884C;&#x53D8;&#x6362;&#xFF0C;&#x8F93;&#x51FA;&#x4E2D;&#x95F4;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, v2&gt;</code>&#x3002;</li>\n<li>MapReduce&#x6846;&#x67B6;&#x4F1A;&#x81EA;&#x52A8;&#x5BF9;&#x4E2D;&#x95F4;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, v2&gt;</code>&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;Key&#x76F8;&#x540C;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x88AB;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, list(v2)&gt;</code>&#x3002;</li>\n<li>Reduce&#x51FD;&#x6570;&#x5BF9;<code>&lt;k2, list(v2)&gt;</code>&#x7684;Value&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x751F;&#x6210;&#x7ED3;&#x679C;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, v3&gt;</code>&#x3002;</li>\n</ul>\n<p>&#x4F7F;&#x7528;MapReduce&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;NodeJS<a href=\"https://github.com/kiwenlau/mongodb-inverted-index/blob/master/mapreduce.js\" target=\"_blank\" rel=\"external\">&#x4EE3;&#x7801;</a>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> option = {};</div><div class=\"line\"></div><div class=\"line\">option.map = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> movie = <span class=\"keyword\">this</span>.movie;</div><div class=\"line\">    <span class=\"keyword\">this</span>.starList.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">star</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        emit(star,</div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"attr\">movieList</span>: [movie]</div><div class=\"line\">        });</div><div class=\"line\">    });</div><div class=\"line\">};</div><div class=\"line\"></div><div class=\"line\">option.reduce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, values</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> movieList = [];</div><div class=\"line\">    values.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        movieList.push(value.movieList[<span class=\"number\">0</span>]);</div><div class=\"line\">    });</div><div class=\"line\">    <span class=\"keyword\">return</span> {</div><div class=\"line\">        <span class=\"attr\">movieList</span>: movieList</div><div class=\"line\">    };</div><div class=\"line\">};</div><div class=\"line\"></div><div class=\"line\">Movie.mapReduce(option, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, results</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">        process.exit(<span class=\"number\">1</span>);</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;create inverted index success:\\n&quot;</span>);</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(results, <span class=\"literal\">null</span>, <span class=\"number\">4</span>));</div><div class=\"line\">    process.exit(<span class=\"number\">0</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x4EE3;&#x7801;&#x89E3;&#x91CA;:</p>\n<ul>\n<li>Map&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x662F;Movie&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5404;&#x4E2A;&#x6587;&#x6863;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x7528;this&#x8868;&#x793A;&#x3002;&#x6587;&#x6863;&#x7684;movie&#x4E0E;starList&#x5C5E;&#x6027;&#x6784;&#x6210;&#x952E;&#x503C;&#x5BF9;<code>&lt;movie, starList&gt;</code>&#x3002;Map&#x51FD;&#x6570;&#x904D;&#x5386;starList&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;start&#x751F;&#x6210;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, movieList&gt;</code>&#x3002;&#x8FD9;&#x65F6;Key&#x4E0E;Value&#x8FDB;&#x884C;&#x4E86;&#x5BF9;&#x8C03;&#xFF0C;&#x4E14;starList&#x88AB;&#x62C6;&#x5206;&#x4E86;&#xFF0C;movieList&#x4EC5;&#x5305;&#x542B;&#x5355;&#x4E2A;movie&#x3002;</li>\n<li>MongoDB&#x7684;MapReduce&#x6267;&#x884C;&#x6846;&#x67B6;&#x5BF9;&#x6210;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, movieList&gt;</code>&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;star&#x76F8;&#x540C;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x88AB;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, list(movieList)&gt;</code>&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x662F;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x4F53;&#x73B0;&#x3002;</li>\n<li>Reduce&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x662F;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, list(movieList)&gt;</code>&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;star&#x5373;&#x4E3A;key&#xFF0C;&#x800C;list(movieList)&#x5373;&#x4E3A;values&#xFF0C;&#x4E24;&#x8005;&#x4E3A;Reduce&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x3002;Reduce&#x51FD;&#x6570;&#x5408;&#x5E76;list(movieList)&#xFF0C;&#x4ECE;&#x800C;&#x5F97;&#x5230;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, movieList&gt;</code>&#xFF0C;&#x6700;&#x7EC8;&#xFF0C;movieList&#x4E2D;&#x5C06;&#x5305;&#x542B;&#x8BE5;star&#x7684;&#x6240;&#x6709;movie&#x3002;</li>\n</ul>\n<p>&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;Map&#x51FD;&#x6570;&#x4E0E;Reduce&#x8FD4;&#x56DE;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4E2D;&#x7684;Value&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;<code>{ movieList: movieList }</code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6570;&#x7EC4;<code>movieList</code>&#xFF0C;&#x56E0;&#x6B64;&#x4EE3;&#x7801;&#x548C;&#x7ED3;&#x679C;&#x90FD;&#x663E;&#x5F97;&#x6BD4;&#x8F83;&#x5947;&#x602A;&#x3002;MongoDB&#x7684;MapReduce&#x6846;&#x67B6;&#x4E0D;&#x652F;&#x6301;Reduce&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x6570;&#x7EC4;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x80FD;&#x5C06;movieList&#x653E;&#x5728;&#x5BF9;&#x8C61;&#x91CC;&#x9762;&#x8FD4;&#x56DE;&#x3002;</p>\n<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">                <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">                <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Mark Ruffalo&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;Begin Again&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Matthew Macfadyen&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<h2 id=\"&#x56DB;-Aggregation-Pipeline\"><a href=\"#&#x56DB;-Aggregation-Pipeline\" class=\"headerlink\" title=\"&#x56DB;. Aggregation Pipeline\"></a>&#x56DB;. Aggregation Pipeline</h2><p><a href=\"https://docs.mongodb.com/manual/core/aggregation-pipeline/\" target=\"_blank\" rel=\"external\">Aggregation Pipeline</a>&#xFF0C;&#x4E2D;&#x6587;&#x79F0;&#x4F5C;&#x805A;&#x5408;&#x7BA1;&#x9053;&#xFF0C;&#x7528;&#x4E8E;&#x6C47;&#x603B;MongoDB&#x4E2D;&#x591A;&#x4E2A;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x3002;</p>\n<p>Aggregation Pipeline&#x8FDB;&#x884C;&#x5404;&#x79CD;<a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/\" target=\"_blank\" rel=\"external\">&#x805A;&#x5408;&#x64CD;&#x4F5C;</a>&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x5C06;&#x591A;&#x4E2A;&#x805A;&#x5408;&#x64CD;&#x4F5C;&#x7EC4;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;Linux&#x4E2D;&#x7684;&#x7BA1;&#x9053;&#x64CD;&#x4F5C;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4E0B;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x8F93;&#x5165;&#x3002;</p>\n<p>&#x4F7F;&#x7528;Aggregation Pipeline&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;NodeJS<a href=\"https://github.com/kiwenlau/mongodb-inverted-index/blob/master/aggregation Pipeline.js\" target=\"_blank\" rel=\"external\">&#x4EE3;&#x7801;</a>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">Movie.aggregate([</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;$unwind&quot;</span>: <span class=\"string\">&quot;$starList&quot;</span></div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;$group&quot;</span>:</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;$starList&quot;</span>,</div><div class=\"line\">        <span class=\"string\">&quot;movieList&quot;</span>:</div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"string\">&quot;$push&quot;</span>: <span class=\"string\">&quot;$movie&quot;</span></div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;$project&quot;</span>:</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"string\">&quot;star&quot;</span>: <span class=\"string\">&quot;$_id&quot;</span>,</div><div class=\"line\">        <span class=\"string\">&quot;movieList&quot;</span>: <span class=\"number\">1</span></div><div class=\"line\">    }</div><div class=\"line\">}], <span class=\"keyword\">function</span>(err, results)</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        console.log(err);</div><div class=\"line\">        process.<span class=\"keyword\">exit</span>(<span class=\"number\">1</span>);</div><div class=\"line\">    }</div><div class=\"line\">    console.log(<span class=\"string\">&quot;create inverted index success:\\n&quot;</span>);</div><div class=\"line\">    console.log(JSON.stringify(results, null, <span class=\"number\">4</span>));</div><div class=\"line\">    process.<span class=\"keyword\">exit</span>(<span class=\"number\">0</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x4EE3;&#x7801;&#x89E3;&#x91CA;:</p>\n<ul>\n<li>$unwind: &#x5C06;starList&#x62C6;&#x5206;&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;(&#x5FFD;&#x7565;<code>_id</code>&#x4E0E;<code>__v</code>)&#x4E3A;:</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Matthew Macfadyen&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Mark Ruffalo&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;The Imitation Game&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;The Imitation Game&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span></div><div class=\"line\">    }</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<ul>\n<li>$group: &#x6839;&#x636E;&#x6587;&#x6863;&#x7684;starList&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5206;&#x7EC4;&#x6587;&#x6863;&#x7684;movie&#x5C5E;&#x6027;&#x5408;&#x5E76;&#x4E3A;movieList&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;:</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Matthew Macfadyen&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Mark Ruffalo&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;Begin Again&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">            <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">            <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    }</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> &#x4E3A;MongoDB&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;(Inverted Index)&#xFF0C;&#x7136;&#x540E;&#x7F13;&#x5B58;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x63D0;&#x5347;&#x641C;&#x7D22;&#x6027;&#x80FD;&#x3002;&#x672C;&#x6587;&#x5C06;&#x901A;&#x8FC7;&#x4E3A;&#x7535;&#x5F71;&#x6570;&#x636E;&#x6784;&#x5EFA;&#x6F14;&#x5458;&#x7D22;&#x5F15;&#xFF0C;&#x4ECB;&#x7ECD;&#x4E24;&#x79CD;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;<a href=\"https://docs.mongodb.com/manual/core/map-reduce/\">MapReduce</a>&#x548C;<a href=\"https://docs.mongodb.com/manual/core/aggregation-pipeline/\">Aggregation Pipeline</a>&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/mongodb-inverted-index\">kiwenlau/mongodb-inverted-index</a></li>\n</ul>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/09/11/mongodb-inverted-index/\">2016-09-11</a></li>\n</ul>\n<p><img src=\"/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-&#x5012;&#x6392;&#x7D22;&#x5F15;\"><a href=\"#&#x4E00;-&#x5012;&#x6392;&#x7D22;&#x5F15;\" class=\"headerlink\" title=\"&#x4E00;. &#x5012;&#x6392;&#x7D22;&#x5F15;\"></a>&#x4E00;. &#x5012;&#x6392;&#x7D22;&#x5F15;</h2><p>&#x5012;&#x6392;&#x7D22;&#x5F15;(Inverted Index)&#xFF0C;&#x4E5F;&#x79F0;&#x4E3A;&#x53CD;&#x5411;&#x7D22;&#x5F15;&#xFF0C;<a href=\"https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95\">&#x7EF4;&#x57FA;&#x767E;&#x79D1;</a>&#x7684;&#x5B9A;&#x4E49;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<blockquote>\n<p>&#x662F;&#x4E00;&#x79CD;&#x7D22;&#x5F15;&#x65B9;&#x6CD5;&#xFF0C;&#x88AB;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x5728;&#x5168;&#x6587;&#x641C;&#x7D22;&#x4E0B;&#x67D0;&#x4E2A;&#x5355;&#x8BCD;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x6216;&#x8005;&#x4E00;&#x7EC4;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x7684;&#x6620;&#x5C04;&#x3002;</p>\n</blockquote>\n<p>&#x8FD9;&#x4E2A;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5B66;&#x672F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6BD4;&#x8F83;&#x53CD;&#x4EBA;&#x7C7B;&#xFF0C;&#x5FFD;&#x7565;&#x2026;</p>\n<p>&#x5012;&#x6392;&#x7D22;&#x5F15;&#x662F;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4E2D;&#x7684;&#x6838;&#x5FC3;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7684;&#x722C;&#x866B;&#x83B7;&#x53D6;&#x7684;&#x7F51;&#x9875;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x89C6;&#x4E3A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;Key&#x662F;&#x7F51;&#x9875;&#x5730;&#x5740;(url)&#xFF0C;&#x800C;Value&#x662F;&#x7F51;&#x9875;&#x5185;&#x5BB9;&#x3002;&#x7F51;&#x9875;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x7531;&#x5F88;&#x591A;&#x5173;&#x952E;&#x8BCD;(word)&#x7EC4;&#x6210;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x89C6;&#x4E3A;&#x5173;&#x952E;&#x8BCD;&#x6570;&#x7EC4;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x722C;&#x866B;&#x83B7;&#x53D6;&#x7684;&#x7F51;&#x9875;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8868;&#x793A;:</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;url1, <span class=\"string\">[word2, word3]</span>&gt;</div><div class=\"line\">&lt;url2, <span class=\"string\">[word2]</span>&gt;</div><div class=\"line\">&lt;url3, <span class=\"string\">[word1, word2]</span>&gt;</div></pre></td></tr></table></figure>\n<p>&#x4F46;&#x662F;&#xFF0C;&#x7528;&#x6237;&#x662F;&#x901A;&#x8FC7;&#x5173;&#x952E;&#x8BCD;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x539F;&#x59CB;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x7684;&#x8BDD;&#x5219;&#x9700;&#x8981;&#x904D;&#x5386;&#x6240;&#x6709;&#x952E;&#x503C;&#x5BF9;&#x4E2D;&#x7684;&#x5173;&#x952E;&#x8BCD;&#x6570;&#x7EC4;&#xFF0C;&#x6548;&#x7387;&#x662F;&#x975E;&#x5E38;&#x4F4E;&#x7684;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x7528;&#x4E8E;&#x641C;&#x7D22;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5E94;&#x8BE5;&#x4EE5;&#x5173;&#x952E;&#x8BCD;(word)&#x4E3A;Key&#xFF0C;&#x4EE5;&#x7F51;&#x9875;&#x5730;&#x5740;(url)&#x4E3A;Value:</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;word1, <span class=\"string\">[url3]</span>&gt;</div><div class=\"line\">&lt;word2, <span class=\"string\">[ur1, url2, url3]</span>&gt;</div><div class=\"line\">&lt;word3, <span class=\"string\">[url1]</span>&gt;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x67E5;&#x8BE2;&#x5173;&#x952E;&#x8BCD;word2&#xFF0C;&#x7ACB;&#x5373;&#x80FD;&#x591F;&#x83B7;&#x53D6;&#x7ED3;&#x679C;: [ur1, url2, url3]&#x3002;</p>\n<p>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;<strong>&#x5012;&#x6392;&#x7D22;&#x5F15;&#x5C31;&#x662F;&#x628A;Key&#x4E0E;Value&#x5BF9;&#x8C03;&#x4E4B;&#x540E;&#x7684;&#x7D22;&#x5F15;</strong>&#xFF0C;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;&#x76EE;&#x7684;&#x662F;&#x63D0;&#x5347;&#x641C;&#x7D22;&#x6027;&#x80FD;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x6D4B;&#x8BD5;&#x6570;&#x636E;\"><a href=\"#&#x4E8C;-&#x6D4B;&#x8BD5;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x4E8C;. &#x6D4B;&#x8BD5;&#x6570;&#x636E;\"></a>&#x4E8C;. &#x6D4B;&#x8BD5;&#x6570;&#x636E;</h2><p><a href=\"https://www.mongodb.com/\">MongoDB</a>&#x662F;&#x6587;&#x6863;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5176;&#x6570;&#x636E;&#x6709;&#x4E09;&#x4E2A;&#x5C42;&#x7EA7;: &#x6570;&#x636E;&#x5E93;(database)&#xFF0C;&#x96C6;&#x5408;(collection)&#x548C;&#x6587;&#x6863;(document)&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x4E09;&#x4E2A;&#x5C42;&#x7EA7;&#x7684;: &#x6570;&#x636E;&#x5E93;(database), &#x8868;(table)&#xFF0C;&#x884C;(row)&#x3002;MongDB&#x4E2D;&#x6BCF;&#x4E2A;&#x7684;&#x6587;&#x6863;&#x662F;&#x4E00;&#x4E2A;JSON&#x6587;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x672C;&#x6587;&#x4F7F;&#x7528;&#x7684;movie&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x5982;&#x4E0B;&#x6240;&#x793A;:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">\t<span class=\"attr\">&quot;_id&quot;</span> : ObjectId(<span class=\"string\">&quot;57d02d60b128567fc130287d&quot;</span>),</div><div class=\"line\">\t<span class=\"attr\">&quot;movie&quot;</span> : <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">\t<span class=\"attr\">&quot;starList&quot;</span> : [</div><div class=\"line\">\t\t<span class=\"string\">&quot;Keira Knightley&quot;</span>,</div><div class=\"line\">\t\t<span class=\"string\">&quot;Matthew Macfadyen&quot;</span></div><div class=\"line\">\t],</div><div class=\"line\">\t<span class=\"attr\">&quot;__v&quot;</span> : <span class=\"number\">0</span></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8BE5;&#x6587;&#x6863;&#x4E00;&#x5171;&#x6709;4&#x4E2A;&#x5C5E;&#x6027;:</p>\n<ul>\n<li>_id: &#x6587;&#x6863;ID&#xFF0C;&#x7531;MongoDB&#x81EA;&#x52A8;&#x751F;&#x6210;&#x3002;</li>\n<li>__v: &#x6587;&#x6863;&#x7248;&#x672C;&#xFF0C;&#x7531;MongoDB&#x7684;NodeJS&#x63A5;&#x53E3;Mongoose&#x81EA;&#x52A8;&#x751F;&#x6210;&#x3002;</li>\n<li>movie: &#x7535;&#x5F71;&#x540D;&#x79F0;&#x3002;</li>\n<li>starList: &#x6F14;&#x5458;&#x5217;&#x8868;&#x3002; </li>\n</ul>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x6863;&#x8868;&#x793A;&#x7535;&#x5F71;<a href=\"https://movie.douban.com/subject/1418200/\">&#x300A;&#x50B2;&#x6162;&#x4E0E;&#x504F;&#x89C1;&#x300B;</a>&#xFF0C;&#x7531;&#x5973;&#x795E;<a href=\"https://movie.douban.com/celebrity/1054448/\">&#x51EF;&#x62C9;&#xB7;&#x5948;&#x7279;&#x8389;</a>&#x4E3B;&#x6F14;&#x3002;</p>\n<p>&#x5FFD;&#x7565;<code>_id</code>&#x4E0E;<code>__v</code>&#xFF0C;movie&#x96C6;&#x5408;&#x7684;&#x6570;&#x636E;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;starList&quot;</span>: [<span class=\"string\">&quot;Keira Knightley&quot;</span>, <span class=\"string\">&quot;Matthew Macfadyen&quot;</span>]</div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;starList&quot;</span>: [<span class=\"string\">&quot;Keira Knightley&quot;</span>, <span class=\"string\">&quot;Mark Ruffalo&quot;</span>]</div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;movie&quot;</span>: <span class=\"string\">&quot;The Imitation Game&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;starList&quot;</span>: [<span class=\"string\">&quot;Keira Knightley&quot;</span>, <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span>]</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;Key&#x4E3A;&#x7535;&#x5F71;&#x540D;&#x79F0;(movie)&#xFF0C;&#x800C;Value&#x4E3A;&#x6F14;&#x5458;&#x5217;&#x8868;(starList)&#x3002;</p>\n<p>&#x8FD9;&#x65F6;&#x67E5;&#x8BE2;Keira Knightley&#x6240;&#x4E3B;&#x6F14;&#x7684;&#x7535;&#x5F71;&#x7684;NodeJS<a href=\"https://github.com/kiwenlau/mongodb-inverted-index/blob/master/search.js\">&#x4EE3;&#x7801;</a>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">Movie.find(</div><div class=\"line\">{</div><div class=\"line\">    starList: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    _id: <span class=\"number\">0</span>,</div><div class=\"line\">    movie: <span class=\"number\">1</span></div><div class=\"line\">}, <span class=\"keyword\">function</span>(err, results)</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        console.log(err);</div><div class=\"line\">        process.<span class=\"keyword\">exit</span>(<span class=\"number\">1</span>);</div><div class=\"line\">    }</div><div class=\"line\">    console.log(<span class=\"string\">&quot;search movie success:\\n&quot;</span>);</div><div class=\"line\">    console.log(JSON.stringify(results, null, <span class=\"number\">4</span>));</div><div class=\"line\">    process.<span class=\"keyword\">exit</span>(<span class=\"number\">0</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x6CE8;&#xFF1A;&#x672C;&#x6587;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#x4E86;MongoDB&#x7684;NodeJS&#x63A5;&#x53E3;<a href=\"http://mongoosejs.com/\">Mongoose</a>&#xFF0C;&#x5B83;&#x4E0E;MongoDB Shell&#x7684;&#x63A5;&#x53E3;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#x3002;</li>\n</ul>\n<p>&#x4EE3;&#x7801;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x662F;&#x6570;&#x636E;&#x91CF;&#x5927;&#x65F6;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x4F1A;&#x5F88;&#x5DEE;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x67E5;&#x8BE2;&#x9700;&#x8981;:</p>\n<ul>\n<li>&#x904D;&#x5386;&#x6574;&#x4E2A;movie&#x96C6;&#x5408;&#x7684;&#x6240;&#x6709;&#x6587;&#x6863;</li>\n<li>&#x904D;&#x5386;&#x6BCF;&#x4E2A;&#x6587;&#x6863;&#x7684;startList&#x6570;&#x7EC4;</li>\n</ul>\n<p>&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x5730;&#x63D0;&#x5347;&#x641C;&#x7D22;&#x6027;&#x80FD;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4ECB;&#x7ECD;MongoDB&#x4E2D;&#x4E24;&#x79CD;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;<a href=\"https://docs.mongodb.com/manual/core/map-reduce/\">MapReduce</a>&#x4E0E;<a href=\"https://docs.mongodb.com/manual/core/aggregation-pipeline/\">Aggregation Pipeline</a>&#x3002;</p>\n<h2 id=\"&#x4E09;-MapReduce\"><a href=\"#&#x4E09;-MapReduce\" class=\"headerlink\" title=\"&#x4E09; MapReduce\"></a>&#x4E09; MapReduce</h2><p><a href=\"http://research.google.com/archive/mapreduce.html\">MapReduce</a>&#x662F;&#x7531;&#x8C37;&#x6B4C;&#x63D0;&#x51FA;&#x7684;&#x7F16;&#x7A0B;&#x6A21;&#x578B;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x591A;&#x79CD;&#x5927;&#x6570;&#x636E;&#x5904;&#x7406;&#x573A;&#x666F;&#xFF0C;&#x5728;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4E2D;&#xFF0C;MapReduce&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x7F51;&#x9875;&#x6570;&#x636E;&#x7684;&#x5012;&#x6392;&#x7D22;&#x5F15;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x7F16;&#x5199;&#x7F51;&#x9875;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;PageRank(&#x7531;&#x8C37;&#x6B4C;&#x521B;&#x59CB;&#x4EBA;&#x4F69;&#x5947;&#x548C;&#x5E03;&#x6797;&#x63D0;&#x51FA;)&#x3002;</p>\n<p>MapReduce&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E0E;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x5747;&#x4E3A;&#x952E;&#x503C;&#x5BF9;&#x3002;MapReduce&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x51FD;&#x6570;: Map&#x4E0E;Reduce&#x3002;</p>\n<ul>\n<li>Map&#x51FD;&#x6570;&#x5C06;&#x8F93;&#x5165;&#x952E;&#x503C;<code>&lt;k1, v1&gt;</code>&#x5BF9;&#x8FDB;&#x884C;&#x53D8;&#x6362;&#xFF0C;&#x8F93;&#x51FA;&#x4E2D;&#x95F4;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, v2&gt;</code>&#x3002;</li>\n<li>MapReduce&#x6846;&#x67B6;&#x4F1A;&#x81EA;&#x52A8;&#x5BF9;&#x4E2D;&#x95F4;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, v2&gt;</code>&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;Key&#x76F8;&#x540C;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x88AB;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, list(v2)&gt;</code>&#x3002;</li>\n<li>Reduce&#x51FD;&#x6570;&#x5BF9;<code>&lt;k2, list(v2)&gt;</code>&#x7684;Value&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x751F;&#x6210;&#x7ED3;&#x679C;&#x952E;&#x503C;&#x5BF9;<code>&lt;k2, v3&gt;</code>&#x3002;</li>\n</ul>\n<p>&#x4F7F;&#x7528;MapReduce&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;NodeJS<a href=\"https://github.com/kiwenlau/mongodb-inverted-index/blob/master/mapreduce.js\">&#x4EE3;&#x7801;</a>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> option = {};</div><div class=\"line\"></div><div class=\"line\">option.map = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> movie = <span class=\"keyword\">this</span>.movie;</div><div class=\"line\">    <span class=\"keyword\">this</span>.starList.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">star</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        emit(star,</div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"attr\">movieList</span>: [movie]</div><div class=\"line\">        });</div><div class=\"line\">    });</div><div class=\"line\">};</div><div class=\"line\"></div><div class=\"line\">option.reduce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key, values</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> movieList = [];</div><div class=\"line\">    values.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        movieList.push(value.movieList[<span class=\"number\">0</span>]);</div><div class=\"line\">    });</div><div class=\"line\">    <span class=\"keyword\">return</span> {</div><div class=\"line\">        <span class=\"attr\">movieList</span>: movieList</div><div class=\"line\">    };</div><div class=\"line\">};</div><div class=\"line\"></div><div class=\"line\">Movie.mapReduce(option, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, results</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">        process.exit(<span class=\"number\">1</span>);</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;create inverted index success:\\n&quot;</span>);</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(results, <span class=\"literal\">null</span>, <span class=\"number\">4</span>));</div><div class=\"line\">    process.exit(<span class=\"number\">0</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x4EE3;&#x7801;&#x89E3;&#x91CA;:</p>\n<ul>\n<li>Map&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x662F;Movie&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5404;&#x4E2A;&#x6587;&#x6863;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x7528;this&#x8868;&#x793A;&#x3002;&#x6587;&#x6863;&#x7684;movie&#x4E0E;starList&#x5C5E;&#x6027;&#x6784;&#x6210;&#x952E;&#x503C;&#x5BF9;<code>&lt;movie, starList&gt;</code>&#x3002;Map&#x51FD;&#x6570;&#x904D;&#x5386;starList&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;start&#x751F;&#x6210;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, movieList&gt;</code>&#x3002;&#x8FD9;&#x65F6;Key&#x4E0E;Value&#x8FDB;&#x884C;&#x4E86;&#x5BF9;&#x8C03;&#xFF0C;&#x4E14;starList&#x88AB;&#x62C6;&#x5206;&#x4E86;&#xFF0C;movieList&#x4EC5;&#x5305;&#x542B;&#x5355;&#x4E2A;movie&#x3002;</li>\n<li>MongoDB&#x7684;MapReduce&#x6267;&#x884C;&#x6846;&#x67B6;&#x5BF9;&#x6210;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, movieList&gt;</code>&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;star&#x76F8;&#x540C;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x88AB;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, list(movieList)&gt;</code>&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x662F;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x4F53;&#x73B0;&#x3002;</li>\n<li>Reduce&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x662F;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, list(movieList)&gt;</code>&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;star&#x5373;&#x4E3A;key&#xFF0C;&#x800C;list(movieList)&#x5373;&#x4E3A;values&#xFF0C;&#x4E24;&#x8005;&#x4E3A;Reduce&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x3002;Reduce&#x51FD;&#x6570;&#x5408;&#x5E76;list(movieList)&#xFF0C;&#x4ECE;&#x800C;&#x5F97;&#x5230;&#x952E;&#x503C;&#x5BF9;<code>&lt;star, movieList&gt;</code>&#xFF0C;&#x6700;&#x7EC8;&#xFF0C;movieList&#x4E2D;&#x5C06;&#x5305;&#x542B;&#x8BE5;star&#x7684;&#x6240;&#x6709;movie&#x3002;</li>\n</ul>\n<p>&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;Map&#x51FD;&#x6570;&#x4E0E;Reduce&#x8FD4;&#x56DE;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4E2D;&#x7684;Value&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;<code>{ movieList: movieList }</code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6570;&#x7EC4;<code>movieList</code>&#xFF0C;&#x56E0;&#x6B64;&#x4EE3;&#x7801;&#x548C;&#x7ED3;&#x679C;&#x90FD;&#x663E;&#x5F97;&#x6BD4;&#x8F83;&#x5947;&#x602A;&#x3002;MongoDB&#x7684;MapReduce&#x6846;&#x67B6;&#x4E0D;&#x652F;&#x6301;Reduce&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x6570;&#x7EC4;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x80FD;&#x5C06;movieList&#x653E;&#x5728;&#x5BF9;&#x8C61;&#x91CC;&#x9762;&#x8FD4;&#x56DE;&#x3002;</p>\n<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">                <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">                <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Mark Ruffalo&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;Begin Again&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Matthew Macfadyen&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;value&quot;</span>: {</div><div class=\"line\">            <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">                <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span></div><div class=\"line\">            ]</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<h2 id=\"&#x56DB;-Aggregation-Pipeline\"><a href=\"#&#x56DB;-Aggregation-Pipeline\" class=\"headerlink\" title=\"&#x56DB;. Aggregation Pipeline\"></a>&#x56DB;. Aggregation Pipeline</h2><p><a href=\"https://docs.mongodb.com/manual/core/aggregation-pipeline/\">Aggregation Pipeline</a>&#xFF0C;&#x4E2D;&#x6587;&#x79F0;&#x4F5C;&#x805A;&#x5408;&#x7BA1;&#x9053;&#xFF0C;&#x7528;&#x4E8E;&#x6C47;&#x603B;MongoDB&#x4E2D;&#x591A;&#x4E2A;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x3002;</p>\n<p>Aggregation Pipeline&#x8FDB;&#x884C;&#x5404;&#x79CD;<a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/\">&#x805A;&#x5408;&#x64CD;&#x4F5C;</a>&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x5C06;&#x591A;&#x4E2A;&#x805A;&#x5408;&#x64CD;&#x4F5C;&#x7EC4;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;Linux&#x4E2D;&#x7684;&#x7BA1;&#x9053;&#x64CD;&#x4F5C;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4E0B;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x8F93;&#x5165;&#x3002;</p>\n<p>&#x4F7F;&#x7528;Aggregation Pipeline&#x6784;&#x5EFA;&#x5012;&#x6392;&#x7D22;&#x5F15;&#x7684;NodeJS<a href=\"https://github.com/kiwenlau/mongodb-inverted-index/blob/master/aggregation Pipeline.js\">&#x4EE3;&#x7801;</a>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">Movie.aggregate([</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;$unwind&quot;</span>: <span class=\"string\">&quot;$starList&quot;</span></div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;$group&quot;</span>:</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;$starList&quot;</span>,</div><div class=\"line\">        <span class=\"string\">&quot;movieList&quot;</span>:</div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"string\">&quot;$push&quot;</span>: <span class=\"string\">&quot;$movie&quot;</span></div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">},</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;$project&quot;</span>:</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"number\">0</span>,</div><div class=\"line\">        <span class=\"string\">&quot;star&quot;</span>: <span class=\"string\">&quot;$_id&quot;</span>,</div><div class=\"line\">        <span class=\"string\">&quot;movieList&quot;</span>: <span class=\"number\">1</span></div><div class=\"line\">    }</div><div class=\"line\">}], <span class=\"keyword\">function</span>(err, results)</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        console.log(err);</div><div class=\"line\">        process.<span class=\"keyword\">exit</span>(<span class=\"number\">1</span>);</div><div class=\"line\">    }</div><div class=\"line\">    console.log(<span class=\"string\">&quot;create inverted index success:\\n&quot;</span>);</div><div class=\"line\">    console.log(JSON.stringify(results, null, <span class=\"number\">4</span>));</div><div class=\"line\">    process.<span class=\"keyword\">exit</span>(<span class=\"number\">0</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x4EE3;&#x7801;&#x89E3;&#x91CA;:</p>\n<ul>\n<li>$unwind: &#x5C06;starList&#x62C6;&#x5206;&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;(&#x5FFD;&#x7565;<code>_id</code>&#x4E0E;<code>__v</code>)&#x4E3A;:</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Matthew Macfadyen&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Mark Ruffalo&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;The Imitation Game&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span></div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;movie&quot;</span>: <span class=\"string\">&quot;The Imitation Game&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;starList&quot;</span>: <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span></div><div class=\"line\">    }</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<ul>\n<li>$group: &#x6839;&#x636E;&#x6587;&#x6863;&#x7684;starList&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5206;&#x7EC4;&#x6587;&#x6863;&#x7684;movie&#x5C5E;&#x6027;&#x5408;&#x5E76;&#x4E3A;movieList&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;:</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Benedict Cumberbatch&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Matthew Macfadyen&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Mark Ruffalo&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;Begin Again&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"attr\">&quot;_id&quot;</span>: <span class=\"string\">&quot;Keira Knightley&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">&quot;movieList&quot;</span>: [</div><div class=\"line\">            <span class=\"string\">&quot;Pride &amp; Prejudice&quot;</span>,</div><div class=\"line\">            <span class=\"string\">&quot;Begin Again&quot;</span>,</div><div class=\"line\">            <span class=\"string\">&quot;The Imitation Game&quot;</span></div><div class=\"line\">        ]</div><div class=\"line\">    }</div><div class=\"line\">]</div></pre></td></tr></table></figure>"},{"title":"Underscore","date":"2016-09-18T02:00:00.000Z","_content":"\n**:** [Underscore](http://underscorejs.org/)JavaScriptUnderscoreUnderscore\n\n**GitHub:**\n\n- [kiwenlau/underscore-example](https://github.com/kiwenlau/underscore-example)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-09-18](http://kiwenlau.com/2016/09/18/underscore-example/)\n\n<img src=\"underscore-example/underscore-example.png\" width = \"500\"/>\n\n## . \n\n: \n\n```\n[\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"];\n```\n\n\"c\"3\n\n********\"a\"1\"b\"2\"c\"3\"d\"4\n\n:\n\n```\n[ 'a', 'b', 'c', 'd' ]\n```\n\n****...\n\nunderscore:\n\n```\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"];\n\n\n// \nvar A = {};\n\nfor (var i = 0; i < X.length; i++)\n{\n    var x = X[i];\n    if (A.hasOwnProperty(X[i]))\n    {\n        A[x]++;\n    }\n    else\n    {\n        A[x] = 1;\n    }\n}\n\n\n// \nvar B = [];\n\nfor (var a in A)\n{\n    B.push([a, A[a]]);\n}\n\n\n// 2\nB.sort(\n    function(a, b)\n    {\n        return a[1] - b[1];\n    }\n);\n\n\n// 1\nvar Y = [];\n\nfor (var i = 0; i < B.length; i++)\n{\n    Y.push(B[i][0]);\n}\n\n\nconsole.log(Y); // [ 'a', 'b', 'c', 'd' ]\n```\n\nJavasScriptsort\n\nUnderscore:\n\n```\nvar _ = require(\"underscore\");\n\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"];\n\nvar Y = _.chain(X)\n    .countBy() // \n    .pairs()   // \n    .sortBy(1) // 2\n    .pluck(0)  // 1\n    .value();  // \n\nconsole.log(Y); // [ 'a', 'b', 'c', 'd' ]\n```\n\n4Underscore: [_.countBy](http://underscorejs.org/#countBy)[_.pairs](http://underscorejs.org/#pairs)[_.sortBy](http://underscorejs.org/#sortBy)[_.pluck](http://underscorejs.org/#pluck)[_.chain](http://underscorejs.org/#chain)4\n\nUnderscore\n\n## . \n\n#### **1. [_.countBy](http://underscorejs.org/#countBy)**\n\n: \n\n- \n\n:\n\n```\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"]; // \n\nvar Y = _.countBy(X);\n\nconsole.log(Y); // : { b: 2, d: 4, a: 1, c: 3 }\n```\n\n#### **2. [_.pairs](http://underscorejs.org/#pairs)**\n\n: \n\n- \n\n:\n\n```\nvar X = {\n    b: 2,\n    d: 4,\n    a: 1,\n    c: 3\n}; // \n\nvar Y = _.pairs(X);\n\nconsole.log(Y); // : [ [ 'b', 2 ], [ 'd', 4 ], [ 'a', 1 ], [ 'c', 3 ] ]\n```\n\n#### **3. [_.sortBy](http://underscorejs.org/#sortBy)**\n\n: \n\n- \n\n:\n\n```\nvar X = [\n    ['b', 2],\n    ['d', 4],\n    ['a', 1],\n    ['c', 3]\n]; // \n\nvar Y = _.sortBy(X, 1); // 2\n\nconsole.log(Y); // : [ [ 'a', 1 ], [ 'b', 2 ], [ 'c', 3 ], [ 'd', 4 ] ]\n```\n\n#### **4. [_.pluck](http://underscorejs.org/#pluck)**\n\n: \n\n- Value\n\n:\n\n```\nvar X = [\n    ['a', 1],\n    ['b', 2],\n    ['c', 3],\n    ['d', 4]\n]; // \n\nvar Y = _.pluck(X, 0); // 1\n\nconsole.log(Y); // : [ 'a', 'b', 'c', 'd' ]\n```\n\n#### **5. [_.chain](http://underscorejs.org/#chain)**\n\n: \n\n- Underscore\n\n```\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"]; // \n\nvar Y = _.chain(X)\n    .countBy() // \n    .pairs()   // \n    .sortBy(1) // 2\n    .pluck(0)  // 1\n    .value();  // \n\nconsole.log(Y); // : [ 'a', 'b', 'c', 'd' ]\n```\n\nUnderscoreLinux[_.chain](http://underscorejs.org/#chain)[_.value](http://underscorejs.org/#value)","source":"_posts/2016/09/18/underscore-example.md","raw":"title: Underscore\n\ndate: 2016-09-18 10:00\n\ntags: [Node.js]\n\n---\n\n**:** [Underscore](http://underscorejs.org/)JavaScriptUnderscoreUnderscore\n\n**GitHub:**\n\n- [kiwenlau/underscore-example](https://github.com/kiwenlau/underscore-example)\n\n<!-- more -->\n\n- : [KiwenLau](http://kiwenlau.com/)\n- : [2016-09-18](http://kiwenlau.com/2016/09/18/underscore-example/)\n\n<img src=\"underscore-example/underscore-example.png\" width = \"500\"/>\n\n## . \n\n: \n\n```\n[\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"];\n```\n\n\"c\"3\n\n********\"a\"1\"b\"2\"c\"3\"d\"4\n\n:\n\n```\n[ 'a', 'b', 'c', 'd' ]\n```\n\n****...\n\nunderscore:\n\n```\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"];\n\n\n// \nvar A = {};\n\nfor (var i = 0; i < X.length; i++)\n{\n    var x = X[i];\n    if (A.hasOwnProperty(X[i]))\n    {\n        A[x]++;\n    }\n    else\n    {\n        A[x] = 1;\n    }\n}\n\n\n// \nvar B = [];\n\nfor (var a in A)\n{\n    B.push([a, A[a]]);\n}\n\n\n// 2\nB.sort(\n    function(a, b)\n    {\n        return a[1] - b[1];\n    }\n);\n\n\n// 1\nvar Y = [];\n\nfor (var i = 0; i < B.length; i++)\n{\n    Y.push(B[i][0]);\n}\n\n\nconsole.log(Y); // [ 'a', 'b', 'c', 'd' ]\n```\n\nJavasScriptsort\n\nUnderscore:\n\n```\nvar _ = require(\"underscore\");\n\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"];\n\nvar Y = _.chain(X)\n    .countBy() // \n    .pairs()   // \n    .sortBy(1) // 2\n    .pluck(0)  // 1\n    .value();  // \n\nconsole.log(Y); // [ 'a', 'b', 'c', 'd' ]\n```\n\n4Underscore: [_.countBy](http://underscorejs.org/#countBy)[_.pairs](http://underscorejs.org/#pairs)[_.sortBy](http://underscorejs.org/#sortBy)[_.pluck](http://underscorejs.org/#pluck)[_.chain](http://underscorejs.org/#chain)4\n\nUnderscore\n\n## . \n\n#### **1. [_.countBy](http://underscorejs.org/#countBy)**\n\n: \n\n- \n\n:\n\n```\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"]; // \n\nvar Y = _.countBy(X);\n\nconsole.log(Y); // : { b: 2, d: 4, a: 1, c: 3 }\n```\n\n#### **2. [_.pairs](http://underscorejs.org/#pairs)**\n\n: \n\n- \n\n:\n\n```\nvar X = {\n    b: 2,\n    d: 4,\n    a: 1,\n    c: 3\n}; // \n\nvar Y = _.pairs(X);\n\nconsole.log(Y); // : [ [ 'b', 2 ], [ 'd', 4 ], [ 'a', 1 ], [ 'c', 3 ] ]\n```\n\n#### **3. [_.sortBy](http://underscorejs.org/#sortBy)**\n\n: \n\n- \n\n:\n\n```\nvar X = [\n    ['b', 2],\n    ['d', 4],\n    ['a', 1],\n    ['c', 3]\n]; // \n\nvar Y = _.sortBy(X, 1); // 2\n\nconsole.log(Y); // : [ [ 'a', 1 ], [ 'b', 2 ], [ 'c', 3 ], [ 'd', 4 ] ]\n```\n\n#### **4. [_.pluck](http://underscorejs.org/#pluck)**\n\n: \n\n- Value\n\n:\n\n```\nvar X = [\n    ['a', 1],\n    ['b', 2],\n    ['c', 3],\n    ['d', 4]\n]; // \n\nvar Y = _.pluck(X, 0); // 1\n\nconsole.log(Y); // : [ 'a', 'b', 'c', 'd' ]\n```\n\n#### **5. [_.chain](http://underscorejs.org/#chain)**\n\n: \n\n- Underscore\n\n```\nvar X = [\"b\", \"d\", \"a\", \"d\", \"d\", \"b\", \"c\", \"c\", \"d\", \"c\"]; // \n\nvar Y = _.chain(X)\n    .countBy() // \n    .pairs()   // \n    .sortBy(1) // 2\n    .pluck(0)  // 1\n    .value();  // \n\nconsole.log(Y); // : [ 'a', 'b', 'c', 'd' ]\n```\n\nUnderscoreLinux[_.chain](http://underscorejs.org/#chain)[_.value](http://underscorejs.org/#value)","slug":"2016/09/18/underscore-example","published":1,"updated":"2017-04-10T02:13:01.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmi000t71fyrsjx9uil","content":"<p><strong>&#x6458;&#x8981;:</strong> <a href=\"http://underscorejs.org/\" target=\"_blank\" rel=\"external\">Underscore</a>&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;JavaScript&#x5E93;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x975E;&#x5E38;&#x5B9E;&#x7528;&#x7684;&#x51FD;&#x6570;&#x3002;&#x719F;&#x7EC3;&#x4F7F;&#x7528;Underscore&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x5730;&#x5199;&#x51FA;&#x66F4;&#x7B80;&#x6D01;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x672C;&#x6587;&#x5C06;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x51E0;&#x4E2A;&#x5E38;&#x7528;&#x7684;Underscore&#x51FD;&#x6570;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/underscore-example\" target=\"_blank\" rel=\"external\">kiwenlau/underscore-example</a></li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/09/18/underscore-example/\">2016-09-18</a></li>\n</ul>\n<p><img src=\"/2016/09/18/underscore-example/underscore-example.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-&#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;\"><a href=\"#&#x4E00;-&#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"&#x4E00;. &#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;\"></a>&#x4E00;. &#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;</h2><p>&#x8F93;&#x5165;&#x6570;&#x636E;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;: </p>\n<figure class=\"highlight clojure\"><table><tr><td class=\"code\"><pre><div class=\"line\">[<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>]<span class=\"comment\">;</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x5B58;&#x5728;&#x91CD;&#x590D;&#x7684;&#x5143;&#x7D20;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x201D;c&#x201D;&#x91CD;&#x590D;&#x4E86;3&#x6B21;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x9700;&#x8981;<strong>&#x6839;&#x636E;&#x5143;&#x7D20;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x91CD;&#x590D;&#x4E2A;&#x6570;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</strong>&#x3002;&#x901A;&#x8FC7;<strong>&#x89C2;&#x5BDF;</strong>&#x53EF;&#x77E5;&#xFF0C;&#x201D;a&#x201D;&#x4E3A;1&#x4E2A;&#xFF0C;&#x201D;b&#x201D;&#x4E3A;2&#x4E2A;&#xFF0C;&#x201D;c&#x201D;&#x4E3A;3&#x4E2A;&#xFF0C;&#x201D;d&#x201D;&#x4E3A;4&#x4E2A;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x662F;:</p>\n<figure class=\"highlight scheme\"><table><tr><td class=\"code\"><pre><div class=\"line\">[ <span class=\"symbol\">&apos;a</span>&apos;, <span class=\"symbol\">&apos;b</span>&apos;, <span class=\"symbol\">&apos;c</span>&apos;, <span class=\"symbol\">&apos;d</span>&apos; ]</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x6682;&#x65F6;&#x8FD8;&#x6CA1;&#x529E;&#x6CD5;&#x50CF;&#x4EBA;&#x4E00;&#x6837;&#x901A;&#x8FC7;<strong>&#x89C2;&#x5BDF;</strong>&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x5F97;&#x6572;&#x4EE3;&#x7801;&#x2026;</p>\n<p>&#x95EE;&#x9898;&#x672C;&#x8EAB;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x5E76;&#x4E0D;&#x597D;&#x5199;&#x3002;&#x4E0D;&#x4F7F;&#x7528;underscore&#x7684;&#x8BDD;&#xFF0C;&#x7A0B;&#x5E8F;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>];</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5BF9;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</span></div><div class=\"line\"><span class=\"keyword\">var</span> A = {};</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; X.length; i++)</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> x = X[i];</div><div class=\"line\">    <span class=\"keyword\">if</span> (A.hasOwnProperty(X[i]))</div><div class=\"line\">    {</div><div class=\"line\">        A[x]++;</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">    {</div><div class=\"line\">        A[x] = <span class=\"number\">1</span>;</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5C06;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;</span></div><div class=\"line\"><span class=\"keyword\">var</span> B = [];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> a <span class=\"keyword\">in</span> A)</div><div class=\"line\">{</div><div class=\"line\">    B.push([a, A[a]]);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;2&#x5217;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</span></div><div class=\"line\">B.sort(</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>];</div><div class=\"line\">    }</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;1&#x5217;&#x5143;&#x7D20;</span></div><div class=\"line\"><span class=\"keyword\">var</span> Y = [];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; B.length; i++)</div><div class=\"line\">{</div><div class=\"line\">    Y.push(B[i][<span class=\"number\">0</span>]);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(Y); <span class=\"comment\">// [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos; ]</span></div></pre></td></tr></table></figure>\n<p>&#x867D;&#x7136;&#x6211;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E9B;JavasScript&#x81EA;&#x5E26;&#x7684;&#x5E93;&#x51FD;&#x6570;&#x4F8B;&#x5982;sort&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x4ECD;&#x7136;&#x6BD4;&#x8F83;&#x5197;&#x957F;&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x4E86;Underscore&#x4E4B;&#x540E;&#xFF0C;&#x4EE3;&#x7801;&#x88AB;&#x6781;&#x5927;&#x5730;&#x7B80;&#x5316;&#x4E86;:</p>\n<figure class=\"highlight haxe\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"literal\">_</span> = require(<span class=\"string\">&quot;underscore&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Y = <span class=\"literal\">_</span>.chain(X)</div><div class=\"line\">    .countBy() <span class=\"comment\">// &#x5BF9;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</span></div><div class=\"line\">    .pairs()   <span class=\"comment\">// &#x5C06;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;</span></div><div class=\"line\">    .sortBy(<span class=\"number\">1</span>) <span class=\"comment\">// &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;2&#x5217;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</span></div><div class=\"line\">    .pluck(<span class=\"number\">0</span>)  <span class=\"comment\">// &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;1&#x5217;&#x5143;&#x7D20;</span></div><div class=\"line\">    .value();  <span class=\"comment\">// &#x83B7;&#x53D6;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;</span></div><div class=\"line\"></div><div class=\"line\">console.log(Y); <span class=\"comment\">// [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos; ]</span></div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4F7F;&#x7528;&#x4E86;4&#x4E2A;Underscore&#x51FD;&#x6570;: <a href=\"http://underscorejs.org/#countBy\" target=\"_blank\" rel=\"external\">_.countBy</a>&#xFF0C;<a href=\"http://underscorejs.org/#pairs\" target=\"_blank\" rel=\"external\">_.pairs</a>&#xFF0C;<a href=\"http://underscorejs.org/#sortBy\" target=\"_blank\" rel=\"external\">_.sortBy</a>&#x548C;<a href=\"http://underscorejs.org/#pluck\" target=\"_blank\" rel=\"external\">_.pluck</a>&#x3002;&#x5E76;&#x4E14;&#x901A;&#x8FC7;<a href=\"http://underscorejs.org/#chain\" target=\"_blank\" rel=\"external\">_.chain</a>&#x5C06;&#x8FD9;4&#x4E2A;&#x51FD;&#x6570;&#x4F9D;&#x6B21;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x524D;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;&#x4E2D;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4F1A;&#x4F9D;&#x6B21;&#x4ECB;&#x7ECD;&#x4EE3;&#x7801;&#x4E2D;&#x6240;&#x4F7F;&#x7528;&#x7684;Underscore&#x51FD;&#x6570;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x51FD;&#x6570;&#x4ECB;&#x7ECD;\"><a href=\"#&#x4E8C;-&#x51FD;&#x6570;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"&#x4E8C;. &#x51FD;&#x6570;&#x4ECB;&#x7ECD;\"></a>&#x4E8C;. &#x51FD;&#x6570;&#x4ECB;&#x7ECD;</h2><h4 id=\"1-countBy\"><a href=\"#1-countBy\" class=\"headerlink\" title=\"1. _.countBy\"></a><strong>1. <a href=\"http://underscorejs.org/#countBy\" target=\"_blank\" rel=\"external\">_.countBy</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5BF9;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight haxe\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>]; <span class=\"comment\">// &#x8F93;&#x5165;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Y = <span class=\"literal\">_</span>.countBy(X);</div><div class=\"line\"></div><div class=\"line\">console.log(Y); <span class=\"comment\">// &#x8F93;&#x51FA;: { b: 2, d: 4, a: 1, c: 3 }</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-pairs\"><a href=\"#2-pairs\" class=\"headerlink\" title=\"2. _.pairs\"></a><strong>2. <a href=\"http://underscorejs.org/#pairs\" target=\"_blank\" rel=\"external\">_.pairs</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5C06;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x4E0E;&#x5C5E;&#x6027;&#x503C;&#x8F6C;&#x5316;&#x4E3A;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x7EC4;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">var <span class=\"symbol\">X</span> = {</div><div class=\"line\">    b: <span class=\"number\">2</span>,</div><div class=\"line\">    d: <span class=\"number\">4</span>,</div><div class=\"line\">    a: <span class=\"number\">1</span>,</div><div class=\"line\">    c: <span class=\"number\">3</span></div><div class=\"line\">}; // &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var <span class=\"symbol\">Y</span> = <span class=\"symbol\">_</span>.pairs(<span class=\"symbol\">X</span>);</div><div class=\"line\"></div><div class=\"line\">console.log(<span class=\"symbol\">Y</span>); // &#x8F93;&#x51FA;: [ [ <span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span> ], [ <span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span> ], [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span> ], [ <span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span> ] ]</div></pre></td></tr></table></figure>\n<h4 id=\"3-sortBy\"><a href=\"#3-sortBy\" class=\"headerlink\" title=\"3. _.sortBy\"></a><strong>3. <a href=\"http://underscorejs.org/#sortBy\" target=\"_blank\" rel=\"external\">_.sortBy</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5BF9;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF1B;&#x5BF9;&#x4E8E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x67D0;&#x4E00;&#x5217;&#x7684;&#x5143;&#x7D20;&#x503C;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">var <span class=\"symbol\">X</span> = [</div><div class=\"line\">    [<span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span>]</div><div class=\"line\">]; // &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var <span class=\"symbol\">Y</span> = <span class=\"symbol\">_</span>.sortBy(<span class=\"symbol\">X</span>, <span class=\"number\">1</span>); // &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">2</span>&#x5217;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</div><div class=\"line\"></div><div class=\"line\">console.log(<span class=\"symbol\">Y</span>); // &#x8F93;&#x51FA;: [ [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span> ], [ <span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span> ], [ <span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span> ], [ <span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span> ] ]</div></pre></td></tr></table></figure>\n<h4 id=\"4-pluck\"><a href=\"#4-pluck\" class=\"headerlink\" title=\"4. _.pluck\"></a><strong>4. <a href=\"http://underscorejs.org/#pluck\" target=\"_blank\" rel=\"external\">_.pluck</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x7684;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x7684;Value&#x5217;&#x8868;&#xFF1B;&#x6216;&#x8005;&#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x5217;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">var <span class=\"symbol\">X</span> = [</div><div class=\"line\">    [<span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span>]</div><div class=\"line\">]; // &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var <span class=\"symbol\">Y</span> = <span class=\"symbol\">_</span>.pluck(<span class=\"symbol\">X</span>, <span class=\"number\">0</span>); // &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">1</span>&#x5217;</div><div class=\"line\"></div><div class=\"line\">console.log(<span class=\"symbol\">Y</span>); // &#x8F93;&#x51FA;: [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"string\">&apos;b&apos;</span>, <span class=\"string\">&apos;c&apos;</span>, <span class=\"string\">&apos;d&apos;</span> ]</div></pre></td></tr></table></figure>\n<h4 id=\"5-chain\"><a href=\"#5-chain\" class=\"headerlink\" title=\"5. _.chain\"></a><strong>5. <a href=\"http://underscorejs.org/#chain\" target=\"_blank\" rel=\"external\">_.chain</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5C06;&#x591A;&#x4E2A;Underscore&#x51FD;&#x6570;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#x5B8C;&#x6210;&#x8BA1;&#x7B97;&#x4EFB;&#x52A1;</li>\n</ul>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">var X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>]; <span class=\"regexp\">//</span> &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var Y = _.chain(X)</div><div class=\"line\">    .countBy() <span class=\"regexp\">//</span> &#x5BF9;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</div><div class=\"line\">    .pairs()   <span class=\"regexp\">//</span> &#x5C06;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;</div><div class=\"line\">    .sortBy(<span class=\"number\">1</span>) <span class=\"regexp\">//</span> &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">2</span>&#x5217;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</div><div class=\"line\">    .pluck(<span class=\"number\">0</span>)  <span class=\"regexp\">//</span> &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">1</span>&#x5217;&#x5143;&#x7D20;</div><div class=\"line\">    .value();  <span class=\"regexp\">//</span> &#x83B7;&#x53D6;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;</div><div class=\"line\"></div><div class=\"line\">console.log(Y); <span class=\"regexp\">//</span> &#x8F93;&#x51FA;: [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"string\">&apos;b&apos;</span>, <span class=\"string\">&apos;c&apos;</span>, <span class=\"string\">&apos;d&apos;</span> ]</div></pre></td></tr></table></figure>\n<p>&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x591A;&#x4E2A;Underscore&#x51FD;&#x6570;&#x6765;&#x5B8C;&#x6210;&#x5355;&#x4E2A;&#x8BA1;&#x7B97;&#x4EFB;&#x52A1;&#x3002;&#x7C7B;&#x4F3C;&#x4E8E;Linux&#x4E2D;&#x7684;&#x7BA1;&#x9053;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x540E;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#xFF0C;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a href=\"http://underscorejs.org/#chain\" target=\"_blank\" rel=\"external\">_.chain</a>&#x5C06;&#x591A;&#x4E2A;&#x51FD;&#x6570;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x6700;&#x540E;&#x4F7F;&#x7528;<a href=\"http://underscorejs.org/#value\" target=\"_blank\" rel=\"external\">_.value</a>&#x83B7;&#x53D6;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x3002;</p>\n","excerpt":"<p><strong>&#x6458;&#x8981;:</strong> <a href=\"http://underscorejs.org/\">Underscore</a>&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;JavaScript&#x5E93;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x975E;&#x5E38;&#x5B9E;&#x7528;&#x7684;&#x51FD;&#x6570;&#x3002;&#x719F;&#x7EC3;&#x4F7F;&#x7528;Underscore&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x5730;&#x5199;&#x51FA;&#x66F4;&#x7B80;&#x6D01;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x672C;&#x6587;&#x5C06;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x51E0;&#x4E2A;&#x5E38;&#x7528;&#x7684;Underscore&#x51FD;&#x6570;&#x3002;</p>\n<p><strong>GitHub&#x5730;&#x5740;:</strong></p>\n<ul>\n<li><a href=\"https://github.com/kiwenlau/underscore-example\">kiwenlau/underscore-example</a></li>\n</ul>","more":"<ul>\n<li>&#x4F5C;&#x8005;: <a href=\"http://kiwenlau.com/\">KiwenLau</a></li>\n<li>&#x65E5;&#x671F;: <a href=\"http://kiwenlau.com/2016/09/18/underscore-example/\">2016-09-18</a></li>\n</ul>\n<p><img src=\"/2016/09/18/underscore-example/underscore-example.png\" width=\"500\"></p>\n<h2 id=\"&#x4E00;-&#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;\"><a href=\"#&#x4E00;-&#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"&#x4E00;. &#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;\"></a>&#x4E00;. &#x7F16;&#x7A0B;&#x5B9E;&#x4F8B;</h2><p>&#x8F93;&#x5165;&#x6570;&#x636E;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;: </p>\n<figure class=\"highlight clojure\"><table><tr><td class=\"code\"><pre><div class=\"line\">[<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>]<span class=\"comment\">;</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x5B58;&#x5728;&#x91CD;&#x590D;&#x7684;&#x5143;&#x7D20;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x201D;c&#x201D;&#x91CD;&#x590D;&#x4E86;3&#x6B21;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x9700;&#x8981;<strong>&#x6839;&#x636E;&#x5143;&#x7D20;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x91CD;&#x590D;&#x4E2A;&#x6570;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</strong>&#x3002;&#x901A;&#x8FC7;<strong>&#x89C2;&#x5BDF;</strong>&#x53EF;&#x77E5;&#xFF0C;&#x201D;a&#x201D;&#x4E3A;1&#x4E2A;&#xFF0C;&#x201D;b&#x201D;&#x4E3A;2&#x4E2A;&#xFF0C;&#x201D;c&#x201D;&#x4E3A;3&#x4E2A;&#xFF0C;&#x201D;d&#x201D;&#x4E3A;4&#x4E2A;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x662F;:</p>\n<figure class=\"highlight scheme\"><table><tr><td class=\"code\"><pre><div class=\"line\">[ <span class=\"symbol\">&apos;a</span>&apos;, <span class=\"symbol\">&apos;b</span>&apos;, <span class=\"symbol\">&apos;c</span>&apos;, <span class=\"symbol\">&apos;d</span>&apos; ]</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x6682;&#x65F6;&#x8FD8;&#x6CA1;&#x529E;&#x6CD5;&#x50CF;&#x4EBA;&#x4E00;&#x6837;&#x901A;&#x8FC7;<strong>&#x89C2;&#x5BDF;</strong>&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x5F97;&#x6572;&#x4EE3;&#x7801;&#x2026;</p>\n<p>&#x95EE;&#x9898;&#x672C;&#x8EAB;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x5E76;&#x4E0D;&#x597D;&#x5199;&#x3002;&#x4E0D;&#x4F7F;&#x7528;underscore&#x7684;&#x8BDD;&#xFF0C;&#x7A0B;&#x5E8F;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>];</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5BF9;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</span></div><div class=\"line\"><span class=\"keyword\">var</span> A = {};</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; X.length; i++)</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> x = X[i];</div><div class=\"line\">    <span class=\"keyword\">if</span> (A.hasOwnProperty(X[i]))</div><div class=\"line\">    {</div><div class=\"line\">        A[x]++;</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">    {</div><div class=\"line\">        A[x] = <span class=\"number\">1</span>;</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5C06;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;</span></div><div class=\"line\"><span class=\"keyword\">var</span> B = [];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> a <span class=\"keyword\">in</span> A)</div><div class=\"line\">{</div><div class=\"line\">    B.push([a, A[a]]);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;2&#x5217;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</span></div><div class=\"line\">B.sort(</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>];</div><div class=\"line\">    }</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;1&#x5217;&#x5143;&#x7D20;</span></div><div class=\"line\"><span class=\"keyword\">var</span> Y = [];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; B.length; i++)</div><div class=\"line\">{</div><div class=\"line\">    Y.push(B[i][<span class=\"number\">0</span>]);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(Y); <span class=\"comment\">// [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos; ]</span></div></pre></td></tr></table></figure>\n<p>&#x867D;&#x7136;&#x6211;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E9B;JavasScript&#x81EA;&#x5E26;&#x7684;&#x5E93;&#x51FD;&#x6570;&#x4F8B;&#x5982;sort&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x4ECD;&#x7136;&#x6BD4;&#x8F83;&#x5197;&#x957F;&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x4E86;Underscore&#x4E4B;&#x540E;&#xFF0C;&#x4EE3;&#x7801;&#x88AB;&#x6781;&#x5927;&#x5730;&#x7B80;&#x5316;&#x4E86;:</p>\n<figure class=\"highlight haxe\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> <span class=\"literal\">_</span> = require(<span class=\"string\">&quot;underscore&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Y = <span class=\"literal\">_</span>.chain(X)</div><div class=\"line\">    .countBy() <span class=\"comment\">// &#x5BF9;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</span></div><div class=\"line\">    .pairs()   <span class=\"comment\">// &#x5C06;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;</span></div><div class=\"line\">    .sortBy(<span class=\"number\">1</span>) <span class=\"comment\">// &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;2&#x5217;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</span></div><div class=\"line\">    .pluck(<span class=\"number\">0</span>)  <span class=\"comment\">// &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;1&#x5217;&#x5143;&#x7D20;</span></div><div class=\"line\">    .value();  <span class=\"comment\">// &#x83B7;&#x53D6;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;</span></div><div class=\"line\"></div><div class=\"line\">console.log(Y); <span class=\"comment\">// [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos; ]</span></div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4F7F;&#x7528;&#x4E86;4&#x4E2A;Underscore&#x51FD;&#x6570;: <a href=\"http://underscorejs.org/#countBy\">_.countBy</a>&#xFF0C;<a href=\"http://underscorejs.org/#pairs\">_.pairs</a>&#xFF0C;<a href=\"http://underscorejs.org/#sortBy\">_.sortBy</a>&#x548C;<a href=\"http://underscorejs.org/#pluck\">_.pluck</a>&#x3002;&#x5E76;&#x4E14;&#x901A;&#x8FC7;<a href=\"http://underscorejs.org/#chain\">_.chain</a>&#x5C06;&#x8FD9;4&#x4E2A;&#x51FD;&#x6570;&#x4F9D;&#x6B21;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x524D;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;&#x4E2D;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4F1A;&#x4F9D;&#x6B21;&#x4ECB;&#x7ECD;&#x4EE3;&#x7801;&#x4E2D;&#x6240;&#x4F7F;&#x7528;&#x7684;Underscore&#x51FD;&#x6570;&#x3002;</p>\n<h2 id=\"&#x4E8C;-&#x51FD;&#x6570;&#x4ECB;&#x7ECD;\"><a href=\"#&#x4E8C;-&#x51FD;&#x6570;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"&#x4E8C;. &#x51FD;&#x6570;&#x4ECB;&#x7ECD;\"></a>&#x4E8C;. &#x51FD;&#x6570;&#x4ECB;&#x7ECD;</h2><h4 id=\"1-countBy\"><a href=\"#1-countBy\" class=\"headerlink\" title=\"1. _.countBy\"></a><strong>1. <a href=\"http://underscorejs.org/#countBy\">_.countBy</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5BF9;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight haxe\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>]; <span class=\"comment\">// &#x8F93;&#x5165;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Y = <span class=\"literal\">_</span>.countBy(X);</div><div class=\"line\"></div><div class=\"line\">console.log(Y); <span class=\"comment\">// &#x8F93;&#x51FA;: { b: 2, d: 4, a: 1, c: 3 }</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-pairs\"><a href=\"#2-pairs\" class=\"headerlink\" title=\"2. _.pairs\"></a><strong>2. <a href=\"http://underscorejs.org/#pairs\">_.pairs</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5C06;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x4E0E;&#x5C5E;&#x6027;&#x503C;&#x8F6C;&#x5316;&#x4E3A;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x7EC4;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">var <span class=\"symbol\">X</span> = {</div><div class=\"line\">    b: <span class=\"number\">2</span>,</div><div class=\"line\">    d: <span class=\"number\">4</span>,</div><div class=\"line\">    a: <span class=\"number\">1</span>,</div><div class=\"line\">    c: <span class=\"number\">3</span></div><div class=\"line\">}; // &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var <span class=\"symbol\">Y</span> = <span class=\"symbol\">_</span>.pairs(<span class=\"symbol\">X</span>);</div><div class=\"line\"></div><div class=\"line\">console.log(<span class=\"symbol\">Y</span>); // &#x8F93;&#x51FA;: [ [ <span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span> ], [ <span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span> ], [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span> ], [ <span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span> ] ]</div></pre></td></tr></table></figure>\n<h4 id=\"3-sortBy\"><a href=\"#3-sortBy\" class=\"headerlink\" title=\"3. _.sortBy\"></a><strong>3. <a href=\"http://underscorejs.org/#sortBy\">_.sortBy</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5BF9;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF1B;&#x5BF9;&#x4E8E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x67D0;&#x4E00;&#x5217;&#x7684;&#x5143;&#x7D20;&#x503C;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">var <span class=\"symbol\">X</span> = [</div><div class=\"line\">    [<span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span>]</div><div class=\"line\">]; // &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var <span class=\"symbol\">Y</span> = <span class=\"symbol\">_</span>.sortBy(<span class=\"symbol\">X</span>, <span class=\"number\">1</span>); // &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">2</span>&#x5217;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</div><div class=\"line\"></div><div class=\"line\">console.log(<span class=\"symbol\">Y</span>); // &#x8F93;&#x51FA;: [ [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span> ], [ <span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span> ], [ <span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span> ], [ <span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span> ] ]</div></pre></td></tr></table></figure>\n<h4 id=\"4-pluck\"><a href=\"#4-pluck\" class=\"headerlink\" title=\"4. _.pluck\"></a><strong>4. <a href=\"http://underscorejs.org/#pluck\">_.pluck</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x7684;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x7684;Value&#x5217;&#x8868;&#xFF1B;&#x6216;&#x8005;&#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x5217;</li>\n</ul>\n<p>&#x5B9E;&#x4F8B;:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"code\"><pre><div class=\"line\">var <span class=\"symbol\">X</span> = [</div><div class=\"line\">    [<span class=\"string\">&apos;a&apos;</span>, <span class=\"number\">1</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;b&apos;</span>, <span class=\"number\">2</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;c&apos;</span>, <span class=\"number\">3</span>],</div><div class=\"line\">    [<span class=\"string\">&apos;d&apos;</span>, <span class=\"number\">4</span>]</div><div class=\"line\">]; // &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var <span class=\"symbol\">Y</span> = <span class=\"symbol\">_</span>.pluck(<span class=\"symbol\">X</span>, <span class=\"number\">0</span>); // &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">1</span>&#x5217;</div><div class=\"line\"></div><div class=\"line\">console.log(<span class=\"symbol\">Y</span>); // &#x8F93;&#x51FA;: [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"string\">&apos;b&apos;</span>, <span class=\"string\">&apos;c&apos;</span>, <span class=\"string\">&apos;d&apos;</span> ]</div></pre></td></tr></table></figure>\n<h4 id=\"5-chain\"><a href=\"#5-chain\" class=\"headerlink\" title=\"5. _.chain\"></a><strong>5. <a href=\"http://underscorejs.org/#chain\">_.chain</a></strong></h4><p>&#x529F;&#x80FD;: </p>\n<ul>\n<li>&#x5C06;&#x591A;&#x4E2A;Underscore&#x51FD;&#x6570;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#x5B8C;&#x6210;&#x8BA1;&#x7B97;&#x4EFB;&#x52A1;</li>\n</ul>\n<figure class=\"highlight awk\"><table><tr><td class=\"code\"><pre><div class=\"line\">var X = [<span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;c&quot;</span>]; <span class=\"regexp\">//</span> &#x8F93;&#x5165;</div><div class=\"line\"></div><div class=\"line\">var Y = _.chain(X)</div><div class=\"line\">    .countBy() <span class=\"regexp\">//</span> &#x5BF9;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x6570;</div><div class=\"line\">    .pairs()   <span class=\"regexp\">//</span> &#x5C06;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;</div><div class=\"line\">    .sortBy(<span class=\"number\">1</span>) <span class=\"regexp\">//</span> &#x6839;&#x636E;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">2</span>&#x5217;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</div><div class=\"line\">    .pluck(<span class=\"number\">0</span>)  <span class=\"regexp\">//</span> &#x83B7;&#x53D6;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<span class=\"number\">1</span>&#x5217;&#x5143;&#x7D20;</div><div class=\"line\">    .value();  <span class=\"regexp\">//</span> &#x83B7;&#x53D6;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;</div><div class=\"line\"></div><div class=\"line\">console.log(Y); <span class=\"regexp\">//</span> &#x8F93;&#x51FA;: [ <span class=\"string\">&apos;a&apos;</span>, <span class=\"string\">&apos;b&apos;</span>, <span class=\"string\">&apos;c&apos;</span>, <span class=\"string\">&apos;d&apos;</span> ]</div></pre></td></tr></table></figure>\n<p>&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x591A;&#x4E2A;Underscore&#x51FD;&#x6570;&#x6765;&#x5B8C;&#x6210;&#x5355;&#x4E2A;&#x8BA1;&#x7B97;&#x4EFB;&#x52A1;&#x3002;&#x7C7B;&#x4F3C;&#x4E8E;Linux&#x4E2D;&#x7684;&#x7BA1;&#x9053;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x540E;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#xFF0C;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a href=\"http://underscorejs.org/#chain\">_.chain</a>&#x5C06;&#x591A;&#x4E2A;&#x51FD;&#x6570;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x6700;&#x540E;&#x4F7F;&#x7528;<a href=\"http://underscorejs.org/#value\">_.value</a>&#x83B7;&#x53D6;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x3002;</p>"},{"title":"FundebugBug","date":"2016-12-06T16:00:00.000Z","_content":"\n[Fundebug](https://fundebug.com)[JavaScript](https://docs.fundebug.com/notifier/javascript/)\n\n<!-- more -->\n\n(xiang)(dang)(ran)\n\nBug\n\n- ``this.$parent.elctrl is undefined``, \n- `Attempted to redefine property 'authenticate'.`, \n- `Cannot read property 'language' of null`\n- ...\n\nBug[Fundebug](https://fundebug.com)(^*^)\n\nBugBugFundebug\n\n> Bug\n\n### Bug\n\n11158:56\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"fundebug-catch-the-bug/email.png\" />\n</div>\n\nFundebug`AngularJS``landing``teamSign`****, :\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-catch-the-bug/error-detail.png\" />\n</div>\n\n\n\n(xia)(cai)`landing``teamSign`(Boss)\n\n8524\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-catch-the-bug/error-count.png\" />\n</div>\n\n`teamSign`token`teamSign``teamSign`\"teamSignin\"\"teamSign\"(Boss)\n\n### \n\n100%[Fundebug](https://fundebug.com)\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n\n","source":"_posts/2016/12/07/fundebug-catch-the-bug.md","raw":"---\ntitle: FundebugBug\n\ndate: 2016-12-07 00:00:00\n\ntags: [Fundebug]\n\n---\n\n[Fundebug](https://fundebug.com)[JavaScript](https://docs.fundebug.com/notifier/javascript/)\n\n<!-- more -->\n\n(xiang)(dang)(ran)\n\nBug\n\n- ``this.$parent.elctrl is undefined``, \n- `Attempted to redefine property 'authenticate'.`, \n- `Cannot read property 'language' of null`\n- ...\n\nBug[Fundebug](https://fundebug.com)(^*^)\n\nBugBugFundebug\n\n> Bug\n\n### Bug\n\n11158:56\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"fundebug-catch-the-bug/email.png\" />\n</div>\n\nFundebug`AngularJS``landing``teamSign`****, :\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-catch-the-bug/error-detail.png\" />\n</div>\n\n\n\n(xia)(cai)`landing``teamSign`(Boss)\n\n8524\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-catch-the-bug/error-count.png\" />\n</div>\n\n`teamSign`token`teamSign``teamSign`\"teamSignin\"\"teamSign\"(Boss)\n\n### \n\n100%[Fundebug](https://fundebug.com)\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n\n","slug":"2016/12/07/fundebug-catch-the-bug","published":1,"updated":"2016-12-07T14:35:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmk000v71fyl5et4lnf","content":"<p><a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x7F51;&#x7AD9;&#x4F7F;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;<a href=\"https://docs.fundebug.com/notifier/javascript/\" target=\"_blank\" rel=\"external\">JavaScript</a>&#x9519;&#x8BEF;&#x68C0;&#x6D4B;&#x63D2;&#x4EF6;&#xFF0C;&#x8FD9;&#x6837;&#x4EE3;&#x7801;&#x4E00;&#x65E6;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x7A0B;&#x5E8F;&#x5458;&#x5C0F;&#x660E;&#x5C31;&#x4F1A;&#x53CA;&#x65F6;&#x6536;&#x5230;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x6211;&#x4EEC;&#x7684;&#x524D;&#x7AEF;&#x4EE3;&#x7801;&#x505A;&#x8FC7;&#x4E25;&#x683C;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x548C;&#x7AEF;&#x5230;&#x7AEF;&#x6D4B;&#x8BD5;&#xFF0C;&#x8BB2;(xiang)&#x9053;(dang)&#x7406;(ran)&#x4E0D;&#x4F1A;&#x51FA;&#x4EC0;&#x4E48;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x7136;&#x800C;&#xFF0C;&#x73B0;&#x5B9E;&#x662F;&#x6B8B;&#x9177;&#x7684;&#xFF0C;&#x603B;&#x4F1A;&#x6709;&#x5404;&#x79CD;Bug&#x51FA;&#x73B0;&#xFF1A;</p>\n<ul>\n<li><code>this.$parent.elctrl is undefined</code>, </li>\n<li><code>Attempted to redefine property &apos;authenticate&apos;.</code>, </li>\n<li><code>Cannot read property &apos;language&apos; of null</code></li>\n<li>&#x2026;</li>\n</ul>\n<p>&#x4E4D;&#x4E00;&#x770B;&#x8FD9;&#x4E9B;&#x9519;&#x8BEF;&#x4E5F;&#x6CA1;&#x4EC0;&#x4E48;&#xFF0C;&#x7136;&#x800C;&#x4E8B;&#x5B9E;&#x8BC1;&#x660E;&#x5B83;&#x4EEC;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x5927;&#x5199;&#x7684;Bug&#x3002;&#x5F97;&#x76CA;&#x4E8E;<a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#xFF0C;&#x5C0F;&#x660E;&#x53CA;&#x65F6;&#x4FEE;&#x590D;&#x4E86;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x3002;(&#x6B64;&#x5904;&#x5E94;&#x6709;&#x638C;&#x58F0;^*^)</p>\n<p>&#x4ECA;&#x5929;&#x5462;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x804A;&#x804A;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Bug&#x3002;&#x8FD9;&#x4E2A;Bug&#x662F;&#x7531;&#x4E8E;&#x62FC;&#x5199;&#x5931;&#x8BEF;&#x9020;&#x6210;&#x7684;&#xFF0C;&#x5B83;&#x4F1A;&#x5BFC;&#x81F4;&#x7F51;&#x9875;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x663E;&#x793A;&#xFF0C;&#x867D;&#x8BF4;&#x5237;&#x65B0;&#x4E00;&#x4E0B;&#x5C31;&#x597D;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5374;&#x4F1A;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5C0F;&#x660E;&#x6700;&#x521D;&#x5374;&#x5FFD;&#x7565;&#x4E86;Fundebug&#x7684;&#x62A5;&#x8B66;&#x3002;</p>\n<blockquote>\n<p>&#x6BCF;&#x4E00;&#x6B21;&#x62A5;&#x9519;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x6F5C;&#x5728;&#x7684;Bug&#xFF0C;&#x4E0D;&#x5BB9;&#x5FFD;&#x89C6;&#x3002;</p>\n</blockquote>\n<h3 id=\"Bug&#x56DE;&#x653E;\"><a href=\"#Bug&#x56DE;&#x653E;\" class=\"headerlink\" title=\"Bug&#x56DE;&#x653E;\"></a>Bug&#x56DE;&#x653E;</h3><p>11&#x6708;15&#x65E5;&#x65E9;&#x4E0A;8:56&#xFF0C;&#x5C0F;&#x660E;&#x6536;&#x5230;&#x4E00;&#x5C01;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#xFF1A;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2016/12/07/fundebug-catch-the-bug/email.png\"><br></div>\n\n<p>Fundebug&#x7F51;&#x7AD9;&#x662F;&#x57FA;&#x4E8E;<code>AngularJS</code>&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x4E0E;&#x9875;&#x9762;&#x4E4B;&#x95F4;&#x7684;&#x8DF3;&#x8F6C;&#x6709;&#x5173;&#x3002;&#x7531;&#x90AE;&#x4EF6;&#x53EF;&#x77E5;&#xFF0C;&#x4ECE;<code>landing</code>&#x72B6;&#x6001;&#x8DF3;&#x8F6C;&#x5230;<code>teamSign</code>&#x72B6;&#x6001;&#x65F6;&#x53D1;&#x751F;&#x4E86;&#x9519;&#x8BEF;&#x3002;&#x70B9;&#x51FB;<strong>&#x67E5;&#x770B;&#x8BE6;&#x60C5;</strong>, &#x5C31;&#x80FD;&#x770B;&#x5230;&#x8BE5;&#x9519;&#x8BEF;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2016/12/07/fundebug-catch-the-bug/error-detail.png\"><br></div>\n\n<p>&#x5728;&#x9519;&#x8BEF;&#x9762;&#x677F;&#x4E2D;&#xFF0C;&#x5C0F;&#x660E;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x9519;&#x8BEF;&#x6808;&#xFF0C;&#x8BF7;&#x6C42;&#xFF0C;&#x8BBE;&#x5907;&#x548C;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5C0F;&#x660E;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x7ECF;&#x8FC7;&#x7B80;&#x5355;&#x5206;&#x6790;&#xFF0C;&#x5C0F;&#x660E;&#x65AD;(xia)&#x5B9A;(cai)&#x7F51;&#x7AD9;&#x7684;<code>landing</code>&#x9875;&#x9762;&#x6728;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5E94;&#x8BE5;&#x662F;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#x5BFC;&#x81F4;&#x52A0;&#x8F7D;&#x4E0D;&#x5B8C;&#x5168;&#x800C;&#x65E0;&#x6CD5;&#x8BC6;&#x522B;<code>teamSign</code>&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;&#x7F51;&#x7EDC;&#x597D;&#x4E00;&#x70B9;&#xFF0C;&#x52A0;&#x8F7D;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x5C31;&#x6CA1;&#x95EE;&#x9898;&#x4E86;&#x3002;&#x7136;&#x540E;&#x4ED6;&#x5C31;&#x5C06;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x4E22;&#x5230;&#x4E00;&#x8FB9;&#x53BB;&#x4E86;&#x3002;&#x3002;&#x3002;(Boss&#x51B3;&#x5B9A;&#x8BA9;&#x5C0F;&#x660E;&#x8DEA;&#x952E;&#x76D8;)</p>\n<p>&#x4F46;&#x662F;&#xFF0C;&#x95EE;&#x9898;&#x4E0D;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x4E4B;&#x540E;&#x4E00;&#x5171;&#x51FA;&#x73B0;&#x4E86;85&#x6B21;&#xFF0C;&#x7D2F;&#x8BA1;&#x5F71;&#x54CD;&#x4E86;24&#x4E2A;&#x7528;&#x6237;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2016/12/07/fundebug-catch-the-bug/error-count.png\"><br></div>\n\n<p>&#x5C0F;&#x660E;&#x610F;&#x8BC6;&#x5230;&#x95EE;&#x9898;&#x7684;&#x4E25;&#x91CD;&#x6027;&#x4E4B;&#x540E;&#xFF0C;&#x67E5;&#x627E;&#x4E86;<code>teamSign</code>&#x8DF3;&#x8F6C;&#x76F8;&#x5173;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x4ED6;&#x53D1;&#x73B0;&#xFF0C;&#x5728;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x91CC;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x767B;&#x5F55;token&#x56E0;&#x4E3A;&#x8D85;&#x65F6;&#x5931;&#x6548;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x8DF3;&#x8F6C;&#x5230;<code>teamSign</code>&#x9875;&#x9762;&#x8981;&#x6C42;&#x7528;&#x6237;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x8DF3;&#x8F6C;&#x5230;<code>teamSign</code>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x5931;&#x8D25;&#x5462;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x539F;&#x6765;&#x662F;&#x5C0F;&#x660E;&#x628A;&#x201D;teamSignin&#x201D;&#x5199;&#x6210;&#x4E86;&#x201D;teamSign&#x201D;&#x3002;(Boss&#x51B3;&#x5B9A;&#x8BA9;&#x5C0F;&#x660E;&#x6EDA;&#x51FA;&#x53BB;)</p>\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>&#x4E00;&#x4E2A;&#x5C0F;&#x5C0F;&#x7684;&#x62FC;&#x5199;&#x5931;&#x8BEF;&#xFF0C;&#x5374;&#x4F1A;&#x5BF9;&#x7528;&#x6237;&#x9020;&#x6210;&#x4E0D;&#x5C0F;&#x7684;&#x56F0;&#x6270;&#x3002;&#x800C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6D4B;&#x8BD5;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x4EA7;&#x54C1;100%&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x4F7F;&#x7528;<a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x8FDB;&#x884C;&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x53D1;&#x73B0;&#x5E76;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\" target=\"_blank\" rel=\"external\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>\n\n","excerpt":"<p><a href=\"https://fundebug.com\">Fundebug</a>&#x7F51;&#x7AD9;&#x4F7F;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;<a href=\"https://docs.fundebug.com/notifier/javascript/\">JavaScript</a>&#x9519;&#x8BEF;&#x68C0;&#x6D4B;&#x63D2;&#x4EF6;&#xFF0C;&#x8FD9;&#x6837;&#x4EE3;&#x7801;&#x4E00;&#x65E6;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x7A0B;&#x5E8F;&#x5458;&#x5C0F;&#x660E;&#x5C31;&#x4F1A;&#x53CA;&#x65F6;&#x6536;&#x5230;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#x3002;</p>","more":"<p>&#x6211;&#x4EEC;&#x7684;&#x524D;&#x7AEF;&#x4EE3;&#x7801;&#x505A;&#x8FC7;&#x4E25;&#x683C;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x548C;&#x7AEF;&#x5230;&#x7AEF;&#x6D4B;&#x8BD5;&#xFF0C;&#x8BB2;(xiang)&#x9053;(dang)&#x7406;(ran)&#x4E0D;&#x4F1A;&#x51FA;&#x4EC0;&#x4E48;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x7136;&#x800C;&#xFF0C;&#x73B0;&#x5B9E;&#x662F;&#x6B8B;&#x9177;&#x7684;&#xFF0C;&#x603B;&#x4F1A;&#x6709;&#x5404;&#x79CD;Bug&#x51FA;&#x73B0;&#xFF1A;</p>\n<ul>\n<li><code>this.$parent.elctrl is undefined</code>, </li>\n<li><code>Attempted to redefine property &apos;authenticate&apos;.</code>, </li>\n<li><code>Cannot read property &apos;language&apos; of null</code></li>\n<li>&#x2026;</li>\n</ul>\n<p>&#x4E4D;&#x4E00;&#x770B;&#x8FD9;&#x4E9B;&#x9519;&#x8BEF;&#x4E5F;&#x6CA1;&#x4EC0;&#x4E48;&#xFF0C;&#x7136;&#x800C;&#x4E8B;&#x5B9E;&#x8BC1;&#x660E;&#x5B83;&#x4EEC;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x5927;&#x5199;&#x7684;Bug&#x3002;&#x5F97;&#x76CA;&#x4E8E;<a href=\"https://fundebug.com\">Fundebug</a>&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#xFF0C;&#x5C0F;&#x660E;&#x53CA;&#x65F6;&#x4FEE;&#x590D;&#x4E86;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x3002;(&#x6B64;&#x5904;&#x5E94;&#x6709;&#x638C;&#x58F0;^*^)</p>\n<p>&#x4ECA;&#x5929;&#x5462;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x804A;&#x804A;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Bug&#x3002;&#x8FD9;&#x4E2A;Bug&#x662F;&#x7531;&#x4E8E;&#x62FC;&#x5199;&#x5931;&#x8BEF;&#x9020;&#x6210;&#x7684;&#xFF0C;&#x5B83;&#x4F1A;&#x5BFC;&#x81F4;&#x7F51;&#x9875;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x663E;&#x793A;&#xFF0C;&#x867D;&#x8BF4;&#x5237;&#x65B0;&#x4E00;&#x4E0B;&#x5C31;&#x597D;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5374;&#x4F1A;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5C0F;&#x660E;&#x6700;&#x521D;&#x5374;&#x5FFD;&#x7565;&#x4E86;Fundebug&#x7684;&#x62A5;&#x8B66;&#x3002;</p>\n<blockquote>\n<p>&#x6BCF;&#x4E00;&#x6B21;&#x62A5;&#x9519;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x6F5C;&#x5728;&#x7684;Bug&#xFF0C;&#x4E0D;&#x5BB9;&#x5FFD;&#x89C6;&#x3002;</p>\n</blockquote>\n<h3 id=\"Bug&#x56DE;&#x653E;\"><a href=\"#Bug&#x56DE;&#x653E;\" class=\"headerlink\" title=\"Bug&#x56DE;&#x653E;\"></a>Bug&#x56DE;&#x653E;</h3><p>11&#x6708;15&#x65E5;&#x65E9;&#x4E0A;8:56&#xFF0C;&#x5C0F;&#x660E;&#x6536;&#x5230;&#x4E00;&#x5C01;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#xFF1A;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2016/12/07/fundebug-catch-the-bug/email.png\"><br></div>\n\n<p>Fundebug&#x7F51;&#x7AD9;&#x662F;&#x57FA;&#x4E8E;<code>AngularJS</code>&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x4E0E;&#x9875;&#x9762;&#x4E4B;&#x95F4;&#x7684;&#x8DF3;&#x8F6C;&#x6709;&#x5173;&#x3002;&#x7531;&#x90AE;&#x4EF6;&#x53EF;&#x77E5;&#xFF0C;&#x4ECE;<code>landing</code>&#x72B6;&#x6001;&#x8DF3;&#x8F6C;&#x5230;<code>teamSign</code>&#x72B6;&#x6001;&#x65F6;&#x53D1;&#x751F;&#x4E86;&#x9519;&#x8BEF;&#x3002;&#x70B9;&#x51FB;<strong>&#x67E5;&#x770B;&#x8BE6;&#x60C5;</strong>, &#x5C31;&#x80FD;&#x770B;&#x5230;&#x8BE5;&#x9519;&#x8BEF;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2016/12/07/fundebug-catch-the-bug/error-detail.png\"><br></div>\n\n<p>&#x5728;&#x9519;&#x8BEF;&#x9762;&#x677F;&#x4E2D;&#xFF0C;&#x5C0F;&#x660E;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x9519;&#x8BEF;&#x6808;&#xFF0C;&#x8BF7;&#x6C42;&#xFF0C;&#x8BBE;&#x5907;&#x548C;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5C0F;&#x660E;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x7ECF;&#x8FC7;&#x7B80;&#x5355;&#x5206;&#x6790;&#xFF0C;&#x5C0F;&#x660E;&#x65AD;(xia)&#x5B9A;(cai)&#x7F51;&#x7AD9;&#x7684;<code>landing</code>&#x9875;&#x9762;&#x6728;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5E94;&#x8BE5;&#x662F;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#x5BFC;&#x81F4;&#x52A0;&#x8F7D;&#x4E0D;&#x5B8C;&#x5168;&#x800C;&#x65E0;&#x6CD5;&#x8BC6;&#x522B;<code>teamSign</code>&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;&#x7F51;&#x7EDC;&#x597D;&#x4E00;&#x70B9;&#xFF0C;&#x52A0;&#x8F7D;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x5C31;&#x6CA1;&#x95EE;&#x9898;&#x4E86;&#x3002;&#x7136;&#x540E;&#x4ED6;&#x5C31;&#x5C06;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x4E22;&#x5230;&#x4E00;&#x8FB9;&#x53BB;&#x4E86;&#x3002;&#x3002;&#x3002;(Boss&#x51B3;&#x5B9A;&#x8BA9;&#x5C0F;&#x660E;&#x8DEA;&#x952E;&#x76D8;)</p>\n<p>&#x4F46;&#x662F;&#xFF0C;&#x95EE;&#x9898;&#x4E0D;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x4E4B;&#x540E;&#x4E00;&#x5171;&#x51FA;&#x73B0;&#x4E86;85&#x6B21;&#xFF0C;&#x7D2F;&#x8BA1;&#x5F71;&#x54CD;&#x4E86;24&#x4E2A;&#x7528;&#x6237;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2016/12/07/fundebug-catch-the-bug/error-count.png\"><br></div>\n\n<p>&#x5C0F;&#x660E;&#x610F;&#x8BC6;&#x5230;&#x95EE;&#x9898;&#x7684;&#x4E25;&#x91CD;&#x6027;&#x4E4B;&#x540E;&#xFF0C;&#x67E5;&#x627E;&#x4E86;<code>teamSign</code>&#x8DF3;&#x8F6C;&#x76F8;&#x5173;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x4ED6;&#x53D1;&#x73B0;&#xFF0C;&#x5728;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x91CC;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x767B;&#x5F55;token&#x56E0;&#x4E3A;&#x8D85;&#x65F6;&#x5931;&#x6548;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x8DF3;&#x8F6C;&#x5230;<code>teamSign</code>&#x9875;&#x9762;&#x8981;&#x6C42;&#x7528;&#x6237;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x8DF3;&#x8F6C;&#x5230;<code>teamSign</code>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x5931;&#x8D25;&#x5462;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x539F;&#x6765;&#x662F;&#x5C0F;&#x660E;&#x628A;&#x201D;teamSignin&#x201D;&#x5199;&#x6210;&#x4E86;&#x201D;teamSign&#x201D;&#x3002;(Boss&#x51B3;&#x5B9A;&#x8BA9;&#x5C0F;&#x660E;&#x6EDA;&#x51FA;&#x53BB;)</p>\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>&#x4E00;&#x4E2A;&#x5C0F;&#x5C0F;&#x7684;&#x62FC;&#x5199;&#x5931;&#x8BEF;&#xFF0C;&#x5374;&#x4F1A;&#x5BF9;&#x7528;&#x6237;&#x9020;&#x6210;&#x4E0D;&#x5C0F;&#x7684;&#x56F0;&#x6270;&#x3002;&#x800C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6D4B;&#x8BD5;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x4EA7;&#x54C1;100%&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x4F7F;&#x7528;<a href=\"https://fundebug.com\">Fundebug</a>&#x8FDB;&#x884C;&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x53D1;&#x73B0;&#x5E76;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>"},{"title":"Fundebug","date":"2017-01-23T01:00:00.000Z","_content":"\nJavaSript[Fundebug](https://fundebug.com/)****\n\n<!-- more -->\n\n#### \n\nAPP\n\nAPPAPP\n\n=**WXML + WXSS + JavaScrip**WXMLWXSSHTMLCSSJavaScriptJavaScript**HTML + CSS + JavaScript**\n\nJavaScriptAPP...\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-wxjs/fundebug-wxjs.jpg\" />\n</div>\n\n\n#### Fundebug\n\n****\n\n- 100%\n- \n- \n\n\n\n<div style=\"text-align: center;\">\n<img style=\"width:40%;\" src=\"fundebug-support-wxjs/empty.png\" />\n</div>\n\n:(\n\n****\n\n- \n- \n- \n\n#### Fundebug\n\n- Fundebug\n- Fundebug\n- 2820.28KB1MB1/3000;\n- ;\n- systemInfouserInfo;\n\n#### Fundebug?\n\n##### 1. Fundebug<a href=\"https://ojv8yfncs.qnssl.com/fundebug.0.0.3.min.js\" download>fundebug.0.0.3.min.js</a>\n\nJavaScript\n\n##### 2. `app.js`fundebug`apikey`:\n\n```js\nvar fundebug = require('./libs/fundebug.0.0.3.min.js')\nfundebug.apikey = \"API-KEY\";\n```\n\n- `./libs/fundebug.0.0.3.min.js``app.js` \n- **apiKey**[](https://fundebug.com/team/create)[](https://fundebug.com/project/create)\n\n##### 3. [https://fundebug.com](https://fundebug.com)**request**\n\n[Fundebug](https://docs.fundebug.com/notifier/wxjs/)\n","source":"_posts/2017/01/23/fundebug-support-wxjs.md","raw":"---\ntitle: Fundebug\n\ndate: 2017-01-23 09:00:00\n\ntags: [Fundebug, ]\n---\n\nJavaSript[Fundebug](https://fundebug.com/)****\n\n<!-- more -->\n\n#### \n\nAPP\n\nAPPAPP\n\n=**WXML + WXSS + JavaScrip**WXMLWXSSHTMLCSSJavaScriptJavaScript**HTML + CSS + JavaScript**\n\nJavaScriptAPP...\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-wxjs/fundebug-wxjs.jpg\" />\n</div>\n\n\n#### Fundebug\n\n****\n\n- 100%\n- \n- \n\n\n\n<div style=\"text-align: center;\">\n<img style=\"width:40%;\" src=\"fundebug-support-wxjs/empty.png\" />\n</div>\n\n:(\n\n****\n\n- \n- \n- \n\n#### Fundebug\n\n- Fundebug\n- Fundebug\n- 2820.28KB1MB1/3000;\n- ;\n- systemInfouserInfo;\n\n#### Fundebug?\n\n##### 1. Fundebug<a href=\"https://ojv8yfncs.qnssl.com/fundebug.0.0.3.min.js\" download>fundebug.0.0.3.min.js</a>\n\nJavaScript\n\n##### 2. `app.js`fundebug`apikey`:\n\n```js\nvar fundebug = require('./libs/fundebug.0.0.3.min.js')\nfundebug.apikey = \"API-KEY\";\n```\n\n- `./libs/fundebug.0.0.3.min.js``app.js` \n- **apiKey**[](https://fundebug.com/team/create)[](https://fundebug.com/project/create)\n\n##### 3. [https://fundebug.com](https://fundebug.com)**request**\n\n[Fundebug](https://docs.fundebug.com/notifier/wxjs/)\n","slug":"2017/01/23/fundebug-support-wxjs","published":1,"updated":"2017-02-13T00:44:31.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtml000y71fyy3wej153","content":"<p>&#x4F5C;&#x4E3A;&#x4E13;&#x4E1A;&#x7684;JavaSript&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5E73;&#x53F0;&#xFF0C;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x7684;<strong>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#x670D;&#x52A1;</strong>&#x4E0A;&#x7EBF;&#x5566;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x53CA;&#x65F6;&#xFF0C;&#x9AD8;&#x6548;&#x5730;&#x53D1;&#x73B0;&#x5E76;&#x4E14;&#x89E3;&#x51B3;&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>\n<a id=\"more\"></a>\n<h4 id=\"&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;\"><a href=\"#&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;\" class=\"headerlink\" title=\"&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;\"></a>&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;</h4><p>&#x540E;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x65F6;&#x4EE3;&#xFF0C;&#x521B;&#x4E1A;&#x8005;&#x4EEC;&#x7EA0;&#x7ED3;&#x4E8E;&#x5F00;&#x53D1;APP&#x8FD8;&#x662F;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x800C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x6A2A;&#x7A7A;&#x51FA;&#x4E16;&#xFF0C;&#x8BA9;&#x5927;&#x5BB6;&#x591A;&#x4E86;&#x4E00;&#x79CD;&#x9009;&#x62E9;&#xFF0C;&#x4E5F;&#x7ED9;&#x672A;&#x6765;&#x589E;&#x52A0;&#x4E86;&#x66F4;&#x591A;&#x60F3;&#x8C61;&#x7A7A;&#x95F4;&#x3002;</p>\n<p>&#x5C0F;&#x7A0B;&#x5E8F;&#xFF0C;&#x6B63;&#x5982;&#x5B83;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x8FF7;&#x4F60;&#x7248;&#x7684;APP&#xFF1B;&#x5B83;&#x751F;&#x6839;&#x4E8E;&#x5FAE;&#x4FE1;&#x5E1D;&#x56FD;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x5347;&#x7EA7;&#x7248;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x3002;&#x51C6;&#x786E;&#x7684;&#x8BF4;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x4ECB;&#x4E8E;APP&#x7684;&#x7075;&#x6D3B;&#x4E0E;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x8F7B;&#x5DE7;&#x4E4B;&#x95F4;&#xFF0C;&#x7B26;&#x5408;&#x56FD;&#x4EBA;&#x5BF9;&#x4E2D;&#x5EB8;&#x4E4B;&#x9053;&#x7684;&#x4FE1;&#x4EF0;&#x3002;&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x4F4E;&#x9891;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x5DE5;&#x5177;&#x7C7B;&#x5E94;&#x7528;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;</p>\n<p>&#x4ECE;&#x6280;&#x672F;&#x89D2;&#x5EA6;&#x7406;&#x89E3;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;=<strong>WXML + WXSS + JavaScrip</strong>&#x3002;WXML&#x4E0E;WXSS&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x6362;&#x4E86;&#x4E2A;&#x9A6C;&#x7532;&#x7684;HTML&#x4E0E;CSS&#xFF0C;&#x800C;JavaScript&#x8FD8;&#x662F;&#x90A3;&#x4E2A;&#x65E0;&#x5904;&#x4E0D;&#x5728;&#x7684;JavaScript&#x3002;&#x6216;&#x8005;&#x8BF4;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x5C31;&#x662F;&#x5B9A;&#x5236;&#x7248;&#x7684;<strong>HTML + CSS + JavaScript</strong>&#x3002;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x795E;&#x5947;&#x4E4B;&#x5904;&#xFF0C;&#x4E0D;&#x8FC7;&#x662F;&#x5199;&#x51E0;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7F51;&#x9875;&#x7F62;&#x4E86;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x8BF4;&#x5C0F;&#x7A0B;&#x5E8F;&#x9884;&#x793A;&#x7740;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x8F7B;&#x578B;&#x5316;&#x7684;&#x5C0F;&#x65F6;&#x4EE3;&#xFF0C;&#x90A3;&#x4E48;JavaScript&#x6B63;&#x5728;&#x5F00;&#x521B;&#x5C5E;&#x4E8E;&#x5B83;&#x7684;&#x5927;&#x65F6;&#x4EE3;&#xFF0C;&#x4ECE;&#x7F51;&#x9875;&#xFF0C;&#x5230;&#x540E;&#x7AEF;&#xFF0C;&#x5230;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF0C;&#x5230;APP&#x4EE5;&#x53CA;&#x667A;&#x80FD;&#x786C;&#x4EF6;&#x2026;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/01/23/fundebug-support-wxjs/fundebug-wxjs.jpg\"><br></div>\n\n\n<h4 id=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;\"><a href=\"#Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;\" class=\"headerlink\" title=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;\"></a>Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;</h4><p>&#x7A0B;&#x5E8F;&#x5458;&#x901A;&#x5E38;&#x662F;&#x6BD4;&#x8F83;&#x81EA;&#x4FE1;&#x7684;&#xFF0C;&#x4ED6;&#x4EEC;&#x575A;&#x6301;<strong>&#x81EA;&#x5DF1;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x6CA1;&#x6709;&#x95EE;&#x9898;</strong>&#x3002;&#x7136;&#x800C;&#xFF0C;&#x518D;&#x8FFD;&#x95EE;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#xFF1A;</p>\n<ul>\n<li>&#x6211;&#x7684;&#x4EE3;&#x7801;&#x771F;&#x7684;100%&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x5417;&#xFF1F;</li>\n<li>&#x6211;&#x505A;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x6D4B;&#x8BD5;&#x5417;&#xFF1F;</li>\n<li>&#x96BE;&#x9053;&#x6211;&#x8981;&#x82B1;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x6CA1;&#x5B8C;&#x6CA1;&#x4E86;&#x7684;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</li>\n</ul>\n<p>&#x6709;&#x65F6;&#xFF0C;&#x7528;&#x6237;&#x6253;&#x5F00;&#x67D0;&#x4E2A;&#x9875;&#x9762;&#x662F;&#x7A7A;&#x767D;&#x7684;&#xFF1A;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:40%;\" src=\"/2017/01/23/fundebug-support-wxjs/empty.png\"><br></div>\n\n<p>&#x7136;&#x540E;&#xFF0C;&#x7528;&#x6237;&#x8F6C;&#x8EAB;&#x79BB;&#x5F00;&#x4E86;:(</p>\n<p><strong>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x5728;&#x54EA;&#xFF1F;</strong></p>\n<ul>\n<li>&#x5C0F;&#x7A0B;&#x5E8F;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x53EF;&#x662F;&#x5F00;&#x53D1;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x554A;&#xFF1B;</li>\n<li>&#x5F53;&#x6709;&#x7528;&#x6237;&#x53CD;&#x9988;&#x95EE;&#x9898;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5B9E;&#x66F4;&#x591A;&#x7528;&#x6237;&#x5DF2;&#x7ECF;&#x88AB;&#x5751;&#x4E86;&#x554A;&#xFF1B;</li>\n<li>&#x77E5;&#x9053;&#x51FA;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x5F00;&#x53D1;&#x8005;&#x6CA1;&#x6709;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x65E0;&#x4ECE;&#x4E0B;&#x624B;&#x554A;&#xFF1B;</li>\n</ul>\n<h4 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;</h4><ul>\n<li>&#x5C0F;&#x7A0B;&#x5E8F;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;Fundebug&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x901A;&#x8FC7;&#x90AE;&#x4EF6;&#x63D0;&#x9192;&#x5F00;&#x53D1;&#x8005;&#xFF1B;</li>\n<li>Fundebug&#x63D0;&#x4F9B;&#x8BE6;&#x7EC6;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x548C;&#x5F3A;&#x5927;&#x7684;&#x9519;&#x8BEF;&#x7BA1;&#x7406;&#x9762;&#x677F;&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x5FEB;&#x901F;&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#xFF1B;</li>\n<li>&#x63D2;&#x4EF6;&#x4EC5;282&#x5B57;&#x8282;&#xFF0C;&#x5373;0.28KB&#xFF0C;&#x4E0D;&#x5230;1MB&#x7684;1/3000;</li>\n<li>&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x641E;&#x5B9A;;</li>\n<li>&#x4EC5;&#x6536;&#x96C6;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x4FDD;&#x62A4;&#x7528;&#x6237;&#x9690;&#x79C1;&#xFF0C;&#x6536;&#x96C6;systemInfo&#x548C;userInfo&#x9700;&#x8981;&#x5F00;&#x53D1;&#x8005;&#x8FDB;&#x884C;&#x914D;&#x7F6E;;</li>\n</ul>\n<h4 id=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\"><a href=\"#&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?\"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?</h4><h5 id=\"1-&#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;fundebug-0-0-3-min-js\"><a href=\"#1-&#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;fundebug-0-0-3-min-js\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;fundebug.0.0.3.min.js\"></a>1. &#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;<a href=\"https://ojv8yfncs.qnssl.com/fundebug.0.0.3.min.js\" download=\"\" target=\"_blank\" rel=\"external\">fundebug.0.0.3.min.js</a></h5><p>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E0D;&#x652F;&#x6301;&#x5BFC;&#x5165;&#x5916;&#x90E8;JavaScript&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#xFF0C;&#x7136;&#x540E;&#x653E;&#x5230;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x5185;&#x3002;</p>\n<h5 id=\"2-&#x5728;app-js&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\"><a href=\"#2-&#x5728;app-js&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\" class=\"headerlink\" title=\"2. &#x5728;app.js&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey:\"></a>2. &#x5728;<code>app.js</code>&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;<code>apikey</code>:</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fundebug = <span class=\"built_in\">require</span>(<span class=\"string\">&apos;./libs/fundebug.0.0.3.min.js&apos;</span>)</div><div class=\"line\">fundebug.apikey = <span class=\"string\">&quot;API-KEY&quot;</span>;</div></pre></td></tr></table></figure>\n<ul>\n<li><code>./libs/fundebug.0.0.3.min.js</code>&#x4E3A;&#x76F8;&#x5BF9;&#x4E8E;<code>app.js</code>&#x7684;&#x8DEF;&#x5F84; &#x3002;</li>\n<li>&#x83B7;&#x53D6;<strong>apiKey&#x9700;&#x8981;</strong><a href=\"https://fundebug.com/team/create\" target=\"_blank\" rel=\"external\">&#x514D;&#x8D39;&#x6CE8;&#x518C;</a>&#x5E10;&#x53F7;&#x5E76;&#x4E14;<a href=\"https://fundebug.com/project/create\" target=\"_blank\" rel=\"external\">&#x521B;&#x5EFA;&#x9879;&#x76EE;</a>&#x3002;</li>\n</ul>\n<h5 id=\"3-&#x5C06;https-fundebug-com&#x6DFB;&#x52A0;&#x5230;request&#x5408;&#x6CD5;&#x57DF;&#x540D;\"><a href=\"#3-&#x5C06;https-fundebug-com&#x6DFB;&#x52A0;&#x5230;request&#x5408;&#x6CD5;&#x57DF;&#x540D;\" class=\"headerlink\" title=\"3. &#x5C06;https://fundebug.com&#x6DFB;&#x52A0;&#x5230;request&#x5408;&#x6CD5;&#x57DF;&#x540D;\"></a>3. &#x5C06;<a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">https://fundebug.com</a>&#x6DFB;&#x52A0;&#x5230;<strong>request&#x5408;&#x6CD5;&#x57DF;&#x540D;</strong></h5><p>&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x8BF7;&#x67E5;&#x770B;<a href=\"https://docs.fundebug.com/notifier/wxjs/\" target=\"_blank\" rel=\"external\">Fundebug&#x6587;&#x6863;</a></p>\n","excerpt":"<p>&#x4F5C;&#x4E3A;&#x4E13;&#x4E1A;&#x7684;JavaSript&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5E73;&#x53F0;&#xFF0C;<a href=\"https://fundebug.com/\">Fundebug</a>&#x7684;<strong>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#x670D;&#x52A1;</strong>&#x4E0A;&#x7EBF;&#x5566;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x53CA;&#x65F6;&#xFF0C;&#x9AD8;&#x6548;&#x5730;&#x53D1;&#x73B0;&#x5E76;&#x4E14;&#x89E3;&#x51B3;&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>","more":"<h4 id=\"&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;\"><a href=\"#&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;\" class=\"headerlink\" title=\"&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;\"></a>&#x5C0F;&#x7A0B;&#x5E8F;&#x5927;&#x65F6;&#x4EE3;</h4><p>&#x540E;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x65F6;&#x4EE3;&#xFF0C;&#x521B;&#x4E1A;&#x8005;&#x4EEC;&#x7EA0;&#x7ED3;&#x4E8E;&#x5F00;&#x53D1;APP&#x8FD8;&#x662F;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x800C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x6A2A;&#x7A7A;&#x51FA;&#x4E16;&#xFF0C;&#x8BA9;&#x5927;&#x5BB6;&#x591A;&#x4E86;&#x4E00;&#x79CD;&#x9009;&#x62E9;&#xFF0C;&#x4E5F;&#x7ED9;&#x672A;&#x6765;&#x589E;&#x52A0;&#x4E86;&#x66F4;&#x591A;&#x60F3;&#x8C61;&#x7A7A;&#x95F4;&#x3002;</p>\n<p>&#x5C0F;&#x7A0B;&#x5E8F;&#xFF0C;&#x6B63;&#x5982;&#x5B83;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x8FF7;&#x4F60;&#x7248;&#x7684;APP&#xFF1B;&#x5B83;&#x751F;&#x6839;&#x4E8E;&#x5FAE;&#x4FE1;&#x5E1D;&#x56FD;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x5347;&#x7EA7;&#x7248;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x3002;&#x51C6;&#x786E;&#x7684;&#x8BF4;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x4ECB;&#x4E8E;APP&#x7684;&#x7075;&#x6D3B;&#x4E0E;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x8F7B;&#x5DE7;&#x4E4B;&#x95F4;&#xFF0C;&#x7B26;&#x5408;&#x56FD;&#x4EBA;&#x5BF9;&#x4E2D;&#x5EB8;&#x4E4B;&#x9053;&#x7684;&#x4FE1;&#x4EF0;&#x3002;&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x4F4E;&#x9891;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x5DE5;&#x5177;&#x7C7B;&#x5E94;&#x7528;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;</p>\n<p>&#x4ECE;&#x6280;&#x672F;&#x89D2;&#x5EA6;&#x7406;&#x89E3;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;=<strong>WXML + WXSS + JavaScrip</strong>&#x3002;WXML&#x4E0E;WXSS&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x6362;&#x4E86;&#x4E2A;&#x9A6C;&#x7532;&#x7684;HTML&#x4E0E;CSS&#xFF0C;&#x800C;JavaScript&#x8FD8;&#x662F;&#x90A3;&#x4E2A;&#x65E0;&#x5904;&#x4E0D;&#x5728;&#x7684;JavaScript&#x3002;&#x6216;&#x8005;&#x8BF4;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x5C31;&#x662F;&#x5B9A;&#x5236;&#x7248;&#x7684;<strong>HTML + CSS + JavaScript</strong>&#x3002;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x795E;&#x5947;&#x4E4B;&#x5904;&#xFF0C;&#x4E0D;&#x8FC7;&#x662F;&#x5199;&#x51E0;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7F51;&#x9875;&#x7F62;&#x4E86;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x8BF4;&#x5C0F;&#x7A0B;&#x5E8F;&#x9884;&#x793A;&#x7740;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x8F7B;&#x578B;&#x5316;&#x7684;&#x5C0F;&#x65F6;&#x4EE3;&#xFF0C;&#x90A3;&#x4E48;JavaScript&#x6B63;&#x5728;&#x5F00;&#x521B;&#x5C5E;&#x4E8E;&#x5B83;&#x7684;&#x5927;&#x65F6;&#x4EE3;&#xFF0C;&#x4ECE;&#x7F51;&#x9875;&#xFF0C;&#x5230;&#x540E;&#x7AEF;&#xFF0C;&#x5230;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF0C;&#x5230;APP&#x4EE5;&#x53CA;&#x667A;&#x80FD;&#x786C;&#x4EF6;&#x2026;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/01/23/fundebug-support-wxjs/fundebug-wxjs.jpg\"><br></div>\n\n\n<h4 id=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;\"><a href=\"#Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;\" class=\"headerlink\" title=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;\"></a>Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF1F;</h4><p>&#x7A0B;&#x5E8F;&#x5458;&#x901A;&#x5E38;&#x662F;&#x6BD4;&#x8F83;&#x81EA;&#x4FE1;&#x7684;&#xFF0C;&#x4ED6;&#x4EEC;&#x575A;&#x6301;<strong>&#x81EA;&#x5DF1;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x6CA1;&#x6709;&#x95EE;&#x9898;</strong>&#x3002;&#x7136;&#x800C;&#xFF0C;&#x518D;&#x8FFD;&#x95EE;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#xFF1A;</p>\n<ul>\n<li>&#x6211;&#x7684;&#x4EE3;&#x7801;&#x771F;&#x7684;100%&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x5417;&#xFF1F;</li>\n<li>&#x6211;&#x505A;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x6D4B;&#x8BD5;&#x5417;&#xFF1F;</li>\n<li>&#x96BE;&#x9053;&#x6211;&#x8981;&#x82B1;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x6CA1;&#x5B8C;&#x6CA1;&#x4E86;&#x7684;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</li>\n</ul>\n<p>&#x6709;&#x65F6;&#xFF0C;&#x7528;&#x6237;&#x6253;&#x5F00;&#x67D0;&#x4E2A;&#x9875;&#x9762;&#x662F;&#x7A7A;&#x767D;&#x7684;&#xFF1A;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:40%;\" src=\"/2017/01/23/fundebug-support-wxjs/empty.png\"><br></div>\n\n<p>&#x7136;&#x540E;&#xFF0C;&#x7528;&#x6237;&#x8F6C;&#x8EAB;&#x79BB;&#x5F00;&#x4E86;:(</p>\n<p><strong>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x5728;&#x54EA;&#xFF1F;</strong></p>\n<ul>\n<li>&#x5C0F;&#x7A0B;&#x5E8F;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x53EF;&#x662F;&#x5F00;&#x53D1;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x554A;&#xFF1B;</li>\n<li>&#x5F53;&#x6709;&#x7528;&#x6237;&#x53CD;&#x9988;&#x95EE;&#x9898;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5B9E;&#x66F4;&#x591A;&#x7528;&#x6237;&#x5DF2;&#x7ECF;&#x88AB;&#x5751;&#x4E86;&#x554A;&#xFF1B;</li>\n<li>&#x77E5;&#x9053;&#x51FA;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x5F00;&#x53D1;&#x8005;&#x6CA1;&#x6709;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x65E0;&#x4ECE;&#x4E0B;&#x624B;&#x554A;&#xFF1B;</li>\n</ul>\n<h4 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;</h4><ul>\n<li>&#x5C0F;&#x7A0B;&#x5E8F;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;Fundebug&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x901A;&#x8FC7;&#x90AE;&#x4EF6;&#x63D0;&#x9192;&#x5F00;&#x53D1;&#x8005;&#xFF1B;</li>\n<li>Fundebug&#x63D0;&#x4F9B;&#x8BE6;&#x7EC6;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x548C;&#x5F3A;&#x5927;&#x7684;&#x9519;&#x8BEF;&#x7BA1;&#x7406;&#x9762;&#x677F;&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x5FEB;&#x901F;&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#xFF1B;</li>\n<li>&#x63D2;&#x4EF6;&#x4EC5;282&#x5B57;&#x8282;&#xFF0C;&#x5373;0.28KB&#xFF0C;&#x4E0D;&#x5230;1MB&#x7684;1/3000;</li>\n<li>&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x641E;&#x5B9A;;</li>\n<li>&#x4EC5;&#x6536;&#x96C6;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x4FDD;&#x62A4;&#x7528;&#x6237;&#x9690;&#x79C1;&#xFF0C;&#x6536;&#x96C6;systemInfo&#x548C;userInfo&#x9700;&#x8981;&#x5F00;&#x53D1;&#x8005;&#x8FDB;&#x884C;&#x914D;&#x7F6E;;</li>\n</ul>\n<h4 id=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\"><a href=\"#&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?\"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?</h4><h5 id=\"1-&#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;fundebug-0-0-3-min-js\"><a href=\"#1-&#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;fundebug-0-0-3-min-js\" class=\"headerlink\" title=\"1. &#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;fundebug.0.0.3.min.js\"></a>1. &#x4E0B;&#x8F7D;Fundebug&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x63D2;&#x4EF6;<a href=\"https://ojv8yfncs.qnssl.com/fundebug.0.0.3.min.js\" download=\"\">fundebug.0.0.3.min.js</a></h5><p>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E0D;&#x652F;&#x6301;&#x5BFC;&#x5165;&#x5916;&#x90E8;JavaScript&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#xFF0C;&#x7136;&#x540E;&#x653E;&#x5230;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x5185;&#x3002;</p>\n<h5 id=\"2-&#x5728;app-js&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\"><a href=\"#2-&#x5728;app-js&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\" class=\"headerlink\" title=\"2. &#x5728;app.js&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey:\"></a>2. &#x5728;<code>app.js</code>&#x4E2D;&#x5F15;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;<code>apikey</code>:</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fundebug = <span class=\"built_in\">require</span>(<span class=\"string\">&apos;./libs/fundebug.0.0.3.min.js&apos;</span>)</div><div class=\"line\">fundebug.apikey = <span class=\"string\">&quot;API-KEY&quot;</span>;</div></pre></td></tr></table></figure>\n<ul>\n<li><code>./libs/fundebug.0.0.3.min.js</code>&#x4E3A;&#x76F8;&#x5BF9;&#x4E8E;<code>app.js</code>&#x7684;&#x8DEF;&#x5F84; &#x3002;</li>\n<li>&#x83B7;&#x53D6;<strong>apiKey&#x9700;&#x8981;</strong><a href=\"https://fundebug.com/team/create\">&#x514D;&#x8D39;&#x6CE8;&#x518C;</a>&#x5E10;&#x53F7;&#x5E76;&#x4E14;<a href=\"https://fundebug.com/project/create\">&#x521B;&#x5EFA;&#x9879;&#x76EE;</a>&#x3002;</li>\n</ul>\n<h5 id=\"3-&#x5C06;https-fundebug-com&#x6DFB;&#x52A0;&#x5230;request&#x5408;&#x6CD5;&#x57DF;&#x540D;\"><a href=\"#3-&#x5C06;https-fundebug-com&#x6DFB;&#x52A0;&#x5230;request&#x5408;&#x6CD5;&#x57DF;&#x540D;\" class=\"headerlink\" title=\"3. &#x5C06;https://fundebug.com&#x6DFB;&#x52A0;&#x5230;request&#x5408;&#x6CD5;&#x57DF;&#x540D;\"></a>3. &#x5C06;<a href=\"https://fundebug.com\">https://fundebug.com</a>&#x6DFB;&#x52A0;&#x5230;<strong>request&#x5408;&#x6CD5;&#x57DF;&#x540D;</strong></h5><p>&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x8BF7;&#x67E5;&#x770B;<a href=\"https://docs.fundebug.com/notifier/wxjs/\">Fundebug&#x6587;&#x6863;</a></p>"},{"title":"Fundebug","date":"2017-01-16T01:00:00.000Z","_content":"\n[Fundebug](https://fundebug.com)\n\n**JavaScript**:\n\n<!-- more -->\n\n- [IEFirefoxJavascript](http://www.cnblogs.com/wiky/archive/2010/01/09/IE-and-Firefox-Javascript-compatibility.html)\n- [JavaScript](http://www.cnblogs.com/DF-fzh/p/5408241.html)\n- [JavaScript](http://www.ituring.com.cn/article/67234)\n- ...\n\n#### Fundebug\n\n[Fundebug](https://fundebug.com)JavaScriptFundebugJavaScriptDebugIE**IE 6IE 11**\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-all-browsers/browser.jpg\" />\n</div>\n\n#### \n\n[](http://tongji.baidu.com/data/browser)20161012:\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-all-browsers/browser-share.png\" />\n</div>\n\nIE26%Chrome****triendIE\n\nFundebug****\n\n\n#### \n\n- [Error](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error)ChromeErrorfileNamelineNumbercolumnNumber;\n- [Onerror](https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onerror)FirefoxcolumnNumber error\n- APIIE[JSON](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON);\n- \n- \n- IEIE;\n- ......\n\n\n\n#### \n\nname**SyntaxError****ReferenceError**message**can not find variable fundebug****fundebug is not defined**lineNumbercolumnNumberstackurl\n\n**90%**\n\n[Fundebug](https://fundebug.com/team/create)\n\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n\n","source":"_posts/2017/01/16/fundebug-support-all-browsers.md","raw":"---\ntitle: Fundebug\n\ndate: 2017-01-16 09:00:00\n\ntags: [Fundebug, JavaScript]\n---\n\n[Fundebug](https://fundebug.com)\n\n**JavaScript**:\n\n<!-- more -->\n\n- [IEFirefoxJavascript](http://www.cnblogs.com/wiky/archive/2010/01/09/IE-and-Firefox-Javascript-compatibility.html)\n- [JavaScript](http://www.cnblogs.com/DF-fzh/p/5408241.html)\n- [JavaScript](http://www.ituring.com.cn/article/67234)\n- ...\n\n#### Fundebug\n\n[Fundebug](https://fundebug.com)JavaScriptFundebugJavaScriptDebugIE**IE 6IE 11**\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-all-browsers/browser.jpg\" />\n</div>\n\n#### \n\n[](http://tongji.baidu.com/data/browser)20161012:\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-all-browsers/browser-share.png\" />\n</div>\n\nIE26%Chrome****triendIE\n\nFundebug****\n\n\n#### \n\n- [Error](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error)ChromeErrorfileNamelineNumbercolumnNumber;\n- [Onerror](https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onerror)FirefoxcolumnNumber error\n- APIIE[JSON](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON);\n- \n- \n- IEIE;\n- ......\n\n\n\n#### \n\nname**SyntaxError****ReferenceError**message**can not find variable fundebug****fundebug is not defined**lineNumbercolumnNumberstackurl\n\n**90%**\n\n[Fundebug](https://fundebug.com/team/create)\n\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n\n","slug":"2017/01/16/fundebug-support-all-browsers","published":1,"updated":"2017-02-13T00:45:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmo001071fywsfpleku","content":"<p><a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x5DF2;&#x7ECF;&#x5168;&#x9762;&#x652F;&#x6301;&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x5566;&#xFF01;</p>\n<p>&#x5BF9;&#x4E8E;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x4E00;&#x4EF6;&#x975E;&#x5E38;&#x75DB;&#x82E6;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x5728;&#x641C;&#x7D22;&#x6846;&#x4E2D;&#x8F93;&#x5165;&#x5173;&#x952E;&#x5B57;<strong>JavaScript&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;</strong>&#xFF0C;&#x7ED3;&#x679C;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"http://www.cnblogs.com/wiky/archive/2010/01/09/IE-and-Firefox-Javascript-compatibility.html\" target=\"_blank\" rel=\"external\">IE&#x548C;Firefox&#x7684;Javascript&#x517C;&#x5BB9;&#x6027;&#x603B;&#x7ED3;</a></li>\n<li><a href=\"http://www.cnblogs.com/DF-fzh/p/5408241.html\" target=\"_blank\" rel=\"external\">JavaScript&#x4E2D;&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;&#x95EE;&#x9898;</a></li>\n<li><a href=\"http://www.ituring.com.cn/article/67234\" target=\"_blank\" rel=\"external\">JavaScript&#x521D;&#x5B66;&#x8005;&#x5EFA;&#x8BAE;&#xFF1A;&#x4E0D;&#x8981;&#x53BB;&#x7BA1;&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;</a></li>\n<li>&#x2026;</li>\n</ul>\n<h4 id=\"&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug\"><a href=\"#&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug\" class=\"headerlink\" title=\"&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug\"></a>&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug</h4><p><a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x662F;&#x524D;&#x7AEF;JavaScript&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5E73;&#x53F0;&#xFF0C;&#x7ECF;&#x8FC7;&#x5927;&#x91CF;&#x517C;&#x5BB9;&#x6027;&#x8C03;&#x8BD5;&#xFF0C;Fundebug&#x7684;JavaScript&#x76D1;&#x6D4B;&#x63D2;&#x4EF6;&#x5DF2;&#x7ECF;&#x80FD;&#x591F;&#x5728;&#x5404;&#x79CD;&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x81EA;&#x52A8;&#x6355;&#x83B7;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x6700;&#x5168;&#x9762;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x5FEB;&#x7684;Debug&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x8FD1;&#x6765;&#x4E0D;&#x600E;&#x4E48;&#x53D7;&#x5F85;&#x89C1;&#x7684;IE&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;&#x5168;&#x9762;&#x652F;&#x6301;&#xFF0C;<strong>&#x4ECE;IE 6&#x5230;IE 11</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/01/16/fundebug-support-all-browsers/browser.jpg\"><br></div>\n\n<h4 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;</h4><p>&#x6839;&#x636E;<a href=\"http://tongji.baidu.com/data/browser\" target=\"_blank\" rel=\"external\">&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</a>&#x7684;&#x6700;&#x65B0;&#x6570;&#x636E;&#xFF0C;2016&#x5E74;10&#x6708;&#x4EFD;&#x5230;12&#x6708;&#x4EFD;&#x56FD;&#x5185;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4EFD;&#x989D;&#x5982;&#x56FE;&#x6240;&#x793A;:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/01/16/fundebug-support-all-browsers/browser-share.png\"><br></div>\n\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x7528;&#x6237;&#x504F;&#x597D;&#x5343;&#x5DEE;&#x4E07;&#x522B;&#xFF0C;&#x800C;&#x5404;&#x7248;&#x672C;&#x7684;IE&#x7684;&#x5E02;&#x573A;&#x4EFD;&#x989D;&#x603B;&#x8BA1;&#x4E3A;26%&#xFF0C;&#x4EC5;&#x6B21;&#x4E8E;Chrome&#x3002;<strong>&#x6211;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x8BDD;&#x53EF;&#x8BF4;&#x5462;&#xFF1F;</strong>&#x56FD;&#x5185;&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x91C7;&#x7528;&#x53CC;&#x5185;&#x6838;&#x673A;&#x5236;&#xFF0C;&#x5373;&#x517C;&#x5BB9;&#x6A21;&#x5F0F;&#x548C;&#x6781;&#x901F;&#x6A21;&#x5F0F;&#xFF0C;&#x800C;&#x6240;&#x8C13;&#x517C;&#x5BB9;&#x6A21;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;triend&#x5185;&#x6838;&#xFF0C;&#x5373;IE&#x5185;&#x6838;&#x3002;</p>\n<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x81EA;&#x5E26;&#x4EF7;&#x503C;&#x89C2;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;Fundebug&#x5E0C;&#x671B;<strong>&#x901A;&#x8FC7;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;</strong>&#x3002;</p>\n<h4 id=\"&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;\"><a href=\"#&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;\" class=\"headerlink\" title=\"&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;\"></a>&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;</h4><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error\" target=\"_blank\" rel=\"external\">Error&#x5BF9;&#x8C61;</a>&#x7684;&#x5C5E;&#x6027;&#x5404;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x4F8B;&#x5982;&#x5927;&#x540D;&#x9F0E;&#x9F0E;&#x7684;Chrome&#x7684;Error&#x5BF9;&#x8C61;&#x6728;&#x6709;fileName&#xFF0C;lineNumber&#x4EE5;&#x53CA;columnNumber&#x5C5E;&#x6027;;</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onerror\" target=\"_blank\" rel=\"external\">Onerror&#x4E8B;&#x4EF6;</a>&#x7684;&#x53C2;&#x6570;&#x5404;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x4F8B;&#x5982;&#x8001;&#x7248;&#x672C;&#x7684;Firefox&#x6728;&#x6709;columnNumber &#x548C;error&#x53C2;&#x6570;</li>\n<li>API&#x4E0D;&#x540C;&#xFF0C;&#x4F8B;&#x5982;&#x8001;&#x7248;&#x672C;&#x7684;IE&#x6728;&#x6709;<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON\" target=\"_blank\" rel=\"external\">JSON&#x5BF9;&#x8C61;</a>;</li>\n<li>&#x540C;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x540D;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x542B;&#x4E49;&#x4E0D;&#x540C;&#xFF1B;</li>\n<li>&#x540C;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x540D;&#x79F0;&#x4E0D;&#x540C;&#xFF1B;</li>\n<li>&#x56FD;&#x5185;&#x6D4F;&#x89C8;&#x5668;&#x7684;IE&#x517C;&#x5BB9;&#x6A21;&#x5F0F;&#x4E0E;&#x771F;&#x6B63;&#x7684;IE&#x4E5F;&#x7565;&#x6709;&#x4E0D;&#x540C;;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<p>&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x5927;&#x6982;&#x524D;&#x7AEF;&#x5DE5;&#x7A0B;&#x5E08;&#x90FD;&#x4F1A;&#x6DF1;&#x6709;&#x540C;&#x611F;&#x5427;&#x3002;</p>\n<h4 id=\"&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;\"><a href=\"#&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;\"></a>&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;</h4><p>&#x540C;&#x6837;&#x7684;&#x4EE3;&#x7801;&#x4EA7;&#x751F;&#x7684;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#x7684;&#x3002;name&#x4E0D;&#x540C;&#x7684;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x4F8B;&#x5982;<strong>SyntaxError</strong>&#x4E0E;<strong>ReferenceError</strong>&#xFF1B;message&#x4E0D;&#x540C;&#x7684;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x4F8B;&#x5982;<strong>can not find variable fundebug</strong>&#x4E0E;<strong>fundebug is not defined</strong>&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x4E0B;&#x7684;lineNumber&#xFF0C;columnNumber&#xFF0C;stack&#xFF0C;&#x4E0E;url&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x6536;&#x96C6;&#x7684;&#x9519;&#x8BEF;&#x5229;&#x7528;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x667A;&#x80FD;&#x805A;&#x5408;&#xFF0C;&#x5C3D;&#x91CF;&#x5C06;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x805A;&#x5408;&#x5230;&#x4E00;&#x8D77;&#xFF0C;&#x51CF;&#x5C11;&#x91CD;&#x590D;&#x62A5;&#x8B66;&#x3002;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;&#x521D;&#x6B65;&#x4F30;&#x7B97;&#xFF0C;&#x76EE;&#x524D;&#x805A;&#x5408;&#x7B97;&#x6CD5;&#x80FD;&#x591F;&#x5C06;<strong>90%</strong>&#x7684;&#x91CD;&#x590D;&#x9519;&#x8BEF;&#x6210;&#x529F;&#x805A;&#x5408;&#xFF0C;&#x8FD9;&#x6837;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x4E86;&#x7528;&#x6237;&#x5206;&#x6790;&#x9519;&#x8BEF;&#x7684;&#x6548;&#x7387;&#x3002;</p>\n<p>&#x8FD8;&#x7B49;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x611F;&#x89C9;&#x514D;&#x8D39;&#x6CE8;&#x518C;<a href=\"https://fundebug.com/team/create\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x5427;&#xFF01;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\" target=\"_blank\" rel=\"external\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>\n\n","excerpt":"<p><a href=\"https://fundebug.com\">Fundebug</a>&#x5DF2;&#x7ECF;&#x5168;&#x9762;&#x652F;&#x6301;&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x5566;&#xFF01;</p>\n<p>&#x5BF9;&#x4E8E;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x4E00;&#x4EF6;&#x975E;&#x5E38;&#x75DB;&#x82E6;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x5728;&#x641C;&#x7D22;&#x6846;&#x4E2D;&#x8F93;&#x5165;&#x5173;&#x952E;&#x5B57;<strong>JavaScript&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;</strong>&#xFF0C;&#x7ED3;&#x679C;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>","more":"<ul>\n<li><a href=\"http://www.cnblogs.com/wiky/archive/2010/01/09/IE-and-Firefox-Javascript-compatibility.html\">IE&#x548C;Firefox&#x7684;Javascript&#x517C;&#x5BB9;&#x6027;&#x603B;&#x7ED3;</a></li>\n<li><a href=\"http://www.cnblogs.com/DF-fzh/p/5408241.html\">JavaScript&#x4E2D;&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;&#x95EE;&#x9898;</a></li>\n<li><a href=\"http://www.ituring.com.cn/article/67234\">JavaScript&#x521D;&#x5B66;&#x8005;&#x5EFA;&#x8BAE;&#xFF1A;&#x4E0D;&#x8981;&#x53BB;&#x7BA1;&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;</a></li>\n<li>&#x2026;</li>\n</ul>\n<h4 id=\"&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug\"><a href=\"#&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug\" class=\"headerlink\" title=\"&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug\"></a>&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;Fundebug</h4><p><a href=\"https://fundebug.com\">Fundebug</a>&#x662F;&#x524D;&#x7AEF;JavaScript&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5E73;&#x53F0;&#xFF0C;&#x7ECF;&#x8FC7;&#x5927;&#x91CF;&#x517C;&#x5BB9;&#x6027;&#x8C03;&#x8BD5;&#xFF0C;Fundebug&#x7684;JavaScript&#x76D1;&#x6D4B;&#x63D2;&#x4EF6;&#x5DF2;&#x7ECF;&#x80FD;&#x591F;&#x5728;&#x5404;&#x79CD;&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x81EA;&#x52A8;&#x6355;&#x83B7;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x6700;&#x5168;&#x9762;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x5FEB;&#x7684;Debug&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x8FD1;&#x6765;&#x4E0D;&#x600E;&#x4E48;&#x53D7;&#x5F85;&#x89C1;&#x7684;IE&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;&#x5168;&#x9762;&#x652F;&#x6301;&#xFF0C;<strong>&#x4ECE;IE 6&#x5230;IE 11</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/01/16/fundebug-support-all-browsers/browser.jpg\"><br></div>\n\n<h4 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#xFF1F;</h4><p>&#x6839;&#x636E;<a href=\"http://tongji.baidu.com/data/browser\">&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</a>&#x7684;&#x6700;&#x65B0;&#x6570;&#x636E;&#xFF0C;2016&#x5E74;10&#x6708;&#x4EFD;&#x5230;12&#x6708;&#x4EFD;&#x56FD;&#x5185;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4EFD;&#x989D;&#x5982;&#x56FE;&#x6240;&#x793A;:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/01/16/fundebug-support-all-browsers/browser-share.png\"><br></div>\n\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x7528;&#x6237;&#x504F;&#x597D;&#x5343;&#x5DEE;&#x4E07;&#x522B;&#xFF0C;&#x800C;&#x5404;&#x7248;&#x672C;&#x7684;IE&#x7684;&#x5E02;&#x573A;&#x4EFD;&#x989D;&#x603B;&#x8BA1;&#x4E3A;26%&#xFF0C;&#x4EC5;&#x6B21;&#x4E8E;Chrome&#x3002;<strong>&#x6211;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x8BDD;&#x53EF;&#x8BF4;&#x5462;&#xFF1F;</strong>&#x56FD;&#x5185;&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x91C7;&#x7528;&#x53CC;&#x5185;&#x6838;&#x673A;&#x5236;&#xFF0C;&#x5373;&#x517C;&#x5BB9;&#x6A21;&#x5F0F;&#x548C;&#x6781;&#x901F;&#x6A21;&#x5F0F;&#xFF0C;&#x800C;&#x6240;&#x8C13;&#x517C;&#x5BB9;&#x6A21;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;triend&#x5185;&#x6838;&#xFF0C;&#x5373;IE&#x5185;&#x6838;&#x3002;</p>\n<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x81EA;&#x5E26;&#x4EF7;&#x503C;&#x89C2;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;Fundebug&#x5E0C;&#x671B;<strong>&#x901A;&#x8FC7;&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;</strong>&#x3002;</p>\n<h4 id=\"&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;\"><a href=\"#&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;\" class=\"headerlink\" title=\"&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;\"></a>&#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x5751;&#x5728;&#x54EA;&#x91CC;&#xFF1F;</h4><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error\">Error&#x5BF9;&#x8C61;</a>&#x7684;&#x5C5E;&#x6027;&#x5404;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x4F8B;&#x5982;&#x5927;&#x540D;&#x9F0E;&#x9F0E;&#x7684;Chrome&#x7684;Error&#x5BF9;&#x8C61;&#x6728;&#x6709;fileName&#xFF0C;lineNumber&#x4EE5;&#x53CA;columnNumber&#x5C5E;&#x6027;;</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onerror\">Onerror&#x4E8B;&#x4EF6;</a>&#x7684;&#x53C2;&#x6570;&#x5404;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x4F8B;&#x5982;&#x8001;&#x7248;&#x672C;&#x7684;Firefox&#x6728;&#x6709;columnNumber &#x548C;error&#x53C2;&#x6570;</li>\n<li>API&#x4E0D;&#x540C;&#xFF0C;&#x4F8B;&#x5982;&#x8001;&#x7248;&#x672C;&#x7684;IE&#x6728;&#x6709;<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON\">JSON&#x5BF9;&#x8C61;</a>;</li>\n<li>&#x540C;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x540D;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x542B;&#x4E49;&#x4E0D;&#x540C;&#xFF1B;</li>\n<li>&#x540C;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x540D;&#x79F0;&#x4E0D;&#x540C;&#xFF1B;</li>\n<li>&#x56FD;&#x5185;&#x6D4F;&#x89C8;&#x5668;&#x7684;IE&#x517C;&#x5BB9;&#x6A21;&#x5F0F;&#x4E0E;&#x771F;&#x6B63;&#x7684;IE&#x4E5F;&#x7565;&#x6709;&#x4E0D;&#x540C;;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<p>&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x5927;&#x6982;&#x524D;&#x7AEF;&#x5DE5;&#x7A0B;&#x5E08;&#x90FD;&#x4F1A;&#x6DF1;&#x6709;&#x540C;&#x611F;&#x5427;&#x3002;</p>\n<h4 id=\"&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;\"><a href=\"#&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;\"></a>&#x9519;&#x8BEF;&#x667A;&#x80FD;&#x805A;&#x5408;</h4><p>&#x540C;&#x6837;&#x7684;&#x4EE3;&#x7801;&#x4EA7;&#x751F;&#x7684;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#x7684;&#x3002;name&#x4E0D;&#x540C;&#x7684;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x4F8B;&#x5982;<strong>SyntaxError</strong>&#x4E0E;<strong>ReferenceError</strong>&#xFF1B;message&#x4E0D;&#x540C;&#x7684;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x4F8B;&#x5982;<strong>can not find variable fundebug</strong>&#x4E0E;<strong>fundebug is not defined</strong>&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x4E0B;&#x7684;lineNumber&#xFF0C;columnNumber&#xFF0C;stack&#xFF0C;&#x4E0E;url&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x6536;&#x96C6;&#x7684;&#x9519;&#x8BEF;&#x5229;&#x7528;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x667A;&#x80FD;&#x805A;&#x5408;&#xFF0C;&#x5C3D;&#x91CF;&#x5C06;&#x540C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x805A;&#x5408;&#x5230;&#x4E00;&#x8D77;&#xFF0C;&#x51CF;&#x5C11;&#x91CD;&#x590D;&#x62A5;&#x8B66;&#x3002;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;&#x521D;&#x6B65;&#x4F30;&#x7B97;&#xFF0C;&#x76EE;&#x524D;&#x805A;&#x5408;&#x7B97;&#x6CD5;&#x80FD;&#x591F;&#x5C06;<strong>90%</strong>&#x7684;&#x91CD;&#x590D;&#x9519;&#x8BEF;&#x6210;&#x529F;&#x805A;&#x5408;&#xFF0C;&#x8FD9;&#x6837;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x4E86;&#x7528;&#x6237;&#x5206;&#x6790;&#x9519;&#x8BEF;&#x7684;&#x6548;&#x7387;&#x3002;</p>\n<p>&#x8FD8;&#x7B49;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x611F;&#x89C9;&#x514D;&#x8D39;&#x6CE8;&#x518C;<a href=\"https://fundebug.com/team/create\">Fundebug</a>&#x5427;&#xFF01;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>"},{"title":"Fundebug","date":"2017-02-11T01:00:00.000Z","_content":"\n19:\n\n<!-- more -->\n\n- [Android(1) - CSDN](http://blog.csdn.net/luoyanglizi/article/details/52681245)\n- [ - ](http://www.cnblogs.com/dudeyouth/p/6277628.html)\n- [,  - ](http://www.jianshu.com/p/6359500b5576)\n- [, - ](https://www.zhihu.com/question/51145570?sort=created)\n- [ - ](http://www.wxapp-union.com/thread-23-1-1.html)\n- ......\n\n#### \n\nAndroidiOS                                                                             BUG\n\n1[](http://www.jianshu.com/p/90220a55f542):\n> wx.request()statusCodeiOSIntAndroidStringstatusCode\n\n2[wx.uploadFile](http://www.henkuai.com/thread-17813-1-1.html):\n> iOSAndroid6.5.2\n\n3[](http://www.wxapp-union.com/forum.php?mod=viewthread&tid=2122&highlight=%E4%B8%80%E4%B8%AA%E6%9C%89%E5%85%B3%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%89%AB%E7%A0%81%E7%9A%84%E5%A5%87%E6%80%AA%E7%9A%84%E9%97%AE%E9%A2%98)ES 6:\n> iOS[startsWith](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith)iOS 8AndroidstartsWith\n\n[](https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/details.html): \n\n> -  JSnwjs\n- iOSJSJavaScriptCore \n- AndroidJSX5 JSCore\n \niOSAndriodJavaScriptiOSiOSAndriod\n\niOSAndriod\n\n#### Fundebug\n\n\n\nFundebugBug\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"weixin-miniprogram-need-fundebug/fundebug-wxjs.jpg\" />\n</div>\n\n**Fundebug:**\n\n- \n- 2820.28KB1MB1/3000;\n- 2;\n- systemInfouserInfo;\n\n\n[](https://docs.fundebug.com/notifier/wxjs/)\n\n\n[Fundebug](https://fundebug.com/team/create)\n\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n","source":"_posts/2017/02/11/weixin-miniprogram-need-fundebug.md","raw":"---\ntitle: Fundebug\n\ndate: 2017-02-11 09:00:00\n\ntags: [Fundebug, ]\n---\n\n19:\n\n<!-- more -->\n\n- [Android(1) - CSDN](http://blog.csdn.net/luoyanglizi/article/details/52681245)\n- [ - ](http://www.cnblogs.com/dudeyouth/p/6277628.html)\n- [,  - ](http://www.jianshu.com/p/6359500b5576)\n- [, - ](https://www.zhihu.com/question/51145570?sort=created)\n- [ - ](http://www.wxapp-union.com/thread-23-1-1.html)\n- ......\n\n#### \n\nAndroidiOS                                                                             BUG\n\n1[](http://www.jianshu.com/p/90220a55f542):\n> wx.request()statusCodeiOSIntAndroidStringstatusCode\n\n2[wx.uploadFile](http://www.henkuai.com/thread-17813-1-1.html):\n> iOSAndroid6.5.2\n\n3[](http://www.wxapp-union.com/forum.php?mod=viewthread&tid=2122&highlight=%E4%B8%80%E4%B8%AA%E6%9C%89%E5%85%B3%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%89%AB%E7%A0%81%E7%9A%84%E5%A5%87%E6%80%AA%E7%9A%84%E9%97%AE%E9%A2%98)ES 6:\n> iOS[startsWith](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith)iOS 8AndroidstartsWith\n\n[](https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/details.html): \n\n> -  JSnwjs\n- iOSJSJavaScriptCore \n- AndroidJSX5 JSCore\n \niOSAndriodJavaScriptiOSiOSAndriod\n\niOSAndriod\n\n#### Fundebug\n\n\n\nFundebugBug\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"weixin-miniprogram-need-fundebug/fundebug-wxjs.jpg\" />\n</div>\n\n**Fundebug:**\n\n- \n- 2820.28KB1MB1/3000;\n- 2;\n- systemInfouserInfo;\n\n\n[](https://docs.fundebug.com/notifier/wxjs/)\n\n\n[Fundebug](https://fundebug.com/team/create)\n\n\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\"> </a></div>\n</div>\n","slug":"2017/02/11/weixin-miniprogram-need-fundebug","published":1,"updated":"2017-02-13T00:43:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmu001371fy1gha73gy","content":"<p>1&#x6708;9&#x65E5;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E0A;&#x7EBF;&#xFF0C;&#x8DDD;&#x79BB;&#x73B0;&#x5728;&#x4EC5;&#x4EC5;&#x4E00;&#x4E2A;&#x6708;&#xFF0C;&#x7136;&#x800C;&#x5F00;&#x53D1;&#x8005;&#x4EEC;&#x5DF2;&#x7ECF;&#x9047;&#x5230;&#x4E86;&#x5F88;&#x591A;&#x5751;:</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"http://blog.csdn.net/luoyanglizi/article/details/52681245\" target=\"_blank\" rel=\"external\">&#x4E00;&#x540D;Android&#x5F00;&#x53D1;&#x8005;&#x7684;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x586B;&#x5751;&#x4E4B;&#x8DEF;(1) - CSDN</a></li>\n<li><a href=\"http://www.cnblogs.com/dudeyouth/p/6277628.html\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x5751;&#x96C6; - &#x535A;&#x5BA2;&#x56ED;</a></li>\n<li><a href=\"http://www.jianshu.com/p/6359500b5576\" target=\"_blank\" rel=\"external\">&#x5410;&#x69FD;&#x5C0F;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x8E29;&#x8FC7;&#x7684;&#x5751;, &#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x89E3;&#x51B3;&#x65B9;&#x6CD5; - &#x7B80;&#x4E66;</a></li>\n<li><a href=\"https://www.zhihu.com/question/51145570?sort=created\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x5751;, &#x4F60;&#x8E29;&#x4E86;&#x4E48;&#xFF1F;- &#x77E5;&#x4E4E;</a></li>\n<li><a href=\"http://www.wxapp-union.com/thread-23-1-1.html\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x96C6;&#x5408; - &#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x8054;&#x76DF;</a></li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<h4 id=\"&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;\"><a href=\"#&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;\"></a>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;</h4><p>&#x5C0F;&#x7A0B;&#x5E8F;&#x4F9D;&#x6258;&#x4E8E;&#x5FAE;&#x4FE1;&#xFF0C;&#x4F3C;&#x4E4E;&#x5929;&#x7136;&#x62E5;&#x6709;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x4F18;&#x52BF;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EA;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x4E00;&#x5957;&#x4EE3;&#x7801;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x7F8E;&#x8FD0;&#x884C;&#x5728;Android&#x4E0E;iOS&#x4E0A;&#x3002;&#x4F46;&#x662F;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;                                                                             &#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#x5F80;&#x5F80;&#x4F1A;&#x5BFC;&#x81F4;&#x5404;&#x79CD;BUG&#x3002;</p>\n<p>&#x4F8B;1&#xFF0C;&#x5728;<a href=\"http://www.jianshu.com/p/90220a55f542\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;</a>&#x4E2D;&#xFF0C;&#x535A;&#x4E3B;&#x6709;&#x63D0;&#x5230;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;:</p>\n<blockquote>\n<p>wx.request()&#x8FD4;&#x56DE;&#x7684;&#x72B6;&#x6001;&#x7801;statusCode&#x5728;iOS&#x4E0B;&#x662F;Int&#xFF0C;&#x800C;&#x5728;Android&#x4E0A;&#x5374;&#x662F;String&#x3002;&#x5982;&#x679C;&#x5224;&#x65AD;statusCode&#x7684;&#x65B9;&#x6CD5;&#x4E0D;&#x5F53;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x8E29;&#x5230;&#x5751;&#x91CC;&#x4E86;&#x3002;</p>\n</blockquote>\n<p>&#x4F8B;2&#xFF0C;&#x5728;<a href=\"http://www.henkuai.com/thread-17813-1-1.html\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x8E29;&#x5751;&#x4E4B;wx.uploadFile</a>&#x4E2D;&#xFF0C;&#x697C;&#x4E3B;&#x53D1;&#x73B0;&#x65E7;&#x7248;&#x672C;&#x7684;&#x5FAE;&#x4FE1;&#x4F1A;&#x51FA;&#x9519;:</p>\n<blockquote>\n<p>iOS&#x53EF;&#x4EE5;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#xFF0C;Android&#x5FC5;&#x987B;&#x5C06;&#x5FAE;&#x4FE1;&#x5347;&#x7EA7;&#x5230;6.5.2&#x7248;&#x672C;&#x4EE5;&#x4E0A;&#x624D;&#x80FD;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x3002;</p>\n</blockquote>\n<p>&#x4F8B;3&#xFF0C;&#x5728;<a href=\"http://www.wxapp-union.com/forum.php?mod=viewthread&amp;tid=2122&amp;highlight=%E4%B8%80%E4%B8%AA%E6%9C%89%E5%85%B3%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%89%AB%E7%A0%81%E7%9A%84%E5%A5%87%E6%80%AA%E7%9A%84%E9%97%AE%E9%A2%98\" target=\"_blank\" rel=\"external\">&#x4E00;&#x4E2A;&#x6709;&#x5173;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x7801;&#x7684;&#x5947;&#x602A;&#x7684;&#x95EE;&#x9898;</a>&#x4E2D;&#xFF0C;&#x697C;&#x4E3B;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E2A;ES 6&#x7684;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;:</p>\n<blockquote>\n<p>&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x548C;&#x9AD8;&#x7248;&#x672C;&#x7684;iOS&#x652F;&#x6301;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\" target=\"_blank\" rel=\"external\">startsWith</a>&#xFF0C;&#x7136;&#x800C;&#x5728;iOS 8&#x548C;Android&#x4E0D;&#x652F;&#x6301;startsWith&#x3002;</p>\n</blockquote>\n<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x8FD9;&#x6837;&#x5462;&#xFF1F;&#x4E0D;&#x59A8;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;<a href=\"https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/details.html\" target=\"_blank\" rel=\"external\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x5427;: </p>\n<blockquote>\n<ul>\n<li>&#x5728;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x4E0A;&#xFF0C; &#x5C0F;&#x7A0B;&#x5E8F;&#x7684;JS&#x4EE3;&#x7801;&#x662F;&#x8FD0;&#x884C;&#x5728;nwjs&#x4E2D;</li>\n<li>&#x5728;iOS&#x4E0A;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;JS&#x4EE3;&#x7801;&#x662F;&#x8FD0;&#x884C;&#x5728;JavaScriptCore &#x4E2D;</li>\n<li>&#x5728;Android&#x4E0A;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;JS&#x4EE3;&#x7801;&#x662F;&#x901A;&#x8FC7;X5 JSCore&#x6765;&#x89E3;&#x6790;</li>\n</ul>\n</blockquote>\n<p>&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF0C;iOS&#x4E0E;Andriod&#x7684;JavaScript&#x811A;&#x672C;&#x6267;&#x884C;&#x73AF;&#x5883;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x5B58;&#x5728;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#x4E5F;&#x5C31;&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#x4E86;&#x3002;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x4E0A;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5728;iOS&#x4E0A;&#x672A;&#x5FC5;&#x80FD;&#x591F;&#x8FD0;&#x884C;&#x6210;&#x529F;&#xFF0C;&#x800C;&#x5728;iOS&#x4E0A;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5728;Andriod&#x4E0A;&#x4E5F;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x9519;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF0C;iOS&#x4E0E;Andriod&#x4E0A;&#x7684;&#x5FAE;&#x4FE1;&#x672C;&#x8EAB;&#x4EE3;&#x7801;&#x4E5F;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002;</p>\n<h4 id=\"Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;\"><a href=\"#Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;\" class=\"headerlink\" title=\"Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;\"></a>Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;</h4><p>&#x66F4;&#x9EBB;&#x70E6;&#x7684;&#x662F;&#xFF0C;&#x6D4B;&#x8BD5;&#x5E76;&#x4E0D;&#x80FD;&#x5B8C;&#x5168;&#x4FDD;&#x8BC1;&#x4EE3;&#x7801;&#x5B8C;&#x5168;&#x6B63;&#x786E;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x9010;&#x4E2A;&#x6D4B;&#x8BD5;&#x5404;&#x79CD;&#x624B;&#x673A;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5F88;&#x96BE;&#x5168;&#x9762;&#x8003;&#x8651;&#x5404;&#x79CD;&#x771F;&#x5B9E;&#x573A;&#x666F;&#x3002;</p>\n<p>Fundebug&#x80FD;&#x591F;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF0C;&#x6355;&#x83B7;&#x5C0F;&#x7A0B;&#x5E8F;Bug&#xFF0C;&#x7136;&#x540E;&#x53CD;&#x9988;&#x7ED9;&#x5F00;&#x53D1;&#x8005;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x53CA;&#x65F6;&#x53D1;&#x73B0;&#x5E76;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/02/11/weixin-miniprogram-need-fundebug/fundebug-wxjs.jpg\"><br></div>\n\n<p><strong>Fundebug&#x7684;&#x4F18;&#x52BF;:</strong></p>\n<ul>\n<li>&#x5C0F;&#x7A0B;&#x5E8F;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x63D0;&#x9192;&#x5F00;&#x53D1;&#x8005;&#xFF1B;</li>\n<li>&#x63D2;&#x4EF6;&#x4EC5;282&#x5B57;&#x8282;&#xFF0C;&#x5373;0.28KB&#xFF0C;&#x4E0D;&#x5230;1MB&#x7684;1/3000;</li>\n<li>&#x6DFB;&#x52A0;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#xFF0C;2&#x5206;&#x949F;&#x641E;&#x5B9A;;</li>\n<li>&#x4EC5;&#x6536;&#x96C6;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x4FDD;&#x62A4;&#x7528;&#x6237;&#x9690;&#x79C1;&#xFF0C;&#x6536;&#x96C6;systemInfo&#x548C;userInfo&#x9700;&#x8981;&#x5F00;&#x53D1;&#x8005;&#x8FDB;&#x884C;&#x914D;&#x7F6E;;</li>\n</ul>\n<p>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x8BF7;&#x53C2;&#x8003;<a href=\"https://docs.fundebug.com/notifier/wxjs/\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x6587;&#x6863;</a>&#x3002;</p>\n<p>&#x8FD8;&#x7B49;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x8D76;&#x7D27;&#x514D;&#x8D39;&#x6CE8;&#x518C;<a href=\"https://fundebug.com/team/create\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x5427;&#xFF01;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\" target=\"_blank\" rel=\"external\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>\n","excerpt":"<p>1&#x6708;9&#x65E5;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E0A;&#x7EBF;&#xFF0C;&#x8DDD;&#x79BB;&#x73B0;&#x5728;&#x4EC5;&#x4EC5;&#x4E00;&#x4E2A;&#x6708;&#xFF0C;&#x7136;&#x800C;&#x5F00;&#x53D1;&#x8005;&#x4EEC;&#x5DF2;&#x7ECF;&#x9047;&#x5230;&#x4E86;&#x5F88;&#x591A;&#x5751;:</p>","more":"<ul>\n<li><a href=\"http://blog.csdn.net/luoyanglizi/article/details/52681245\">&#x4E00;&#x540D;Android&#x5F00;&#x53D1;&#x8005;&#x7684;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x586B;&#x5751;&#x4E4B;&#x8DEF;(1) - CSDN</a></li>\n<li><a href=\"http://www.cnblogs.com/dudeyouth/p/6277628.html\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x5751;&#x96C6; - &#x535A;&#x5BA2;&#x56ED;</a></li>\n<li><a href=\"http://www.jianshu.com/p/6359500b5576\">&#x5410;&#x69FD;&#x5C0F;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x8E29;&#x8FC7;&#x7684;&#x5751;, &#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x89E3;&#x51B3;&#x65B9;&#x6CD5; - &#x7B80;&#x4E66;</a></li>\n<li><a href=\"https://www.zhihu.com/question/51145570?sort=created\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x5751;, &#x4F60;&#x8E29;&#x4E86;&#x4E48;&#xFF1F;- &#x77E5;&#x4E4E;</a></li>\n<li><a href=\"http://www.wxapp-union.com/thread-23-1-1.html\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x96C6;&#x5408; - &#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x8054;&#x76DF;</a></li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n<h4 id=\"&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;\"><a href=\"#&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;\"></a>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;</h4><p>&#x5C0F;&#x7A0B;&#x5E8F;&#x4F9D;&#x6258;&#x4E8E;&#x5FAE;&#x4FE1;&#xFF0C;&#x4F3C;&#x4E4E;&#x5929;&#x7136;&#x62E5;&#x6709;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x4F18;&#x52BF;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EA;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x4E00;&#x5957;&#x4EE3;&#x7801;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x7F8E;&#x8FD0;&#x884C;&#x5728;Android&#x4E0E;iOS&#x4E0A;&#x3002;&#x4F46;&#x662F;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;                                                                             &#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#x5F80;&#x5F80;&#x4F1A;&#x5BFC;&#x81F4;&#x5404;&#x79CD;BUG&#x3002;</p>\n<p>&#x4F8B;1&#xFF0C;&#x5728;<a href=\"http://www.jianshu.com/p/90220a55f542\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;</a>&#x4E2D;&#xFF0C;&#x535A;&#x4E3B;&#x6709;&#x63D0;&#x5230;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;:</p>\n<blockquote>\n<p>wx.request()&#x8FD4;&#x56DE;&#x7684;&#x72B6;&#x6001;&#x7801;statusCode&#x5728;iOS&#x4E0B;&#x662F;Int&#xFF0C;&#x800C;&#x5728;Android&#x4E0A;&#x5374;&#x662F;String&#x3002;&#x5982;&#x679C;&#x5224;&#x65AD;statusCode&#x7684;&#x65B9;&#x6CD5;&#x4E0D;&#x5F53;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x8E29;&#x5230;&#x5751;&#x91CC;&#x4E86;&#x3002;</p>\n</blockquote>\n<p>&#x4F8B;2&#xFF0C;&#x5728;<a href=\"http://www.henkuai.com/thread-17813-1-1.html\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x8E29;&#x5751;&#x4E4B;wx.uploadFile</a>&#x4E2D;&#xFF0C;&#x697C;&#x4E3B;&#x53D1;&#x73B0;&#x65E7;&#x7248;&#x672C;&#x7684;&#x5FAE;&#x4FE1;&#x4F1A;&#x51FA;&#x9519;:</p>\n<blockquote>\n<p>iOS&#x53EF;&#x4EE5;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#xFF0C;Android&#x5FC5;&#x987B;&#x5C06;&#x5FAE;&#x4FE1;&#x5347;&#x7EA7;&#x5230;6.5.2&#x7248;&#x672C;&#x4EE5;&#x4E0A;&#x624D;&#x80FD;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x3002;</p>\n</blockquote>\n<p>&#x4F8B;3&#xFF0C;&#x5728;<a href=\"http://www.wxapp-union.com/forum.php?mod=viewthread&amp;tid=2122&amp;highlight=%E4%B8%80%E4%B8%AA%E6%9C%89%E5%85%B3%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%89%AB%E7%A0%81%E7%9A%84%E5%A5%87%E6%80%AA%E7%9A%84%E9%97%AE%E9%A2%98\">&#x4E00;&#x4E2A;&#x6709;&#x5173;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x7801;&#x7684;&#x5947;&#x602A;&#x7684;&#x95EE;&#x9898;</a>&#x4E2D;&#xFF0C;&#x697C;&#x4E3B;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E2A;ES 6&#x7684;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;:</p>\n<blockquote>\n<p>&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x548C;&#x9AD8;&#x7248;&#x672C;&#x7684;iOS&#x652F;&#x6301;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\">startsWith</a>&#xFF0C;&#x7136;&#x800C;&#x5728;iOS 8&#x548C;Android&#x4E0D;&#x652F;&#x6301;startsWith&#x3002;</p>\n</blockquote>\n<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x8FD9;&#x6837;&#x5462;&#xFF1F;&#x4E0D;&#x59A8;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;<a href=\"https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/details.html\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x5427;: </p>\n<blockquote>\n<ul>\n<li>&#x5728;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x4E0A;&#xFF0C; &#x5C0F;&#x7A0B;&#x5E8F;&#x7684;JS&#x4EE3;&#x7801;&#x662F;&#x8FD0;&#x884C;&#x5728;nwjs&#x4E2D;</li>\n<li>&#x5728;iOS&#x4E0A;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;JS&#x4EE3;&#x7801;&#x662F;&#x8FD0;&#x884C;&#x5728;JavaScriptCore &#x4E2D;</li>\n<li>&#x5728;Android&#x4E0A;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;JS&#x4EE3;&#x7801;&#x662F;&#x901A;&#x8FC7;X5 JSCore&#x6765;&#x89E3;&#x6790;</li>\n</ul>\n</blockquote>\n<p>&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF0C;iOS&#x4E0E;Andriod&#x7684;JavaScript&#x811A;&#x672C;&#x6267;&#x884C;&#x73AF;&#x5883;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x5B58;&#x5728;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#x4E5F;&#x5C31;&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#x4E86;&#x3002;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x4E0A;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5728;iOS&#x4E0A;&#x672A;&#x5FC5;&#x80FD;&#x591F;&#x8FD0;&#x884C;&#x6210;&#x529F;&#xFF0C;&#x800C;&#x5728;iOS&#x4E0A;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5728;Andriod&#x4E0A;&#x4E5F;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x9519;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF0C;iOS&#x4E0E;Andriod&#x4E0A;&#x7684;&#x5FAE;&#x4FE1;&#x672C;&#x8EAB;&#x4EE3;&#x7801;&#x4E5F;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002;</p>\n<h4 id=\"Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;\"><a href=\"#Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;\" class=\"headerlink\" title=\"Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;\"></a>Fundebug&#x5C0F;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;</h4><p>&#x66F4;&#x9EBB;&#x70E6;&#x7684;&#x662F;&#xFF0C;&#x6D4B;&#x8BD5;&#x5E76;&#x4E0D;&#x80FD;&#x5B8C;&#x5168;&#x4FDD;&#x8BC1;&#x4EE3;&#x7801;&#x5B8C;&#x5168;&#x6B63;&#x786E;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x9010;&#x4E2A;&#x6D4B;&#x8BD5;&#x5404;&#x79CD;&#x624B;&#x673A;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5F88;&#x96BE;&#x5168;&#x9762;&#x8003;&#x8651;&#x5404;&#x79CD;&#x771F;&#x5B9E;&#x573A;&#x666F;&#x3002;</p>\n<p>Fundebug&#x80FD;&#x591F;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5C0F;&#x7A0B;&#x5E8F;&#xFF0C;&#x6355;&#x83B7;&#x5C0F;&#x7A0B;&#x5E8F;Bug&#xFF0C;&#x7136;&#x540E;&#x53CD;&#x9988;&#x7ED9;&#x5F00;&#x53D1;&#x8005;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x53CA;&#x65F6;&#x53D1;&#x73B0;&#x5E76;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/02/11/weixin-miniprogram-need-fundebug/fundebug-wxjs.jpg\"><br></div>\n\n<p><strong>Fundebug&#x7684;&#x4F18;&#x52BF;:</strong></p>\n<ul>\n<li>&#x5C0F;&#x7A0B;&#x5E8F;&#x5728;&#x7528;&#x6237;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x63D0;&#x9192;&#x5F00;&#x53D1;&#x8005;&#xFF1B;</li>\n<li>&#x63D2;&#x4EF6;&#x4EC5;282&#x5B57;&#x8282;&#xFF0C;&#x5373;0.28KB&#xFF0C;&#x4E0D;&#x5230;1MB&#x7684;1/3000;</li>\n<li>&#x6DFB;&#x52A0;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#xFF0C;2&#x5206;&#x949F;&#x641E;&#x5B9A;;</li>\n<li>&#x4EC5;&#x6536;&#x96C6;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x4FDD;&#x62A4;&#x7528;&#x6237;&#x9690;&#x79C1;&#xFF0C;&#x6536;&#x96C6;systemInfo&#x548C;userInfo&#x9700;&#x8981;&#x5F00;&#x53D1;&#x8005;&#x8FDB;&#x884C;&#x914D;&#x7F6E;;</li>\n</ul>\n<p>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x8BF7;&#x53C2;&#x8003;<a href=\"https://docs.fundebug.com/notifier/wxjs/\">&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x6587;&#x6863;</a>&#x3002;</p>\n<p>&#x8FD8;&#x7B49;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x8D76;&#x7D27;&#x514D;&#x8D39;&#x6CE8;&#x518C;<a href=\"https://fundebug.com/team/create\">Fundebug</a>&#x5427;&#xFF01;</p>\n<div style=\"background: #fff; text-align: center; height: 50px; line-height: 50px;\"><a href=\"https://fundebug.com/team/create\" style=\"padding: 10px 20px; background: #22A985; color: #FFF; border-radius: 3px;\">&#x7ACB;&#x5373;&#x6CE8;&#x518C; &#x2794;</a></div><br>"},{"title":"\"WeixinJSBridge is not defined\"","date":"2017-02-18T01:00:00.000Z","_content":"\n\n[Fundebug](https://fundebug.com)[JS-SDK](http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html)`WeixinJSBridge is not defined` \n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:60%;\" src=\"weixinjsbridge-is-not-defined/weixinjsbridge_is_not_defined.png\" />\n</div>\n\n:\n\n> - JS-SDKiphonewindow.onerrorUncaught ReferenceError: WeixinJSBridge is not defined;\n> - ReferenceErrorweixinJSBridge is not defined;\n> - AppCanWeb/AppJSAPIWeixinJSBridgeundefined;\n> - ......\n\n\n\n\n### JS-SDK?\n\n[](http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html): \n\n> JS-SDKJS-SDK\n\n### Q&A\n\n\n#### **JS-SDK, **\n\n- WeixinJSBridge\n\n#### **JS-SDK, **\n\n- webview`WeixinJSBridge``WeixinJSBridge`XXXX`WeixinJSBridge`\n\n\n### \n\n\n\n\n - JS-SDK, JS-SDK\n\n - \n   + 1: ready \n\n   ```js\n   if (typeof window.WeixinJSBridge == \"undefined\")\n   {\n       $(document).on('WeixinJSBridgeReady', function()\n       {\n           $('#weiXinPay').click();\n       });\n   }\n   else\n   {\n       $('#weiXinPay').click();\n   }\n   ```\n\n   + 2: JS-SDK[JS-SDK - ](https://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E5.8F.91.E8.B5.B7.E4.B8.80.E4.B8.AA.E5.BE.AE.E4.BF.A1.E6.94.AF.E4.BB.98.E8.AF.B7.E6.B1.82)\n\n\nPS: 2014\n\n ### \n\n   - [Uncaught ReferenceError: WeixinJSBridge is not defined](http://www.henkuai.com/forum.php?mod=viewthread&tid=7450)\n   - [Uncaught ReferenceError: WeixinJSBridge is not defined](http://www.henkuai.com/thread-8365-1-1.html)   \n   - [Uncaught ReferenceError: WeixinJSBridge is not defined ](http://www.java-bbs.com/thread-14-1-1.html)\n   - [WeixinJSBridgerest](http://bbs.blueidea.com/thread-3103040-1-1.html)\n   - [wxbridge](https://github.com/whq731/mobile-problems/blob/master/%E7%9B%91%E5%90%ACwxbridge%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%86%8D%E5%94%A4%E8%B5%B7%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98.md)\n","source":"_posts/2017/02/18/weixinjsbridge-is-not-defined.md","raw":"---\ntitle: \"WeixinJSBridge is not defined\"\n\ndate: 2017-02-18 09:00:00\n---\n\n\n[Fundebug](https://fundebug.com)[JS-SDK](http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html)`WeixinJSBridge is not defined` \n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:60%;\" src=\"weixinjsbridge-is-not-defined/weixinjsbridge_is_not_defined.png\" />\n</div>\n\n:\n\n> - JS-SDKiphonewindow.onerrorUncaught ReferenceError: WeixinJSBridge is not defined;\n> - ReferenceErrorweixinJSBridge is not defined;\n> - AppCanWeb/AppJSAPIWeixinJSBridgeundefined;\n> - ......\n\n\n\n\n### JS-SDK?\n\n[](http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html): \n\n> JS-SDKJS-SDK\n\n### Q&A\n\n\n#### **JS-SDK, **\n\n- WeixinJSBridge\n\n#### **JS-SDK, **\n\n- webview`WeixinJSBridge``WeixinJSBridge`XXXX`WeixinJSBridge`\n\n\n### \n\n\n\n\n - JS-SDK, JS-SDK\n\n - \n   + 1: ready \n\n   ```js\n   if (typeof window.WeixinJSBridge == \"undefined\")\n   {\n       $(document).on('WeixinJSBridgeReady', function()\n       {\n           $('#weiXinPay').click();\n       });\n   }\n   else\n   {\n       $('#weiXinPay').click();\n   }\n   ```\n\n   + 2: JS-SDK[JS-SDK - ](https://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E5.8F.91.E8.B5.B7.E4.B8.80.E4.B8.AA.E5.BE.AE.E4.BF.A1.E6.94.AF.E4.BB.98.E8.AF.B7.E6.B1.82)\n\n\nPS: 2014\n\n ### \n\n   - [Uncaught ReferenceError: WeixinJSBridge is not defined](http://www.henkuai.com/forum.php?mod=viewthread&tid=7450)\n   - [Uncaught ReferenceError: WeixinJSBridge is not defined](http://www.henkuai.com/thread-8365-1-1.html)   \n   - [Uncaught ReferenceError: WeixinJSBridge is not defined ](http://www.java-bbs.com/thread-14-1-1.html)\n   - [WeixinJSBridgerest](http://bbs.blueidea.com/thread-3103040-1-1.html)\n   - [wxbridge](https://github.com/whq731/mobile-problems/blob/master/%E7%9B%91%E5%90%ACwxbridge%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%86%8D%E5%94%A4%E8%B5%B7%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98.md)\n","slug":"2017/02/18/weixinjsbridge-is-not-defined","published":1,"updated":"2017-02-24T11:49:30.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmv001571fy74a9ns2e","content":"<p><a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x5E76;&#x6CA1;&#x6709;&#x4F7F;&#x7528;<a href=\"http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;JS-SDK</a>&#xFF0C;&#x7136;&#x800C;&#x5374;&#x6536;&#x5230;&#x4E86;<code>WeixinJSBridge is not defined</code>&#x7684;&#x62A5;&#x9519;&#xFF1A; </p>\n<a id=\"more\"></a>\n<div style=\"text-align: left;\"><br><img style=\"width:60%;\" src=\"/2017/02/18/weixinjsbridge-is-not-defined/weixinjsbridge_is_not_defined.png\"><br></div>\n\n<p>&#x6211;&#x4EEC;&#x7684;&#x7528;&#x6237;&#x4E5F;&#x6536;&#x5230;&#x4E86;&#x7C7B;&#x4F3C;&#x7684;&#x9519;&#x8BEF;&#x62A5;&#x8B66;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x591A;&#x5F00;&#x53D1;&#x8005;&#x90FD;&#x9047;&#x5230;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;:</p>\n<blockquote>\n<ul>\n<li>&#x6211;&#x7684;&#x5FAE;&#x4FE1;&#x9879;&#x76EE;&#xFF0C;&#x6CA1;&#x6709;&#x7528;&#x5230;&#x5FAE;&#x4FE1;JS-SDK&#xFF0C;&#x4F46;iphone&#x90E8;&#x5206;&#x624B;&#x673A;&#x70B9;&#x51FB;&#x67D0;&#x4E9B;&#x529F;&#x80FD;&#x65E0;&#x6548;&#xFF0C;&#x540E;&#x6765;&#x52A0;&#x4E86;window.onerror&#x76D1;&#x63A7;&#xFF0C;&#x53D1;&#x73B0;&#x6709;Uncaught ReferenceError: WeixinJSBridge is not defined&#x62A5;&#x9519;;</li>\n<li>&#x4ECE;&#x5FAE;&#x4FE1;&#x8FDB;&#x5165;&#x652F;&#x4ED8;&#x4E2D;&#x5FC3;&#x76F4;&#x63A5;&#x5524;&#x8D77;&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;&#x65F6;&#x6709;&#x65F6;&#x4F1A;&#x629B;&#x51FA;ReferenceError&#xFF1A;weixinJSBridge is not defined&#x7684;&#x5F02;&#x5E38;;</li>\n<li>&#x4F7F;&#x7528;AppCan&#x751F;&#x6210;Web/&#x5FAE;&#x4FE1;App&#x7248;&#xFF0C;&#x8C03;&#x7528;&#x5FAE;&#x4FE1;JSAPI&#x652F;&#x4ED8;&#x65B9;&#x5F0F;&#xFF0C;&#x63D0;&#x793A;WeixinJSBridge&#x5185;&#x7F6E;&#x5BF9;&#x8C61;undefined;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n</blockquote>\n<p>&#x7531;&#x6B64;&#x53EF;&#x89C1;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x666E;&#x904D;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5728;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#x6CA1;&#x6709;&#x9047;&#x5230;&#x8FC7;&#xFF0C;&#x7136;&#x540E;&#x53C8;&#x6CA1;&#x6709;&#x505A;&#x7EBF;&#x4E0A;&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x5F88;&#x96BE;&#x53D1;&#x73B0;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x5C06;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x5206;&#x6790;&#xFF0C;&#x8BA9;&#x5927;&#x5BB6;&#x5C11;&#x8D70;&#x5F2F;&#x8DEF;&#x3002;</p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK?\"></a>&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK?</h3><p>&#x8FD9;&#x91CC;&#x5F15;&#x7528;<a href=\"http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html\" target=\"_blank\" rel=\"external\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>: </p>\n<blockquote>\n<p>&#x5FAE;&#x4FE1;JS-SDK&#x662F;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x5E73;&#x53F0;&#x9762;&#x5411;&#x7F51;&#x9875;&#x5F00;&#x53D1;&#x8005;&#x63D0;&#x4F9B;&#x7684;&#x57FA;&#x4E8E;&#x5FAE;&#x4FE1;&#x5185;&#x7684;&#x7F51;&#x9875;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x5305;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK&#xFF0C;&#x7F51;&#x9875;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x501F;&#x52A9;&#x5FAE;&#x4FE1;&#x9AD8;&#x6548;&#x5730;&#x4F7F;&#x7528;&#x62CD;&#x7167;&#x3001;&#x9009;&#x56FE;&#x3001;&#x8BED;&#x97F3;&#x3001;&#x4F4D;&#x7F6E;&#x7B49;&#x624B;&#x673A;&#x7CFB;&#x7EDF;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;&#x5206;&#x4EAB;&#x3001;&#x626B;&#x4E00;&#x626B;&#x3001;&#x5361;&#x5238;&#x3001;&#x652F;&#x4ED8;&#x7B49;&#x5FAE;&#x4FE1;&#x7279;&#x6709;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x4E3A;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x66F4;&#x4F18;&#x8D28;&#x7684;&#x7F51;&#x9875;&#x4F53;&#x9A8C;&#x3002;</p>\n</blockquote>\n<h3 id=\"Q-amp-A\"><a href=\"#Q-amp-A\" class=\"headerlink\" title=\"Q&amp;A\"></a>Q&amp;A</h3><h4 id=\"&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"><a href=\"#&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"></a><strong>&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;</strong></h4><ul>\n<li>&#x5FAE;&#x4FE1;&#x5185;&#x7F6E;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x6709;WeixinJSBridge&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x4E00;&#x5B9A;&#x7684;&#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x3002;</li>\n</ul>\n<h4 id=\"&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"><a href=\"#&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"></a><strong>&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;</strong></h4><ul>\n<li>&#x5FAE;&#x4FE1;webview&#x6CE8;&#x5165;&#x94A9;&#x5B50;&#x6709;&#x65F6;&#x5E8F;&#x95EE;&#x9898;&#xFF1A;&#x5728;<code>WeixinJSBridge</code>&#x8FD8;&#x672A;&#x6CE8;&#x5165;&#x4E4B;&#x524D;&#xFF0C;&#x5C31;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x6CE8;&#x5165;&#x5176;&#x5B83;&#x4F9D;&#x8D56;&#x4E8E;<code>WeixinJSBridge</code>&#x7684;&#x5176;&#x5B83;XX&#x6A21;&#x5757;&#x3002;&#x5728;XX&#x6A21;&#x5757;&#x4E2D;&#x8C03;&#x7528;<code>WeixinJSBridge</code>&#x5C31;&#x4F1A;&#x5931;&#x8D25;&#x3002;</li>\n</ul>\n<h3 id=\"&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;\"><a href=\"#&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;\"></a>&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</h3><p>&#x5982;&#x679C;&#x4F60;&#x5F00;&#x53D1;&#x4E00;&#x6B3E;&#x79FB;&#x52A8;&#x5E94;&#x7528;&#xFF0C;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x8981;&#x8003;&#x8651;&#x5206;&#x4EAB;&#x5230;&#x5FAE;&#x4FE1;&#x7684;&#x529F;&#x80FD;&#xFF1B;&#x5982;&#x679C;&#x4F60;&#x5F00;&#x53D1;&#x7F51;&#x9875;&#xFF0C;&#x90A3;&#x4E48;&#x7528;&#x6237;&#x4E4B;&#x95F4;&#x7684;&#x5206;&#x4EAB;&#x66F4;&#x591A;&#x7684;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x5FAE;&#x4FE1;&#x3002;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5230;&#x5E95;&#x6709;&#x591A;&#x4E25;&#x91CD;&#xFF0C;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x4E5F;&#x53D8;&#x5F97;&#x81F3;&#x5173;&#x91CD;&#x8981;&#x3002;</p>\n<ul>\n<li><p>&#x5982;&#x679C;&#x7F51;&#x9875;&#x4E2D;&#x672A;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK, &#x7528;&#x6237;&#x5728;&#x5FAE;&#x4FE1;&#x4E2D;&#x6253;&#x5F00;&#x7F51;&#x7AD9;&#x53EF;&#x80FD;&#x4F1A;&#x89E6;&#x53D1;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x76EE;&#x524D;&#x770B;&#x6765;&#x53EA;&#x6709;&#x5FFD;&#x7565;&#x3002;&#x56E0;&#x4E3A;&#x662F;&#x5FAE;&#x4FE1;JS-SDK&#x81EA;&#x8EAB;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x65E0;&#x6CD5;&#x63A7;&#x5236;&#x3002;</p>\n</li>\n<li><p>&#x5173;&#x4E8E;&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;</p>\n<ul>\n<li>&#x65B9;&#x6CD5;1: &#x76D1;&#x542C;ready&#x4E8B;&#x4EF6;&#x4E4B;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B65;&#x64CD;&#x4F5C; </li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span>.WeixinJSBridge == <span class=\"string\">&quot;undefined&quot;</span>)</div><div class=\"line\">{</div><div class=\"line\">    $(<span class=\"built_in\">document</span>).on(<span class=\"string\">&apos;WeixinJSBridgeReady&apos;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        $(<span class=\"string\">&apos;#weiXinPay&apos;</span>).click();</div><div class=\"line\">    });</div><div class=\"line\">}</div><div class=\"line\"><span class=\"keyword\">else</span></div><div class=\"line\">{</div><div class=\"line\">    $(<span class=\"string\">&apos;#weiXinPay&apos;</span>).click();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x65B9;&#x6CD5;2: &#x76F4;&#x63A5;&#x4F7F;&#x7528;JS-SDK&#x6587;&#x6863;&#x4E2D;&#x7684;&#x652F;&#x4ED8;&#x4EE3;&#x7801;&#xFF0C;&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x516C;&#x4F17;&#x53F7;&#x652F;&#x4ED8;&#x6587;&#x6863;&#x91CC;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x5177;&#x4F53;&#x8BF7;&#x53C2;&#x8003;<a href=\"https://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E5.8F.91.E8.B5.B7.E4.B8.80.E4.B8.AA.E5.BE.AE.E4.BF.A1.E6.94.AF.E4.BB.98.E8.AF.B7.E6.B1.82\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;JS-SDK&#x8BF4;&#x660E;&#x6587;&#x6863; - &#x5FAE;&#x4FE1;&#x652F;&#x4ED8;</a></li>\n</ul>\n</li>\n</ul>\n<p>PS: &#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x5E16;&#x5B50;&#x4ECE;2014&#x5E74;&#x5F00;&#x59CB;&#x5C31;&#x6709;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x95EE;&#x9898;&#x4F9D;&#x7136;&#x5B58;&#x5728;&#xFF0C;&#x5E0C;&#x671B;&#x5FAE;&#x4FE1;&#x7684;&#x540C;&#x5B66;&#x80FD;&#x591F;&#x7ED9;&#x51FA;&#x5B98;&#x65B9;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://www.henkuai.com/forum.php?mod=viewthread&amp;tid=7450\" target=\"_blank\" rel=\"external\">Uncaught ReferenceError: WeixinJSBridge is not defined</a></li>\n<li><a href=\"http://www.henkuai.com/thread-8365-1-1.html\" target=\"_blank\" rel=\"external\">Uncaught ReferenceError: WeixinJSBridge is not defined&#x95EE;&#x9898;</a>   </li>\n<li><a href=\"http://www.java-bbs.com/thread-14-1-1.html\" target=\"_blank\" rel=\"external\">&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;&#x95EE;&#x9898;&#xFF1A;Uncaught ReferenceError: WeixinJSBridge is not defined </a></li>\n<li><a href=\"http://bbs.blueidea.com/thread-3103040-1-1.html\" target=\"_blank\" rel=\"external\">&#x4F20;&#x8BF4;&#x4E2D;&#x7684;WeixinJSBridge&#x548C;&#x5FAE;&#x4FE1;rest&#x63A5;&#x53E3;</a></li>\n<li><a href=\"https://github.com/whq731/mobile-problems/blob/master/%E7%9B%91%E5%90%ACwxbridge%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%86%8D%E5%94%A4%E8%B5%B7%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98.md\" target=\"_blank\" rel=\"external\">&#x76D1;&#x542C;wxbridge&#x52A0;&#x8F7D;&#x540E;&#x518D;&#x5524;&#x8D77;&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;</a></li>\n</ul>\n","excerpt":"<p><a href=\"https://fundebug.com\">Fundebug</a>&#x5E76;&#x6CA1;&#x6709;&#x4F7F;&#x7528;<a href=\"http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html\">&#x5FAE;&#x4FE1;JS-SDK</a>&#xFF0C;&#x7136;&#x800C;&#x5374;&#x6536;&#x5230;&#x4E86;<code>WeixinJSBridge is not defined</code>&#x7684;&#x62A5;&#x9519;&#xFF1A; </p>","more":"<div style=\"text-align: left;\"><br><img style=\"width:60%;\" src=\"/2017/02/18/weixinjsbridge-is-not-defined/weixinjsbridge_is_not_defined.png\"><br></div>\n\n<p>&#x6211;&#x4EEC;&#x7684;&#x7528;&#x6237;&#x4E5F;&#x6536;&#x5230;&#x4E86;&#x7C7B;&#x4F3C;&#x7684;&#x9519;&#x8BEF;&#x62A5;&#x8B66;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x591A;&#x5F00;&#x53D1;&#x8005;&#x90FD;&#x9047;&#x5230;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;:</p>\n<blockquote>\n<ul>\n<li>&#x6211;&#x7684;&#x5FAE;&#x4FE1;&#x9879;&#x76EE;&#xFF0C;&#x6CA1;&#x6709;&#x7528;&#x5230;&#x5FAE;&#x4FE1;JS-SDK&#xFF0C;&#x4F46;iphone&#x90E8;&#x5206;&#x624B;&#x673A;&#x70B9;&#x51FB;&#x67D0;&#x4E9B;&#x529F;&#x80FD;&#x65E0;&#x6548;&#xFF0C;&#x540E;&#x6765;&#x52A0;&#x4E86;window.onerror&#x76D1;&#x63A7;&#xFF0C;&#x53D1;&#x73B0;&#x6709;Uncaught ReferenceError: WeixinJSBridge is not defined&#x62A5;&#x9519;;</li>\n<li>&#x4ECE;&#x5FAE;&#x4FE1;&#x8FDB;&#x5165;&#x652F;&#x4ED8;&#x4E2D;&#x5FC3;&#x76F4;&#x63A5;&#x5524;&#x8D77;&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;&#x65F6;&#x6709;&#x65F6;&#x4F1A;&#x629B;&#x51FA;ReferenceError&#xFF1A;weixinJSBridge is not defined&#x7684;&#x5F02;&#x5E38;;</li>\n<li>&#x4F7F;&#x7528;AppCan&#x751F;&#x6210;Web/&#x5FAE;&#x4FE1;App&#x7248;&#xFF0C;&#x8C03;&#x7528;&#x5FAE;&#x4FE1;JSAPI&#x652F;&#x4ED8;&#x65B9;&#x5F0F;&#xFF0C;&#x63D0;&#x793A;WeixinJSBridge&#x5185;&#x7F6E;&#x5BF9;&#x8C61;undefined;</li>\n<li>&#x2026;&#x2026;</li>\n</ul>\n</blockquote>\n<p>&#x7531;&#x6B64;&#x53EF;&#x89C1;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x666E;&#x904D;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5728;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#x6CA1;&#x6709;&#x9047;&#x5230;&#x8FC7;&#xFF0C;&#x7136;&#x540E;&#x53C8;&#x6CA1;&#x6709;&#x505A;&#x7EBF;&#x4E0A;&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x5F88;&#x96BE;&#x53D1;&#x73B0;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x5C06;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x5206;&#x6790;&#xFF0C;&#x8BA9;&#x5927;&#x5BB6;&#x5C11;&#x8D70;&#x5F2F;&#x8DEF;&#x3002;</p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK?\"></a>&#x4EC0;&#x4E48;&#x662F;&#x5FAE;&#x4FE1;JS-SDK?</h3><p>&#x8FD9;&#x91CC;&#x5F15;&#x7528;<a href=\"http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>: </p>\n<blockquote>\n<p>&#x5FAE;&#x4FE1;JS-SDK&#x662F;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x5E73;&#x53F0;&#x9762;&#x5411;&#x7F51;&#x9875;&#x5F00;&#x53D1;&#x8005;&#x63D0;&#x4F9B;&#x7684;&#x57FA;&#x4E8E;&#x5FAE;&#x4FE1;&#x5185;&#x7684;&#x7F51;&#x9875;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x5305;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK&#xFF0C;&#x7F51;&#x9875;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x501F;&#x52A9;&#x5FAE;&#x4FE1;&#x9AD8;&#x6548;&#x5730;&#x4F7F;&#x7528;&#x62CD;&#x7167;&#x3001;&#x9009;&#x56FE;&#x3001;&#x8BED;&#x97F3;&#x3001;&#x4F4D;&#x7F6E;&#x7B49;&#x624B;&#x673A;&#x7CFB;&#x7EDF;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;&#x5206;&#x4EAB;&#x3001;&#x626B;&#x4E00;&#x626B;&#x3001;&#x5361;&#x5238;&#x3001;&#x652F;&#x4ED8;&#x7B49;&#x5FAE;&#x4FE1;&#x7279;&#x6709;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x4E3A;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x66F4;&#x4F18;&#x8D28;&#x7684;&#x7F51;&#x9875;&#x4F53;&#x9A8C;&#x3002;</p>\n</blockquote>\n<h3 id=\"Q-amp-A\"><a href=\"#Q-amp-A\" class=\"headerlink\" title=\"Q&amp;A\"></a>Q&amp;A</h3><h4 id=\"&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"><a href=\"#&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"></a><strong>&#x6211;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;</strong></h4><ul>\n<li>&#x5FAE;&#x4FE1;&#x5185;&#x7F6E;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x6709;WeixinJSBridge&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x4E00;&#x5B9A;&#x7684;&#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x3002;</li>\n</ul>\n<h4 id=\"&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"><a href=\"#&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK-&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;\"></a><strong>&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x5FAE;&#x4FE1;JS-SDK, &#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x62A5;&#x9519;&#x5462;&#xFF1F;</strong></h4><ul>\n<li>&#x5FAE;&#x4FE1;webview&#x6CE8;&#x5165;&#x94A9;&#x5B50;&#x6709;&#x65F6;&#x5E8F;&#x95EE;&#x9898;&#xFF1A;&#x5728;<code>WeixinJSBridge</code>&#x8FD8;&#x672A;&#x6CE8;&#x5165;&#x4E4B;&#x524D;&#xFF0C;&#x5C31;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x6CE8;&#x5165;&#x5176;&#x5B83;&#x4F9D;&#x8D56;&#x4E8E;<code>WeixinJSBridge</code>&#x7684;&#x5176;&#x5B83;XX&#x6A21;&#x5757;&#x3002;&#x5728;XX&#x6A21;&#x5757;&#x4E2D;&#x8C03;&#x7528;<code>WeixinJSBridge</code>&#x5C31;&#x4F1A;&#x5931;&#x8D25;&#x3002;</li>\n</ul>\n<h3 id=\"&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;\"><a href=\"#&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;\"></a>&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</h3><p>&#x5982;&#x679C;&#x4F60;&#x5F00;&#x53D1;&#x4E00;&#x6B3E;&#x79FB;&#x52A8;&#x5E94;&#x7528;&#xFF0C;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x8981;&#x8003;&#x8651;&#x5206;&#x4EAB;&#x5230;&#x5FAE;&#x4FE1;&#x7684;&#x529F;&#x80FD;&#xFF1B;&#x5982;&#x679C;&#x4F60;&#x5F00;&#x53D1;&#x7F51;&#x9875;&#xFF0C;&#x90A3;&#x4E48;&#x7528;&#x6237;&#x4E4B;&#x95F4;&#x7684;&#x5206;&#x4EAB;&#x66F4;&#x591A;&#x7684;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x5FAE;&#x4FE1;&#x3002;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5230;&#x5E95;&#x6709;&#x591A;&#x4E25;&#x91CD;&#xFF0C;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x4E5F;&#x53D8;&#x5F97;&#x81F3;&#x5173;&#x91CD;&#x8981;&#x3002;</p>\n<ul>\n<li><p>&#x5982;&#x679C;&#x7F51;&#x9875;&#x4E2D;&#x672A;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;JS-SDK, &#x7528;&#x6237;&#x5728;&#x5FAE;&#x4FE1;&#x4E2D;&#x6253;&#x5F00;&#x7F51;&#x7AD9;&#x53EF;&#x80FD;&#x4F1A;&#x89E6;&#x53D1;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x76EE;&#x524D;&#x770B;&#x6765;&#x53EA;&#x6709;&#x5FFD;&#x7565;&#x3002;&#x56E0;&#x4E3A;&#x662F;&#x5FAE;&#x4FE1;JS-SDK&#x81EA;&#x8EAB;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x65E0;&#x6CD5;&#x63A7;&#x5236;&#x3002;</p>\n</li>\n<li><p>&#x5173;&#x4E8E;&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;</p>\n<ul>\n<li>&#x65B9;&#x6CD5;1: &#x76D1;&#x542C;ready&#x4E8B;&#x4EF6;&#x4E4B;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B65;&#x64CD;&#x4F5C; </li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span>.WeixinJSBridge == <span class=\"string\">&quot;undefined&quot;</span>)</div><div class=\"line\">{</div><div class=\"line\">    $(<span class=\"built_in\">document</span>).on(<span class=\"string\">&apos;WeixinJSBridgeReady&apos;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        $(<span class=\"string\">&apos;#weiXinPay&apos;</span>).click();</div><div class=\"line\">    });</div><div class=\"line\">}</div><div class=\"line\"><span class=\"keyword\">else</span></div><div class=\"line\">{</div><div class=\"line\">    $(<span class=\"string\">&apos;#weiXinPay&apos;</span>).click();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x65B9;&#x6CD5;2: &#x76F4;&#x63A5;&#x4F7F;&#x7528;JS-SDK&#x6587;&#x6863;&#x4E2D;&#x7684;&#x652F;&#x4ED8;&#x4EE3;&#x7801;&#xFF0C;&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x516C;&#x4F17;&#x53F7;&#x652F;&#x4ED8;&#x6587;&#x6863;&#x91CC;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x5177;&#x4F53;&#x8BF7;&#x53C2;&#x8003;<a href=\"https://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E5.8F.91.E8.B5.B7.E4.B8.80.E4.B8.AA.E5.BE.AE.E4.BF.A1.E6.94.AF.E4.BB.98.E8.AF.B7.E6.B1.82\">&#x5FAE;&#x4FE1;JS-SDK&#x8BF4;&#x660E;&#x6587;&#x6863; - &#x5FAE;&#x4FE1;&#x652F;&#x4ED8;</a></li>\n</ul>\n</li>\n</ul>\n<p>PS: &#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x5E16;&#x5B50;&#x4ECE;2014&#x5E74;&#x5F00;&#x59CB;&#x5C31;&#x6709;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x95EE;&#x9898;&#x4F9D;&#x7136;&#x5B58;&#x5728;&#xFF0C;&#x5E0C;&#x671B;&#x5FAE;&#x4FE1;&#x7684;&#x540C;&#x5B66;&#x80FD;&#x591F;&#x7ED9;&#x51FA;&#x5B98;&#x65B9;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://www.henkuai.com/forum.php?mod=viewthread&amp;tid=7450\">Uncaught ReferenceError: WeixinJSBridge is not defined</a></li>\n<li><a href=\"http://www.henkuai.com/thread-8365-1-1.html\">Uncaught ReferenceError: WeixinJSBridge is not defined&#x95EE;&#x9898;</a>   </li>\n<li><a href=\"http://www.java-bbs.com/thread-14-1-1.html\">&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;&#x95EE;&#x9898;&#xFF1A;Uncaught ReferenceError: WeixinJSBridge is not defined </a></li>\n<li><a href=\"http://bbs.blueidea.com/thread-3103040-1-1.html\">&#x4F20;&#x8BF4;&#x4E2D;&#x7684;WeixinJSBridge&#x548C;&#x5FAE;&#x4FE1;rest&#x63A5;&#x53E3;</a></li>\n<li><a href=\"https://github.com/whq731/mobile-problems/blob/master/%E7%9B%91%E5%90%ACwxbridge%E5%8A%A0%E8%BD%BD%E5%90%8E%E5%86%8D%E5%94%A4%E8%B5%B7%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98.md\">&#x76D1;&#x542C;wxbridge&#x52A0;&#x8F7D;&#x540E;&#x518D;&#x5524;&#x8D77;&#x5FAE;&#x4FE1;&#x652F;&#x4ED8;</a></li>\n</ul>"},{"title":"FundebugNode.js","date":"2017-03-17T02:00:00.000Z","_content":"\n\nJavaScript[Fundebug](https://fundebug.com/)**Node.js**Node.js\n\n<!-- more -->\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-nodejs/fundebug-nodejs.png\" />\n</div>\n\n\n#### FundebugNode.js\n\n****\n\n- 100%\n- \n- \n\n****\n\n- Node.js\n- MB\n- \n\n#### Fundebug\n\n * \n * 4KB\n * \n * try/catch\n * [Express](https://docs.fundebug.com/notifier/nodejs/framework/express.html)[Koa](https://docs.fundebug.com/notifier/nodejs/framework/koa.html)[Hapi](https://docs.fundebug.com/notifier/nodejs/framework/hapi.html)\n\n#### Fundebug?\n\n##### 1. [fundebug-ndoejs](https://www.npmjs.com/package/fundebug-nodejs)\n\n```bash\nnpm install fundebug-nodejs\n```\n\nNPM[NPM](https://npm.taobao.org/):\n\n```bash\nnpm install fundebug-nodejs --registry=https://registry.npm.taobao.org\n```\n\n##### 2. fundebugapikey:\n\n```js\nvar fundebug=require(\"fundebug-nodejs\");\nfundebug.apikey=\"YOUR-APIKEY\"\n```\n\n- **apikey**[](https://fundebug.com/team/create)[](https://fundebug.com/project/create)\n\n##### 3. :\n\n**[Express](http://expressjs.com/zh-cn/)**\n\n```js\napp.use(fundebug.ExpressErrorHandler);\n```\n\n**[Koa](http://koajs.com/)**\n\n```js\napp.on(\"error\", fundebug.KoaErrorHandler);\n```\n\n**[Hapi](https://hapijs.com/)**\n\n```js\nserver.on(\"request-error\", fundebug.HapiErrorHandler);\nserver.on(\"response\", fundebug.HapiErrorHandler);\n```\n\n[Fundebug - Node.js](https://docs.fundebug.com/notifier/nodejs/)\n\n\n\n\n\n\n\n","source":"_posts/2017/03/17/fundebug-support-nodejs.md","raw":"---\n\ntitle: FundebugNode.js\n\ndate: 2017-03-17 10:00:00\n\ntags: [Node.js]\n\n---\n\n\nJavaScript[Fundebug](https://fundebug.com/)**Node.js**Node.js\n\n<!-- more -->\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"fundebug-support-nodejs/fundebug-nodejs.png\" />\n</div>\n\n\n#### FundebugNode.js\n\n****\n\n- 100%\n- \n- \n\n****\n\n- Node.js\n- MB\n- \n\n#### Fundebug\n\n * \n * 4KB\n * \n * try/catch\n * [Express](https://docs.fundebug.com/notifier/nodejs/framework/express.html)[Koa](https://docs.fundebug.com/notifier/nodejs/framework/koa.html)[Hapi](https://docs.fundebug.com/notifier/nodejs/framework/hapi.html)\n\n#### Fundebug?\n\n##### 1. [fundebug-ndoejs](https://www.npmjs.com/package/fundebug-nodejs)\n\n```bash\nnpm install fundebug-nodejs\n```\n\nNPM[NPM](https://npm.taobao.org/):\n\n```bash\nnpm install fundebug-nodejs --registry=https://registry.npm.taobao.org\n```\n\n##### 2. fundebugapikey:\n\n```js\nvar fundebug=require(\"fundebug-nodejs\");\nfundebug.apikey=\"YOUR-APIKEY\"\n```\n\n- **apikey**[](https://fundebug.com/team/create)[](https://fundebug.com/project/create)\n\n##### 3. :\n\n**[Express](http://expressjs.com/zh-cn/)**\n\n```js\napp.use(fundebug.ExpressErrorHandler);\n```\n\n**[Koa](http://koajs.com/)**\n\n```js\napp.on(\"error\", fundebug.KoaErrorHandler);\n```\n\n**[Hapi](https://hapijs.com/)**\n\n```js\nserver.on(\"request-error\", fundebug.HapiErrorHandler);\nserver.on(\"response\", fundebug.HapiErrorHandler);\n```\n\n[Fundebug - Node.js](https://docs.fundebug.com/notifier/nodejs/)\n\n\n\n\n\n\n\n","slug":"2017/03/17/fundebug-support-nodejs","published":1,"updated":"2017-03-18T11:52:44.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmy001871fyai2c3bo2","content":"<p>&#x4F5C;&#x4E3A;&#x5168;&#x6808;JavaScript&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5E73;&#x53F0;&#xFF0C;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x7684;<strong>Node.js&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#x670D;&#x52A1;</strong>&#x4E0A;&#x7EBF;&#x5566;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x53CA;&#x65F6;&#xFF0C;&#x9AD8;&#x6548;&#x5730;&#x53D1;&#x73B0;&#x5E76;&#x4E14;&#x89E3;&#x51B3;Node.js&#x9519;&#x8BEF;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#xFF0C;&#x5E76;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>\n<a id=\"more\"></a>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/17/fundebug-support-nodejs/fundebug-nodejs.png\"><br></div>\n\n\n<h4 id=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node-js&#xFF1F;\"><a href=\"#Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node-js&#xFF1F;\" class=\"headerlink\" title=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node.js&#xFF1F;\"></a>Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node.js&#xFF1F;</h4><p>&#x7A0B;&#x5E8F;&#x5458;&#x901A;&#x5E38;&#x662F;&#x6BD4;&#x8F83;&#x81EA;&#x4FE1;&#x7684;&#xFF0C;&#x4ED6;&#x4EEC;&#x575A;&#x6301;<strong>&#x81EA;&#x5DF1;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x6CA1;&#x6709;&#x95EE;&#x9898;</strong>&#x3002;&#x7136;&#x800C;&#xFF0C;&#x518D;&#x8FFD;&#x95EE;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#xFF1A;</p>\n<ul>\n<li>&#x6211;&#x7684;&#x4EE3;&#x7801;&#x771F;&#x7684;100%&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x5417;&#xFF1F;</li>\n<li>&#x6211;&#x505A;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5417;&#xFF1F;</li>\n<li>&#x96BE;&#x9053;&#x6211;&#x8981;&#x82B1;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x6CA1;&#x5B8C;&#x6CA1;&#x4E86;&#x7684;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</li>\n</ul>\n<p><strong>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x5728;&#x54EA;&#xFF1F;</strong></p>\n<ul>\n<li>&#x5F53;Node.js&#x540E;&#x53F0;&#x7A0B;&#x5E8F;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x5F00;&#x53D1;&#x8005;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#xFF1B;</li>\n<li>&#x5728;&#x52A8;&#x8F84;&#x4E0A;&#x767E;MB&#x7684;&#x6587;&#x672C;&#x65E5;&#x5FD7;&#x4E2D;&#x5206;&#x6790;&#x9519;&#x8BEF;&#xFF0C;&#x663E;&#x7136;&#x662F;&#x975E;&#x5E38;&#x4F4E;&#x6548;&#x7684;&#xFF1B;</li>\n<li>&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x7684;&#x4E0D;&#x89C4;&#x8303;&#x4E5F;&#x4E0D;&#x5B8C;&#x6574;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x65E0;&#x4ECE;&#x4E0B;&#x624B;&#xFF1B;</li>\n</ul>\n<h4 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;</h4><ul>\n<li>&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x641E;&#x5B9A;&#xFF1B;</li>\n<li>&#x63D2;&#x4EF6;&#x4EC5;4KB&#xFF0C;&#x4E14;&#x4E0D;&#x4F9D;&#x8D56;&#x4EFB;&#x4F55;&#x6A21;&#x5757;</li>\n<li>&#x81EA;&#x52A8;&#x6355;&#x83B7;&#x672A;&#x5904;&#x7406;&#x7684;&#x9519;&#x8BEF;&#xFF1B;</li>\n<li>&#x652F;&#x6301;&#x6536;&#x96C6;try/catch&#x6355;&#x83B7;&#x7684;&#x9519;&#x8BEF;&#xFF1B;</li>\n<li>&#x517C;&#x5BB9;&#x6240;&#x6709;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x6846;&#x67B6;&#xFF0C;&#x4F8B;&#x5982;<a href=\"https://docs.fundebug.com/notifier/nodejs/framework/express.html\" target=\"_blank\" rel=\"external\">Express</a>&#x3001;<a href=\"https://docs.fundebug.com/notifier/nodejs/framework/koa.html\" target=\"_blank\" rel=\"external\">Koa</a>&#x3001;<a href=\"https://docs.fundebug.com/notifier/nodejs/framework/hapi.html\" target=\"_blank\" rel=\"external\">Hapi</a>&#x7B49;&#xFF1B;</li>\n</ul>\n<h4 id=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\"><a href=\"#&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?\"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?</h4><h5 id=\"1-&#x5B89;&#x88C5;fundebug-ndoejs&#x6A21;&#x5757;\"><a href=\"#1-&#x5B89;&#x88C5;fundebug-ndoejs&#x6A21;&#x5757;\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;fundebug-ndoejs&#x6A21;&#x5757;\"></a>1. &#x5B89;&#x88C5;<a href=\"https://www.npmjs.com/package/fundebug-nodejs\" target=\"_blank\" rel=\"external\">fundebug-ndoejs</a>&#x6A21;&#x5757;</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install fundebug-nodejs</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x56FD;&#x5916;&#x7684;NPM&#x901F;&#x5EA6;&#x592A;&#x6162;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"https://npm.taobao.org/\" target=\"_blank\" rel=\"external\">&#x6DD8;&#x5B9D;NPM&#x955C;&#x50CF;</a>&#x5B89;&#x88C5;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install fundebug-nodejs --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure>\n<h5 id=\"2-&#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\"><a href=\"#2-&#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\" class=\"headerlink\" title=\"2. &#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey:\"></a>2. &#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey:</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fundebug=<span class=\"built_in\">require</span>(<span class=\"string\">&quot;fundebug-nodejs&quot;</span>);</div><div class=\"line\">fundebug.apikey=<span class=\"string\">&quot;YOUR-APIKEY&quot;</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x5176;&#x4E2D;&#xFF0C;&#x83B7;&#x53D6;<strong>apikey</strong>&#x9700;&#x8981;<a href=\"https://fundebug.com/team/create\" target=\"_blank\" rel=\"external\">&#x514D;&#x8D39;&#x6CE8;&#x518C;</a>&#x5E10;&#x53F7;&#x5E76;&#x4E14;<a href=\"https://fundebug.com/project/create\" target=\"_blank\" rel=\"external\">&#x521B;&#x5EFA;&#x9879;&#x76EE;</a>&#x3002;</li>\n</ul>\n<h5 id=\"3-&#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;\"><a href=\"#3-&#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"3. &#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;:\"></a>3. &#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;:</h5><p><strong>&#x76D1;&#x6D4B;<a href=\"http://expressjs.com/zh-cn/\" target=\"_blank\" rel=\"external\">Express</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.use(fundebug.ExpressErrorHandler);</div></pre></td></tr></table></figure>\n<p><strong>&#x76D1;&#x6D4B;<a href=\"http://koajs.com/\" target=\"_blank\" rel=\"external\">Koa</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.on(<span class=\"string\">&quot;error&quot;</span>, fundebug.KoaErrorHandler);</div></pre></td></tr></table></figure>\n<p><strong>&#x76D1;&#x6D4B;<a href=\"https://hapijs.com/\" target=\"_blank\" rel=\"external\">Hapi</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">server.on(<span class=\"string\">&quot;request-error&quot;</span>, fundebug.HapiErrorHandler);</div><div class=\"line\">server.on(<span class=\"string\">&quot;response&quot;</span>, fundebug.HapiErrorHandler);</div></pre></td></tr></table></figure>\n<p>&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x8BF7;&#x67E5;&#x770B;<a href=\"https://docs.fundebug.com/notifier/nodejs/\" target=\"_blank\" rel=\"external\">Fundebug&#x6587;&#x6863; - Node.js</a></p>\n","excerpt":"<p>&#x4F5C;&#x4E3A;&#x5168;&#x6808;JavaScript&#x9519;&#x8BEF;&#x5B9E;&#x65F6;&#x76D1;&#x6D4B;&#x5E73;&#x53F0;&#xFF0C;<a href=\"https://fundebug.com/\">Fundebug</a>&#x7684;<strong>Node.js&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#x670D;&#x52A1;</strong>&#x4E0A;&#x7EBF;&#x5566;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x53CA;&#x65F6;&#xFF0C;&#x9AD8;&#x6548;&#x5730;&#x53D1;&#x73B0;&#x5E76;&#x4E14;&#x89E3;&#x51B3;Node.js&#x9519;&#x8BEF;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#xFF0C;&#x5E76;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>","more":"<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/17/fundebug-support-nodejs/fundebug-nodejs.png\"><br></div>\n\n\n<h4 id=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node-js&#xFF1F;\"><a href=\"#Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node-js&#xFF1F;\" class=\"headerlink\" title=\"Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node.js&#xFF1F;\"></a>Fundebug&#x4E3A;&#x4EC0;&#x4E48;&#x76D1;&#x6D4B;Node.js&#xFF1F;</h4><p>&#x7A0B;&#x5E8F;&#x5458;&#x901A;&#x5E38;&#x662F;&#x6BD4;&#x8F83;&#x81EA;&#x4FE1;&#x7684;&#xFF0C;&#x4ED6;&#x4EEC;&#x575A;&#x6301;<strong>&#x81EA;&#x5DF1;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x6CA1;&#x6709;&#x95EE;&#x9898;</strong>&#x3002;&#x7136;&#x800C;&#xFF0C;&#x518D;&#x8FFD;&#x95EE;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#xFF1A;</p>\n<ul>\n<li>&#x6211;&#x7684;&#x4EE3;&#x7801;&#x771F;&#x7684;100%&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x5417;&#xFF1F;</li>\n<li>&#x6211;&#x505A;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5417;&#xFF1F;</li>\n<li>&#x96BE;&#x9053;&#x6211;&#x8981;&#x82B1;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x6CA1;&#x5B8C;&#x6CA1;&#x4E86;&#x7684;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</li>\n</ul>\n<p><strong>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x5728;&#x54EA;&#xFF1F;</strong></p>\n<ul>\n<li>&#x5F53;Node.js&#x540E;&#x53F0;&#x7A0B;&#x5E8F;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x7136;&#x800C;&#x5F00;&#x53D1;&#x8005;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#xFF1B;</li>\n<li>&#x5728;&#x52A8;&#x8F84;&#x4E0A;&#x767E;MB&#x7684;&#x6587;&#x672C;&#x65E5;&#x5FD7;&#x4E2D;&#x5206;&#x6790;&#x9519;&#x8BEF;&#xFF0C;&#x663E;&#x7136;&#x662F;&#x975E;&#x5E38;&#x4F4E;&#x6548;&#x7684;&#xFF1B;</li>\n<li>&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x7684;&#x4E0D;&#x89C4;&#x8303;&#x4E5F;&#x4E0D;&#x5B8C;&#x6574;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x65E0;&#x4ECE;&#x4E0B;&#x624B;&#xFF1B;</li>\n</ul>\n<h4 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x662F;Fundebug&#xFF1F;</h4><ul>\n<li>&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x641E;&#x5B9A;&#xFF1B;</li>\n<li>&#x63D2;&#x4EF6;&#x4EC5;4KB&#xFF0C;&#x4E14;&#x4E0D;&#x4F9D;&#x8D56;&#x4EFB;&#x4F55;&#x6A21;&#x5757;</li>\n<li>&#x81EA;&#x52A8;&#x6355;&#x83B7;&#x672A;&#x5904;&#x7406;&#x7684;&#x9519;&#x8BEF;&#xFF1B;</li>\n<li>&#x652F;&#x6301;&#x6536;&#x96C6;try/catch&#x6355;&#x83B7;&#x7684;&#x9519;&#x8BEF;&#xFF1B;</li>\n<li>&#x517C;&#x5BB9;&#x6240;&#x6709;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x6846;&#x67B6;&#xFF0C;&#x4F8B;&#x5982;<a href=\"https://docs.fundebug.com/notifier/nodejs/framework/express.html\">Express</a>&#x3001;<a href=\"https://docs.fundebug.com/notifier/nodejs/framework/koa.html\">Koa</a>&#x3001;<a href=\"https://docs.fundebug.com/notifier/nodejs/framework/hapi.html\">Hapi</a>&#x7B49;&#xFF1B;</li>\n</ul>\n<h4 id=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\"><a href=\"#&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?\"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528;Fundebug?</h4><h5 id=\"1-&#x5B89;&#x88C5;fundebug-ndoejs&#x6A21;&#x5757;\"><a href=\"#1-&#x5B89;&#x88C5;fundebug-ndoejs&#x6A21;&#x5757;\" class=\"headerlink\" title=\"1. &#x5B89;&#x88C5;fundebug-ndoejs&#x6A21;&#x5757;\"></a>1. &#x5B89;&#x88C5;<a href=\"https://www.npmjs.com/package/fundebug-nodejs\">fundebug-ndoejs</a>&#x6A21;&#x5757;</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install fundebug-nodejs</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x56FD;&#x5916;&#x7684;NPM&#x901F;&#x5EA6;&#x592A;&#x6162;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"https://npm.taobao.org/\">&#x6DD8;&#x5B9D;NPM&#x955C;&#x50CF;</a>&#x5B89;&#x88C5;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install fundebug-nodejs --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure>\n<h5 id=\"2-&#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\"><a href=\"#2-&#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey\" class=\"headerlink\" title=\"2. &#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey:\"></a>2. &#x5BFC;&#x5165;fundebug&#x5E76;&#x914D;&#x7F6E;apikey:</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fundebug=<span class=\"built_in\">require</span>(<span class=\"string\">&quot;fundebug-nodejs&quot;</span>);</div><div class=\"line\">fundebug.apikey=<span class=\"string\">&quot;YOUR-APIKEY&quot;</span></div></pre></td></tr></table></figure>\n<ul>\n<li>&#x5176;&#x4E2D;&#xFF0C;&#x83B7;&#x53D6;<strong>apikey</strong>&#x9700;&#x8981;<a href=\"https://fundebug.com/team/create\">&#x514D;&#x8D39;&#x6CE8;&#x518C;</a>&#x5E10;&#x53F7;&#x5E76;&#x4E14;<a href=\"https://fundebug.com/project/create\">&#x521B;&#x5EFA;&#x9879;&#x76EE;</a>&#x3002;</li>\n</ul>\n<h5 id=\"3-&#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;\"><a href=\"#3-&#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"3. &#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;:\"></a>3. &#x540E;&#x7AEF;&#x6846;&#x67B6;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;:</h5><p><strong>&#x76D1;&#x6D4B;<a href=\"http://expressjs.com/zh-cn/\">Express</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.use(fundebug.ExpressErrorHandler);</div></pre></td></tr></table></figure>\n<p><strong>&#x76D1;&#x6D4B;<a href=\"http://koajs.com/\">Koa</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.on(<span class=\"string\">&quot;error&quot;</span>, fundebug.KoaErrorHandler);</div></pre></td></tr></table></figure>\n<p><strong>&#x76D1;&#x6D4B;<a href=\"https://hapijs.com/\">Hapi</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">server.on(<span class=\"string\">&quot;request-error&quot;</span>, fundebug.HapiErrorHandler);</div><div class=\"line\">server.on(<span class=\"string\">&quot;response&quot;</span>, fundebug.HapiErrorHandler);</div></pre></td></tr></table></figure>\n<p>&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x8BF7;&#x67E5;&#x770B;<a href=\"https://docs.fundebug.com/notifier/nodejs/\">Fundebug&#x6587;&#x6863; - Node.js</a></p>"},{"title":"\"jQuery is not defined\"","date":"2017-03-06T02:00:00.000Z","_content":"\n[Fundebug](https://fundebug.com/)[JavaScript](https://docs.fundebug.com/notifier/javascript/)**jQuery is not defined**: \n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:70%;\" src=\"jquery-is-not-defined/fundebug-jquery-error.png\" />\n</div>\n\njQueryjQuery3**399**\n\n<div id=\"timeContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_time.js\"></script>\n\n\n\n[Staticfile CDN](https://staticfile.org/)jQuery:\n\n```js\n<script src=\"https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js\"></script>\n```\n\n\n\njQueryJavaScriptjQueryjQuery[Fundebug](https://fundebug.com/)\"jQuery is not defined\"()\n\n### 1: CDNjQuery\n\n> jQueryCDNjQueryjQueryjQuery\n\n****: jQueryCDNjQueryjQueryCDNCDN\n\n```js\n <script src=\"https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js\"></script>\n <script> \n window.jQuery || document.write('<script src=\"http://kiwenlau.com/js/jquery.min.js\"><\\/script>'))\n </script>\n```\n\nIP26.1%****CDNjQuery\n\n<div id=\"ipContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_ip.js\"></script>\n\njQuery[http://kiwenlau.com/js/jquery.min.js](http://kiwenlau.com/js/jquery.min.js)\n\n### 2: jQuery\n\n> jQueryJavaScriptjQueryjQueryjQueryjQuery\n\n****: jQueryjQueryJavaScript**document.ready**DOM\n\n\n```js\n<script type=\"text/javascript\" src=\"path/to/jquery.min.js\"></script>\n<script type=\"text/javascript\">\n  $(document).ready(function() {\n    //jQuery\n  });\n</script>\n```\n\n#### \n[The State of Front-End Tooling 2016 - Results](https://ashleynolan.co.uk/blog/frontend-tooling-survey-2016-results)\n[- ](https://www.zhihu.com/question/36520358)\n\n\n\n","source":"_posts/2017/03/06/jquery-is-not-defined.md","raw":"---\ntitle: \"jQuery is not defined\"\n\ndate: 2017-03-06 10:00:00\n---\n\n[Fundebug](https://fundebug.com/)[JavaScript](https://docs.fundebug.com/notifier/javascript/)**jQuery is not defined**: \n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:70%;\" src=\"jquery-is-not-defined/fundebug-jquery-error.png\" />\n</div>\n\njQueryjQuery3**399**\n\n<div id=\"timeContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_time.js\"></script>\n\n\n\n[Staticfile CDN](https://staticfile.org/)jQuery:\n\n```js\n<script src=\"https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js\"></script>\n```\n\n\n\njQueryJavaScriptjQueryjQuery[Fundebug](https://fundebug.com/)\"jQuery is not defined\"()\n\n### 1: CDNjQuery\n\n> jQueryCDNjQueryjQueryjQuery\n\n****: jQueryCDNjQueryjQueryCDNCDN\n\n```js\n <script src=\"https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js\"></script>\n <script> \n window.jQuery || document.write('<script src=\"http://kiwenlau.com/js/jquery.min.js\"><\\/script>'))\n </script>\n```\n\nIP26.1%****CDNjQuery\n\n<div id=\"ipContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_ip.js\"></script>\n\njQuery[http://kiwenlau.com/js/jquery.min.js](http://kiwenlau.com/js/jquery.min.js)\n\n### 2: jQuery\n\n> jQueryJavaScriptjQueryjQueryjQueryjQuery\n\n****: jQueryjQueryJavaScript**document.ready**DOM\n\n\n```js\n<script type=\"text/javascript\" src=\"path/to/jquery.min.js\"></script>\n<script type=\"text/javascript\">\n  $(document).ready(function() {\n    //jQuery\n  });\n</script>\n```\n\n#### \n[The State of Front-End Tooling 2016 - Results](https://ashleynolan.co.uk/blog/frontend-tooling-survey-2016-results)\n[- ](https://www.zhihu.com/question/36520358)\n\n\n\n","slug":"2017/03/06/jquery-is-not-defined","published":1,"updated":"2017-03-06T12:47:38.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtmz001a71fys1q5x315","content":"<p>&#x6211;&#x7684;&#x535A;&#x5BA2;&#x4F7F;&#x7528;&#x4E86;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x7684;<a href=\"https://docs.fundebug.com/notifier/javascript/\" target=\"_blank\" rel=\"external\">JavaScript&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#x63D2;&#x4EF6;</a>&#xFF0C;&#x7136;&#x540E;&#x5076;&#x5C14;&#x4F1A;&#x6536;&#x5230;<strong>jQuery is not defined</strong>&#x8FD9;&#x6837;&#x7684;&#x9519;&#x8BEF;&#x62A5;&#x8B66;: </p>\n<a id=\"more\"></a>\n<div style=\"text-align: left;\"><br><img style=\"width:70%;\" src=\"/2017/03/06/jquery-is-not-defined/fundebug-jquery-error.png\"><br></div>\n\n<p>&#x7531;&#x51FA;&#x9519;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x53EF;&#x77E5;&#xFF0C;&#x535A;&#x5BA2;&#x4E2D;&#x7684;&#x300E;&#x8FD4;&#x56DE;&#x9876;&#x90E8;&#x300F;&#x7684;&#x529F;&#x80FD;&#x662F;&#x4F7F;&#x7528;&#x4E86;jQuery&#x5B9E;&#x73B0;&#xFF0C;&#x5982;&#x679C;jQuery&#x51FA;&#x9519;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x8BE5;&#x529F;&#x80FD;&#x5931;&#x6548;&#xFF0C;&#x90A3;&#x4E48;&#x8BFB;&#x8005;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x624B;&#x52A8;&#x6ED1;&#x52A8;&#x5230;&#x535A;&#x5BA2;&#x9876;&#x90E8;&#xFF0C;&#x8FD9;&#x6837;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x662F;&#x975E;&#x5E38;&#x7CDF;&#x7CD5;&#x7684;&#x3002;&#x6839;&#x636E;&#x7EDF;&#x8BA1;&#xFF0C;3&#x4E2A;&#x6708;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5DF2;&#x7ECF;&#x7D2F;&#x8BA1;&#x51FA;&#x73B0;&#x4E86;<strong>399</strong>&#x6B21;&#xFF0C;&#x5DF2;&#x7ECF;&#x76F8;&#x5F53;&#x4E25;&#x91CD;&#x4E86;&#x3002;</p>\n<p><div id=\"timeContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div></p>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_time.js\"></script>\n\n\n\n<p>&#x6211;&#x4F7F;&#x7528;&#x4E86;<a href=\"https://staticfile.org/\" target=\"_blank\" rel=\"external\">Staticfile CDN</a>&#x63D0;&#x4F9B;&#x7684;&#x7684;jQuery:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script src=<span class=\"string\">&quot;https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<p>&#x800C;&#x6839;&#x636E;&#x6700;&#x65B0;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x663E;&#x793A;&#xFF0C;jQuery&#x4F9D;&#x7136;&#x662F;&#x524D;&#x7AEF;&#x7528;&#x5F97;&#x6700;&#x591A;&#x7684;JavaScript&#x5E93;&#xFF0C;&#x56E0;&#x6B64;&#x4E00;&#x65E6;jQuery&#x51FA;&#x9519;&#xFF0C;&#x5FC5;&#x5B9A;&#x4F1A;&#x5F71;&#x54CD;&#x5F88;&#x591A;&#x529F;&#x80FD;&#xFF0C;jQuery&#x7684;&#x91CD;&#x8981;&#x6027;&#x4E0D;&#x8A00;&#x800C;&#x55BB;&#x3002;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E0D;&#x5C11;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x7684;&#x7528;&#x6237;&#x90FD;&#x6536;&#x5230;&#x8FC7;&#x201D;jQuery is not defined&#x201D;&#x7684;&#x9519;&#x8BEF;&#x62A5;&#x8B66;&#xFF0C;&#x8BB8;&#x591A;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x8005;&#x5E94;&#x8BE5;&#x90FD;&#x9047;&#x5230;(&#x4E5F;&#x8BB8;&#x53EA;&#x662F;&#x4F60;&#x6CA1;&#x6709;&#x53D1;&#x73B0;)&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"&#x51FA;&#x9519;&#x539F;&#x56E0;1-&#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;\"><a href=\"#&#x51FA;&#x9519;&#x539F;&#x56E0;1-&#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;\" class=\"headerlink\" title=\"&#x51FA;&#x9519;&#x539F;&#x56E0;1: &#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;\"></a>&#x51FA;&#x9519;&#x539F;&#x56E0;1: &#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;</h3><blockquote>\n<p>&#x5F53;&#x63D0;&#x4F9B;jQuery&#x7684;CDN&#x51FA;&#x95EE;&#x9898;&#x5BFC;&#x81F4;jQuery&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;&#x6216;&#x8005;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#x6D4F;&#x89C8;&#x5668;&#x52A0;&#x8F7D;jQuery&#x6587;&#x4EF6;&#x8D85;&#x65F6;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;jQuery&#x672A;&#x5B9A;&#x4E49;&#x7684;&#x9519;&#x8BEF;&#x3002;</p>\n</blockquote>\n<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6848;</strong>: &#x5C06;jQuery&#x6587;&#x4EF6;&#x6302;&#x8F7D;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x7AD9;&#x4E0A;&#x4F5C;&#x4E3A;&#x5907;&#x7528;&#xFF0C;&#x5982;&#x679C;CDN&#x52A0;&#x8F7D;jQuery&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x7F51;&#x7AD9;&#x5B58;&#x6258;&#x7BA1;&#x7684;jQuery&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x6237;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;CDN&#x52A0;&#x5FEB;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x800C;&#x4E00;&#x65E6;CDN&#x51FA;&#x95EE;&#x9898;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x51FA;&#x9519;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script src=<span class=\"string\">&quot;https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script&gt; </div><div class=\"line\"><span class=\"built_in\">window</span>.jQuery || <span class=\"built_in\">document</span>.write(<span class=\"string\">&apos;&lt;script src=&quot;http://kiwenlau.com/js/jquery.min.js&quot;&gt;&lt;\\/script&gt;&apos;</span>))</div><div class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x6211;&#x7684;&#x535A;&#x5BA2;&#x8BFB;&#x8005;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x6765;&#x81EA;&#x56FD;&#x5185;&#xFF0C;&#x7136;&#x800C;&#x5206;&#x6790;&#x9519;&#x8BEF;&#x7684;IP&#x5730;&#x5740;&#x540E;&#xFF0C;&#x6211;&#x53D1;&#x73B0;&#x9AD8;&#x8FBE;26.1%&#x51FA;&#x9519;&#x7528;&#x6237;&#x7684;&#x6765;&#x81EA;&#x56FD;&#x5916;&#x3002;&#x6839;&#x636E;<strong>&#x5E78;&#x5B58;&#x8005;&#x504F;&#x5DEE;</strong>&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x8BA4;&#x5B9A;&#x56FD;&#x5185;&#x7528;&#x6237;&#x51FA;&#x9519;&#x6982;&#x7387;&#x66F4;&#x9AD8;&#xFF0C;&#x800C;&#x5E94;&#x8BE5;&#x8BA4;&#x5B9A;&#x56FD;&#x5916;&#x7528;&#x6237;&#x51FA;&#x9519;&#x6982;&#x7387;&#x66F4;&#x9AD8;&#x3002;&#x90A3;&#x4E48;&#x8FD9;&#x5C31;&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#x4E86;&#xFF0C;&#x56FD;&#x5916;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x56FD;&#x5185;CDN&#x65F6;&#x901F;&#x5EA6;&#x592A;&#x6162;&#xFF0C;&#x5BFC;&#x81F4;jQuery&#x51FA;&#x9519;&#x3002;</p>\n<p><div id=\"ipContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div></p>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_ip.js\"></script>\n\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x5C06;jQuery&#x6302;&#x8F7D;&#x5728;<a href=\"http://kiwenlau.com/js/jquery.min.js\">http://kiwenlau.com/js/jquery.min.js</a>&#x4F5C;&#x4E3A;&#x5907;&#x7528;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"&#x51FA;&#x9519;&#x539F;&#x56E0;2-&#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;\"><a href=\"#&#x51FA;&#x9519;&#x539F;&#x56E0;2-&#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;\" class=\"headerlink\" title=\"&#x51FA;&#x9519;&#x539F;&#x56E0;2: &#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;\"></a>&#x51FA;&#x9519;&#x539F;&#x56E0;2: &#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;</h3><blockquote>\n<p>&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;&#x5176;&#x5B83;JavaScript&#x811A;&#x672C;&#x5148;&#x4E8E;jQuery&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x5E76;&#x6267;&#x884C;&#x3002;&#x8FD9;&#x65F6;jQuery&#x5C1A;&#x672A;&#x52A0;&#x8F7D;&#xFF0C;&#x56E0;&#x6B64;&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;&#x4EE3;&#x7801;&#x8C03;&#x7528;jQuery&#x7684;&#x8BDD;&#x5C31;&#x4F1A;&#x51FA;&#x9519;&#x3002;</p>\n</blockquote>\n<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6848;</strong>: &#x5C06;jQuery&#x5E93;&#x653E;&#x5728;&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;JavaScript&#x811A;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x8FD9;&#x4E9B;&#x4EE3;&#x7801;&#x653E;&#x5165;<strong>document.ready</strong>&#x6765;&#x786E;&#x4FDD;DOM&#x52A0;&#x8F7D;&#x5B8C;&#x6BD5;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;path/to/jquery.min.js&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</div><div class=\"line\">  $(<span class=\"built_in\">document</span>).ready(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{</div><div class=\"line\">    <span class=\"comment\">//&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;&#x4EE3;&#x7801;</span></div><div class=\"line\">  });</div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h4><p><a href=\"https://ashleynolan.co.uk/blog/frontend-tooling-survey-2016-results\" target=\"_blank\" rel=\"external\">The State of Front-End Tooling 2016 - Results</a><br><a href=\"https://www.zhihu.com/question/36520358\" target=\"_blank\" rel=\"external\">&#x5E78;&#x5B58;&#x8005;&#x504F;&#x5DEE;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF1F;- &#x77E5;&#x4E4E;</a></p>\n","excerpt":"<p>&#x6211;&#x7684;&#x535A;&#x5BA2;&#x4F7F;&#x7528;&#x4E86;<a href=\"https://fundebug.com/\">Fundebug</a>&#x7684;<a href=\"https://docs.fundebug.com/notifier/javascript/\">JavaScript&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#x63D2;&#x4EF6;</a>&#xFF0C;&#x7136;&#x540E;&#x5076;&#x5C14;&#x4F1A;&#x6536;&#x5230;<strong>jQuery is not defined</strong>&#x8FD9;&#x6837;&#x7684;&#x9519;&#x8BEF;&#x62A5;&#x8B66;: </p>","more":"<div style=\"text-align: left;\"><br><img style=\"width:70%;\" src=\"/2017/03/06/jquery-is-not-defined/fundebug-jquery-error.png\"><br></div>\n\n<p>&#x7531;&#x51FA;&#x9519;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x53EF;&#x77E5;&#xFF0C;&#x535A;&#x5BA2;&#x4E2D;&#x7684;&#x300E;&#x8FD4;&#x56DE;&#x9876;&#x90E8;&#x300F;&#x7684;&#x529F;&#x80FD;&#x662F;&#x4F7F;&#x7528;&#x4E86;jQuery&#x5B9E;&#x73B0;&#xFF0C;&#x5982;&#x679C;jQuery&#x51FA;&#x9519;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x8BE5;&#x529F;&#x80FD;&#x5931;&#x6548;&#xFF0C;&#x90A3;&#x4E48;&#x8BFB;&#x8005;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x624B;&#x52A8;&#x6ED1;&#x52A8;&#x5230;&#x535A;&#x5BA2;&#x9876;&#x90E8;&#xFF0C;&#x8FD9;&#x6837;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x662F;&#x975E;&#x5E38;&#x7CDF;&#x7CD5;&#x7684;&#x3002;&#x6839;&#x636E;&#x7EDF;&#x8BA1;&#xFF0C;3&#x4E2A;&#x6708;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5DF2;&#x7ECF;&#x7D2F;&#x8BA1;&#x51FA;&#x73B0;&#x4E86;<strong>399</strong>&#x6B21;&#xFF0C;&#x5DF2;&#x7ECF;&#x76F8;&#x5F53;&#x4E25;&#x91CD;&#x4E86;&#x3002;</p>\n<p><div id=\"timeContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div></p>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_time.js\"></script>\n\n\n\n<p>&#x6211;&#x4F7F;&#x7528;&#x4E86;<a href=\"https://staticfile.org/\">Staticfile CDN</a>&#x63D0;&#x4F9B;&#x7684;&#x7684;jQuery:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script src=<span class=\"string\">&quot;https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<p>&#x800C;&#x6839;&#x636E;&#x6700;&#x65B0;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x663E;&#x793A;&#xFF0C;jQuery&#x4F9D;&#x7136;&#x662F;&#x524D;&#x7AEF;&#x7528;&#x5F97;&#x6700;&#x591A;&#x7684;JavaScript&#x5E93;&#xFF0C;&#x56E0;&#x6B64;&#x4E00;&#x65E6;jQuery&#x51FA;&#x9519;&#xFF0C;&#x5FC5;&#x5B9A;&#x4F1A;&#x5F71;&#x54CD;&#x5F88;&#x591A;&#x529F;&#x80FD;&#xFF0C;jQuery&#x7684;&#x91CD;&#x8981;&#x6027;&#x4E0D;&#x8A00;&#x800C;&#x55BB;&#x3002;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E0D;&#x5C11;<a href=\"https://fundebug.com/\">Fundebug</a>&#x7684;&#x7528;&#x6237;&#x90FD;&#x6536;&#x5230;&#x8FC7;&#x201D;jQuery is not defined&#x201D;&#x7684;&#x9519;&#x8BEF;&#x62A5;&#x8B66;&#xFF0C;&#x8BB8;&#x591A;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x8005;&#x5E94;&#x8BE5;&#x90FD;&#x9047;&#x5230;(&#x4E5F;&#x8BB8;&#x53EA;&#x662F;&#x4F60;&#x6CA1;&#x6709;&#x53D1;&#x73B0;)&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"&#x51FA;&#x9519;&#x539F;&#x56E0;1-&#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;\"><a href=\"#&#x51FA;&#x9519;&#x539F;&#x56E0;1-&#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;\" class=\"headerlink\" title=\"&#x51FA;&#x9519;&#x539F;&#x56E0;1: &#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;\"></a>&#x51FA;&#x9519;&#x539F;&#x56E0;1: &#x52A0;&#x8F7D;CDN&#x7684;jQuery&#x5931;&#x8D25;&#x6216;&#x8005;&#x8D85;&#x65F6;</h3><blockquote>\n<p>&#x5F53;&#x63D0;&#x4F9B;jQuery&#x7684;CDN&#x51FA;&#x95EE;&#x9898;&#x5BFC;&#x81F4;jQuery&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;&#x6216;&#x8005;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#x6D4F;&#x89C8;&#x5668;&#x52A0;&#x8F7D;jQuery&#x6587;&#x4EF6;&#x8D85;&#x65F6;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;jQuery&#x672A;&#x5B9A;&#x4E49;&#x7684;&#x9519;&#x8BEF;&#x3002;</p>\n</blockquote>\n<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6848;</strong>: &#x5C06;jQuery&#x6587;&#x4EF6;&#x6302;&#x8F7D;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x7AD9;&#x4E0A;&#x4F5C;&#x4E3A;&#x5907;&#x7528;&#xFF0C;&#x5982;&#x679C;CDN&#x52A0;&#x8F7D;jQuery&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x7F51;&#x7AD9;&#x5B58;&#x6258;&#x7BA1;&#x7684;jQuery&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x6237;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;CDN&#x52A0;&#x5FEB;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x800C;&#x4E00;&#x65E6;CDN&#x51FA;&#x95EE;&#x9898;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x51FA;&#x9519;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script src=<span class=\"string\">&quot;https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script&gt; </div><div class=\"line\"><span class=\"built_in\">window</span>.jQuery || <span class=\"built_in\">document</span>.write(<span class=\"string\">&apos;&lt;script src=&quot;http://kiwenlau.com/js/jquery.min.js&quot;&gt;&lt;\\/script&gt;&apos;</span>))</div><div class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x6211;&#x7684;&#x535A;&#x5BA2;&#x8BFB;&#x8005;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x6765;&#x81EA;&#x56FD;&#x5185;&#xFF0C;&#x7136;&#x800C;&#x5206;&#x6790;&#x9519;&#x8BEF;&#x7684;IP&#x5730;&#x5740;&#x540E;&#xFF0C;&#x6211;&#x53D1;&#x73B0;&#x9AD8;&#x8FBE;26.1%&#x51FA;&#x9519;&#x7528;&#x6237;&#x7684;&#x6765;&#x81EA;&#x56FD;&#x5916;&#x3002;&#x6839;&#x636E;<strong>&#x5E78;&#x5B58;&#x8005;&#x504F;&#x5DEE;</strong>&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x8BA4;&#x5B9A;&#x56FD;&#x5185;&#x7528;&#x6237;&#x51FA;&#x9519;&#x6982;&#x7387;&#x66F4;&#x9AD8;&#xFF0C;&#x800C;&#x5E94;&#x8BE5;&#x8BA4;&#x5B9A;&#x56FD;&#x5916;&#x7528;&#x6237;&#x51FA;&#x9519;&#x6982;&#x7387;&#x66F4;&#x9AD8;&#x3002;&#x90A3;&#x4E48;&#x8FD9;&#x5C31;&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#x4E86;&#xFF0C;&#x56FD;&#x5916;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x56FD;&#x5185;CDN&#x65F6;&#x901F;&#x5EA6;&#x592A;&#x6162;&#xFF0C;&#x5BFC;&#x81F4;jQuery&#x51FA;&#x9519;&#x3002;</p>\n<p><div id=\"ipContainer\" style=\"width: 550px; height: 400px; margin: 0 auto!important\"></div></p>\n<script language=\"JavaScript\" src=\"/js/blog/20170306_ip.js\"></script>\n\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x5C06;jQuery&#x6302;&#x8F7D;&#x5728;<a href=\"http://kiwenlau.com/js/jquery.min.js\">http://kiwenlau.com/js/jquery.min.js</a>&#x4F5C;&#x4E3A;&#x5907;&#x7528;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"&#x51FA;&#x9519;&#x539F;&#x56E0;2-&#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;\"><a href=\"#&#x51FA;&#x9519;&#x539F;&#x56E0;2-&#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;\" class=\"headerlink\" title=\"&#x51FA;&#x9519;&#x539F;&#x56E0;2: &#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;\"></a>&#x51FA;&#x9519;&#x539F;&#x56E0;2: &#x52A0;&#x8F7D;jQuery&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;</h3><blockquote>\n<p>&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;&#x5176;&#x5B83;JavaScript&#x811A;&#x672C;&#x5148;&#x4E8E;jQuery&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x5E76;&#x6267;&#x884C;&#x3002;&#x8FD9;&#x65F6;jQuery&#x5C1A;&#x672A;&#x52A0;&#x8F7D;&#xFF0C;&#x56E0;&#x6B64;&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;&#x4EE3;&#x7801;&#x8C03;&#x7528;jQuery&#x7684;&#x8BDD;&#x5C31;&#x4F1A;&#x51FA;&#x9519;&#x3002;</p>\n</blockquote>\n<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6848;</strong>: &#x5C06;jQuery&#x5E93;&#x653E;&#x5728;&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;JavaScript&#x811A;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x8FD9;&#x4E9B;&#x4EE3;&#x7801;&#x653E;&#x5165;<strong>document.ready</strong>&#x6765;&#x786E;&#x4FDD;DOM&#x52A0;&#x8F7D;&#x5B8C;&#x6BD5;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;path/to/jquery.min.js&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</div><div class=\"line\">  $(<span class=\"built_in\">document</span>).ready(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>{</div><div class=\"line\">    <span class=\"comment\">//&#x4F9D;&#x8D56;&#x4E8E;jQuery&#x7684;&#x4EE3;&#x7801;</span></div><div class=\"line\">  });</div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<h4 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h4><p><a href=\"https://ashleynolan.co.uk/blog/frontend-tooling-survey-2016-results\">The State of Front-End Tooling 2016 - Results</a><br><a href=\"https://www.zhihu.com/question/36520358\">&#x5E78;&#x5B58;&#x8005;&#x504F;&#x5DEE;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF1F;- &#x77E5;&#x4E4E;</a></p>"},{"title":"Source Map","date":"2017-03-13T02:00:00.000Z","_content":"\nDebugSource Map\n\n<!-- more -->\n\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"sourcemap-tutorial/fundebug-sourcemap.jpg\" />\n</div>\n\n### \n\n[webpack](https://github.com/webpack/webpack)[UglifyJS2](https://github.com/mishoo/UglifyJS2)[](http://www.ruanyifeng.com/blog/)[JavaScript Source Map ](http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html):\n\n> - jQuery 1.9252KB32KB\n> - HTTP\n> - JavaScriptCoffeeScript\n\n### \n\nhello World**hello.js**\n\n```js\nfunction sayHello()\n{\n    var name = \"Fundebug\";\n    var greeting = \"Hello, \" + Name;\n    console.log(greeting);\n}\n\nsayHello();\n```\n\n[UglifyJS2](https://github.com/mishoo/UglifyJS2):\n\n```sh\nuglifyjs hello.js \\\n         -m toplevel=true \\\n         -c unused=true,collapse_vars=true \\\n         -o hello.min.js\n```\n\n**hello.min.js**\n\n```js\nfunction o(){var o=\"Hello, \"+Name;console.log(o)}o();\n```\n\n### Source Map?\n\nFirefox**hello.js**:\n\n```js\nReferenceError: Name is not defined\n\tsayHello file:///Users/fundebug/sourcemap-tutorial/hello.js:4:9\n\t<> file:///Users/fundebug/sourcemap-tutorial/hello.js:8:1\n```\n\n**hello.min.js**:\n\n```js\nReferenceError: Name is not defined\n\to file:///Users/fundebug/sourcemap-tutorial/hello.min.js:1:18\n\t<> file:///Users/fundebug/sourcemap-tutorial/hello.min.js:1:59\n```\n\nDebug\n\n**Source Map**Debug\n\n### Source Map?\n\n[UglifyJS2](https://github.com/mishoo/UglifyJS2)source-mapSource Map:\n\n```sh\nuglifyjs hello.js \\\n         -m toplevel=true \\\n         -c unused=true,collapse_vars=true \\\n         --source-map hello.min.js.map \\\n         --source-map-include-sources \\\n         --source-map-root \\\n         -o hello.min.js\n```\n\nSource Map[Source Map - Fundebug](https://docs.fundebug.com/notifier/javascript/sourcemap/generate/)\n\n\n**hello.min.js**sourceMappingURLSource Map\n\n```js\nfunction o(){var o=\"Hello, \"+Name;console.log(o)}o();\n//# sourceMappingURL=hello.min.js.map\n```\n\n\nSource Map**hello.min.js.map**:\n\n```js\n{\n    \"version\": 3,\n    \"sources\": [\"hello.js\"],\n    \"names\": [\"sayHello\", \"greeting\", \"Name\", \"console\", \"log\"],\n    \"mappings\": \"AAAA,QAASA,KAEL,GACIC,GAAW,UAAYC,IAC3BC,SAAQC,IAAIH,GAGhBD\",\n    \"file\": \"hello.min.js\",\n    \"sourceRoot\": \"\",\n    \"sourcesContent\": [\"function sayHello()\\n{\\n    var name = \\\"Fundebug\\\";\\n    var greeting = \\\"Hello, \\\" + Name;\\n    console.log(greeting);\\n}\\n\\nsayHello();\\n\"]\n}\n```\n\n**hello.min.js.map**Source MapJSON****Source MapSource Map:\n\n- versionSource Map\n- sources\n- names\n- mappings\n- file()\n- sourceRoot()\n- sourcesContent:()sources\n\nSource Mapmappings[JavaScript Source Map ](http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html)\n\n### Source Map?\n\nSource MapChromeFirefox[How to enable source maps](https://gist.github.com/jakebellacera/336c4982194bcb02ef8a)MacBookChrome:\n\n#### 1. ****\n\n**option + command + i****->->**\n\n<div style=\"text-align: left;\">\n<img style=\"width:40%;\" src=\"sourcemap-tutorial/chrome-sourcemap1.png\" />\n</div>\n\n#### 2. \n\n**fn + F1**Settings\n\n<div style=\"text-align: left;\">\n<img style=\"width:20%;\" src=\"sourcemap-tutorial/chrome-sourcemap2.png\" />\n</div>\n\n\n#### 3. Source Map \n\nSources**Enable JavaScript source maps**\n\n<div style=\"text-align: left;\">\n<img style=\"width:30%;\" src=\"sourcemap-tutorial/chrome-sourcemap3.png\" />\n</div>\n\nHTML**hello.min.html**\n\n```html\n<head>\n\t<script type=\"text/javascript\" src=\"hello.min.js\"></script>\n</head>\n```\n\nChrome**hello.min.html**:\n\n```js\nUncaught ReferenceError: Name is not defined\n    at o (hello.min.js:1)\n    at hello.min.js:1\n```\n\n**hello.min.js**Source Map:\n\n```js\nUncaught ReferenceError: Name is not defined\n    at o (hello.js:4)\n    at hello.js:8\n```\n\nChrome4ChromeSource MapSource MapsourcesContentDebug\n\n\n<div style=\"text-align: left;\">\n<img style=\"width:40%;\" src=\"sourcemap-tutorial/chrome-sourcemap4.png\" />\n</div>\n\n\n#### \n- [JavaScript Source Map ](http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html)\n- [Source Map Revision 3 Proposal](https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit)\n- [How to enable source maps](https://gist.github.com/jakebellacera/336c4982194bcb02ef8a)\n\n\n\n\n\n\n\n","source":"_posts/2017/03/13/sourcemap-tutorial.md","raw":"---\n\ntitle: Source Map\n\ndate: 2017-03-13 10:00:00\n\ntags: [Source Map, JavaScript]\n\n---\n\nDebugSource Map\n\n<!-- more -->\n\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"sourcemap-tutorial/fundebug-sourcemap.jpg\" />\n</div>\n\n### \n\n[webpack](https://github.com/webpack/webpack)[UglifyJS2](https://github.com/mishoo/UglifyJS2)[](http://www.ruanyifeng.com/blog/)[JavaScript Source Map ](http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html):\n\n> - jQuery 1.9252KB32KB\n> - HTTP\n> - JavaScriptCoffeeScript\n\n### \n\nhello World**hello.js**\n\n```js\nfunction sayHello()\n{\n    var name = \"Fundebug\";\n    var greeting = \"Hello, \" + Name;\n    console.log(greeting);\n}\n\nsayHello();\n```\n\n[UglifyJS2](https://github.com/mishoo/UglifyJS2):\n\n```sh\nuglifyjs hello.js \\\n         -m toplevel=true \\\n         -c unused=true,collapse_vars=true \\\n         -o hello.min.js\n```\n\n**hello.min.js**\n\n```js\nfunction o(){var o=\"Hello, \"+Name;console.log(o)}o();\n```\n\n### Source Map?\n\nFirefox**hello.js**:\n\n```js\nReferenceError: Name is not defined\n\tsayHello file:///Users/fundebug/sourcemap-tutorial/hello.js:4:9\n\t<> file:///Users/fundebug/sourcemap-tutorial/hello.js:8:1\n```\n\n**hello.min.js**:\n\n```js\nReferenceError: Name is not defined\n\to file:///Users/fundebug/sourcemap-tutorial/hello.min.js:1:18\n\t<> file:///Users/fundebug/sourcemap-tutorial/hello.min.js:1:59\n```\n\nDebug\n\n**Source Map**Debug\n\n### Source Map?\n\n[UglifyJS2](https://github.com/mishoo/UglifyJS2)source-mapSource Map:\n\n```sh\nuglifyjs hello.js \\\n         -m toplevel=true \\\n         -c unused=true,collapse_vars=true \\\n         --source-map hello.min.js.map \\\n         --source-map-include-sources \\\n         --source-map-root \\\n         -o hello.min.js\n```\n\nSource Map[Source Map - Fundebug](https://docs.fundebug.com/notifier/javascript/sourcemap/generate/)\n\n\n**hello.min.js**sourceMappingURLSource Map\n\n```js\nfunction o(){var o=\"Hello, \"+Name;console.log(o)}o();\n//# sourceMappingURL=hello.min.js.map\n```\n\n\nSource Map**hello.min.js.map**:\n\n```js\n{\n    \"version\": 3,\n    \"sources\": [\"hello.js\"],\n    \"names\": [\"sayHello\", \"greeting\", \"Name\", \"console\", \"log\"],\n    \"mappings\": \"AAAA,QAASA,KAEL,GACIC,GAAW,UAAYC,IAC3BC,SAAQC,IAAIH,GAGhBD\",\n    \"file\": \"hello.min.js\",\n    \"sourceRoot\": \"\",\n    \"sourcesContent\": [\"function sayHello()\\n{\\n    var name = \\\"Fundebug\\\";\\n    var greeting = \\\"Hello, \\\" + Name;\\n    console.log(greeting);\\n}\\n\\nsayHello();\\n\"]\n}\n```\n\n**hello.min.js.map**Source MapJSON****Source MapSource Map:\n\n- versionSource Map\n- sources\n- names\n- mappings\n- file()\n- sourceRoot()\n- sourcesContent:()sources\n\nSource Mapmappings[JavaScript Source Map ](http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html)\n\n### Source Map?\n\nSource MapChromeFirefox[How to enable source maps](https://gist.github.com/jakebellacera/336c4982194bcb02ef8a)MacBookChrome:\n\n#### 1. ****\n\n**option + command + i****->->**\n\n<div style=\"text-align: left;\">\n<img style=\"width:40%;\" src=\"sourcemap-tutorial/chrome-sourcemap1.png\" />\n</div>\n\n#### 2. \n\n**fn + F1**Settings\n\n<div style=\"text-align: left;\">\n<img style=\"width:20%;\" src=\"sourcemap-tutorial/chrome-sourcemap2.png\" />\n</div>\n\n\n#### 3. Source Map \n\nSources**Enable JavaScript source maps**\n\n<div style=\"text-align: left;\">\n<img style=\"width:30%;\" src=\"sourcemap-tutorial/chrome-sourcemap3.png\" />\n</div>\n\nHTML**hello.min.html**\n\n```html\n<head>\n\t<script type=\"text/javascript\" src=\"hello.min.js\"></script>\n</head>\n```\n\nChrome**hello.min.html**:\n\n```js\nUncaught ReferenceError: Name is not defined\n    at o (hello.min.js:1)\n    at hello.min.js:1\n```\n\n**hello.min.js**Source Map:\n\n```js\nUncaught ReferenceError: Name is not defined\n    at o (hello.js:4)\n    at hello.js:8\n```\n\nChrome4ChromeSource MapSource MapsourcesContentDebug\n\n\n<div style=\"text-align: left;\">\n<img style=\"width:40%;\" src=\"sourcemap-tutorial/chrome-sourcemap4.png\" />\n</div>\n\n\n#### \n- [JavaScript Source Map ](http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html)\n- [Source Map Revision 3 Proposal](https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit)\n- [How to enable source maps](https://gist.github.com/jakebellacera/336c4982194bcb02ef8a)\n\n\n\n\n\n\n\n","slug":"2017/03/13/sourcemap-tutorial","published":1,"updated":"2017-03-16T09:09:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtn2001d71fyqf76qoqv","content":"<p>&#x90E8;&#x7F72;&#x524D;&#x7AEF;&#x4E4B;&#x524D;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x901A;&#x5E38;&#x4F1A;&#x5BF9;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x538B;&#x7F29;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x4EE3;&#x7801;&#x5927;&#x5C0F;&#xFF0C;&#x4ECE;&#x800C;&#x6709;&#x6548;&#x63D0;&#x9AD8;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x5F88;&#x96BE;Debug&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x7684;&#x884C;&#x53F7;&#x548C;&#x5217;&#x53F7;&#x5DF2;&#x7ECF;&#x5931;&#x771F;&#x3002;&#x8FD9;&#x65F6;&#x5C31;&#x9700;&#x8981;Source Map&#x6765;&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#x4E86;&#x3002;</p>\n<a id=\"more\"></a>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/03/13/sourcemap-tutorial/fundebug-sourcemap.jpg\"><br></div>\n\n<h3 id=\"&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;</h3><p>&#x524D;&#x7AEF;&#x4EE3;&#x7801;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x901A;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;<a href=\"https://github.com/webpack/webpack\" target=\"_blank\" rel=\"external\">webpack</a>&#x3001;<a href=\"https://github.com/mishoo/UglifyJS2\" target=\"_blank\" rel=\"external\">UglifyJS2</a>&#x7B49;&#x5DE5;&#x5177;&#x5BF9;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x53D8;&#x6362;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x4EE3;&#x7801;&#x5927;&#x5C0F;&#xFF0C;&#x6709;&#x6548;&#x63D0;&#x9AD8;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x3002;&#x5173;&#x4E8E;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x59A8;&#x5F15;&#x7528;&#x4E00;&#x4E0B;&#x5927;&#x795E;<a href=\"http://www.ruanyifeng.com/blog/\" target=\"_blank\" rel=\"external\">&#x962E;&#x4E00;&#x5CF0;</a>&#x7684;<a href=\"http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html\" target=\"_blank\" rel=\"external\">JavaScript Source Map &#x8BE6;&#x89E3;</a>:</p>\n<blockquote>\n<ul>\n<li>&#x538B;&#x7F29;&#xFF0C;&#x51CF;&#x5C0F;&#x4F53;&#x79EF;&#x3002;&#x6BD4;&#x5982;jQuery 1.9&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x538B;&#x7F29;&#x524D;&#x662F;252KB&#xFF0C;&#x538B;&#x7F29;&#x540E;&#x662F;32KB&#x3002;</li>\n<li>&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x5408;&#x5E76;&#xFF0C;&#x51CF;&#x5C11;HTTP&#x8BF7;&#x6C42;&#x6570;&#x3002;</li>\n<li>&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x7F16;&#x8BD1;&#x6210;JavaScript&#x3002;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x4F8B;&#x5B50;&#x5C31;&#x662F;CoffeeScript&#x3002;</li>\n</ul>\n</blockquote>\n<h3 id=\"&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"><a href=\"#&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"></a>&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;</h3><p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x201C;hello World&#x201D;&#x7A0B;&#x5E8F;<strong>hello.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">&quot;Fundebug&quot;</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> greeting = <span class=\"string\">&quot;Hello, &quot;</span> + Name;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(greeting);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">sayHello();</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<a href=\"https://github.com/mishoo/UglifyJS2\" target=\"_blank\" rel=\"external\">UglifyJS2</a>&#x5BF9;&#x6E90;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x53D8;&#x6362;:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">uglifyjs hello.js \\</div><div class=\"line\">         -m toplevel=<span class=\"literal\">true</span> \\</div><div class=\"line\">         -c unused=<span class=\"literal\">true</span>,collapse_vars=<span class=\"literal\">true</span> \\</div><div class=\"line\">         -o hello.min.js</div></pre></td></tr></table></figure>\n<p>&#x538B;&#x7F29;&#x540E;&#x7684;&#x4EE3;&#x7801;<strong>hello.min.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">o</span>(<span class=\"params\"></span>)</span>{<span class=\"keyword\">var</span> o=<span class=\"string\">&quot;Hello, &quot;</span>+Name;<span class=\"built_in\">console</span>.log(o)}o();</div></pre></td></tr></table></figure>\n<h3 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;Source-Map\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;Source-Map\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;Source Map?\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;Source Map?</h3><p>&#x4F7F;&#x7528;Firefox&#x6267;&#x884C;<strong>hello.js</strong>&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x8FD9;&#x6837;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">\tsayHello file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.js:4:9</span></div><div class=\"line\">\t&lt;&#x533F;&#x540D;&gt; file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.js:8:1</span></div></pre></td></tr></table></figure>\n<p>&#x800C;<strong>hello.min.js</strong>&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x8FD9;&#x6837;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">\to file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.min.js:1:18</span></div><div class=\"line\">\t&lt;&#x533F;&#x540D;&gt; file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.min.js:1:59</span></div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x6BD4;&#x538B;&#x7F29;&#x524D;&#x540E;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x9519;&#x8BEF;&#x884C;&#x53F7;&#x548C;&#x5217;&#x53F7;&#x5DF2;&#x7ECF;&#x5931;&#x771F;&#xFF0C;&#x4E14;&#x51FD;&#x6570;&#x540D;&#x4E5F;&#x7ECF;&#x8FC7;&#x4E86;&#x53D8;&#x6362;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x771F;&#x5B9E;&#x7684;&#x524D;&#x7AEF;&#x9879;&#x76EE;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x4F1A;&#x5C06;&#x6570;&#x5341;&#x4E2A;&#x6E90;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x4E3A;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x65F6;&#xFF0C;&#x9519;&#x8BEF;&#x7684;&#x5217;&#x53F7;&#x53EF;&#x80FD;&#x591A;&#x8FBE;&#x6570;&#x5343;&#xFF0C;&#x4E14;&#x51FA;&#x9519;&#x7684;&#x771F;&#x5B9E;&#x6587;&#x4EF6;&#x540D;&#x4E5F;&#x662F;&#x5F88;&#x96BE;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x5F88;&#x96BE;Debug&#x7684;&#x3002;</p>\n<p><strong>&#x800C;Source Map&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;</strong>&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x5FEB;&#x7684;Debug&#x3002;</p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Source-Map\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Source-Map\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Source Map?\"></a>&#x4EC0;&#x4E48;&#x662F;Source Map?</h3><p>&#x4F7F;&#x7528;<a href=\"https://github.com/mishoo/UglifyJS2\" target=\"_blank\" rel=\"external\">UglifyJS2</a>&#x65F6;&#x6307;&#x5B9A;source-map&#x9009;&#x9879;&#x5373;&#x53EF;&#x751F;&#x6210;Source Map:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">uglifyjs hello.js \\</div><div class=\"line\">         -m toplevel=<span class=\"literal\">true</span> \\</div><div class=\"line\">         -c unused=<span class=\"literal\">true</span>,collapse_vars=<span class=\"literal\">true</span> \\</div><div class=\"line\">         --source-map hello.min.js.map \\</div><div class=\"line\">         --source-map-include-sources \\</div><div class=\"line\">         --source-map-root \\</div><div class=\"line\">         -o hello.min.js</div></pre></td></tr></table></figure>\n<p>&#x5404;&#x79CD;&#x4E3B;&#x6D41;&#x524D;&#x7AEF;&#x4EFB;&#x52A1;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x6253;&#x5305;&#x5DE5;&#x5177;&#x90FD;&#x652F;&#x6301;&#x751F;&#x6210;Source Map&#xFF0C;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href=\"https://docs.fundebug.com/notifier/javascript/sourcemap/generate/\" target=\"_blank\" rel=\"external\">&#x751F;&#x6210;Source Map - Fundebug&#x6587;&#x6863;</a>&#x3002;</p>\n<p>&#x751F;&#x6210;&#x7684;<strong>hello.min.js</strong>&#x591A;&#x4E86;sourceMappingURL&#xFF0C;&#x8868;&#x793A;Source Map&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">o</span>(<span class=\"params\"></span>)</span>{<span class=\"keyword\">var</span> o=<span class=\"string\">&quot;Hello, &quot;</span>+Name;<span class=\"built_in\">console</span>.log(o)}o();</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=hello.min.js.map</span></div></pre></td></tr></table></figure>\n<p>&#x751F;&#x6210;&#x7684;Source Map&#x4E3A;<strong>hello.min.js.map</strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;version&quot;</span>: <span class=\"number\">3</span>,</div><div class=\"line\">    <span class=\"string\">&quot;sources&quot;</span>: [<span class=\"string\">&quot;hello.js&quot;</span>],</div><div class=\"line\">    <span class=\"string\">&quot;names&quot;</span>: [<span class=\"string\">&quot;sayHello&quot;</span>, <span class=\"string\">&quot;greeting&quot;</span>, <span class=\"string\">&quot;Name&quot;</span>, <span class=\"string\">&quot;console&quot;</span>, <span class=\"string\">&quot;log&quot;</span>],</div><div class=\"line\">    <span class=\"string\">&quot;mappings&quot;</span>: <span class=\"string\">&quot;AAAA,QAASA,KAEL,GACIC,GAAW,UAAYC,IAC3BC,SAAQC,IAAIH,GAGhBD&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;file&quot;</span>: <span class=\"string\">&quot;hello.min.js&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;sourceRoot&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;sourcesContent&quot;</span>: [<span class=\"string\">&quot;function sayHello()\\n{\\n    var name = \\&quot;Fundebug\\&quot;;\\n    var greeting = \\&quot;Hello, \\&quot; + Name;\\n    console.log(greeting);\\n}\\n\\nsayHello();\\n&quot;</span>]</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7531;<strong>hello.min.js.map</strong>&#x53EF;&#x77E5;&#xFF0C;Source Map&#x662F;&#x4E00;&#x4E2A;JSON&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x5B83;<strong>&#x5305;&#x542B;&#x4E86;&#x4EE3;&#x7801;&#x8F6C;&#x6362;&#x524D;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;</strong>&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x8F6C;&#x6362;&#x4E4B;&#x540E;&#x7684;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Source Map&#x83B7;&#x53D6;&#x8F6C;&#x6362;&#x4E4B;&#x524D;&#x7684;&#x4EE3;&#x7801;&#x4F4D;&#x7F6E;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#x4E5F;&#x4E00;&#x6837;&#x3002;Source Map&#x5404;&#x4E2A;&#x5C5E;&#x6027;&#x7684;&#x542B;&#x4E49;&#x5982;&#x4E0B;:</p>\n<ul>\n<li>version&#xFF1A;Source Map&#x7684;&#x7248;&#x672C;&#x53F7;&#x3002;</li>\n<li>sources&#xFF1A;&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x5217;&#x8868;&#x3002;</li>\n<li>names&#xFF1A;&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6240;&#x6709;&#x53D8;&#x91CF;&#x540D;&#x548C;&#x5C5E;&#x6027;&#x540D;&#x3002;</li>\n<li>mappings&#xFF1A;&#x8BB0;&#x5F55;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7ECF;&#x8FC7;&#x7F16;&#x7801;&#x3002;</li>\n<li>file&#xFF1A;(&#x53EF;&#x9009;)&#x8F6C;&#x6362;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x3002;</li>\n<li>sourceRoot&#xFF1A;(&#x53EF;&#x9009;)&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x3002;&#x5982;&#x679C;&#x4E0E;&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x5728;&#x540C;&#x4E00;&#x76EE;&#x5F55;&#xFF0C;&#x8BE5;&#x9879;&#x4E3A;&#x7A7A;&#x3002;</li>\n<li>sourcesContent:(&#x53EF;&#x9009;)&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5217;&#x8868;&#xFF0C;&#x4E0E;sources&#x5217;&#x8868;&#x4F9D;&#x6B21;&#x5BF9;&#x5E94;&#x3002;</li>\n</ul>\n<p>Source Map&#x771F;&#x6B63;&#x795E;&#x5947;&#x4E4B;&#x5904;&#x5728;&#x4E8E;mappings&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x8BB0;&#x5F55;&#x4E86;&#x4F4D;&#x7F6E;&#x662F;&#x5982;&#x4F55;&#x5BF9;&#x5E94;&#x7684;&#x3002;<a href=\"http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html\" target=\"_blank\" rel=\"external\">JavaScript Source Map &#x8BE6;&#x89E3;</a>&#x5DF2;&#x7ECF;&#x6709;&#x5F88;&#x597D;&#x7684;&#x89E3;&#x91CA;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;&#x3002;</p>\n<h3 id=\"&#x600E;&#x6837;&#x4F7F;&#x7528;Source-Map\"><a href=\"#&#x600E;&#x6837;&#x4F7F;&#x7528;Source-Map\" class=\"headerlink\" title=\"&#x600E;&#x6837;&#x4F7F;&#x7528;Source Map?\"></a>&#x600E;&#x6837;&#x4F7F;&#x7528;Source Map?</h3><p>&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x5747;&#x652F;&#x6301;Source Map&#x529F;&#x80FD;&#xFF0C;&#x4E0D;&#x8FC7;Chrome&#x4E0E;Firefox&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x8BF7;&#x53C2;&#x8003;<a href=\"https://gist.github.com/jakebellacera/336c4982194bcb02ef8a\" target=\"_blank\" rel=\"external\">How to enable source maps</a>&#x3002;&#x4E0B;&#x9762;&#x4EE5;MacBook&#x4E0A;&#x7684;Chrome&#x6D4F;&#x89C8;&#x5668;&#x4E3A;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#x65B9;&#x6CD5;:</p>\n<h4 id=\"1-&#x5F00;&#x542F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;\"><a href=\"#1-&#x5F00;&#x542F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;\" class=\"headerlink\" title=\"1. &#x5F00;&#x542F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;\"></a>1. &#x5F00;&#x542F;<strong>&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</strong></h4><p>&#x4F7F;&#x7528;&#x5FEB;&#x6377;&#x952E;<strong>option + command + i</strong>&#xFF1B;&#x6216;&#x8005;&#x5728;&#x83DC;&#x5355;&#x680F;&#x9009;&#x62E9;<strong>&#x89C6;&#x56FE;-&gt;&#x5F00;&#x53D1;&#x8005;-&gt;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</strong></p>\n<div style=\"text-align: left;\"><br><img style=\"width:40%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap1.png\"><br></div>\n\n<h4 id=\"2-&#x6253;&#x5F00;&#x8BBE;&#x7F6E;\"><a href=\"#2-&#x6253;&#x5F00;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"2. &#x6253;&#x5F00;&#x8BBE;&#x7F6E;\"></a>2. &#x6253;&#x5F00;&#x8BBE;&#x7F6E;</h4><p>&#x4F7F;&#x7528;&#x5FEB;&#x6377;&#x952E;<strong>fn + F1</strong>&#xFF1B;&#x6216;&#x8005;&#x70B9;&#x51FB;&#x53F3;&#x4E0A;&#x89D2;&#x7684;&#x4E09;&#x4E2A;&#x70B9;&#x7684;&#x56FE;&#x6807;&#xFF0C;&#x9009;&#x62E9;Settings</p>\n<div style=\"text-align: left;\"><br><img style=\"width:20%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap2.png\"><br></div>\n\n\n<h4 id=\"3-&#x5F00;&#x542F;Source-Map\"><a href=\"#3-&#x5F00;&#x542F;Source-Map\" class=\"headerlink\" title=\"3. &#x5F00;&#x542F;Source Map\"></a>3. &#x5F00;&#x542F;Source Map</h4><p>&#x5728;Sources&#x4E2D;&#xFF0C;&#x9009;&#x4E2D;<strong>Enable JavaScript source maps</strong></p>\n<div style=\"text-align: left;\"><br><img style=\"width:30%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap3.png\"><br></div>\n\n<p>&#x4E3A;&#x4E86;&#x6D4B;&#x8BD5;&#xFF0C;&#x6211;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;HTML&#x6587;&#x4EF6;<strong>hello.min.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;hello.min.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;Chrome&#x6253;&#x5F00;<strong>hello.min.html</strong>&#xFF0C;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x770B;&#x5230;&#x7684;&#x9519;&#x8BEF;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">Uncaught <span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">    at o (hello.min.js:<span class=\"number\">1</span>)</div><div class=\"line\">    at hello.min.js:<span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>&#x62A5;&#x9519;&#x7684;&#x6587;&#x4EF6;&#x4ECD;&#x7136;&#x4E3A;<strong>hello.min.js</strong>&#xFF0C;&#x9700;&#x8981;&#x5237;&#x65B0;&#x4E00;&#x4E0B;Source Map&#x624D;&#x6709;&#x4F5C;&#x7528;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">Uncaught <span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">    at o (hello.js:<span class=\"number\">4</span>)</div><div class=\"line\">    at hello.js:<span class=\"number\">8</span></div></pre></td></tr></table></figure>\n<p>&#x6CE8;&#x610F;&#xFF0C;Chrome&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x6CA1;&#x6709;&#x5217;&#x53F7;&#xFF0C;&#x56E0;&#x6B64;4&#x4E3A;&#x9519;&#x8BEF;&#x7684;&#x884C;&#x53F7;&#x3002;Chrome&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Source Map&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x6839;&#x636E;Source Map&#x7684;sourcesContent&#x8FD8;&#x539F;&#x51FA;&#x9519;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x3002;&#x70B9;&#x51FB;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;&#x53EF;&#x8DF3;&#x8F6C;&#x5230;&#x6E90;&#x7801;&#xFF0C;&#x8FD9;&#x6837;Debug&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:40%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap4.png\"><br></div>\n\n\n<h4 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h4><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html\" target=\"_blank\" rel=\"external\">JavaScript Source Map &#x8BE6;&#x89E3;</a></li>\n<li><a href=\"https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit\" target=\"_blank\" rel=\"external\">Source Map Revision 3 Proposal</a></li>\n<li><a href=\"https://gist.github.com/jakebellacera/336c4982194bcb02ef8a\" target=\"_blank\" rel=\"external\">How to enable source maps</a></li>\n</ul>\n","excerpt":"<p>&#x90E8;&#x7F72;&#x524D;&#x7AEF;&#x4E4B;&#x524D;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x901A;&#x5E38;&#x4F1A;&#x5BF9;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x538B;&#x7F29;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x4EE3;&#x7801;&#x5927;&#x5C0F;&#xFF0C;&#x4ECE;&#x800C;&#x6709;&#x6548;&#x63D0;&#x9AD8;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x5F88;&#x96BE;Debug&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x7684;&#x884C;&#x53F7;&#x548C;&#x5217;&#x53F7;&#x5DF2;&#x7ECF;&#x5931;&#x771F;&#x3002;&#x8FD9;&#x65F6;&#x5C31;&#x9700;&#x8981;Source Map&#x6765;&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#x4E86;&#x3002;</p>","more":"<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/03/13/sourcemap-tutorial/fundebug-sourcemap.jpg\"><br></div>\n\n<h3 id=\"&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;</h3><p>&#x524D;&#x7AEF;&#x4EE3;&#x7801;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x901A;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;<a href=\"https://github.com/webpack/webpack\">webpack</a>&#x3001;<a href=\"https://github.com/mishoo/UglifyJS2\">UglifyJS2</a>&#x7B49;&#x5DE5;&#x5177;&#x5BF9;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x53D8;&#x6362;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x4EE3;&#x7801;&#x5927;&#x5C0F;&#xFF0C;&#x6709;&#x6548;&#x63D0;&#x9AD8;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x3002;&#x5173;&#x4E8E;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x59A8;&#x5F15;&#x7528;&#x4E00;&#x4E0B;&#x5927;&#x795E;<a href=\"http://www.ruanyifeng.com/blog/\">&#x962E;&#x4E00;&#x5CF0;</a>&#x7684;<a href=\"http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html\">JavaScript Source Map &#x8BE6;&#x89E3;</a>:</p>\n<blockquote>\n<ul>\n<li>&#x538B;&#x7F29;&#xFF0C;&#x51CF;&#x5C0F;&#x4F53;&#x79EF;&#x3002;&#x6BD4;&#x5982;jQuery 1.9&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x538B;&#x7F29;&#x524D;&#x662F;252KB&#xFF0C;&#x538B;&#x7F29;&#x540E;&#x662F;32KB&#x3002;</li>\n<li>&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x5408;&#x5E76;&#xFF0C;&#x51CF;&#x5C11;HTTP&#x8BF7;&#x6C42;&#x6570;&#x3002;</li>\n<li>&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x7F16;&#x8BD1;&#x6210;JavaScript&#x3002;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x4F8B;&#x5B50;&#x5C31;&#x662F;CoffeeScript&#x3002;</li>\n</ul>\n</blockquote>\n<h3 id=\"&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"><a href=\"#&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;\"></a>&#x5982;&#x4F55;&#x53D8;&#x6362;&#x4EE3;&#x7801;&#xFF1F;</h3><p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x201C;hello World&#x201D;&#x7A0B;&#x5E8F;<strong>hello.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">&quot;Fundebug&quot;</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> greeting = <span class=\"string\">&quot;Hello, &quot;</span> + Name;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(greeting);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">sayHello();</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<a href=\"https://github.com/mishoo/UglifyJS2\">UglifyJS2</a>&#x5BF9;&#x6E90;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x53D8;&#x6362;:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">uglifyjs hello.js \\</div><div class=\"line\">         -m toplevel=<span class=\"literal\">true</span> \\</div><div class=\"line\">         -c unused=<span class=\"literal\">true</span>,collapse_vars=<span class=\"literal\">true</span> \\</div><div class=\"line\">         -o hello.min.js</div></pre></td></tr></table></figure>\n<p>&#x538B;&#x7F29;&#x540E;&#x7684;&#x4EE3;&#x7801;<strong>hello.min.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">o</span>(<span class=\"params\"></span>)</span>{<span class=\"keyword\">var</span> o=<span class=\"string\">&quot;Hello, &quot;</span>+Name;<span class=\"built_in\">console</span>.log(o)}o();</div></pre></td></tr></table></figure>\n<h3 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;Source-Map\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;Source-Map\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;Source Map?\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;Source Map?</h3><p>&#x4F7F;&#x7528;Firefox&#x6267;&#x884C;<strong>hello.js</strong>&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x8FD9;&#x6837;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">\tsayHello file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.js:4:9</span></div><div class=\"line\">\t&lt;&#x533F;&#x540D;&gt; file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.js:8:1</span></div></pre></td></tr></table></figure>\n<p>&#x800C;<strong>hello.min.js</strong>&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x8FD9;&#x6837;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">\to file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.min.js:1:18</span></div><div class=\"line\">\t&lt;&#x533F;&#x540D;&gt; file:<span class=\"comment\">///Users/fundebug/sourcemap-tutorial/hello.min.js:1:59</span></div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x6BD4;&#x538B;&#x7F29;&#x524D;&#x540E;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x9519;&#x8BEF;&#x884C;&#x53F7;&#x548C;&#x5217;&#x53F7;&#x5DF2;&#x7ECF;&#x5931;&#x771F;&#xFF0C;&#x4E14;&#x51FD;&#x6570;&#x540D;&#x4E5F;&#x7ECF;&#x8FC7;&#x4E86;&#x53D8;&#x6362;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x771F;&#x5B9E;&#x7684;&#x524D;&#x7AEF;&#x9879;&#x76EE;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x4F1A;&#x5C06;&#x6570;&#x5341;&#x4E2A;&#x6E90;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x4E3A;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x65F6;&#xFF0C;&#x9519;&#x8BEF;&#x7684;&#x5217;&#x53F7;&#x53EF;&#x80FD;&#x591A;&#x8FBE;&#x6570;&#x5343;&#xFF0C;&#x4E14;&#x51FA;&#x9519;&#x7684;&#x771F;&#x5B9E;&#x6587;&#x4EF6;&#x540D;&#x4E5F;&#x662F;&#x5F88;&#x96BE;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x662F;&#x5F88;&#x96BE;Debug&#x7684;&#x3002;</p>\n<p><strong>&#x800C;Source Map&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;</strong>&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x5FEB;&#x7684;Debug&#x3002;</p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Source-Map\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Source-Map\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Source Map?\"></a>&#x4EC0;&#x4E48;&#x662F;Source Map?</h3><p>&#x4F7F;&#x7528;<a href=\"https://github.com/mishoo/UglifyJS2\">UglifyJS2</a>&#x65F6;&#x6307;&#x5B9A;source-map&#x9009;&#x9879;&#x5373;&#x53EF;&#x751F;&#x6210;Source Map:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><div class=\"line\">uglifyjs hello.js \\</div><div class=\"line\">         -m toplevel=<span class=\"literal\">true</span> \\</div><div class=\"line\">         -c unused=<span class=\"literal\">true</span>,collapse_vars=<span class=\"literal\">true</span> \\</div><div class=\"line\">         --source-map hello.min.js.map \\</div><div class=\"line\">         --source-map-include-sources \\</div><div class=\"line\">         --source-map-root \\</div><div class=\"line\">         -o hello.min.js</div></pre></td></tr></table></figure>\n<p>&#x5404;&#x79CD;&#x4E3B;&#x6D41;&#x524D;&#x7AEF;&#x4EFB;&#x52A1;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x6253;&#x5305;&#x5DE5;&#x5177;&#x90FD;&#x652F;&#x6301;&#x751F;&#x6210;Source Map&#xFF0C;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href=\"https://docs.fundebug.com/notifier/javascript/sourcemap/generate/\">&#x751F;&#x6210;Source Map - Fundebug&#x6587;&#x6863;</a>&#x3002;</p>\n<p>&#x751F;&#x6210;&#x7684;<strong>hello.min.js</strong>&#x591A;&#x4E86;sourceMappingURL&#xFF0C;&#x8868;&#x793A;Source Map&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">o</span>(<span class=\"params\"></span>)</span>{<span class=\"keyword\">var</span> o=<span class=\"string\">&quot;Hello, &quot;</span>+Name;<span class=\"built_in\">console</span>.log(o)}o();</div><div class=\"line\"><span class=\"comment\">//# sourceMappingURL=hello.min.js.map</span></div></pre></td></tr></table></figure>\n<p>&#x751F;&#x6210;&#x7684;Source Map&#x4E3A;<strong>hello.min.js.map</strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    <span class=\"string\">&quot;version&quot;</span>: <span class=\"number\">3</span>,</div><div class=\"line\">    <span class=\"string\">&quot;sources&quot;</span>: [<span class=\"string\">&quot;hello.js&quot;</span>],</div><div class=\"line\">    <span class=\"string\">&quot;names&quot;</span>: [<span class=\"string\">&quot;sayHello&quot;</span>, <span class=\"string\">&quot;greeting&quot;</span>, <span class=\"string\">&quot;Name&quot;</span>, <span class=\"string\">&quot;console&quot;</span>, <span class=\"string\">&quot;log&quot;</span>],</div><div class=\"line\">    <span class=\"string\">&quot;mappings&quot;</span>: <span class=\"string\">&quot;AAAA,QAASA,KAEL,GACIC,GAAW,UAAYC,IAC3BC,SAAQC,IAAIH,GAGhBD&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;file&quot;</span>: <span class=\"string\">&quot;hello.min.js&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;sourceRoot&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</div><div class=\"line\">    <span class=\"string\">&quot;sourcesContent&quot;</span>: [<span class=\"string\">&quot;function sayHello()\\n{\\n    var name = \\&quot;Fundebug\\&quot;;\\n    var greeting = \\&quot;Hello, \\&quot; + Name;\\n    console.log(greeting);\\n}\\n\\nsayHello();\\n&quot;</span>]</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7531;<strong>hello.min.js.map</strong>&#x53EF;&#x77E5;&#xFF0C;Source Map&#x662F;&#x4E00;&#x4E2A;JSON&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x5B83;<strong>&#x5305;&#x542B;&#x4E86;&#x4EE3;&#x7801;&#x8F6C;&#x6362;&#x524D;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;</strong>&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x8F6C;&#x6362;&#x4E4B;&#x540E;&#x7684;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Source Map&#x83B7;&#x53D6;&#x8F6C;&#x6362;&#x4E4B;&#x524D;&#x7684;&#x4EE3;&#x7801;&#x4F4D;&#x7F6E;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#x4E5F;&#x4E00;&#x6837;&#x3002;Source Map&#x5404;&#x4E2A;&#x5C5E;&#x6027;&#x7684;&#x542B;&#x4E49;&#x5982;&#x4E0B;:</p>\n<ul>\n<li>version&#xFF1A;Source Map&#x7684;&#x7248;&#x672C;&#x53F7;&#x3002;</li>\n<li>sources&#xFF1A;&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x5217;&#x8868;&#x3002;</li>\n<li>names&#xFF1A;&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6240;&#x6709;&#x53D8;&#x91CF;&#x540D;&#x548C;&#x5C5E;&#x6027;&#x540D;&#x3002;</li>\n<li>mappings&#xFF1A;&#x8BB0;&#x5F55;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7ECF;&#x8FC7;&#x7F16;&#x7801;&#x3002;</li>\n<li>file&#xFF1A;(&#x53EF;&#x9009;)&#x8F6C;&#x6362;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x3002;</li>\n<li>sourceRoot&#xFF1A;(&#x53EF;&#x9009;)&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x3002;&#x5982;&#x679C;&#x4E0E;&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x5728;&#x540C;&#x4E00;&#x76EE;&#x5F55;&#xFF0C;&#x8BE5;&#x9879;&#x4E3A;&#x7A7A;&#x3002;</li>\n<li>sourcesContent:(&#x53EF;&#x9009;)&#x8F6C;&#x6362;&#x524D;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5217;&#x8868;&#xFF0C;&#x4E0E;sources&#x5217;&#x8868;&#x4F9D;&#x6B21;&#x5BF9;&#x5E94;&#x3002;</li>\n</ul>\n<p>Source Map&#x771F;&#x6B63;&#x795E;&#x5947;&#x4E4B;&#x5904;&#x5728;&#x4E8E;mappings&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x8BB0;&#x5F55;&#x4E86;&#x4F4D;&#x7F6E;&#x662F;&#x5982;&#x4F55;&#x5BF9;&#x5E94;&#x7684;&#x3002;<a href=\"http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html\">JavaScript Source Map &#x8BE6;&#x89E3;</a>&#x5DF2;&#x7ECF;&#x6709;&#x5F88;&#x597D;&#x7684;&#x89E3;&#x91CA;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;&#x3002;</p>\n<h3 id=\"&#x600E;&#x6837;&#x4F7F;&#x7528;Source-Map\"><a href=\"#&#x600E;&#x6837;&#x4F7F;&#x7528;Source-Map\" class=\"headerlink\" title=\"&#x600E;&#x6837;&#x4F7F;&#x7528;Source Map?\"></a>&#x600E;&#x6837;&#x4F7F;&#x7528;Source Map?</h3><p>&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x5747;&#x652F;&#x6301;Source Map&#x529F;&#x80FD;&#xFF0C;&#x4E0D;&#x8FC7;Chrome&#x4E0E;Firefox&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x8BF7;&#x53C2;&#x8003;<a href=\"https://gist.github.com/jakebellacera/336c4982194bcb02ef8a\">How to enable source maps</a>&#x3002;&#x4E0B;&#x9762;&#x4EE5;MacBook&#x4E0A;&#x7684;Chrome&#x6D4F;&#x89C8;&#x5668;&#x4E3A;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#x65B9;&#x6CD5;:</p>\n<h4 id=\"1-&#x5F00;&#x542F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;\"><a href=\"#1-&#x5F00;&#x542F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;\" class=\"headerlink\" title=\"1. &#x5F00;&#x542F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;\"></a>1. &#x5F00;&#x542F;<strong>&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</strong></h4><p>&#x4F7F;&#x7528;&#x5FEB;&#x6377;&#x952E;<strong>option + command + i</strong>&#xFF1B;&#x6216;&#x8005;&#x5728;&#x83DC;&#x5355;&#x680F;&#x9009;&#x62E9;<strong>&#x89C6;&#x56FE;-&gt;&#x5F00;&#x53D1;&#x8005;-&gt;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</strong></p>\n<div style=\"text-align: left;\"><br><img style=\"width:40%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap1.png\"><br></div>\n\n<h4 id=\"2-&#x6253;&#x5F00;&#x8BBE;&#x7F6E;\"><a href=\"#2-&#x6253;&#x5F00;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"2. &#x6253;&#x5F00;&#x8BBE;&#x7F6E;\"></a>2. &#x6253;&#x5F00;&#x8BBE;&#x7F6E;</h4><p>&#x4F7F;&#x7528;&#x5FEB;&#x6377;&#x952E;<strong>fn + F1</strong>&#xFF1B;&#x6216;&#x8005;&#x70B9;&#x51FB;&#x53F3;&#x4E0A;&#x89D2;&#x7684;&#x4E09;&#x4E2A;&#x70B9;&#x7684;&#x56FE;&#x6807;&#xFF0C;&#x9009;&#x62E9;Settings</p>\n<div style=\"text-align: left;\"><br><img style=\"width:20%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap2.png\"><br></div>\n\n\n<h4 id=\"3-&#x5F00;&#x542F;Source-Map\"><a href=\"#3-&#x5F00;&#x542F;Source-Map\" class=\"headerlink\" title=\"3. &#x5F00;&#x542F;Source Map\"></a>3. &#x5F00;&#x542F;Source Map</h4><p>&#x5728;Sources&#x4E2D;&#xFF0C;&#x9009;&#x4E2D;<strong>Enable JavaScript source maps</strong></p>\n<div style=\"text-align: left;\"><br><img style=\"width:30%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap3.png\"><br></div>\n\n<p>&#x4E3A;&#x4E86;&#x6D4B;&#x8BD5;&#xFF0C;&#x6211;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;HTML&#x6587;&#x4EF6;<strong>hello.min.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;hello.min.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;Chrome&#x6253;&#x5F00;<strong>hello.min.html</strong>&#xFF0C;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x770B;&#x5230;&#x7684;&#x9519;&#x8BEF;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">Uncaught <span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">    at o (hello.min.js:<span class=\"number\">1</span>)</div><div class=\"line\">    at hello.min.js:<span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>&#x62A5;&#x9519;&#x7684;&#x6587;&#x4EF6;&#x4ECD;&#x7136;&#x4E3A;<strong>hello.min.js</strong>&#xFF0C;&#x9700;&#x8981;&#x5237;&#x65B0;&#x4E00;&#x4E0B;Source Map&#x624D;&#x6709;&#x4F5C;&#x7528;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">Uncaught <span class=\"built_in\">ReferenceError</span>: Name is not defined</div><div class=\"line\">    at o (hello.js:<span class=\"number\">4</span>)</div><div class=\"line\">    at hello.js:<span class=\"number\">8</span></div></pre></td></tr></table></figure>\n<p>&#x6CE8;&#x610F;&#xFF0C;Chrome&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x6CA1;&#x6709;&#x5217;&#x53F7;&#xFF0C;&#x56E0;&#x6B64;4&#x4E3A;&#x9519;&#x8BEF;&#x7684;&#x884C;&#x53F7;&#x3002;Chrome&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Source Map&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x6839;&#x636E;Source Map&#x7684;sourcesContent&#x8FD8;&#x539F;&#x51FA;&#x9519;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x3002;&#x70B9;&#x51FB;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;&#x53EF;&#x8DF3;&#x8F6C;&#x5230;&#x6E90;&#x7801;&#xFF0C;&#x8FD9;&#x6837;Debug&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:40%;\" src=\"/2017/03/13/sourcemap-tutorial/chrome-sourcemap4.png\"><br></div>\n\n\n<h4 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h4><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html\">JavaScript Source Map &#x8BE6;&#x89E3;</a></li>\n<li><a href=\"https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit\">Source Map Revision 3 Proposal</a></li>\n<li><a href=\"https://gist.github.com/jakebellacera/336c4982194bcb02ef8a\">How to enable source maps</a></li>\n</ul>"},{"title":"Node.js","date":"2017-03-20T13:00:00.000Z","_content":"\n\nNode.js: [Mocha](https://mochajs.org/)[Should](https://shouldjs.github.io/)[SuperTest](https://github.com/visionmedia/supertest)****\n\n<!-- more -->\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-unit-test/nodejs-unit-test.jpg\" />\n</div>\n\n\n### \n\nAPI**[add1.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js)**:\n\n```js\nfunction add(a, b)\n{\n    return a + b;\n}\n```\n\n****node:\n\n```js\n> add = function(a, b){return a + b}\n[Function: add]\n> add(4)\nNaN\n```\n\nadd4a4bundefinedNaN\n\n- \n- NaN\n-  \n\n\n\nadd****undefined**[add2.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js)**:\n\n```js\nfunction add(a, b)\n{\n    if (typeof a === \"number\" && typeof b === \"number\")\n    {\n        return a + b;\n    }\n    else\n    {\n        return undefined;\n    }\n\n}\n```\n\nTDDTest-Driven-Development: ****:\n\n- \n- \n- \n- \n\n###  - [Mocha](https://mochajs.org/)\n\n**[test2.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test2.js)****[add2.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js)**[Mocha](https://mochajs.org/)Node.js[Assert](https://nodejs.org/api/assert.html)\n\n```js\nvar add = require(\"../add2.js\");\nvar assert  = require(\"assert\");\n\n\n// 2\nit(\"should return 3\", function()\n{\n    var sum = add(1, 2);\n    assert.equal(sum, 3);\n});\n\n// 2String\nit(\"should return undefined\", function()\n{\n    var sum = add(1, \"2\");\n    assert.equal(sum, undefined);\n});\n\n// 1\nit(\"should return undefined\", function()\n{\n    var sum = add(1);\n    assert.equal(sum, undefined);\n});\n```\n\n[Mocha](https://mochajs.org/)it3it3(test case)it1\"should return 3\"; 2API\n\nNode.js[Assert](https://nodejs.org/api/assert.html)[assert.equal](https://nodejs.org/api/assert.html#assert_assert_equal_actual_expected_message)addassert.equalAssertionErrornode:\n\n```bash\n> assert  = require(\"assert\");\n> assert.equal(1, 1);\nundefined\n> assert.equal(1, 2);\nAssertionError: 1 == 2\n    at repl:1:8\n    at sigintHandlersWrap (vm.js:22:35)\n    at sigintHandlersWrap (vm.js:96:12)\n    at ContextifyScript.Script.runInThisContext (vm.js:21:12)\n    at REPLServer.defaultEval (repl.js:313:29)\n    at bound (domain.js:280:14)\n    at REPLServer.runBound [as eval] (domain.js:293:12)\n    at REPLServer.<anonymous> (repl.js:513:10)\n    at emitOne (events.js:101:20)\n    at REPLServer.emit (events.js:188:7)\n```\n\n#### : \n\n> MochaitMochaassert.equalassert.equalAssertionErrorMocha\n\n\nmochatest2.js:\n\n```bash\nmocha test/test2.js\n```\n\n\n\n```bash\n should return 3\n should return undefined\n should return undefined\n\n3 passing\n```\n\n**[test1.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test1.js)****[add1.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js)**2:\n\n```bash\n should return 3\n  1) should return undefined\n  2) should return undefined\n\n  1 passing (14ms)\n  2 failing\n\n  1)  should return undefined:\n     AssertionError: '12' == undefined\n      at Context.<anonymous> (test/test1.js:18:12)\n\n  2)  should return undefined:\n     AssertionError: NaN == undefined\n      at Context.<anonymous> (test/test1.js:25:12)\n```\n\n###  - [Should](https://shouldjs.github.io/)\n\nNode.js[Assert](https://nodejs.org/api/assert.html)[Should](https://shouldjs.github.io/)\n\nmerge**[merge.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/merge.js)**[_.extend()](http://underscorejs.org/#extend)[Object.assign()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)Object\n\n```js\nfunction merge(a, b)\n{\n    if (typeof a === \"object\" && typeof b === \"object\")\n    {\n        for (var property in b)\n        {\n            a[property] = b[property];\n        }\n        return a;\n    }\n    else\n    {\n        return undefined;\n    }\n}\n```\n\n[Should](https://shouldjs.github.io/)**[test3.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test3.js)**:\n\n```js\nrequire(\"should\");\nvar merge = require(\"../merge.js\");\n\n\n// 2\nit(\"should success\", function()\n{\n    var a = {\n        name: \"Fundebug\",\n        type: \"SaaS\"\n    };\n\n    var b = {\n        service: \"Real time bug monitoring\",\n        product:\n        {\n            frontend: \"JavaScript\",\n            backend: \"Node.js\",\n            mobile: \"\"\n        }\n    };\n\n    var c = merge(a, b);\n\n    c.should.have.property(\"name\", \"Fundebug\");\n    c.should.have.propertyByPath(\"product\", \"frontend\").equal(\"JavaScript\");\n});\n\n// 1\nit(\"should return undefined\", function()\n{\n    var a = {\n        name: \"Fundebug\",\n        type: \"SaaS\"\n    };\n\n    var c = merge(a);\n\n    (typeof c).should.equal(\"undefined\");\n});\n```\n\nShould:\n\n```js\nc.should.have.property(\"name\", \"Fundebug\");\nc.should.have.propertyByPath(\"product\", \"frontend\").equal(\"JavaScript\");\n(typeof c).should.equal(\"undefined\");\n```\n\nShould:\n\n- \n- \n\nShouldcundefined:\n\n```js\nc.should.equal(undefined); // \n```\n\n#### : \n\n> ShouldshouldundefinedShould\n\nnodeShouldashould\n\n```bash\n> a = {}\n> typeof a.should\n'undefined'\n> require(\"should\")\n> typeof a.should\n'object'\n```\n\n### HTTP - [SuperTest](https://github.com/visionmedia/supertest)\n\nNode.jsHTTPNode.jsHTTP\n\nNode.js[HTTP](https://nodejs.org/api/http.html)HTTP**[server.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/server.js)**\n\n```js\nvar http = require(\"http\");\n\nvar server = http.createServer((req, res) =>\n{\n    res.writeHead(200,\n    {\n        \"Content-Type\": \"text/plain\"\n    });\n\n    res.end(\"Hello Fundebug\");\n});\n\n\nserver.listen(8000);\n```\n\nMochaHTTP: ; ; Node.jshttpassert**[test4.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test4.js)**:\n\n```js\nrequire(\"../server.js\");\nvar http = require(\"http\");\nvar assert = require(\"assert\");\n\n\nit(\"should return hello fundebug\", function(done)\n{\n    http.get(\"http://localhost:8000\", function(res)\n    {\n        res.setEncoding(\"utf8\");\n        res.on(\"data\", function(text)\n        {\n            assert.equal(res.statusCode, 200);\n            assert.equal(text, \"Hello Fundebug\");\n            done();\n        });\n    });\n});\n```\n\nhttp.getHTTP**Mochaitdone**doneMocha\n\nNode.jsHTTP[SuperTest](https://github.com/visionmedia/supertest)**[test5.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test5.js)**:\n\n```js\nvar request = require(\"supertest\");\nvar server = require(\"../server.js\");\nvar assert = require(\"assert\");\n\n\nit(\"should return hello fundebug\", function(done)\n{\n    request(server)\n        .get(\"/\")\n        .expect(200)\n        .expect(function(res)\n        {\n            assert.equal(res.text, \"Hello Fundebug\");\n        })\n        .end(done);\n});\n```\n\n\n\n#### \n\n> SuperTestHTTPexpectPOSTSuperTestNode.jshttpPOST\n\n### \n\nAPI20%80%20%BUG\n\n[Fundebug](https://fundebug.com/):) **Node.js**:\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-unit-test/nodejs-qq-group.jpeg\" />\n</div>\n\n### \n\n- [ Mocha  - ](http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html)\n- [ - ](http://coolshell.cn/articles/8209.html)\n- [ -](http://www.yinwang.org/blog-cn/2016/09/14/tests)\n- [Pareto principle](https://en.wikipedia.org/wiki/Pareto_principle)\n","source":"_posts/2017/03/20/nodejs-unit-test.md","raw":"---\n\ntitle: Node.js\n\ndate: 2017-03-20 21:00:00\n\ntags: [Node.js]\n\n---\n\n\nNode.js: [Mocha](https://mochajs.org/)[Should](https://shouldjs.github.io/)[SuperTest](https://github.com/visionmedia/supertest)****\n\n<!-- more -->\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-unit-test/nodejs-unit-test.jpg\" />\n</div>\n\n\n### \n\nAPI**[add1.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js)**:\n\n```js\nfunction add(a, b)\n{\n    return a + b;\n}\n```\n\n****node:\n\n```js\n> add = function(a, b){return a + b}\n[Function: add]\n> add(4)\nNaN\n```\n\nadd4a4bundefinedNaN\n\n- \n- NaN\n-  \n\n\n\nadd****undefined**[add2.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js)**:\n\n```js\nfunction add(a, b)\n{\n    if (typeof a === \"number\" && typeof b === \"number\")\n    {\n        return a + b;\n    }\n    else\n    {\n        return undefined;\n    }\n\n}\n```\n\nTDDTest-Driven-Development: ****:\n\n- \n- \n- \n- \n\n###  - [Mocha](https://mochajs.org/)\n\n**[test2.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test2.js)****[add2.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js)**[Mocha](https://mochajs.org/)Node.js[Assert](https://nodejs.org/api/assert.html)\n\n```js\nvar add = require(\"../add2.js\");\nvar assert  = require(\"assert\");\n\n\n// 2\nit(\"should return 3\", function()\n{\n    var sum = add(1, 2);\n    assert.equal(sum, 3);\n});\n\n// 2String\nit(\"should return undefined\", function()\n{\n    var sum = add(1, \"2\");\n    assert.equal(sum, undefined);\n});\n\n// 1\nit(\"should return undefined\", function()\n{\n    var sum = add(1);\n    assert.equal(sum, undefined);\n});\n```\n\n[Mocha](https://mochajs.org/)it3it3(test case)it1\"should return 3\"; 2API\n\nNode.js[Assert](https://nodejs.org/api/assert.html)[assert.equal](https://nodejs.org/api/assert.html#assert_assert_equal_actual_expected_message)addassert.equalAssertionErrornode:\n\n```bash\n> assert  = require(\"assert\");\n> assert.equal(1, 1);\nundefined\n> assert.equal(1, 2);\nAssertionError: 1 == 2\n    at repl:1:8\n    at sigintHandlersWrap (vm.js:22:35)\n    at sigintHandlersWrap (vm.js:96:12)\n    at ContextifyScript.Script.runInThisContext (vm.js:21:12)\n    at REPLServer.defaultEval (repl.js:313:29)\n    at bound (domain.js:280:14)\n    at REPLServer.runBound [as eval] (domain.js:293:12)\n    at REPLServer.<anonymous> (repl.js:513:10)\n    at emitOne (events.js:101:20)\n    at REPLServer.emit (events.js:188:7)\n```\n\n#### : \n\n> MochaitMochaassert.equalassert.equalAssertionErrorMocha\n\n\nmochatest2.js:\n\n```bash\nmocha test/test2.js\n```\n\n\n\n```bash\n should return 3\n should return undefined\n should return undefined\n\n3 passing\n```\n\n**[test1.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test1.js)****[add1.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js)**2:\n\n```bash\n should return 3\n  1) should return undefined\n  2) should return undefined\n\n  1 passing (14ms)\n  2 failing\n\n  1)  should return undefined:\n     AssertionError: '12' == undefined\n      at Context.<anonymous> (test/test1.js:18:12)\n\n  2)  should return undefined:\n     AssertionError: NaN == undefined\n      at Context.<anonymous> (test/test1.js:25:12)\n```\n\n###  - [Should](https://shouldjs.github.io/)\n\nNode.js[Assert](https://nodejs.org/api/assert.html)[Should](https://shouldjs.github.io/)\n\nmerge**[merge.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/merge.js)**[_.extend()](http://underscorejs.org/#extend)[Object.assign()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)Object\n\n```js\nfunction merge(a, b)\n{\n    if (typeof a === \"object\" && typeof b === \"object\")\n    {\n        for (var property in b)\n        {\n            a[property] = b[property];\n        }\n        return a;\n    }\n    else\n    {\n        return undefined;\n    }\n}\n```\n\n[Should](https://shouldjs.github.io/)**[test3.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test3.js)**:\n\n```js\nrequire(\"should\");\nvar merge = require(\"../merge.js\");\n\n\n// 2\nit(\"should success\", function()\n{\n    var a = {\n        name: \"Fundebug\",\n        type: \"SaaS\"\n    };\n\n    var b = {\n        service: \"Real time bug monitoring\",\n        product:\n        {\n            frontend: \"JavaScript\",\n            backend: \"Node.js\",\n            mobile: \"\"\n        }\n    };\n\n    var c = merge(a, b);\n\n    c.should.have.property(\"name\", \"Fundebug\");\n    c.should.have.propertyByPath(\"product\", \"frontend\").equal(\"JavaScript\");\n});\n\n// 1\nit(\"should return undefined\", function()\n{\n    var a = {\n        name: \"Fundebug\",\n        type: \"SaaS\"\n    };\n\n    var c = merge(a);\n\n    (typeof c).should.equal(\"undefined\");\n});\n```\n\nShould:\n\n```js\nc.should.have.property(\"name\", \"Fundebug\");\nc.should.have.propertyByPath(\"product\", \"frontend\").equal(\"JavaScript\");\n(typeof c).should.equal(\"undefined\");\n```\n\nShould:\n\n- \n- \n\nShouldcundefined:\n\n```js\nc.should.equal(undefined); // \n```\n\n#### : \n\n> ShouldshouldundefinedShould\n\nnodeShouldashould\n\n```bash\n> a = {}\n> typeof a.should\n'undefined'\n> require(\"should\")\n> typeof a.should\n'object'\n```\n\n### HTTP - [SuperTest](https://github.com/visionmedia/supertest)\n\nNode.jsHTTPNode.jsHTTP\n\nNode.js[HTTP](https://nodejs.org/api/http.html)HTTP**[server.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/server.js)**\n\n```js\nvar http = require(\"http\");\n\nvar server = http.createServer((req, res) =>\n{\n    res.writeHead(200,\n    {\n        \"Content-Type\": \"text/plain\"\n    });\n\n    res.end(\"Hello Fundebug\");\n});\n\n\nserver.listen(8000);\n```\n\nMochaHTTP: ; ; Node.jshttpassert**[test4.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test4.js)**:\n\n```js\nrequire(\"../server.js\");\nvar http = require(\"http\");\nvar assert = require(\"assert\");\n\n\nit(\"should return hello fundebug\", function(done)\n{\n    http.get(\"http://localhost:8000\", function(res)\n    {\n        res.setEncoding(\"utf8\");\n        res.on(\"data\", function(text)\n        {\n            assert.equal(res.statusCode, 200);\n            assert.equal(text, \"Hello Fundebug\");\n            done();\n        });\n    });\n});\n```\n\nhttp.getHTTP**Mochaitdone**doneMocha\n\nNode.jsHTTP[SuperTest](https://github.com/visionmedia/supertest)**[test5.js](https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test5.js)**:\n\n```js\nvar request = require(\"supertest\");\nvar server = require(\"../server.js\");\nvar assert = require(\"assert\");\n\n\nit(\"should return hello fundebug\", function(done)\n{\n    request(server)\n        .get(\"/\")\n        .expect(200)\n        .expect(function(res)\n        {\n            assert.equal(res.text, \"Hello Fundebug\");\n        })\n        .end(done);\n});\n```\n\n\n\n#### \n\n> SuperTestHTTPexpectPOSTSuperTestNode.jshttpPOST\n\n### \n\nAPI20%80%20%BUG\n\n[Fundebug](https://fundebug.com/):) **Node.js**:\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-unit-test/nodejs-qq-group.jpeg\" />\n</div>\n\n### \n\n- [ Mocha  - ](http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html)\n- [ - ](http://coolshell.cn/articles/8209.html)\n- [ -](http://www.yinwang.org/blog-cn/2016/09/14/tests)\n- [Pareto principle](https://en.wikipedia.org/wiki/Pareto_principle)\n","slug":"2017/03/20/nodejs-unit-test","published":1,"updated":"2017-03-20T09:40:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtn3001f71fym8mlvp6a","content":"<p>&#x4EE3;&#x7801;&#x90E8;&#x7F72;&#x4E4B;&#x524D;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x662F;&#x5341;&#x5206;&#x5FC5;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x80FD;&#x591F;&#x6709;&#x6548;&#x5E76;&#x4E14;&#x6301;&#x7EED;&#x4FDD;&#x8BC1;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x3002;&#x800C;&#x5B9E;&#x8DF5;&#x8868;&#x660E;&#xFF0C;&#x9AD8;&#x8D28;&#x91CF;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x8FD8;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B8C;&#x5584;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x51E0;&#x6B3E;Node.js&#x6D4B;&#x8BD5;&#x6A21;&#x5757;: <a href=\"https://mochajs.org/\" target=\"_blank\" rel=\"external\">Mocha</a>&#x548C;<a href=\"https://shouldjs.github.io/\" target=\"_blank\" rel=\"external\">Should</a>&#xFF0C;<a href=\"https://github.com/visionmedia/supertest\" target=\"_blank\" rel=\"external\">SuperTest</a>&#x3002;&#x672C;&#x6587;&#x4FA7;&#x91CD;&#x4E8E;&#x89E3;&#x91CA;<strong>&#x539F;&#x7406;</strong>&#xFF0C;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x8BE6;&#x7EC6;&#x4F7F;&#x7528;&#x6848;&#x4F8B;&#x4EE5;&#x540E;&#x5355;&#x72EC;&#x518D;&#x804A;&#x3002;</p>\n<a id=\"more\"></a>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/20/nodejs-unit-test/nodejs-unit-test.jpg\"><br></div>\n\n\n<h3 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</h3><p>&#x6240;&#x8C13;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x5C31;&#x662F;&#x5BF9;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x6216;&#x8005;API&#x8FDB;&#x884C;&#x6B63;&#x786E;&#x6027;&#x9A8C;&#x8BC1;&#x3002;&#x6765;&#x770B;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js\" target=\"_blank\" rel=\"external\">add1.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">return</span> a + b;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6CA1;&#x9519;&#xFF0C;&#x6211;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x52A0;&#x6CD5;&#x51FD;&#x6570;&#x3002;<strong>&#x8FD9;&#x6709;&#x5565;&#x597D;&#x6D4B;&#x7684;&#x5462;&#xFF1F;</strong>&#x4E0D;&#x59A8;&#x7528;node&#x6267;&#x884C;&#x4E00;&#x4E0B;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&gt; add = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>)</span>{<span class=\"keyword\">return</span> a + b}</div><div class=\"line\">[<span class=\"built_in\">Function</span>: add]</div><div class=\"line\">&gt; add(<span class=\"number\">4</span>)</div><div class=\"line\"><span class=\"literal\">NaN</span></div></pre></td></tr></table></figure>\n<p>&#x5F53;add&#x51FD;&#x6570;&#x4EC5;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;4&#x7684;&#x65F6;&#x5019;&#xFF0C;a&#x4E3A;4&#xFF0C;b&#x4E3A;undefined&#xFF0C;&#x4E24;&#x8005;&#x76F8;&#x52A0;&#x4E3A;NaN&#x3002;</p>\n<ul>\n<li>&#x4F60;&#x8003;&#x8651;&#x8FC7;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x573A;&#x666F;&#x5417;&#xFF1F;</li>\n<li>&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x65F6;&#xFF0C;NaN&#x662F;&#x4F60;&#x60F3;&#x8981;&#x7684;&#x7ED3;&#x679C;&#x5417;&#xFF1F;</li>\n<li>&#x5982;&#x679C;&#x53C2;&#x6570;&#x4E0D;&#x662F;&#x6574;&#x6570;&#x600E;&#x4E48;&#x529E;&#xFF1F; </li>\n</ul>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6765;&#x9A8C;&#x8BC1;&#x5404;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x573A;&#x666F;&#x4E86;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x6211;&#x628A;add&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x4E3A;<strong>&#x4E24;&#x4E2A;&#x6574;&#x6570;&#x76F8;&#x52A0;</strong>&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x8F93;&#x5165;&#x5219;&#x8FD4;&#x56DE;undefined&#xFF0C;&#x90A3;&#x4E48;&#x6B63;&#x786E;&#x7684;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js\" target=\"_blank\" rel=\"external\">add2.js</a></strong>&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> a === <span class=\"string\">&quot;number&quot;</span> &amp;&amp; <span class=\"keyword\">typeof</span> b === <span class=\"string\">&quot;number&quot;</span>)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> a + b;</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x4E00;&#x4E2A;&#x6709;&#x8DA3;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x6211;&#x4EEC;&#x5199;&#x4EE3;&#x7801;&#x7684;&#x65F6;&#x5019;&#x5F88;&#x5BB9;&#x6613;&#x9677;&#x5165;&#x601D;&#x7EF4;&#x6F0F;&#x6D1E;&#xFF0C;&#x800C;&#x5199;&#x6D4B;&#x8BD5;&#x7684;&#x65F6;&#x5019;&#x5F80;&#x5F80;&#x4F1A;&#x8003;&#x8651;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;TDD&#xFF08;Test-Driven-Development: &#x6D4B;&#x8BD5;&#x9A71;&#x52A8;&#x5F00;&#x53D1;&#xFF09;&#x7684;&#x795E;&#x5947;&#x4E4B;&#x5904;&#x3002;&#x56E0;&#x6B64;&#xFF0C;<strong>&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x662F;&#x5341;&#x5206;&#x5FC5;&#x8981;&#x7684;</strong>:</p>\n<ul>\n<li>&#x9A8C;&#x8BC1;&#x4EE3;&#x7801;&#x7684;&#x6B63;&#x786E;&#x6027;</li>\n<li>&#x907F;&#x514D;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x65F6;&#x51FA;&#x9519;</li>\n<li>&#x907F;&#x514D;&#x5176;&#x4ED6;&#x56E2;&#x961F;&#x6210;&#x5458;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x65F6;&#x51FA;&#x9519;</li>\n<li>&#x4FBF;&#x4E8E;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5;&#x4E0E;&#x90E8;&#x7F72;</li>\n</ul>\n<h3 id=\"&#x6D4B;&#x8BD5;&#x6846;&#x67B6;-Mocha\"><a href=\"#&#x6D4B;&#x8BD5;&#x6846;&#x67B6;-Mocha\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;&#x6846;&#x67B6; - Mocha\"></a>&#x6D4B;&#x8BD5;&#x6846;&#x67B6; - <a href=\"https://mochajs.org/\" target=\"_blank\" rel=\"external\">Mocha</a></h3><p>&#x4E0B;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test2.js\" target=\"_blank\" rel=\"external\">test2.js</a></strong>&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js\" target=\"_blank\" rel=\"external\">add2.js</a></strong>&#x3002;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x4E86;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;<a href=\"https://mochajs.org/\" target=\"_blank\" rel=\"external\">Mocha</a>&#x4EE5;&#x53CA;Node.js&#x81EA;&#x5E26;&#x7684;&#x65AD;&#x8A00;&#x5E93;<a href=\"https://nodejs.org/api/assert.html\" target=\"_blank\" rel=\"external\">Assert</a>&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> add = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../add2.js&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> assert  = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;2&#x4E2A;&#x53C2;&#x6570;&#x5747;&#x4E3A;&#x6574;&#x6570;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return 3&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> sum = add(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    assert.equal(sum, <span class=\"number\">3</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;&#x7B2C;2&#x4E2A;&#x53C2;&#x6570;&#x4E3A;String&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return undefined&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> sum = add(<span class=\"number\">1</span>, <span class=\"string\">&quot;2&quot;</span>);</div><div class=\"line\">    assert.equal(sum, <span class=\"literal\">undefined</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;&#x53EA;&#x6709;1&#x4E2A;&#x53C2;&#x6570;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return undefined&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> sum = add(<span class=\"number\">1</span>);</div><div class=\"line\">    assert.equal(sum, <span class=\"literal\">undefined</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;<a href=\"https://mochajs.org/\" target=\"_blank\" rel=\"external\">Mocha</a>&#x63D0;&#x4F9B;&#x7684;it&#x51FD;&#x6570;&#xFF0C;3&#x4E2A;it&#x51FD;&#x6570;&#x5206;&#x522B;&#x6D4B;&#x8BD5;&#x4E86;3&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x6848;&#x4F8B;(test case)&#x3002;it&#x51FD;&#x6570;&#x7684;&#x7B2C;1&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x6D4B;&#x8BD5;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x5199;&#x671F;&#x671B;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4F8B;&#x5982;&#x201D;should return 3&#x201D;; &#x800C;&#x7B2C;2&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E;&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x5148;&#x8C03;&#x7528;&#x88AB;&#x6D4B;&#x8BD5;&#x7684;&#x51FD;&#x6570;&#x6216;&#x8005;API&#xFF0C;&#x83B7;&#x53D6;&#x7ED3;&#x679C;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x7528;&#x65AD;&#x8A00;&#x5E93;&#x5224;&#x65AD;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x6B63;&#x786E;&#x3002;</p>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;Node.js&#x81EA;&#x5E26;&#x7684;&#x65AD;&#x8A00;&#x5E93;<a href=\"https://nodejs.org/api/assert.html\" target=\"_blank\" rel=\"external\">Assert</a>&#x7684;<a href=\"https://nodejs.org/api/assert.html#assert_assert_equal_actual_expected_message\" target=\"_blank\" rel=\"external\">assert.equal</a>&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E;&#x5224;&#x5B9A;add&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x6B63;&#x786E;&#x3002;assert.equal&#x6210;&#x529F;&#x65F6;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF0C;&#x800C;&#x5931;&#x8D25;&#x65F6;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;AssertionError&#x3002;&#x4E0D;&#x59A8;&#x4F7F;&#x7528;node&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&gt; assert  = require(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\">&gt; assert.equal(1, 1);</div><div class=\"line\">undefined</div><div class=\"line\">&gt; assert.equal(1, 2);</div><div class=\"line\">AssertionError: 1 == 2</div><div class=\"line\">    at repl:1:8</div><div class=\"line\">    at sigintHandlersWrap (vm.js:22:35)</div><div class=\"line\">    at sigintHandlersWrap (vm.js:96:12)</div><div class=\"line\">    at ContextifyScript.Script.runInThisContext (vm.js:21:12)</div><div class=\"line\">    at REPLServer.defaultEval (repl.js:313:29)</div><div class=\"line\">    at bound (domain.js:280:14)</div><div class=\"line\">    at REPLServer.runBound [as <span class=\"built_in\">eval</span>] (domain.js:293:12)</div><div class=\"line\">    at REPLServer.&lt;anonymous&gt; (repl.js:513:10)</div><div class=\"line\">    at emitOne (events.js:101:20)</div><div class=\"line\">    at REPLServer.emit (events.js:188:7)</div></pre></td></tr></table></figure>\n<h4 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;:\"></a>&#x539F;&#x7406;:</h4><blockquote>\n<p>&#x6211;&#x4EEC;&#x6309;&#x7167;Mocha&#x7684;it&#x51FD;&#x6570;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x4E2A;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#xFF0C;&#x7136;&#x540E;Mocha&#x8D1F;&#x8D23;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x6848;&#x4F8B;&#xFF1B;&#x5F53;assert.equal&#x65AD;&#x8A00;&#x6210;&#x529F;&#x65F6;&#xFF0C;&#x5219;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x901A;&#x8FC7;&#xFF1B;&#x5F53;assert.equal&#x65AD;&#x8A00;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x629B;&#x51FA;AssertionError&#xFF0C;Mocha&#x80FD;&#x591F;&#x6355;&#x83B7;&#x5230;&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x5E94;&#x7684;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x5931;&#x8D25;&#x3002;</p>\n</blockquote>\n<p>&#x4F7F;&#x7528;mocha&#x6267;&#x884C;test2.js:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">mocha <span class=\"built_in\">test</span>/<span class=\"built_in\">test</span>2.js</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x4E3A;&#x8F93;&#x51FA;&#xFF0C;&#x8868;&#x793A;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x5168;&#x90E8;&#x901A;&#x8FC7;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> 3</div><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> undefined</div><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> undefined</div><div class=\"line\"></div><div class=\"line\">3 passing</div></pre></td></tr></table></figure>\n<p>&#x800C;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test1.js\" target=\"_blank\" rel=\"external\">test1.js</a></strong>&#x6D4B;&#x8BD5;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js\" target=\"_blank\" rel=\"external\">add1.js</a></strong>&#x65F6;&#xFF0C;&#x5219;&#x540E;&#x9762;2&#x4E2A;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x5931;&#x8D25;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> 3</div><div class=\"line\">  1) should <span class=\"built_in\">return</span> undefined</div><div class=\"line\">  2) should <span class=\"built_in\">return</span> undefined</div><div class=\"line\"></div><div class=\"line\">  1 passing (14ms)</div><div class=\"line\">  2 failing</div><div class=\"line\"></div><div class=\"line\">  1)  should <span class=\"built_in\">return</span> undefined:</div><div class=\"line\">     AssertionError: <span class=\"string\">&apos;12&apos;</span> == undefined</div><div class=\"line\">      at Context.&lt;anonymous&gt; (<span class=\"built_in\">test</span>/<span class=\"built_in\">test</span>1.js:18:12)</div><div class=\"line\"></div><div class=\"line\">  2)  should <span class=\"built_in\">return</span> undefined:</div><div class=\"line\">     AssertionError: NaN == undefined</div><div class=\"line\">      at Context.&lt;anonymous&gt; (<span class=\"built_in\">test</span>/<span class=\"built_in\">test</span>1.js:25:12)</div></pre></td></tr></table></figure>\n<h3 id=\"&#x65AD;&#x8A00;&#x5E93;-Should\"><a href=\"#&#x65AD;&#x8A00;&#x5E93;-Should\" class=\"headerlink\" title=\"&#x65AD;&#x8A00;&#x5E93; - Should\"></a>&#x65AD;&#x8A00;&#x5E93; - <a href=\"https://shouldjs.github.io/\" target=\"_blank\" rel=\"external\">Should</a></h3><p>Node.js&#x81EA;&#x5E26;&#x7684;&#x65AD;&#x8A00;&#x5E93;<a href=\"https://nodejs.org/api/assert.html\" target=\"_blank\" rel=\"external\">Assert</a>&#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#x6709;&#x9650;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;<a href=\"https://shouldjs.github.io/\" target=\"_blank\" rel=\"external\">Should</a>&#x7B49;&#x7B2C;&#x4E09;&#x65B9;&#x65AD;&#x8A00;&#x5E93;&#x5219;&#x66F4;&#x52A0;&#x5F3A;&#x5927;&#x548C;&#x5B9E;&#x7528;&#x3002;</p>\n<p>&#x6211;&#x5199;&#x4E86;&#x4E00;&#x4E2A;merge&#x51FD;&#x6570;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/merge.js\" target=\"_blank\" rel=\"external\">merge.js</a></strong>&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E;<a href=\"http://underscorejs.org/#extend\" target=\"_blank\" rel=\"external\">_.extend()</a>&#x4E0E;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\" target=\"_blank\" rel=\"external\">Object.assign()</a>&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x4E8E;&#x5408;&#x5E76;&#x4E24;&#x4E2A;Object&#x7684;&#x5C5E;&#x6027;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">merge</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> a === <span class=\"string\">&quot;object&quot;</span> &amp;&amp; <span class=\"keyword\">typeof</span> b === <span class=\"string\">&quot;object&quot;</span>)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> property <span class=\"keyword\">in</span> b)</div><div class=\"line\">        {</div><div class=\"line\">            a[property] = b[property];</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span> a;</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x6211;&#x4F7F;&#x7528;<a href=\"https://shouldjs.github.io/\" target=\"_blank\" rel=\"external\">Should</a>&#x5199;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test3.js\" target=\"_blank\" rel=\"external\">test3.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;should&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../merge.js&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;2&#x4E2A;&#x53C2;&#x6570;&#x5747;&#x4E3A;&#x5BF9;&#x8C61;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should success&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> a = {</div><div class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;Fundebug&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">&quot;SaaS&quot;</span></div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> b = {</div><div class=\"line\">        <span class=\"attr\">service</span>: <span class=\"string\">&quot;Real time bug monitoring&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">product</span>:</div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"attr\">frontend</span>: <span class=\"string\">&quot;JavaScript&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">backend</span>: <span class=\"string\">&quot;Node.js&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">mobile</span>: <span class=\"string\">&quot;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&quot;</span></div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> c = merge(a, b);</div><div class=\"line\"></div><div class=\"line\">    c.should.have.property(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;Fundebug&quot;</span>);</div><div class=\"line\">    c.should.have.propertyByPath(<span class=\"string\">&quot;product&quot;</span>, <span class=\"string\">&quot;frontend&quot;</span>).equal(<span class=\"string\">&quot;JavaScript&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;&#x53EA;&#x6709;1&#x4E2A;&#x53C2;&#x6570;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return undefined&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> a = {</div><div class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;Fundebug&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">&quot;SaaS&quot;</span></div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> c = merge(a);</div><div class=\"line\"></div><div class=\"line\">    (<span class=\"keyword\">typeof</span> c).should.equal(<span class=\"string\">&quot;undefined&quot;</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x7A0D;&#x5FAE;&#x6709;&#x70B9;&#x957F;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;Should&#x7684;&#x53EA;&#x6709;&#x4E09;&#x5904;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">c.should.have.property(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;Fundebug&quot;</span>);</div><div class=\"line\">c.should.have.propertyByPath(<span class=\"string\">&quot;product&quot;</span>, <span class=\"string\">&quot;frontend&quot;</span>).equal(<span class=\"string\">&quot;JavaScript&quot;</span>);</div><div class=\"line\">(<span class=\"keyword\">typeof</span> c).should.equal(<span class=\"string\">&quot;undefined&quot;</span>);</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;Should&#x80FD;&#x591F;:</p>\n<ul>\n<li>&#x9A8C;&#x8BC1;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x9A8C;&#x8BC1;&#x5176;&#x53D6;&#x503C;</li>\n<li>&#x9A8C;&#x8BC1;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x4E2A;&#x5D4C;&#x5957;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x94FE;&#x5F0F;&#x65B9;&#x5F0F;&#x9A8C;&#x8BC1;&#x5176;&#x53D6;&#x503C;</li>\n</ul>\n<p>&#x90A3;&#x4E48;Should&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x9A8C;&#x8BC1;c&#x7684;&#x53D6;&#x503C;&#x4E3A;undefined&#x5462;&#xFF1F;&#x6BD4;&#x5982;&#x8FD9;&#x6837;&#x5199;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">c.should.equal(<span class=\"literal\">undefined</span>); <span class=\"comment\">// &#x8FD9;&#x6837;&#x5199;&#x662F;&#x9519;&#x8BEF;&#x7684;</span></div></pre></td></tr></table></figure>\n<h4 id=\"&#x539F;&#x7406;-1\"><a href=\"#&#x539F;&#x7406;-1\" class=\"headerlink\" title=\"&#x539F;&#x7406;:\"></a>&#x539F;&#x7406;:</h4><blockquote>\n<p>Should&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;should&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x8BE5;&#x5C5E;&#x6027;&#x63D0;&#x4F9B;&#x5404;&#x79CD;&#x65AD;&#x8A00;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x9A8C;&#x8BC1;&#x5BF9;&#x8C61;&#x7684;&#x53D6;&#x503C;&#x3002;&#x5BF9;&#x4E8E;undefined&#xFF0C;Should&#x65E0;&#x6CD5;&#x4E3A;&#x5176;&#x6DFB;&#x52A0;&#x5C5E;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x5931;&#x8D25;&#x3002;</p>\n</blockquote>\n<p>&#x901A;&#x8FC7;node&#x9A8C;&#x8BC1;&#x53D1;&#x73B0;&#xFF0C;&#x5BFC;&#x5165;Should&#x4E4B;&#x540E;&#xFF0C;&#x7A7A;&#x5BF9;&#x8C61;a&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;should&#x5C5E;&#x6027;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&gt; a = {}</div><div class=\"line\">&gt; typeof a.should</div><div class=\"line\"><span class=\"string\">&apos;undefined&apos;</span></div><div class=\"line\">&gt; require(<span class=\"string\">&quot;should&quot;</span>)</div><div class=\"line\">&gt; typeof a.should</div><div class=\"line\"><span class=\"string\">&apos;object&apos;</span></div></pre></td></tr></table></figure>\n<h3 id=\"&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;-SuperTest\"><a href=\"#&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;-SuperTest\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3; - SuperTest\"></a>&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3; - <a href=\"https://github.com/visionmedia/supertest\" target=\"_blank\" rel=\"external\">SuperTest</a></h3><p>Node.js&#x662F;&#x7528;&#x4E8E;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x800C;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x5176;&#x5B9E;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x7B49;&#x4EF7;&#x4E8E;&#x7F16;&#x5199;HTTP&#x63A5;&#x53E3;&#xFF0C;&#x4E3A;&#x524D;&#x7AEF;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;&#x90A3;&#x4E48;&#xFF0C;Node.js&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5219;&#x5C11;&#x4E0D;&#x4E86;&#x5BF9;HTTP&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p>&#x6211;&#x7528;Node.js&#x81EA;&#x5E26;&#x7684;<a href=\"https://nodejs.org/api/http.html\" target=\"_blank\" rel=\"external\">HTTP</a>&#x6A21;&#x5757;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;HTTP&#x63A5;&#x53E3;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/server.js\" target=\"_blank\" rel=\"external\">server.js</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;http&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span></div><div class=\"line\">{</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>,</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;text/plain&quot;</span></div><div class=\"line\">    });</div><div class=\"line\"></div><div class=\"line\">    res.end(<span class=\"string\">&quot;Hello Fundebug&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">server.listen(<span class=\"number\">8000</span>);</div></pre></td></tr></table></figure>\n<p>&#x6309;&#x7167;Mocha&#x7684;&#x539F;&#x7406;&#xFF0C;&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;&#x5E76;&#x4E0D;&#x96BE;: &#x8BBF;&#x95EE;&#x63A5;&#x53E3;; &#x83B7;&#x53D6;&#x8FD4;&#x56DE;&#x6570;&#x636E;; &#x9A8C;&#x8BC1;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x4F7F;&#x7528;Node.js&#x539F;&#x751F;&#x7684;http&#x4E0E;assert&#x6A21;&#x5757;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test4.js\" target=\"_blank\" rel=\"external\">test4.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;../server.js&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;http&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> assert = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">it(<span class=\"string\">&quot;should return hello fundebug&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    http.get(<span class=\"string\">&quot;http://localhost:8000&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        res.setEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</div><div class=\"line\">        res.on(<span class=\"string\">&quot;data&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">text</span>)</span></div><div class=\"line\">        {</div><div class=\"line\">            assert.equal(res.statusCode, <span class=\"number\">200</span>);</div><div class=\"line\">            assert.equal(text, <span class=\"string\">&quot;Hello Fundebug&quot;</span>);</div><div class=\"line\">            done();</div><div class=\"line\">        });</div><div class=\"line\">    });</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x503C;&#x5F97;&#x7A0D;&#x5FAE;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x70B9;&#x662F;&#xFF0C;http.get&#x8BBF;&#x95EE;HTTP&#x63A5;&#x53E3;&#x662F;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x3002;<strong>Mocha&#x5728;&#x6D4B;&#x8BD5;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x662F;&#x9700;&#x8981;&#x4E3A;it&#x51FD;&#x6570;&#x6DFB;&#x52A0;&#x56DE;&#x8C03;&#x51FD;&#x6570;done</strong>&#xFF0C;&#x5728;&#x65AD;&#x8A00;&#x7ED3;&#x675F;&#x7684;&#x5730;&#x65B9;&#x8C03;&#x7528;done&#xFF0C;&#x8FD9;&#x6837;Mocha&#x624D;&#x80FD;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x7ED3;&#x675F;&#x8FD9;&#x4E2A;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p>&#x65E2;&#x7136;Node.js&#x81EA;&#x5E26;&#x7684;&#x6A21;&#x5757;&#x5C31;&#x80FD;&#x591F;&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;&#x4E86;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD8;&#x9700;&#x8981;<a href=\"https://github.com/visionmedia/supertest\" target=\"_blank\" rel=\"external\">SuperTest</a>&#x5462;&#xFF1F;&#x4E0D;&#x59A8;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test5.js\" target=\"_blank\" rel=\"external\">test5.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;supertest&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../server.js&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> assert = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">it(<span class=\"string\">&quot;should return hello fundebug&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    request(server)</div><div class=\"line\">        .get(<span class=\"string\">&quot;/&quot;</span>)</div><div class=\"line\">        .expect(<span class=\"number\">200</span>)</div><div class=\"line\">        .expect(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span></div><div class=\"line\">        {</div><div class=\"line\">            assert.equal(res.text, <span class=\"string\">&quot;Hello Fundebug&quot;</span>);</div><div class=\"line\">        })</div><div class=\"line\">        .end(done);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x6BD4;&#x4E24;&#x4E2A;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x540E;&#x8005;&#x7B80;&#x6D01;&#x5F88;&#x591A;&#x3002;</p>\n<h4 id=\"&#x539F;&#x7406;-2\"><a href=\"#&#x539F;&#x7406;-2\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h4><blockquote>\n<p>SuperTest&#x5C01;&#x88C5;&#x4E86;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x7B80;&#x5355;&#x7684;expect&#x65AD;&#x8A00;&#x6765;&#x5224;&#x5B9A;&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x5BF9;&#x4E8E;POST&#x63A5;&#x53E3;&#xFF0C;&#x4F7F;&#x7528;SuperTest&#x7684;&#x4F18;&#x52BF;&#x5C06;&#x66F4;&#x52A0;&#x660E;&#x663E;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;Node.js&#x7684;http&#x6A21;&#x5757;&#x53D1;&#x9001;POST&#x8BF7;&#x6C42;&#x662F;&#x5F88;&#x9EBB;&#x70E6;&#x7684;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"><a href=\"#&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\" class=\"headerlink\" title=\"&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"></a>&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</h3><p>&#x672C;&#x6587;&#x6240;&#x5199;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#xFF0C;&#x90FD;&#x5F88;&#x7B80;&#x5355;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5934;&#x75DB;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x4FEE;&#x6539;&#x4E86;&#x4EE3;&#x7801;&#x6709;&#x65F6;&#x610F;&#x5473;&#x7740;&#x5FC5;&#x987B;&#x4FEE;&#x6539;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x5199;&#x4E86;&#x65B0;&#x7684;&#x51FD;&#x6570;&#x6216;&#x8005;API&#x5C31;&#x5F97;&#x5199;&#x65B0;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;&#x5982;&#x679C;&#x8F83;&#x771F;&#x8D77;&#x6765;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x53EF;&#x4EE5;&#x6CA1;&#x5B8C;&#x6CA1;&#x4E86;&#x5730;&#x5199;&#xFF0C;&#x4F46;&#x8FD9;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002;&#x800C;&#x6839;&#x636E;&#x4E8C;&#x516B;&#x539F;&#x7406;&#xFF0C;20%&#x7684;&#x6D4B;&#x8BD5;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;80%&#x7684;&#x95EE;&#x9898;&#x3002;&#x5269;&#x4E0B;&#x7684;20%&#x95EE;&#x9898;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#x6211;&#x4EEC;&#x662F;&#x529B;&#x4E0D;&#x4ECE;&#x5FC3;&#x7684;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x60F3;&#x901A;&#x8FC7;&#x6D4B;&#x8BD5;&#x6D88;&#x9664;&#x6240;&#x6709;BUG&#xFF0C;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;&#x751F;&#x4EA7;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#x662F;&#x975E;&#x5E38;&#x6709;&#x5FC5;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x52AA;&#x529B;&#x5728;&#x505A;&#x7684;&#x4E8B;&#x60C5;:) &#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;</strong>:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/03/20/nodejs-unit-test/nodejs-qq-group.jpeg\"><br></div>\n\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html\" target=\"_blank\" rel=\"external\">&#x6D4B;&#x8BD5;&#x6846;&#x67B6; Mocha &#x5B9E;&#x4F8B;&#x6559;&#x7A0B; - &#x962E;&#x4E00;&#x5CF0;</a></li>\n<li><a href=\"http://coolshell.cn/articles/8209.html\" target=\"_blank\" rel=\"external\">&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x8981;&#x505A;&#x591A;&#x7EC6; - &#x9177;&#x58F3;</a></li>\n<li><a href=\"http://www.yinwang.org/blog-cn/2016/09/14/tests\" target=\"_blank\" rel=\"external\">&#x6D4B;&#x8BD5;&#x7684;&#x9053;&#x7406; -&#x738B;&#x57A0;</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Pareto_principle\" target=\"_blank\" rel=\"external\">Pareto principle</a></li>\n</ul>\n","excerpt":"<p>&#x4EE3;&#x7801;&#x90E8;&#x7F72;&#x4E4B;&#x524D;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x662F;&#x5341;&#x5206;&#x5FC5;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x80FD;&#x591F;&#x6709;&#x6548;&#x5E76;&#x4E14;&#x6301;&#x7EED;&#x4FDD;&#x8BC1;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x3002;&#x800C;&#x5B9E;&#x8DF5;&#x8868;&#x660E;&#xFF0C;&#x9AD8;&#x8D28;&#x91CF;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x8FD8;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B8C;&#x5584;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x51E0;&#x6B3E;Node.js&#x6D4B;&#x8BD5;&#x6A21;&#x5757;: <a href=\"https://mochajs.org/\">Mocha</a>&#x548C;<a href=\"https://shouldjs.github.io/\">Should</a>&#xFF0C;<a href=\"https://github.com/visionmedia/supertest\">SuperTest</a>&#x3002;&#x672C;&#x6587;&#x4FA7;&#x91CD;&#x4E8E;&#x89E3;&#x91CA;<strong>&#x539F;&#x7406;</strong>&#xFF0C;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x8BE6;&#x7EC6;&#x4F7F;&#x7528;&#x6848;&#x4F8B;&#x4EE5;&#x540E;&#x5355;&#x72EC;&#x518D;&#x804A;&#x3002;</p>","more":"<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/20/nodejs-unit-test/nodejs-unit-test.jpg\"><br></div>\n\n\n<h3 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</h3><p>&#x6240;&#x8C13;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x5C31;&#x662F;&#x5BF9;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x6216;&#x8005;API&#x8FDB;&#x884C;&#x6B63;&#x786E;&#x6027;&#x9A8C;&#x8BC1;&#x3002;&#x6765;&#x770B;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js\">add1.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">return</span> a + b;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6CA1;&#x9519;&#xFF0C;&#x6211;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x52A0;&#x6CD5;&#x51FD;&#x6570;&#x3002;<strong>&#x8FD9;&#x6709;&#x5565;&#x597D;&#x6D4B;&#x7684;&#x5462;&#xFF1F;</strong>&#x4E0D;&#x59A8;&#x7528;node&#x6267;&#x884C;&#x4E00;&#x4E0B;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&gt; add = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>)</span>{<span class=\"keyword\">return</span> a + b}</div><div class=\"line\">[<span class=\"built_in\">Function</span>: add]</div><div class=\"line\">&gt; add(<span class=\"number\">4</span>)</div><div class=\"line\"><span class=\"literal\">NaN</span></div></pre></td></tr></table></figure>\n<p>&#x5F53;add&#x51FD;&#x6570;&#x4EC5;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;4&#x7684;&#x65F6;&#x5019;&#xFF0C;a&#x4E3A;4&#xFF0C;b&#x4E3A;undefined&#xFF0C;&#x4E24;&#x8005;&#x76F8;&#x52A0;&#x4E3A;NaN&#x3002;</p>\n<ul>\n<li>&#x4F60;&#x8003;&#x8651;&#x8FC7;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x573A;&#x666F;&#x5417;&#xFF1F;</li>\n<li>&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x65F6;&#xFF0C;NaN&#x662F;&#x4F60;&#x60F3;&#x8981;&#x7684;&#x7ED3;&#x679C;&#x5417;&#xFF1F;</li>\n<li>&#x5982;&#x679C;&#x53C2;&#x6570;&#x4E0D;&#x662F;&#x6574;&#x6570;&#x600E;&#x4E48;&#x529E;&#xFF1F; </li>\n</ul>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6765;&#x9A8C;&#x8BC1;&#x5404;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x573A;&#x666F;&#x4E86;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x6211;&#x628A;add&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x4E3A;<strong>&#x4E24;&#x4E2A;&#x6574;&#x6570;&#x76F8;&#x52A0;</strong>&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x8F93;&#x5165;&#x5219;&#x8FD4;&#x56DE;undefined&#xFF0C;&#x90A3;&#x4E48;&#x6B63;&#x786E;&#x7684;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js\">add2.js</a></strong>&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> a === <span class=\"string\">&quot;number&quot;</span> &amp;&amp; <span class=\"keyword\">typeof</span> b === <span class=\"string\">&quot;number&quot;</span>)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> a + b;</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x4E00;&#x4E2A;&#x6709;&#x8DA3;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x6211;&#x4EEC;&#x5199;&#x4EE3;&#x7801;&#x7684;&#x65F6;&#x5019;&#x5F88;&#x5BB9;&#x6613;&#x9677;&#x5165;&#x601D;&#x7EF4;&#x6F0F;&#x6D1E;&#xFF0C;&#x800C;&#x5199;&#x6D4B;&#x8BD5;&#x7684;&#x65F6;&#x5019;&#x5F80;&#x5F80;&#x4F1A;&#x8003;&#x8651;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;TDD&#xFF08;Test-Driven-Development: &#x6D4B;&#x8BD5;&#x9A71;&#x52A8;&#x5F00;&#x53D1;&#xFF09;&#x7684;&#x795E;&#x5947;&#x4E4B;&#x5904;&#x3002;&#x56E0;&#x6B64;&#xFF0C;<strong>&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x662F;&#x5341;&#x5206;&#x5FC5;&#x8981;&#x7684;</strong>:</p>\n<ul>\n<li>&#x9A8C;&#x8BC1;&#x4EE3;&#x7801;&#x7684;&#x6B63;&#x786E;&#x6027;</li>\n<li>&#x907F;&#x514D;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x65F6;&#x51FA;&#x9519;</li>\n<li>&#x907F;&#x514D;&#x5176;&#x4ED6;&#x56E2;&#x961F;&#x6210;&#x5458;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x65F6;&#x51FA;&#x9519;</li>\n<li>&#x4FBF;&#x4E8E;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5;&#x4E0E;&#x90E8;&#x7F72;</li>\n</ul>\n<h3 id=\"&#x6D4B;&#x8BD5;&#x6846;&#x67B6;-Mocha\"><a href=\"#&#x6D4B;&#x8BD5;&#x6846;&#x67B6;-Mocha\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;&#x6846;&#x67B6; - Mocha\"></a>&#x6D4B;&#x8BD5;&#x6846;&#x67B6; - <a href=\"https://mochajs.org/\">Mocha</a></h3><p>&#x4E0B;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test2.js\">test2.js</a></strong>&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add2.js\">add2.js</a></strong>&#x3002;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x4E86;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;<a href=\"https://mochajs.org/\">Mocha</a>&#x4EE5;&#x53CA;Node.js&#x81EA;&#x5E26;&#x7684;&#x65AD;&#x8A00;&#x5E93;<a href=\"https://nodejs.org/api/assert.html\">Assert</a>&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> add = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../add2.js&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> assert  = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;2&#x4E2A;&#x53C2;&#x6570;&#x5747;&#x4E3A;&#x6574;&#x6570;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return 3&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> sum = add(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    assert.equal(sum, <span class=\"number\">3</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;&#x7B2C;2&#x4E2A;&#x53C2;&#x6570;&#x4E3A;String&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return undefined&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> sum = add(<span class=\"number\">1</span>, <span class=\"string\">&quot;2&quot;</span>);</div><div class=\"line\">    assert.equal(sum, <span class=\"literal\">undefined</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;&#x53EA;&#x6709;1&#x4E2A;&#x53C2;&#x6570;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return undefined&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> sum = add(<span class=\"number\">1</span>);</div><div class=\"line\">    assert.equal(sum, <span class=\"literal\">undefined</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;<a href=\"https://mochajs.org/\">Mocha</a>&#x63D0;&#x4F9B;&#x7684;it&#x51FD;&#x6570;&#xFF0C;3&#x4E2A;it&#x51FD;&#x6570;&#x5206;&#x522B;&#x6D4B;&#x8BD5;&#x4E86;3&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x6848;&#x4F8B;(test case)&#x3002;it&#x51FD;&#x6570;&#x7684;&#x7B2C;1&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x6D4B;&#x8BD5;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x5199;&#x671F;&#x671B;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4F8B;&#x5982;&#x201D;should return 3&#x201D;; &#x800C;&#x7B2C;2&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E;&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x5148;&#x8C03;&#x7528;&#x88AB;&#x6D4B;&#x8BD5;&#x7684;&#x51FD;&#x6570;&#x6216;&#x8005;API&#xFF0C;&#x83B7;&#x53D6;&#x7ED3;&#x679C;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x7528;&#x65AD;&#x8A00;&#x5E93;&#x5224;&#x65AD;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x6B63;&#x786E;&#x3002;</p>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;Node.js&#x81EA;&#x5E26;&#x7684;&#x65AD;&#x8A00;&#x5E93;<a href=\"https://nodejs.org/api/assert.html\">Assert</a>&#x7684;<a href=\"https://nodejs.org/api/assert.html#assert_assert_equal_actual_expected_message\">assert.equal</a>&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E;&#x5224;&#x5B9A;add&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x6B63;&#x786E;&#x3002;assert.equal&#x6210;&#x529F;&#x65F6;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF0C;&#x800C;&#x5931;&#x8D25;&#x65F6;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;AssertionError&#x3002;&#x4E0D;&#x59A8;&#x4F7F;&#x7528;node&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&gt; assert  = require(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\">&gt; assert.equal(1, 1);</div><div class=\"line\">undefined</div><div class=\"line\">&gt; assert.equal(1, 2);</div><div class=\"line\">AssertionError: 1 == 2</div><div class=\"line\">    at repl:1:8</div><div class=\"line\">    at sigintHandlersWrap (vm.js:22:35)</div><div class=\"line\">    at sigintHandlersWrap (vm.js:96:12)</div><div class=\"line\">    at ContextifyScript.Script.runInThisContext (vm.js:21:12)</div><div class=\"line\">    at REPLServer.defaultEval (repl.js:313:29)</div><div class=\"line\">    at bound (domain.js:280:14)</div><div class=\"line\">    at REPLServer.runBound [as <span class=\"built_in\">eval</span>] (domain.js:293:12)</div><div class=\"line\">    at REPLServer.&lt;anonymous&gt; (repl.js:513:10)</div><div class=\"line\">    at emitOne (events.js:101:20)</div><div class=\"line\">    at REPLServer.emit (events.js:188:7)</div></pre></td></tr></table></figure>\n<h4 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;:\"></a>&#x539F;&#x7406;:</h4><blockquote>\n<p>&#x6211;&#x4EEC;&#x6309;&#x7167;Mocha&#x7684;it&#x51FD;&#x6570;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x4E2A;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#xFF0C;&#x7136;&#x540E;Mocha&#x8D1F;&#x8D23;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x6848;&#x4F8B;&#xFF1B;&#x5F53;assert.equal&#x65AD;&#x8A00;&#x6210;&#x529F;&#x65F6;&#xFF0C;&#x5219;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x901A;&#x8FC7;&#xFF1B;&#x5F53;assert.equal&#x65AD;&#x8A00;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x629B;&#x51FA;AssertionError&#xFF0C;Mocha&#x80FD;&#x591F;&#x6355;&#x83B7;&#x5230;&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x5E94;&#x7684;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x5931;&#x8D25;&#x3002;</p>\n</blockquote>\n<p>&#x4F7F;&#x7528;mocha&#x6267;&#x884C;test2.js:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">mocha <span class=\"built_in\">test</span>/<span class=\"built_in\">test</span>2.js</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x4E3A;&#x8F93;&#x51FA;&#xFF0C;&#x8868;&#x793A;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x5168;&#x90E8;&#x901A;&#x8FC7;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> 3</div><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> undefined</div><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> undefined</div><div class=\"line\"></div><div class=\"line\">3 passing</div></pre></td></tr></table></figure>\n<p>&#x800C;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test1.js\">test1.js</a></strong>&#x6D4B;&#x8BD5;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/add1.js\">add1.js</a></strong>&#x65F6;&#xFF0C;&#x5219;&#x540E;&#x9762;2&#x4E2A;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#x5931;&#x8D25;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#x2713; should <span class=\"built_in\">return</span> 3</div><div class=\"line\">  1) should <span class=\"built_in\">return</span> undefined</div><div class=\"line\">  2) should <span class=\"built_in\">return</span> undefined</div><div class=\"line\"></div><div class=\"line\">  1 passing (14ms)</div><div class=\"line\">  2 failing</div><div class=\"line\"></div><div class=\"line\">  1)  should <span class=\"built_in\">return</span> undefined:</div><div class=\"line\">     AssertionError: <span class=\"string\">&apos;12&apos;</span> == undefined</div><div class=\"line\">      at Context.&lt;anonymous&gt; (<span class=\"built_in\">test</span>/<span class=\"built_in\">test</span>1.js:18:12)</div><div class=\"line\"></div><div class=\"line\">  2)  should <span class=\"built_in\">return</span> undefined:</div><div class=\"line\">     AssertionError: NaN == undefined</div><div class=\"line\">      at Context.&lt;anonymous&gt; (<span class=\"built_in\">test</span>/<span class=\"built_in\">test</span>1.js:25:12)</div></pre></td></tr></table></figure>\n<h3 id=\"&#x65AD;&#x8A00;&#x5E93;-Should\"><a href=\"#&#x65AD;&#x8A00;&#x5E93;-Should\" class=\"headerlink\" title=\"&#x65AD;&#x8A00;&#x5E93; - Should\"></a>&#x65AD;&#x8A00;&#x5E93; - <a href=\"https://shouldjs.github.io/\">Should</a></h3><p>Node.js&#x81EA;&#x5E26;&#x7684;&#x65AD;&#x8A00;&#x5E93;<a href=\"https://nodejs.org/api/assert.html\">Assert</a>&#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#x6709;&#x9650;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;<a href=\"https://shouldjs.github.io/\">Should</a>&#x7B49;&#x7B2C;&#x4E09;&#x65B9;&#x65AD;&#x8A00;&#x5E93;&#x5219;&#x66F4;&#x52A0;&#x5F3A;&#x5927;&#x548C;&#x5B9E;&#x7528;&#x3002;</p>\n<p>&#x6211;&#x5199;&#x4E86;&#x4E00;&#x4E2A;merge&#x51FD;&#x6570;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/merge.js\">merge.js</a></strong>&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E;<a href=\"http://underscorejs.org/#extend\">_.extend()</a>&#x4E0E;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\">Object.assign()</a>&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x4E8E;&#x5408;&#x5E76;&#x4E24;&#x4E2A;Object&#x7684;&#x5C5E;&#x6027;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">merge</span>(<span class=\"params\">a, b</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> a === <span class=\"string\">&quot;object&quot;</span> &amp;&amp; <span class=\"keyword\">typeof</span> b === <span class=\"string\">&quot;object&quot;</span>)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> property <span class=\"keyword\">in</span> b)</div><div class=\"line\">        {</div><div class=\"line\">            a[property] = b[property];</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span> a;</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x6211;&#x4F7F;&#x7528;<a href=\"https://shouldjs.github.io/\">Should</a>&#x5199;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test3.js\">test3.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;should&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../merge.js&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;2&#x4E2A;&#x53C2;&#x6570;&#x5747;&#x4E3A;&#x5BF9;&#x8C61;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should success&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> a = {</div><div class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;Fundebug&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">&quot;SaaS&quot;</span></div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> b = {</div><div class=\"line\">        <span class=\"attr\">service</span>: <span class=\"string\">&quot;Real time bug monitoring&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">product</span>:</div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"attr\">frontend</span>: <span class=\"string\">&quot;JavaScript&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">backend</span>: <span class=\"string\">&quot;Node.js&quot;</span>,</div><div class=\"line\">            <span class=\"attr\">mobile</span>: <span class=\"string\">&quot;&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&quot;</span></div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> c = merge(a, b);</div><div class=\"line\"></div><div class=\"line\">    c.should.have.property(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;Fundebug&quot;</span>);</div><div class=\"line\">    c.should.have.propertyByPath(<span class=\"string\">&quot;product&quot;</span>, <span class=\"string\">&quot;frontend&quot;</span>).equal(<span class=\"string\">&quot;JavaScript&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x5F53;&#x53EA;&#x6709;1&#x4E2A;&#x53C2;&#x6570;&#x65F6;</span></div><div class=\"line\">it(<span class=\"string\">&quot;should return undefined&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">var</span> a = {</div><div class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;Fundebug&quot;</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">&quot;SaaS&quot;</span></div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> c = merge(a);</div><div class=\"line\"></div><div class=\"line\">    (<span class=\"keyword\">typeof</span> c).should.equal(<span class=\"string\">&quot;undefined&quot;</span>);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x7A0D;&#x5FAE;&#x6709;&#x70B9;&#x957F;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;Should&#x7684;&#x53EA;&#x6709;&#x4E09;&#x5904;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">c.should.have.property(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;Fundebug&quot;</span>);</div><div class=\"line\">c.should.have.propertyByPath(<span class=\"string\">&quot;product&quot;</span>, <span class=\"string\">&quot;frontend&quot;</span>).equal(<span class=\"string\">&quot;JavaScript&quot;</span>);</div><div class=\"line\">(<span class=\"keyword\">typeof</span> c).should.equal(<span class=\"string\">&quot;undefined&quot;</span>);</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;Should&#x80FD;&#x591F;:</p>\n<ul>\n<li>&#x9A8C;&#x8BC1;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x9A8C;&#x8BC1;&#x5176;&#x53D6;&#x503C;</li>\n<li>&#x9A8C;&#x8BC1;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x4E2A;&#x5D4C;&#x5957;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x94FE;&#x5F0F;&#x65B9;&#x5F0F;&#x9A8C;&#x8BC1;&#x5176;&#x53D6;&#x503C;</li>\n</ul>\n<p>&#x90A3;&#x4E48;Should&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x9A8C;&#x8BC1;c&#x7684;&#x53D6;&#x503C;&#x4E3A;undefined&#x5462;&#xFF1F;&#x6BD4;&#x5982;&#x8FD9;&#x6837;&#x5199;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">c.should.equal(<span class=\"literal\">undefined</span>); <span class=\"comment\">// &#x8FD9;&#x6837;&#x5199;&#x662F;&#x9519;&#x8BEF;&#x7684;</span></div></pre></td></tr></table></figure>\n<h4 id=\"&#x539F;&#x7406;-1\"><a href=\"#&#x539F;&#x7406;-1\" class=\"headerlink\" title=\"&#x539F;&#x7406;:\"></a>&#x539F;&#x7406;:</h4><blockquote>\n<p>Should&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;should&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x8BE5;&#x5C5E;&#x6027;&#x63D0;&#x4F9B;&#x5404;&#x79CD;&#x65AD;&#x8A00;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x9A8C;&#x8BC1;&#x5BF9;&#x8C61;&#x7684;&#x53D6;&#x503C;&#x3002;&#x5BF9;&#x4E8E;undefined&#xFF0C;Should&#x65E0;&#x6CD5;&#x4E3A;&#x5176;&#x6DFB;&#x52A0;&#x5C5E;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x5931;&#x8D25;&#x3002;</p>\n</blockquote>\n<p>&#x901A;&#x8FC7;node&#x9A8C;&#x8BC1;&#x53D1;&#x73B0;&#xFF0C;&#x5BFC;&#x5165;Should&#x4E4B;&#x540E;&#xFF0C;&#x7A7A;&#x5BF9;&#x8C61;a&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;should&#x5C5E;&#x6027;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">&gt; a = {}</div><div class=\"line\">&gt; typeof a.should</div><div class=\"line\"><span class=\"string\">&apos;undefined&apos;</span></div><div class=\"line\">&gt; require(<span class=\"string\">&quot;should&quot;</span>)</div><div class=\"line\">&gt; typeof a.should</div><div class=\"line\"><span class=\"string\">&apos;object&apos;</span></div></pre></td></tr></table></figure>\n<h3 id=\"&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;-SuperTest\"><a href=\"#&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;-SuperTest\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3; - SuperTest\"></a>&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3; - <a href=\"https://github.com/visionmedia/supertest\">SuperTest</a></h3><p>Node.js&#x662F;&#x7528;&#x4E8E;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x800C;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x5176;&#x5B9E;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x7B49;&#x4EF7;&#x4E8E;&#x7F16;&#x5199;HTTP&#x63A5;&#x53E3;&#xFF0C;&#x4E3A;&#x524D;&#x7AEF;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;&#x90A3;&#x4E48;&#xFF0C;Node.js&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5219;&#x5C11;&#x4E0D;&#x4E86;&#x5BF9;HTTP&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p>&#x6211;&#x7528;Node.js&#x81EA;&#x5E26;&#x7684;<a href=\"https://nodejs.org/api/http.html\">HTTP</a>&#x6A21;&#x5757;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;HTTP&#x63A5;&#x53E3;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/server.js\">server.js</a></strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;http&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> server = http.createServer(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span></div><div class=\"line\">{</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>,</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;text/plain&quot;</span></div><div class=\"line\">    });</div><div class=\"line\"></div><div class=\"line\">    res.end(<span class=\"string\">&quot;Hello Fundebug&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">server.listen(<span class=\"number\">8000</span>);</div></pre></td></tr></table></figure>\n<p>&#x6309;&#x7167;Mocha&#x7684;&#x539F;&#x7406;&#xFF0C;&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;&#x5E76;&#x4E0D;&#x96BE;: &#x8BBF;&#x95EE;&#x63A5;&#x53E3;; &#x83B7;&#x53D6;&#x8FD4;&#x56DE;&#x6570;&#x636E;; &#x9A8C;&#x8BC1;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x4F7F;&#x7528;Node.js&#x539F;&#x751F;&#x7684;http&#x4E0E;assert&#x6A21;&#x5757;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test4.js\">test4.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;../server.js&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;http&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> assert = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">it(<span class=\"string\">&quot;should return hello fundebug&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    http.get(<span class=\"string\">&quot;http://localhost:8000&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span></div><div class=\"line\">    {</div><div class=\"line\">        res.setEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</div><div class=\"line\">        res.on(<span class=\"string\">&quot;data&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">text</span>)</span></div><div class=\"line\">        {</div><div class=\"line\">            assert.equal(res.statusCode, <span class=\"number\">200</span>);</div><div class=\"line\">            assert.equal(text, <span class=\"string\">&quot;Hello Fundebug&quot;</span>);</div><div class=\"line\">            done();</div><div class=\"line\">        });</div><div class=\"line\">    });</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x503C;&#x5F97;&#x7A0D;&#x5FAE;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x70B9;&#x662F;&#xFF0C;http.get&#x8BBF;&#x95EE;HTTP&#x63A5;&#x53E3;&#x662F;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x3002;<strong>Mocha&#x5728;&#x6D4B;&#x8BD5;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x662F;&#x9700;&#x8981;&#x4E3A;it&#x51FD;&#x6570;&#x6DFB;&#x52A0;&#x56DE;&#x8C03;&#x51FD;&#x6570;done</strong>&#xFF0C;&#x5728;&#x65AD;&#x8A00;&#x7ED3;&#x675F;&#x7684;&#x5730;&#x65B9;&#x8C03;&#x7528;done&#xFF0C;&#x8FD9;&#x6837;Mocha&#x624D;&#x80FD;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x7ED3;&#x675F;&#x8FD9;&#x4E2A;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p>&#x65E2;&#x7136;Node.js&#x81EA;&#x5E26;&#x7684;&#x6A21;&#x5757;&#x5C31;&#x80FD;&#x591F;&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;&#x4E86;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD8;&#x9700;&#x8981;<a href=\"https://github.com/visionmedia/supertest\">SuperTest</a>&#x5462;&#xFF1F;&#x4E0D;&#x59A8;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;<strong><a href=\"https://github.com/Fundebug/nodejs-unit-test/blob/master/test/test5.js\">test5.js</a></strong>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;supertest&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../server.js&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> assert = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;assert&quot;</span>);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">it(<span class=\"string\">&quot;should return hello fundebug&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    request(server)</div><div class=\"line\">        .get(<span class=\"string\">&quot;/&quot;</span>)</div><div class=\"line\">        .expect(<span class=\"number\">200</span>)</div><div class=\"line\">        .expect(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span></div><div class=\"line\">        {</div><div class=\"line\">            assert.equal(res.text, <span class=\"string\">&quot;Hello Fundebug&quot;</span>);</div><div class=\"line\">        })</div><div class=\"line\">        .end(done);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x6BD4;&#x4E24;&#x4E2A;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x540E;&#x8005;&#x7B80;&#x6D01;&#x5F88;&#x591A;&#x3002;</p>\n<h4 id=\"&#x539F;&#x7406;-2\"><a href=\"#&#x539F;&#x7406;-2\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h4><blockquote>\n<p>SuperTest&#x5C01;&#x88C5;&#x4E86;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x7B80;&#x5355;&#x7684;expect&#x65AD;&#x8A00;&#x6765;&#x5224;&#x5B9A;&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x5BF9;&#x4E8E;POST&#x63A5;&#x53E3;&#xFF0C;&#x4F7F;&#x7528;SuperTest&#x7684;&#x4F18;&#x52BF;&#x5C06;&#x66F4;&#x52A0;&#x660E;&#x663E;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;Node.js&#x7684;http&#x6A21;&#x5757;&#x53D1;&#x9001;POST&#x8BF7;&#x6C42;&#x662F;&#x5F88;&#x9EBB;&#x70E6;&#x7684;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"><a href=\"#&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\" class=\"headerlink\" title=\"&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;\"></a>&#x8981;&#x505A;&#x591A;&#x5C11;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</h3><p>&#x672C;&#x6587;&#x6240;&#x5199;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6848;&#x4F8B;&#xFF0C;&#x90FD;&#x5F88;&#x7B80;&#x5355;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5934;&#x75DB;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x4FEE;&#x6539;&#x4E86;&#x4EE3;&#x7801;&#x6709;&#x65F6;&#x610F;&#x5473;&#x7740;&#x5FC5;&#x987B;&#x4FEE;&#x6539;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x5199;&#x4E86;&#x65B0;&#x7684;&#x51FD;&#x6570;&#x6216;&#x8005;API&#x5C31;&#x5F97;&#x5199;&#x65B0;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;&#x5982;&#x679C;&#x8F83;&#x771F;&#x8D77;&#x6765;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x53EF;&#x4EE5;&#x6CA1;&#x5B8C;&#x6CA1;&#x4E86;&#x5730;&#x5199;&#xFF0C;&#x4F46;&#x8FD9;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002;&#x800C;&#x6839;&#x636E;&#x4E8C;&#x516B;&#x539F;&#x7406;&#xFF0C;20%&#x7684;&#x6D4B;&#x8BD5;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;80%&#x7684;&#x95EE;&#x9898;&#x3002;&#x5269;&#x4E0B;&#x7684;20%&#x95EE;&#x9898;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#x6211;&#x4EEC;&#x662F;&#x529B;&#x4E0D;&#x4ECE;&#x5FC3;&#x7684;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x60F3;&#x901A;&#x8FC7;&#x6D4B;&#x8BD5;&#x6D88;&#x9664;&#x6240;&#x6709;BUG&#xFF0C;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;&#x751F;&#x4EA7;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x5B9E;&#x65F6;&#x9519;&#x8BEF;&#x76D1;&#x6D4B;&#x662F;&#x975E;&#x5E38;&#x6709;&#x5FC5;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;<a href=\"https://fundebug.com/\">Fundebug</a>&#x52AA;&#x529B;&#x5728;&#x505A;&#x7684;&#x4E8B;&#x60C5;:) &#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;</strong>:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/03/20/nodejs-unit-test/nodejs-qq-group.jpeg\"><br></div>\n\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html\">&#x6D4B;&#x8BD5;&#x6846;&#x67B6; Mocha &#x5B9E;&#x4F8B;&#x6559;&#x7A0B; - &#x962E;&#x4E00;&#x5CF0;</a></li>\n<li><a href=\"http://coolshell.cn/articles/8209.html\">&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x8981;&#x505A;&#x591A;&#x7EC6; - &#x9177;&#x58F3;</a></li>\n<li><a href=\"http://www.yinwang.org/blog-cn/2016/09/14/tests\">&#x6D4B;&#x8BD5;&#x7684;&#x9053;&#x7406; -&#x738B;&#x57A0;</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Pareto_principle\">Pareto principle</a></li>\n</ul>"},{"title":"Fundebug","date":"2017-03-29T13:00:00.000Z","_content":"\nJavaScriptFundebug************\n\n<!-- more -->\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"user-behavior-track/fundebug-track-behavior.png\" />\n</div>\n\n### \n\n:\n\n- ...\n- \n- \n- Source Map\n\n\n\n********\n\n- \n- \n- ?\n\n\n\n\n### \n\nFundebug****\n\nFundebug:\n\n- \n- \n- \n\n****:\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"user-behavior-track/user-behavior-track.png\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/03/29/user-behavior-track.md","raw":"---\n\ntitle: Fundebug\n\ndate: 2017-03-29 21:00:00\n\ntags: [Fundebug, JavaScript]\n\n---\n\nJavaScriptFundebug************\n\n<!-- more -->\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"user-behavior-track/fundebug-track-behavior.png\" />\n</div>\n\n### \n\n:\n\n- ...\n- \n- \n- Source Map\n\n\n\n********\n\n- \n- \n- ?\n\n\n\n\n### \n\nFundebug****\n\nFundebug:\n\n- \n- \n- \n\n****:\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"user-behavior-track/user-behavior-track.png\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"2017/03/29/user-behavior-track","published":1,"updated":"2017-04-10T02:12:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtn4001g71fyjz4tb0kv","content":"<p>&#x5BF9;&#x4E8E;&#x524D;&#x7AEF;JavaScript&#x7684;&#x9519;&#x8BEF;&#xFF0C;Fundebug&#x53EF;&#x4EE5;&#x8BB0;&#x5F55;&#x51FA;&#x9519;&#x524D;&#x7684;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF0C;&#x6BD4;&#x5982;<strong>&#x70B9;&#x51FB;</strong>&#x3001;<strong>&#x9875;&#x9762;&#x8DF3;&#x8F6C;</strong>&#x3001;<strong>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</strong>&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x884C;&#x4E3A;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x60A8;&#x56DE;&#x6EAF;&#x9519;&#x8BEF;&#x51FA;&#x73B0;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4ECE;&#x800C;&#x66F4;&#x5FEB;&#x5730;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#x3002;</p>\n<a id=\"more\"></a>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/03/29/user-behavior-track/fundebug-track-behavior.png\"><br></div>\n\n<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;</h3><p>&#x4E00;&#x76F4;&#x4EE5;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x4ECE;&#x9519;&#x8BEF;&#x672C;&#x8EAB;&#x6765;&#x5E2E;&#x52A9;&#x7528;&#x6237;&#x5B9A;&#x4F4D;&#x548C;&#x5206;&#x6790;&#x9519;&#x8BEF;&#x7684;:</p>\n<ul>\n<li>&#x6293;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x884C;&#x5217;&#x53F7;&#xFF0C;&#x9519;&#x8BEF;&#x6808;&#x2026;</li>\n<li>&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x6846;&#x67B6;</li>\n<li>&#x4F7F;&#x7528;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5;&#x5BF9;&#x9519;&#x8BEF;&#x8FDB;&#x884C;&#x667A;&#x80FD;&#x805A;&#x5408;</li>\n<li>&#x901A;&#x8FC7;Source Map&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#x548C;&#x51FA;&#x9519;&#x4EE3;&#x7801;</li>\n</ul>\n<p>&#x4E00;&#x822C;&#x6765;&#x8BB2;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E5F;&#x8DB3;&#x591F;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5F00;&#x53D1;&#x8005;&#x5BF9;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x901A;&#x5E38;&#x6BD4;&#x8F83;&#x719F;&#x6089;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#xFF0C;&#x9519;&#x8BEF;&#x672C;&#x8EAB;&#x7684;&#x4FE1;&#x606F;&#x662F;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x7ED9;&#x63D0;&#x4F9B;&#x5F00;&#x53D1;&#x8005;&#x4E00;&#x4E2A;<strong>&#x51FA;&#x9519;&#x573A;&#x666F;</strong>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x6709;&#x65F6;&#x5E76;&#x4E0D;&#x6E05;&#x695A;<strong>&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x662F;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;&#x7684;</strong>&#xFF1A;</p>\n<ul>\n<li>&#x7528;&#x6237;&#x70B9;&#x51FB;&#x4E86;&#x54EA;&#x4E9B;&#x6309;&#x94AE;&#xFF1F;</li>\n<li>&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x54EA;&#x4E9B;&#x9875;&#x9762;&#xFF1F;</li>\n<li>&#x7528;&#x6237;&#x53D1;&#x8D77;&#x4E86;&#x54EA;&#x4E9B;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;?</li>\n</ul>\n<p>&#x8FD9;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x884C;&#x4E3A;&#x4FE1;&#x606F;&#x5F80;&#x5F80;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x4ECE;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;&#x51FA;&#x9519;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4ECE;&#x800C;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#x3002;</p>\n<h3 id=\"&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"><a href=\"#&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"></a>&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;</h3><p>Fundebug&#x4E13;&#x6CE8;&#x4E0E;&#x5E94;&#x7528;&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#xFF0C;&#x56E0;&#x6B64;<strong>&#x53EA;&#x4F1A;&#x8BB0;&#x5F55;&#x51FA;&#x9519;&#x524D;&#x7684;&#x7528;&#x6237;&#x884C;&#x4E3A;</strong>&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x610F;&#x4E8E;&#x76D1;&#x63A7;&#x6240;&#x6709;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x3002;</p>\n<p>&#x76EE;&#x524D;&#xFF0C;Fundebug&#x4F1A;&#x8BB0;&#x5F55;&#x8FD9;&#x4E9B;&#x7528;&#x6237;&#x884C;&#x4E3A;:</p>\n<ul>\n<li>&#x70B9;&#x51FB;</li>\n<li>&#x9875;&#x9762;&#x8DF3;&#x8F6C;</li>\n<li>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</li>\n</ul>\n<p>&#x6211;&#x4EEC;&#x6536;&#x5230;&#x7684;&#x67D0;&#x4E2A;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x7684;<strong>&#x7528;&#x6237;&#x884C;&#x4E3A;</strong>&#x5982;&#x4E0B;:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/29/user-behavior-track/user-behavior-track.png\"><br></div>\n\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x7528;&#x6237;&#x4ECE;&#x4E3B;&#x9875;&#x8DF3;&#x8F6C;&#x5230;&#x63A7;&#x5236;&#x53F0;&#x7684;&#x65F6;&#x5019;&#x51FA;&#x73B0;&#x4E86;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x8BB0;&#x5F55;&#x5176;&#x4ED6;&#x884C;&#x4E3A;&#x7684;&#x8BDD;&#xFF0C;&#x6B22;&#x8FCE;&#x4E0E;&#x6211;&#x4EEC;&#x8054;&#x7CFB;&#x3002;</p>\n","excerpt":"<p>&#x5BF9;&#x4E8E;&#x524D;&#x7AEF;JavaScript&#x7684;&#x9519;&#x8BEF;&#xFF0C;Fundebug&#x53EF;&#x4EE5;&#x8BB0;&#x5F55;&#x51FA;&#x9519;&#x524D;&#x7684;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF0C;&#x6BD4;&#x5982;<strong>&#x70B9;&#x51FB;</strong>&#x3001;<strong>&#x9875;&#x9762;&#x8DF3;&#x8F6C;</strong>&#x3001;<strong>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</strong>&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x884C;&#x4E3A;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x60A8;&#x56DE;&#x6EAF;&#x9519;&#x8BEF;&#x51FA;&#x73B0;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4ECE;&#x800C;&#x66F4;&#x5FEB;&#x5730;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#x3002;</p>","more":"<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/03/29/user-behavior-track/fundebug-track-behavior.png\"><br></div>\n\n<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;</h3><p>&#x4E00;&#x76F4;&#x4EE5;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x4ECE;&#x9519;&#x8BEF;&#x672C;&#x8EAB;&#x6765;&#x5E2E;&#x52A9;&#x7528;&#x6237;&#x5B9A;&#x4F4D;&#x548C;&#x5206;&#x6790;&#x9519;&#x8BEF;&#x7684;:</p>\n<ul>\n<li>&#x6293;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x884C;&#x5217;&#x53F7;&#xFF0C;&#x9519;&#x8BEF;&#x6808;&#x2026;</li>\n<li>&#x517C;&#x5BB9;&#x5404;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x6846;&#x67B6;</li>\n<li>&#x4F7F;&#x7528;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5;&#x5BF9;&#x9519;&#x8BEF;&#x8FDB;&#x884C;&#x667A;&#x80FD;&#x805A;&#x5408;</li>\n<li>&#x901A;&#x8FC7;Source Map&#x8FD8;&#x539F;&#x771F;&#x5B9E;&#x7684;&#x51FA;&#x9519;&#x4F4D;&#x7F6E;&#x548C;&#x51FA;&#x9519;&#x4EE3;&#x7801;</li>\n</ul>\n<p>&#x4E00;&#x822C;&#x6765;&#x8BB2;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E5F;&#x8DB3;&#x591F;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5F00;&#x53D1;&#x8005;&#x5BF9;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x901A;&#x5E38;&#x6BD4;&#x8F83;&#x719F;&#x6089;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#xFF0C;&#x9519;&#x8BEF;&#x672C;&#x8EAB;&#x7684;&#x4FE1;&#x606F;&#x662F;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x7ED9;&#x63D0;&#x4F9B;&#x5F00;&#x53D1;&#x8005;&#x4E00;&#x4E2A;<strong>&#x51FA;&#x9519;&#x573A;&#x666F;</strong>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x6709;&#x65F6;&#x5E76;&#x4E0D;&#x6E05;&#x695A;<strong>&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x662F;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;&#x7684;</strong>&#xFF1A;</p>\n<ul>\n<li>&#x7528;&#x6237;&#x70B9;&#x51FB;&#x4E86;&#x54EA;&#x4E9B;&#x6309;&#x94AE;&#xFF1F;</li>\n<li>&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x54EA;&#x4E9B;&#x9875;&#x9762;&#xFF1F;</li>\n<li>&#x7528;&#x6237;&#x53D1;&#x8D77;&#x4E86;&#x54EA;&#x4E9B;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;?</li>\n</ul>\n<p>&#x8FD9;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x884C;&#x4E3A;&#x4FE1;&#x606F;&#x5F80;&#x5F80;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x4ECE;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;&#x51FA;&#x9519;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4ECE;&#x800C;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#x3002;</p>\n<h3 id=\"&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"><a href=\"#&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;\"></a>&#x5982;&#x4F55;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x884C;&#x4E3A;&#xFF1F;</h3><p>Fundebug&#x4E13;&#x6CE8;&#x4E0E;&#x5E94;&#x7528;&#x9519;&#x8BEF;&#x76D1;&#x63A7;&#xFF0C;&#x56E0;&#x6B64;<strong>&#x53EA;&#x4F1A;&#x8BB0;&#x5F55;&#x51FA;&#x9519;&#x524D;&#x7684;&#x7528;&#x6237;&#x884C;&#x4E3A;</strong>&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x610F;&#x4E8E;&#x76D1;&#x63A7;&#x6240;&#x6709;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x3002;</p>\n<p>&#x76EE;&#x524D;&#xFF0C;Fundebug&#x4F1A;&#x8BB0;&#x5F55;&#x8FD9;&#x4E9B;&#x7528;&#x6237;&#x884C;&#x4E3A;:</p>\n<ul>\n<li>&#x70B9;&#x51FB;</li>\n<li>&#x9875;&#x9762;&#x8DF3;&#x8F6C;</li>\n<li>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</li>\n</ul>\n<p>&#x6211;&#x4EEC;&#x6536;&#x5230;&#x7684;&#x67D0;&#x4E2A;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x7684;<strong>&#x7528;&#x6237;&#x884C;&#x4E3A;</strong>&#x5982;&#x4E0B;:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/29/user-behavior-track/user-behavior-track.png\"><br></div>\n\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x7528;&#x6237;&#x4ECE;&#x4E3B;&#x9875;&#x8DF3;&#x8F6C;&#x5230;&#x63A7;&#x5236;&#x53F0;&#x7684;&#x65F6;&#x5019;&#x51FA;&#x73B0;&#x4E86;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x8BB0;&#x5F55;&#x5176;&#x4ED6;&#x884C;&#x4E3A;&#x7684;&#x8BDD;&#xFF0C;&#x6B22;&#x8FCE;&#x4E0E;&#x6211;&#x4EEC;&#x8054;&#x7CFB;&#x3002;</p>"},{"title":"Node.jsDocker","date":"2017-03-26T13:00:00.000Z","_content":"\n\n[Node.js Best Practices - How to Become a Better Developer in 2017](https://blog.risingstack.com/node-js-best-practices-2017/)[Fundebug](https://fundebug.com/):\n\n- ES6\n- Promise\n- LTS\n- [Docker](https://www.docker.com/)\n- ...\n\n<!-- more -->\n\nES6PromiseLTS[Docker](https://www.docker.com/)[Node](https://nodejs.org/api/)!\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-docker/nodejs-docker.png\" />\n</div>\n\n**GitHub:** [Fundebug/nodejs-docker](https://github.com/Fundebug/nodejs-docker)\n\n### Docker?\n\nDocker****DockerDocker\n\n##### Docker\n\nLinux[pstree](http://man7.org/linux/man-pages/man1/pstree.1.html):\n\n```bash\npstree\ninitVBoxService7*[{VBoxService}]\n     acpid\n     atd\n     cron\n     dbus-daemon\n     dhclient\n     dockerddocker-containedocker-containeredis-server2*[{redis-server}]\n                                                8*[{docker-containe}]\n                               docker-containemongod16*[{mongod}]\n                                                8*[{docker-containe}]\n                               11*[{docker-containe}]\n              13*[{dockerd}]\n     6*[getty]\n     influxd9*[{influxd}]\n     irqbalance\n     puppet{puppet}\n     rpc.idmapd\n     rpc.statd\n     rpcbind\n     rsyslogd3*[{rsyslogd}]\n     ruby{ruby}\n     sshdsshdsshdzshpstree\n           sshdsshdzsh\n           sshdsshdzshmongo2*[{mongo}]\n     systemd-logind\n     systemd-udevd\n     upstart-file-br\n     upstart-socket-\n     upstart-udev-br\n```\n\ninit(root)PID1\n\nDockerLinuxNamesapceCgroups\n\nNamespaceUTDIPCPIDMountUserNetworkPIDNode.js\n\nCgroupsCPUCgroups1G\n\nDocker**Docker**pstree2: mongodbredis\n\n\n##### Docker\n\nNamespaceCgroups[Linux-VServer](http://linux-vserver.org/Welcome_to_Linux-VServer.org)[OpenVZ](https://openvz.org/Main_Page)[LXC](https://linuxcontainers.org/)Docker**Docker****Dockerfile**\n\nLinuxNode.jsDockerNodeNPM**Docker**\n\n**Docker****Docker**()Node.jsDocker\n\n**Docker****Dockerfile**(Dockerfile):\n\n```\n# Ubuntu\nFROM ubuntu\n\n# Node.jsNPM\nRUN apt-get update && apt-get -y install nodejs npm\n\n# NPM:Express\nRUN npm install express\n\n# \nADD app.js /\n```\n\n**FROM****RUN****ADD**DockerfileDockerfileDockerfile**docker build**DockerDockerDockerapp.js:\n\n```js\nvar express = require(\"express\");\nvar app = express();\n\napp.get(\"/\", function(req, res)\n{\n    res.send(\"Hello Fundebug!\\n\");\n});\n\napp.listen(3000);\n```\n\nDockerfile**Docker******gitDockerfile\n\n### Docker?\n\nDocker\n\n##### Docker\n\nNode.jsMySQL; MemcachedNginx; ...****\n\nDockerDockerfile: \n\n- Docker: docker build\n- Docker: docker push\n- Docker: docker pull\n- Docker: docker run\n\n##### Docker\n\n****************Node.jsnpmNode.jsGitlabAWSS3\n\nDocker****************DockerDockerfileDockerfile[Jenkins](https://jenkins.io/)\n\nDockerfileDockerNode.jsNPM************DockerDockerNode.jsNode.js\n\n##### Docker\n\n1: NginxNode.jsMySQL...\n\nDockerDockerDocker[Mesos](http://mesos.apache.org/)[Kubernetes](https://kubernetes.io/)[Docker Swarm](https://github.com/docker/swarm)************\n\n### Docker?\n\n##### Dockerfile\n\n[Dockerfile](https://github.com/Fundebug/nodejs-docker/blob/master/Dockerfile):\n\n```\n# DaoCloudUbuntu\nFROM daocloud.io/library/ubuntu:14.04\n\n# \nMAINTAINER Fundebug <help@fundebug.com>\n\n# \nRUN sudo sh -c \"echo 'Asia/Shanghai' > /etc/timezone\" && \\\n    sudo dpkg-reconfigure -f noninteractive tzdata\n\n# Ubuntu\nRUN echo '\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n'\\\n> /etc/apt/sources.list\n\n# node v6.10.1\nRUN sudo apt-get update && sudo apt-get install -y wget\n\n# Node.js v6.10.1\nRUN wget https://npm.taobao.org/mirrors/node/v6.10.1/node-v6.10.1-linux-x64.tar.gz && \\\n    tar -C /usr/local --strip-components 1 -xzf node-v6.10.1-linux-x64.tar.gz && \\\n    rm node-v6.10.1-linux-x64.tar.gz \n\nWORKDIR /app\n\n# npm\nADD package.json /app/package.json\n\n# npm\nRUN npm install --production -d --registry=https://registry.npm.taobao.org\n\n# \nADD . /app\n\n# app.js\nCMD [\"node\", \"/app/app.js\"]\n```\n\n\n\n- [DaoCloud](https://www.daocloud.io/)Dockerubuntunpm;\n- Asia/Shanghai;\n- .dockerignoreDocker.gitigore;\n\n**package.json**Dockerpackage.jsonnpm: package.jsonnpm\n\n##### Docker\n\n**docker build**Docker\n\n```bash\nsudo docker build -t fundebug/nodejs .\n```\n\n-t\n\n**docker images**Docker\n\n```bash\nsudo docker images\nREPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE\nfundebug/nodejs               latest              64530ce811a1        32 minutes ago      266.4 MB\ndaocloud.io/library/ubuntu    14.04               b969ab9f929b        9 weeks ago         188 MB\n```\n\nfundebug/nodejs266.4MBubuntu80MB\n\n##### Docker\n\n**docker run**Docker\n\n```bash\nsudo docker run -d --net=host --name=hello-fundebug fundebug/nodejs\n```\n\n-d--nethost--name\n\n**docker ps**Docker\n\n```bash\nsudo docker ps\nCONTAINER ID        IMAGE                             COMMAND                  CREATED             STATUS              PORTS               NAMES\ne8eb5473970c        fundebug/nodejs                   \"node /app/app.js\"       37 minutes ago      Up 37 minutes                           hello-\n```\n\nCOMMAND\"node /app/app.js\"DockerfileCMD**docker exec**ps****\n\n```bash\nsudo docker exec hello-fundebug ps -f\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 15:14 ?        00:00:00 node /app/app.js\n```\n\n1node**node /app/app.js**LinuxPID1initNamespacePID1\n\n##### \n\ncurl:\n\n```bash\ncurl localhost:3000\nHello Fundebug!\n```\n\n### Docker\n\nDockerDockerDocker****Docker\n\nNode.jsDocker[Fundebug](https://fundebug.com/)**Node.js**Docker\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-docker/nodejs-qq-group.jpeg\" />\n</div>\n\n\n### \n\n- [DOCKERLINUX NAMESPACE](http://coolshell.cn/articles/17010.html)\n- [DOCKERLINUX NAMESPACE](http://coolshell.cn/articles/17029.html)\n- [DOCKERLINUX CGROUP](http://coolshell.cn/articles/17049.html)\n- [GITLAB](http://coolshell.cn/articles/17680.html)\n- [AWS  S3 ](http://coolshell.cn/articles/17737.html)\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/03/26/nodejs-docker.md","raw":"---\n\ntitle: Node.jsDocker\n\ndate: 2017-03-26 21:00:00\n\ntags: [Node.js, Docker]\n\n---\n\n\n[Node.js Best Practices - How to Become a Better Developer in 2017](https://blog.risingstack.com/node-js-best-practices-2017/)[Fundebug](https://fundebug.com/):\n\n- ES6\n- Promise\n- LTS\n- [Docker](https://www.docker.com/)\n- ...\n\n<!-- more -->\n\nES6PromiseLTS[Docker](https://www.docker.com/)[Node](https://nodejs.org/api/)!\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-docker/nodejs-docker.png\" />\n</div>\n\n**GitHub:** [Fundebug/nodejs-docker](https://github.com/Fundebug/nodejs-docker)\n\n### Docker?\n\nDocker****DockerDocker\n\n##### Docker\n\nLinux[pstree](http://man7.org/linux/man-pages/man1/pstree.1.html):\n\n```bash\npstree\ninitVBoxService7*[{VBoxService}]\n     acpid\n     atd\n     cron\n     dbus-daemon\n     dhclient\n     dockerddocker-containedocker-containeredis-server2*[{redis-server}]\n                                                8*[{docker-containe}]\n                               docker-containemongod16*[{mongod}]\n                                                8*[{docker-containe}]\n                               11*[{docker-containe}]\n              13*[{dockerd}]\n     6*[getty]\n     influxd9*[{influxd}]\n     irqbalance\n     puppet{puppet}\n     rpc.idmapd\n     rpc.statd\n     rpcbind\n     rsyslogd3*[{rsyslogd}]\n     ruby{ruby}\n     sshdsshdsshdzshpstree\n           sshdsshdzsh\n           sshdsshdzshmongo2*[{mongo}]\n     systemd-logind\n     systemd-udevd\n     upstart-file-br\n     upstart-socket-\n     upstart-udev-br\n```\n\ninit(root)PID1\n\nDockerLinuxNamesapceCgroups\n\nNamespaceUTDIPCPIDMountUserNetworkPIDNode.js\n\nCgroupsCPUCgroups1G\n\nDocker**Docker**pstree2: mongodbredis\n\n\n##### Docker\n\nNamespaceCgroups[Linux-VServer](http://linux-vserver.org/Welcome_to_Linux-VServer.org)[OpenVZ](https://openvz.org/Main_Page)[LXC](https://linuxcontainers.org/)Docker**Docker****Dockerfile**\n\nLinuxNode.jsDockerNodeNPM**Docker**\n\n**Docker****Docker**()Node.jsDocker\n\n**Docker****Dockerfile**(Dockerfile):\n\n```\n# Ubuntu\nFROM ubuntu\n\n# Node.jsNPM\nRUN apt-get update && apt-get -y install nodejs npm\n\n# NPM:Express\nRUN npm install express\n\n# \nADD app.js /\n```\n\n**FROM****RUN****ADD**DockerfileDockerfileDockerfile**docker build**DockerDockerDockerapp.js:\n\n```js\nvar express = require(\"express\");\nvar app = express();\n\napp.get(\"/\", function(req, res)\n{\n    res.send(\"Hello Fundebug!\\n\");\n});\n\napp.listen(3000);\n```\n\nDockerfile**Docker******gitDockerfile\n\n### Docker?\n\nDocker\n\n##### Docker\n\nNode.jsMySQL; MemcachedNginx; ...****\n\nDockerDockerfile: \n\n- Docker: docker build\n- Docker: docker push\n- Docker: docker pull\n- Docker: docker run\n\n##### Docker\n\n****************Node.jsnpmNode.jsGitlabAWSS3\n\nDocker****************DockerDockerfileDockerfile[Jenkins](https://jenkins.io/)\n\nDockerfileDockerNode.jsNPM************DockerDockerNode.jsNode.js\n\n##### Docker\n\n1: NginxNode.jsMySQL...\n\nDockerDockerDocker[Mesos](http://mesos.apache.org/)[Kubernetes](https://kubernetes.io/)[Docker Swarm](https://github.com/docker/swarm)************\n\n### Docker?\n\n##### Dockerfile\n\n[Dockerfile](https://github.com/Fundebug/nodejs-docker/blob/master/Dockerfile):\n\n```\n# DaoCloudUbuntu\nFROM daocloud.io/library/ubuntu:14.04\n\n# \nMAINTAINER Fundebug <help@fundebug.com>\n\n# \nRUN sudo sh -c \"echo 'Asia/Shanghai' > /etc/timezone\" && \\\n    sudo dpkg-reconfigure -f noninteractive tzdata\n\n# Ubuntu\nRUN echo '\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n'\\\n> /etc/apt/sources.list\n\n# node v6.10.1\nRUN sudo apt-get update && sudo apt-get install -y wget\n\n# Node.js v6.10.1\nRUN wget https://npm.taobao.org/mirrors/node/v6.10.1/node-v6.10.1-linux-x64.tar.gz && \\\n    tar -C /usr/local --strip-components 1 -xzf node-v6.10.1-linux-x64.tar.gz && \\\n    rm node-v6.10.1-linux-x64.tar.gz \n\nWORKDIR /app\n\n# npm\nADD package.json /app/package.json\n\n# npm\nRUN npm install --production -d --registry=https://registry.npm.taobao.org\n\n# \nADD . /app\n\n# app.js\nCMD [\"node\", \"/app/app.js\"]\n```\n\n\n\n- [DaoCloud](https://www.daocloud.io/)Dockerubuntunpm;\n- Asia/Shanghai;\n- .dockerignoreDocker.gitigore;\n\n**package.json**Dockerpackage.jsonnpm: package.jsonnpm\n\n##### Docker\n\n**docker build**Docker\n\n```bash\nsudo docker build -t fundebug/nodejs .\n```\n\n-t\n\n**docker images**Docker\n\n```bash\nsudo docker images\nREPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE\nfundebug/nodejs               latest              64530ce811a1        32 minutes ago      266.4 MB\ndaocloud.io/library/ubuntu    14.04               b969ab9f929b        9 weeks ago         188 MB\n```\n\nfundebug/nodejs266.4MBubuntu80MB\n\n##### Docker\n\n**docker run**Docker\n\n```bash\nsudo docker run -d --net=host --name=hello-fundebug fundebug/nodejs\n```\n\n-d--nethost--name\n\n**docker ps**Docker\n\n```bash\nsudo docker ps\nCONTAINER ID        IMAGE                             COMMAND                  CREATED             STATUS              PORTS               NAMES\ne8eb5473970c        fundebug/nodejs                   \"node /app/app.js\"       37 minutes ago      Up 37 minutes                           hello-\n```\n\nCOMMAND\"node /app/app.js\"DockerfileCMD**docker exec**ps****\n\n```bash\nsudo docker exec hello-fundebug ps -f\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 15:14 ?        00:00:00 node /app/app.js\n```\n\n1node**node /app/app.js**LinuxPID1initNamespacePID1\n\n##### \n\ncurl:\n\n```bash\ncurl localhost:3000\nHello Fundebug!\n```\n\n### Docker\n\nDockerDockerDocker****Docker\n\nNode.jsDocker[Fundebug](https://fundebug.com/)**Node.js**Docker\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-docker/nodejs-qq-group.jpeg\" />\n</div>\n\n\n### \n\n- [DOCKERLINUX NAMESPACE](http://coolshell.cn/articles/17010.html)\n- [DOCKERLINUX NAMESPACE](http://coolshell.cn/articles/17029.html)\n- [DOCKERLINUX CGROUP](http://coolshell.cn/articles/17049.html)\n- [GITLAB](http://coolshell.cn/articles/17680.html)\n- [AWS  S3 ](http://coolshell.cn/articles/17737.html)\n\n\n\n\n\n\n\n\n\n","slug":"2017/03/26/nodejs-docker","published":1,"updated":"2017-03-26T12:18:55.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtn6001j71fyuivg2jhk","content":"<p><a href=\"https://blog.risingstack.com/node-js-best-practices-2017/\" target=\"_blank\" rel=\"external\">Node.js Best Practices - How to Become a Better Developer in 2017</a>&#x63D0;&#x5230;&#x7684;&#x51E0;&#x70B9;&#xFF0C;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x6DF1;&#x6709;&#x540C;&#x611F;:</p>\n<ul>\n<li>&#x4F7F;&#x7528;ES6</li>\n<li>&#x4F7F;&#x7528;Promise</li>\n<li>&#x4F7F;&#x7528;LTS</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a></li>\n<li>&#x2026;</li>\n</ul>\n<a id=\"more\"></a>\n<p>&#x60F3;&#x5FC5;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;ES6&#xFF0C;Promise&#x4EE5;&#x53CA;LTS&#xFF0C;&#x90A3;<a href=\"https://www.docker.com/\" target=\"_blank\" rel=\"external\">Docker</a>&#x662F;&#x5565;&#x73A9;&#x610F;&#x554A;&#xFF1F;&#x7FFB;&#x904D;<a href=\"https://nodejs.org/api/\" target=\"_blank\" rel=\"external\">Node&#x6587;&#x6863;</a>&#x4E5F;&#x6CA1;&#x89C1;&#x8E2A;&#x8FF9;&#x554A;!</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/26/nodejs-docker/nodejs-docker.png\"><br></div>\n\n<p><strong>GitHub&#x4ED3;&#x5E93;:</strong> <a href=\"https://github.com/Fundebug/nodejs-docker\" target=\"_blank\" rel=\"external\">Fundebug/nodejs-docker</a></p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Docker\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Docker\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Docker?\"></a>&#x4EC0;&#x4E48;&#x662F;Docker?</h3><p>Docker&#x662F;&#x6700;&#x6D41;&#x884C;&#x7684;&#x7684;&#x5BB9;&#x5668;&#x5DE5;&#x5177;&#xFF0C;<strong>&#x6CA1;&#x6709;&#x4E4B;&#x4E00;</strong>&#x3002;&#x672C;&#x6587;&#x5E76;&#x4E0D;&#x6253;&#x7B97;&#x6DF1;&#x5165;&#x4ECB;&#x7ECD;Docker&#xFF0C;&#x4E0D;&#x8FC7;&#x53EF;&#x4EE5;&#x4ECE;&#x51E0;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x7406;&#x89E3;Docker&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x5728;Linux&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x6784;&#x6210;&#x4E86;&#x4E00;&#x68F5;&#x6811;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"http://man7.org/linux/man-pages/man1/pstree.1.html\" target=\"_blank\" rel=\"external\">pstree</a>&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x67E5;&#x770B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">pstree</div><div class=\"line\">init&#x2500;&#x252C;&#x2500;VBoxService&#x2500;&#x2500;&#x2500;7*[{VBoxService}]</div><div class=\"line\">     &#x251C;&#x2500;acpid</div><div class=\"line\">     &#x251C;&#x2500;atd</div><div class=\"line\">     &#x251C;&#x2500;cron</div><div class=\"line\">     &#x251C;&#x2500;dbus-daemon</div><div class=\"line\">     &#x251C;&#x2500;dhclient</div><div class=\"line\">     &#x251C;&#x2500;dockerd&#x2500;&#x252C;&#x2500;docker-containe&#x2500;&#x252C;&#x2500;docker-containe&#x2500;&#x252C;&#x2500;redis-server&#x2500;&#x2500;&#x2500;2*[{redis-server}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x2502;                 &#x2514;&#x2500;8*[{docker-containe}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x251C;&#x2500;docker-containe&#x2500;&#x252C;&#x2500;mongod&#x2500;&#x2500;&#x2500;16*[{mongod}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x2502;                 &#x2514;&#x2500;8*[{docker-containe}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x2514;&#x2500;11*[{docker-containe}]</div><div class=\"line\">     &#x2502;         &#x2514;&#x2500;13*[{dockerd}]</div><div class=\"line\">     &#x251C;&#x2500;6*[getty]</div><div class=\"line\">     &#x251C;&#x2500;influxd&#x2500;&#x2500;&#x2500;9*[{influxd}]</div><div class=\"line\">     &#x251C;&#x2500;irqbalance</div><div class=\"line\">     &#x251C;&#x2500;puppet&#x2500;&#x2500;&#x2500;{puppet}</div><div class=\"line\">     &#x251C;&#x2500;rpc.idmapd</div><div class=\"line\">     &#x251C;&#x2500;rpc.statd</div><div class=\"line\">     &#x251C;&#x2500;rpcbind</div><div class=\"line\">     &#x251C;&#x2500;rsyslogd&#x2500;&#x2500;&#x2500;3*[{rsyslogd}]</div><div class=\"line\">     &#x251C;&#x2500;ruby&#x2500;&#x2500;&#x2500;{ruby}</div><div class=\"line\">     &#x251C;&#x2500;sshd&#x2500;&#x252C;&#x2500;sshd&#x2500;&#x2500;&#x2500;sshd&#x2500;&#x2500;&#x2500;zsh&#x2500;&#x2500;&#x2500;pstree</div><div class=\"line\">     &#x2502;      &#x251C;&#x2500;sshd&#x2500;&#x2500;&#x2500;sshd&#x2500;&#x2500;&#x2500;zsh</div><div class=\"line\">     &#x2502;      &#x2514;&#x2500;sshd&#x2500;&#x2500;&#x2500;sshd&#x2500;&#x2500;&#x2500;zsh&#x2500;&#x2500;&#x2500;mongo&#x2500;&#x2500;&#x2500;2*[{mongo}]</div><div class=\"line\">     &#x251C;&#x2500;systemd-logind</div><div class=\"line\">     &#x251C;&#x2500;systemd-udevd</div><div class=\"line\">     &#x251C;&#x2500;upstart-file-br</div><div class=\"line\">     &#x251C;&#x2500;upstart-socket-</div><div class=\"line\">     &#x2514;&#x2500;upstart-udev-br</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;init&#x8FDB;&#x7A0B;&#x4E3A;&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x7684;&#x6839;(root)&#xFF0C;&#x5176;PID&#x4E3A;1&#x3002;</p>\n<p>Docker&#x5C06;&#x4E0D;&#x540C;&#x5E94;&#x7528;&#x7684;&#x8FDB;&#x7A0B;&#x9694;&#x79BB;&#x4E86;&#x8D77;&#x6765;&#xFF0C;&#x8FD9;&#x4E9B;&#x88AB;&#x9694;&#x79BB;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x9694;&#x79BB;&#x662F;&#x57FA;&#x4E8E;&#x4E24;&#x4E2A;Linux&#x5185;&#x6838;&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;Namesapce&#x548C;Cgroups&#x3002;</p>\n<p>Namespace&#x53EF;&#x4EE5;&#x4ECE;UTD&#x3001;IPC&#x3001;PID&#x3001;Mount&#xFF0C;User&#x548C;Network&#x7684;&#x89D2;&#x5EA6;&#x9694;&#x79BB;&#x8FDB;&#x7A0B;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#x5C06;&#x62E5;&#x6709;&#x4E0D;&#x540C;PID&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x6837;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x5C06;&#x770B;&#x4E0D;&#x5230;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x770B;&#x4E0D;&#x5230;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x3002;&#x8FD9;&#x4E0E;Node.js&#x4E2D;&#x6A21;&#x5757;&#x5316;&#x4EE5;&#x9694;&#x79BB;&#x53D8;&#x91CF;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x601D;&#x60F3;&#x662F;&#x5F02;&#x66F2;&#x540C;&#x5DE5;&#x7684;&#x3002;</p>\n<p>&#x901A;&#x8FC7;Cgroups&#xFF0C;&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x8FDB;&#x7A0B;&#x5BF9;CPU&#xFF0C;&#x5185;&#x5B58;&#x7B49;&#x8D44;&#x6E90;&#x7684;&#x4F7F;&#x7528;&#x3002;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Cgroups&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x53EA;&#x80FD;&#x4F7F;&#x7528;1G&#x5185;&#x5B58;&#x3002;</p>\n<p>&#x4ECE;&#x8FDB;&#x7A0B;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker&#xFF0C;&#x90A3;<strong>&#x6BCF;&#x4E00;&#x4E2A;Docker&#x5BB9;&#x5668;&#x5C31;&#x662F;&#x88AB;&#x9694;&#x79BB;&#x7684;&#x8FDB;&#x7A0B;&#x53CA;&#x5176;&#x5B50;&#x8FDB;&#x7A0B;</strong>&#x3002;&#x4E0A;&#x6587;pstree&#x7684;&#x8F93;&#x51FA;&#x4E2D;&#x53EF;&#x4EE5;&#x5206;&#x8FA8;&#x51FA;2&#x4E2A;&#x5BB9;&#x5668;: mongodb&#x548C;redis&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x57FA;&#x4E8E;Namespace&#x4E0E;Cgroups&#x7684;&#x5BB9;&#x5668;&#x5DE5;&#x5177;&#x5176;&#x5B9E;&#x65E9;&#x5DF2;&#x5B58;&#x5728;&#xFF0C;&#x4F8B;&#x5982;<a href=\"http://linux-vserver.org/Welcome_to_Linux-VServer.org\" target=\"_blank\" rel=\"external\">Linux-VServer</a>&#xFF0C;<a href=\"https://openvz.org/Main_Page\" target=\"_blank\" rel=\"external\">OpenVZ</a>&#xFF0C;<a href=\"https://linuxcontainers.org/\" target=\"_blank\" rel=\"external\">LXC</a>&#x3002;&#x7136;&#x800C;&#xFF0C;&#x771F;&#x6B63;&#x5F15;&#x7206;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x7684;&#x5374;&#x662F;&#x540E;&#x6765;&#x8005;Docker&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x662F;&#x56E0;&#x4E3A;<strong>Docker&#x955C;&#x50CF;</strong>&#x4EE5;&#x53CA;<strong>Dockerfile</strong>&#x3002;</p>\n<p>&#x5728;Linux&#x4E2D;&#xFF0C;&#x4E00;&#x5207;&#x7686;&#x6587;&#x4EF6;&#xFF0C;&#x8FDB;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x79BB;&#x4E0D;&#x5F00;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x8DD1;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;Node.js&#x7A0B;&#x5E8F;&#xFF0C;&#x4F20;&#x7EDF;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x624B;&#x52A8;&#x5B89;&#x88C5;&#x5404;&#x79CD;&#x4F9D;&#x8D56;&#x7136;&#x540E;&#x8FD0;&#x884C;&#xFF1B;&#x800C;Docker&#x5219;&#x662F;&#x5C06;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#xFF08;&#x5305;&#x62EC;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;Node&#xFF0C;NPM&#x6A21;&#x5757;&#xFF0C;&#x6E90;&#x4EE3;&#x7801;&#xFF09;&#x6253;&#x5305;&#x5230;&#x4E00;&#x4E2A;<strong>Docker&#x955C;&#x50CF;</strong>&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x3002;</p>\n<p><strong>Docker&#x955C;&#x50CF;</strong>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>Docker&#x4ED3;&#x5E93;</strong>&#x5171;&#x4EAB;&#x7ED9;&#x5176;&#x4ED6;&#x4EBA;&#xFF0C;&#x8FD9;&#x6837;&#x4ED6;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x5373;&#x53EF;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#x3002;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x53E6;&#x4E00;&#x53F0;&#x4E3B;&#x673A;(&#x6BD4;&#x5982;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x65B0;&#x540C;&#x4E8B;&#x7684;&#x673A;&#x5668;)&#x4E0A;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;Node.js&#x5E94;&#x7528;&#xFF0C;&#x4EC5;&#x4EC5;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;&#x7684;Docker&#x955C;&#x50CF;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x65B9;&#x4FBF;&#x5462;&#xFF1F;</p>\n<p><strong>Docker&#x955C;&#x50CF;</strong>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6587;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x5373;<strong>Dockerfile</strong>&#x8FDB;&#x884C;&#x5B9A;&#x4E49;&#x3002;&#x4E0D;&#x59A8;&#x770B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;(&#x7531;&#x4E8E;&#x4E0D;&#x53EF;&#x6297;&#x529B;&#xFF0C;&#x8FD9;&#x4E2A;Dockerfile&#x6784;&#x5EFA;&#x5927;&#x6982;&#x4F1A;&#x5931;&#x8D25;&#xFF0C;&#x4EC5;&#x4F5C;&#x4E3A;&#x53C2;&#x8003;):</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x57FA;&#x4E8E;Ubuntu</span></div><div class=\"line\"><span class=\"keyword\">FROM</span> ubuntu</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;Node.js&#x4E0E;NPM</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apt-get update &amp;&amp; apt-get -y install nodejs npm</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;NPM&#x6A21;&#x5757;:Express</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> npm install express</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x6DFB;&#x52A0;&#x6E90;&#x4EE3;&#x7801;</span></div><div class=\"line\"><span class=\"keyword\">ADD</span><span class=\"bash\"> app.js /</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;<strong>FROM</strong>&#xFF0C;<strong>RUN</strong>&#x4E0E;<strong>ADD</strong>&#x4E3A;Dockerfile&#x547D;&#x4EE4;&#x3002;&#x7ED3;&#x5408;&#x6CE8;&#x91CA;&#xFF0C;&#x8BE5;Dockerfile&#x7684;&#x542B;&#x4E49;&#x975E;&#x5E38;&#x76F4;&#x767D;&#x3002;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;Dockerfile&#xFF0C;&#x4F7F;&#x7528;<strong>docker build</strong>&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;Docker&#x955C;&#x50CF;&#x3002;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;Docker&#x955C;&#x50CF;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x6765;&#x6267;&#x884C;app.js:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> app = express();</div><div class=\"line\"></div><div class=\"line\">app.get(<span class=\"string\">&quot;/&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    res.send(<span class=\"string\">&quot;Hello Fundebug!\\n&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\">app.listen(<span class=\"number\">3000</span>);</div></pre></td></tr></table></figure>\n<p>Dockerfile&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5C06;<strong>Docker&#x955C;&#x50CF;&#x4EE3;&#x7801;&#x5316;</strong>&#x4E86;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x4E5F;&#x662F;&#x5C06;<strong>&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x7684;&#x8FC7;&#x7A0B;&#x4EE3;&#x7801;&#x5316;</strong>&#x4E86;&#xFF0C;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x50CF;&#x7BA1;&#x7406;&#x6E90;&#x7801;&#x4E00;&#x6837;&#x4F7F;&#x7528;git&#x5BF9;Dockerfile&#x8FDB;&#x884C;&#x7248;&#x672C;&#x7BA1;&#x7406;&#x3002;</p>\n<h3 id=\"&#x4E3A;&#x5565;&#x7528;Docker\"><a href=\"#&#x4E3A;&#x5565;&#x7528;Docker\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x7528;Docker?\"></a>&#x4E3A;&#x5565;&#x7528;Docker?</h3><p>&#x5F53;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;Docker&#x7684;&#x4EF7;&#x503C;&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x521A;&#x5F00;&#x59CB;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x5199;&#x4E00;&#x4E2A;Node.js&#x7A0B;&#x5E8F;&#xFF0C;&#x6302;&#x8F7D;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x7F51;&#x7AD9;&#xFF1B;&#x7136;&#x540E;&#xFF0C;&#x4F60;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x8D26;&#x53F7;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x6570;&#x636E;&#x5E93;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;MySQL; &#x540E;&#x6765;&#xFF0C;&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x6027;&#x80FD;&#xFF0C;&#x4F60;&#x5F15;&#x5165;&#x4E86;Memcached&#x7F13;&#x5B58;&#xFF1B;&#x7EC8;&#x4E8E;&#x6709;&#x4E00;&#x5929;&#xFF0C;&#x4F60;&#x51B3;&#x5B9A;&#x628A;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#xFF1B;&#x5F53;&#x7528;&#x6237;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x4F60;&#x53C8;&#x4E0D;&#x5F97;&#x4E0D;&#x4F7F;&#x7528;Nginx&#x505A;&#x53CD;&#x5411;&#x4EE3;&#x7406;; &#x5BF9;&#x4E86;&#xFF0C;&#x968F;&#x7740;&#x529F;&#x80FD;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x4F9D;&#x8D56;&#x4E5F;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x2026;&#x603B;&#x4E4B;&#xFF0C;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x53EA;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x7EC4;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#xFF0C;&#x914D;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x6B65;&#x9AA4;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x4E8E;&#x662F;&#x4F60;&#x4E0D;&#x5F97;&#x4E0D;&#x5199;&#x4E00;&#x4E2A;&#x5F88;&#x957F;&#x7684;&#x6587;&#x6863;&#x7ED9;&#x65B0;&#x540C;&#x4E8B;&#xFF0C;&#x53EA;&#x4E3A;&#x4E86;&#x8BA9;&#x4ED6;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;<strong>&#x5F00;&#x53D1;&#x73AF;&#x5883;</strong>&#x3002;</p>\n<p>&#x4F7F;&#x7528;Docker&#x7684;&#x8BDD;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x7EC4;&#x4EF6;&#x9010;&#x4E00;&#x7F16;&#x5199;Dockerfile&#xFF0C;&#x5206;&#x522B;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C;&#x5728;&#x5404;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#x3002;&#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x5C06;&#x590D;&#x6742;&#x7684;&#x67B6;&#x6784;&#x7EDF;&#x4E00;&#x4E86;&#xFF0C;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x548C;&#x8FD0;&#x884C;&#x6B65;&#x9AA4;&#x7EDF;&#x4E00;&#x4E3A;&#x51E0;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;: </p>\n<ul>\n<li>&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;: docker build</li>\n<li>&#x4E0A;&#x4F20;Docker&#x955C;&#x50CF;: docker push</li>\n<li>&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;: docker pull</li>\n<li>&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;: docker run</li>\n</ul>\n<h5 id=\"&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x901A;&#x5E38;&#xFF0C;&#x4F60;&#x4F1A;&#x6709;<strong>&#x5F00;&#x53D1;</strong>&#xFF0C;<strong>&#x6D4B;&#x8BD5;</strong>&#x548C;<strong>&#x751F;&#x4EA7;</strong>&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5BF9;&#x4E8E;&#x67D0;&#x4E9B;&#x5E94;&#x7528;&#xFF0C;&#x8FD8;&#x4F1A;&#x9700;&#x8981;&#x8FDB;&#x884C;<strong>&#x6784;&#x5EFA;</strong>&#x3002;&#x4E0D;&#x540C;&#x6B65;&#x9AA4;&#x7684;&#x4F9D;&#x8D56;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x4E0D;&#x540C;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6267;&#x884C;&#x3002;&#x5982;&#x679C;&#x624B;&#x52A8;&#x5730;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#xFF0C;&#x662F;&#x4EF6;&#x5F88;&#x9EBB;&#x70E6;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x4E3A;Node.js&#x5E94;&#x7528;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;npm&#x6A21;&#x5757;&#xFF0C;&#x6216;&#x8005;&#x5347;&#x7EA7;&#x4E00;&#x4E0B;Node.js&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F97;&#x91CD;&#x590D;&#x64CD;&#x4F5C;&#x5F88;&#x591A;&#x6B21;&#xFF1F;&#x53CB;&#x60C5;&#x63D0;&#x793A;&#x4E00;&#x4E0B;&#xFF0C;&#x624B;&#x52A8;&#x6572;&#x547D;&#x4EE4;&#x662F;&#x6781;&#x6613;&#x51FA;&#x9519;&#x7684;&#xFF0C;&#x6709;&#x4E9B;&#x5931;&#x8BEF;&#x4F1A;&#x5BFC;&#x81F4;&#x81F4;&#x547D;&#x7684;&#x540E;&#x679C;&#xFF08;&#x53C2;&#x8003;&#x6700;&#x8FD1;Gitlab&#x8BEF;&#x5220;&#x6570;&#x636E;&#x5E93;&#x4E0E;AWS&#x7684;S3&#x6545;&#x969C;&#xFF09;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F7F;&#x7528;Docker&#x7684;&#x8BDD;&#xFF0C;<strong>&#x5F00;&#x53D1;</strong>&#x3001;<strong>&#x6784;&#x5EFA;</strong>&#x3001;<strong>&#x6D4B;&#x8BD5;</strong>&#x3001;<strong>&#x751F;&#x4EA7;</strong>&#x5C06;&#x5168;&#x90E8;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x6267;&#x884C;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x4E3A;&#x4E0D;&#x540C;&#x6B65;&#x9AA4;&#x7F16;&#x5199;&#x4E0D;&#x540C;&#x7684;Dockerfile&#x3002;&#x5F53;&#x4F9D;&#x8D56;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x4EC5;&#x9700;&#x8981;&#x7A0D;&#x5FAE;&#x4FEE;&#x6539;Dockerfile&#x5373;&#x53EF;&#x3002;&#x7ED3;&#x5408;&#x6784;&#x5EFA;&#x5DE5;&#x5177;<a href=\"https://jenkins.io/\" target=\"_blank\" rel=\"external\">Jenkins</a>&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x6574;&#x4E2A;&#x90E8;&#x7F72;&#x6D41;&#x7A0B;&#x81EA;&#x52A8;&#x5316;&#x3002;</p>\n<p>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;Dockerfile&#x5C06;Docker&#x955C;&#x50CF;&#x63CF;&#x8FF0;&#x5F97;&#x975E;&#x5E38;&#x7CBE;&#x51C6;&#xFF0C;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x5F88;&#x5F3A;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x7248;&#x672C;&#xFF0C;Node.js&#x7684;&#x7248;&#x672C;&#xFF0C;NPM&#x6A21;&#x5757;&#x7684;&#x7248;&#x672C;&#x7B49;&#x3002;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x5728;<strong>&#x6784;&#x5EFA;</strong>&#x3001;<strong>&#x6D4B;&#x8BD5;</strong>&#x3001;<strong>&#x751F;&#x4EA7;</strong>&#x73AF;&#x5883;&#x4E2D;&#x4E5F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x8FD8;&#x6709;&#xFF0C;&#x4E0D;&#x540C;&#x7684;Docker&#x5BB9;&#x5668;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;&#x4E0D;&#x540C;&#x7684;Docker&#x955C;&#x50CF;&#xFF0C;&#x8FD9;&#x6837;&#x4ED6;&#x4EEC;&#x4E92;&#x4E0D;&#x5E72;&#x6270;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4E24;&#x4E2A;Node.js&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;Node.js&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x67B6;&#x6784;&#x89C4;&#x6A21;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x6709;&#x5FC5;&#x8981;&#x5F15;&#x5165;&#x96C6;&#x7FA4;&#x4E86;&#x3002;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7531;1&#x53F0;&#x53D8;&#x6210;&#x4E86;&#x591A;&#x53F0;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x5907;&#x4EFD;&#x6765;&#x5206;&#x62C5;&#x8D1F;&#x8F7D;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x5BF9;&#x96C6;&#x7FA4;&#x7684;&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x5212;&#x5206;: Nginx&#x670D;&#x52A1;&#x5668;&#xFF0C;Node.js&#x670D;&#x52A1;&#x5668;&#xFF0C;MySQL&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6D4B;&#x8BD5;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#x2026;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x662F;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#xFF1B;&#x4E5F;&#x53EF;&#x4EE5;&#x8BF4;&#x8D22;&#x5927;&#x6C14;&#x7C97;&#xFF0C;&#x56E0;&#x4E3A;&#x8D44;&#x6E90;&#x95F2;&#x7F6E;&#x4F1A;&#x975E;&#x5E38;&#x4E25;&#x91CD;&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x70B9;&#xFF0C;&#x6BCF;&#x6B21;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x82B1;&#x5927;&#x91CF;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x79CD;&#x4F4E;&#x6548;&#x7684;&#x91CD;&#x590D;&#x52B3;&#x52A8;&#x3002;</p>\n<p>&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;&#x4E4B;&#x540E;&#xFF0C;Docker&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;&#x96C6;&#x7FA4;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x4E3B;&#x673A;&#xFF0C;&#x4E14;&#x4E92;&#x4E0D;&#x5E72;&#x6270;&#xFF1B;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x96C6;&#x7FA4;&#x7684;&#x8282;&#x70B9;&#x4E0A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#x4EFB;&#x4F55;&#x7EC4;&#x4EF6;&#x3002;&#x81F3;&#x4E8E;&#x6574;&#x4E2A;Docker&#x96C6;&#x7FA4;&#x7684;&#x7BA1;&#x7406;&#xFF0C;&#x4E1A;&#x754C;&#x6709;&#x5F88;&#x591A;&#x6210;&#x719F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F8B;&#x5982;<a href=\"http://mesos.apache.org/\" target=\"_blank\" rel=\"external\">Mesos</a>&#xFF0C;<a href=\"https://kubernetes.io/\" target=\"_blank\" rel=\"external\">Kubernetes</a>&#x4E0E;<a href=\"https://github.com/docker/swarm\" target=\"_blank\" rel=\"external\">Docker Swarm</a>&#x3002;&#x8FD9;&#x4E9B;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;<strong>&#x8C03;&#x5EA6;</strong>&#xFF0C;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#xFF0C;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x8BA9;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x3002;</p>\n<h3 id=\"&#x5982;&#x4F55;&#x7528;Docker\"><a href=\"#&#x5982;&#x4F55;&#x7528;Docker\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x7528;Docker?\"></a>&#x5982;&#x4F55;&#x7528;Docker?</h3><h5 id=\"&#x7F16;&#x5199;Dockerfile\"><a href=\"#&#x7F16;&#x5199;Dockerfile\" class=\"headerlink\" title=\"&#x7F16;&#x5199;Dockerfile\"></a>&#x7F16;&#x5199;Dockerfile</h5><p>&#x6B63;&#x786E;&#x7684;<a href=\"https://github.com/Fundebug/nodejs-docker/blob/master/Dockerfile\" target=\"_blank\" rel=\"external\">Dockerfile</a>&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;DaoCloud&#x7684;Ubuntu&#x955C;&#x50CF;</span></div><div class=\"line\"><span class=\"keyword\">FROM</span> daocloud.io/library/ubuntu:<span class=\"number\">14.04</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x955C;&#x50CF;&#x4F5C;&#x8005;</span></div><div class=\"line\"><span class=\"keyword\">MAINTAINER</span> Fundebug &lt;help@fundebug.com&gt;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x65F6;&#x533A;</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> sudo sh -c <span class=\"string\">&quot;echo &apos;Asia/Shanghai&apos; &gt; /etc/timezone&quot;</span> &amp;&amp; \\</span></div><div class=\"line\">    sudo dpkg-reconfigure <span class=\"_\">-f</span> noninteractive tzdata</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684;Ubuntu&#x955C;&#x50CF;</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> <span class=\"built_in\">echo</span> <span class=\"string\">&apos;\\n\\</span></span></div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n&apos;\\</div><div class=\"line\">&gt; /etc/apt/sources.list</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;node v6.10.1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> sudo apt-get update &amp;&amp; sudo apt-get install -y wget</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;&#x6DD8;&#x5B9D;&#x955C;&#x50CF;&#x5B89;&#x88C5;Node.js v6.10.1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> wget https://npm.taobao.org/mirrors/node/v6.10.1/node-v6.10.1-linux-x64.tar.gz &amp;&amp; \\</span></div><div class=\"line\">    tar -C /usr/<span class=\"built_in\">local</span> --strip-components 1 -xzf node-v6.10.1-linux-x64.tar.gz &amp;&amp; \\</div><div class=\"line\">    rm node-v6.10.1-linux-x64.tar.gz </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"bash\"> /app</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;npm&#x6A21;&#x5757;</span></div><div class=\"line\"><span class=\"keyword\">ADD</span><span class=\"bash\"> package.json /app/package.json</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;&#x6DD8;&#x5B9D;&#x7684;npm&#x955C;&#x50CF;</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> npm install --production <span class=\"_\">-d</span> --registry=https://registry.npm.taobao.org</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x6DFB;&#x52A0;&#x6E90;&#x4EE3;&#x7801;</span></div><div class=\"line\"><span class=\"keyword\">ADD</span><span class=\"bash\"> . /app</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x8FD0;&#x884C;app.js</span></div><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;node&quot;</span>, <span class=\"string\">&quot;/app/app.js&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p>&#x6709;&#x51E0;&#x70B9;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x5730;&#x65B9;&#xFF1A;</p>\n<ul>\n<li>&#x4F7F;&#x7528;&#x56FD;&#x5185;<a href=\"https://www.daocloud.io/\" target=\"_blank\" rel=\"external\">DaoCloud</a>&#x7684;Docker&#x4ED3;&#x5E93;&#xFF0C;&#x963F;&#x91CC;&#x4E91;&#x7684;ubuntu&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x6DD8;&#x5B9D;&#x7684;npm&#x955C;&#x50CF;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x4E8B;&#x60C5;&#x7684;;</li>\n<li>&#x5C06;&#x65F6;&#x533A;&#x8BBE;&#x4E3A;Asia/Shanghai&#xFF0C;&#x5426;&#x5219;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x95F4;&#x4F1A;&#x4E0D;&#x5927;&#x5BF9;&#x52B2;;</li>\n<li>&#x4F7F;&#x7528;.dockerignore&#x5FFD;&#x7565;&#x4E0D;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5230;Docker&#x955C;&#x50CF;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#xFF0C;&#x5176;&#x8BED;&#x6CD5;&#x4E0E;.gitigore&#x4E00;&#x81F4;;</li>\n</ul>\n<p>&#x66F4;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x662F;&#xFF0C;<strong>package.json&#x9700;&#x8981;&#x5355;&#x72EC;&#x6DFB;&#x52A0;</strong>&#x3002;Docker&#x5728;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x4E00;&#x5C42;&#x4E00;&#x5C42;&#x6784;&#x5EFA;&#x7684;&#xFF0C;&#x4EC5;&#x5F53;&#x8FD9;&#x4E00;&#x5C42;&#x6709;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;&#x5C42;&#x3002;&#x5982;&#x679C;package.json&#x548C;&#x6E90;&#x4EE3;&#x7801;&#x4E00;&#x8D77;&#x6DFB;&#x52A0;&#x5230;&#x955C;&#x50CF;&#xFF0C;&#x5219;&#x6BCF;&#x6B21;&#x4FEE;&#x6539;&#x6E90;&#x7801;&#x90FD;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5B89;&#x88C5;npm&#x6A21;&#x5757;&#xFF0C;&#x8FD9;&#x6837;&#x6728;&#x6709;&#x5FC5;&#x8981;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6B63;&#x786E;&#x7684;&#x987A;&#x5E8F;&#x662F;: &#x6DFB;&#x52A0;package.json&#xFF1B;&#x5B89;&#x88C5;npm&#x6A21;&#x5757;&#xFF1B;&#x6DFB;&#x52A0;&#x6E90;&#x4EE3;&#x7801;&#x3002;</p>\n<h5 id=\"&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"><a href=\"#&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"></a>&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</h5><p>&#x4F7F;&#x7528;<strong>docker build</strong>&#x547D;&#x4EE4;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker build -t fundebug/nodejs .</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;-t&#x9009;&#x9879;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7684;&#x540D;&#x79F0;&#x3002;</p>\n<p>&#x4F7F;&#x7528;<strong>docker images</strong>&#x547D;&#x4EE4;&#x67E5;&#x770B;Docker&#x955C;&#x50CF;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker images</div><div class=\"line\">REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE</div><div class=\"line\">fundebug/nodejs               latest              64530ce811a1        32 minutes ago      266.4 MB</div><div class=\"line\">daocloud.io/library/ubuntu    14.04               b969ab9f929b        9 weeks ago         188 MB</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;fundebug/nodejs&#x955C;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x4E3A;266.4MB&#xFF0C;&#x5728;ubuntu&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E86;80MB&#x5DE6;&#x53F3;&#x3002;</p>\n<h5 id=\"&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"><a href=\"#&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"></a>&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;</h5><p>&#x4F7F;&#x7528;<strong>docker run</strong>&#x547D;&#x4EE4;&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker run <span class=\"_\">-d</span> --net=host --name=hello-fundebug fundebug/nodejs</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;-d&#x9009;&#x9879;&#x8868;&#x793A;&#x5BB9;&#x5668;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF1B;&#x2013;net&#x9009;&#x9879;&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x6A21;&#x5F0F;&#xFF0C;host&#x8868;&#x793A;&#x4E0E;&#x4E3B;&#x673A;&#x5171;&#x4EAB;&#x7F51;&#x7EDC;&#xFF1B;&#x2013;name&#x6307;&#x5B9A;&#x4E86;&#x5BB9;&#x5668;&#x7684;&#x540D;&#x79F0;&#x3002;</p>\n<p>&#x4F7F;&#x7528;<strong>docker ps</strong>&#x547D;&#x4EE4;&#x67E5;&#x770B;Docker&#x5BB9;&#x5668;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker ps</div><div class=\"line\">CONTAINER ID        IMAGE                             COMMAND                  CREATED             STATUS              PORTS               NAMES</div><div class=\"line\">e8eb5473970c        fundebug/nodejs                   <span class=\"string\">&quot;node /app/app.js&quot;</span>       37 minutes ago      Up 37 minutes                           hello-</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;COMMAND&#x4E3A;&#x201D;node /app/app.js&#x201D;&#xFF0C;&#x8868;&#x793A;&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x662F;&#x6211;&#x4EEC;&#x518D;Dockerfile&#x4E2D;&#x4F7F;&#x7528;CMD&#x6307;&#x5B9A;&#x7684;&#x3002;&#x4E0D;&#x59A8;&#x4F7F;&#x7528;<strong>docker exec</strong>&#x547D;&#x4EE4;&#x5728;&#x5BB9;&#x5668;&#x5185;&#x6267;&#x884C;ps&#x547D;&#x4EE4;<strong>&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x8FDB;&#x7A0B;</strong>&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"built_in\">exec</span> hello-fundebug ps <span class=\"_\">-f</span></div><div class=\"line\">UID        PID  PPID  C STIME TTY          TIME CMD</div><div class=\"line\">root         1     0  0 15:14 ?        00:00:00 node /app/app.js</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#x5373;&#x4E3A;node&#x8FDB;&#x7A0B;<strong>node /app/app.js</strong>&#x3002;&#x5728;Linux&#x4E2D;&#xFF0C;PID&#x4E3A;1&#x8FDB;&#x7A0B;&#x6309;&#x8BF4;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x5373;init&#x8FDB;&#x7A0B;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x4E86;&#x5185;&#x6838;&#x7684;Namespace&#x673A;&#x5236;&#xFF0C;&#x4E3A;&#x5BB9;&#x5668;&#x521B;&#x5EFA;&#x4E86;&#x72EC;&#x7ACB;&#x7684;PID&#x7A7A;&#x95F4;&#xFF0C;&#x56E0;&#x6B64;&#x5BB9;&#x5668;&#x4E2D;&#x4E5F;&#x6709;1&#x53F7;&#x8FDB;&#x7A0B;&#x3002;</p>\n<h5 id=\"&#x6D4B;&#x8BD5;\"><a href=\"#&#x6D4B;&#x8BD5;\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;\"></a>&#x6D4B;&#x8BD5;</h5><p>&#x4F7F;&#x7528;curl&#x547D;&#x4EE4;&#x8BBF;&#x95EE;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl localhost:3000</div><div class=\"line\">Hello Fundebug!</div></pre></td></tr></table></figure>\n<h3 id=\"&#x662F;&#x5426;&#x7528;Docker&#xFF1F;\"><a href=\"#&#x662F;&#x5426;&#x7528;Docker&#xFF1F;\" class=\"headerlink\" title=\"&#x662F;&#x5426;&#x7528;Docker&#xFF1F;\"></a>&#x662F;&#x5426;&#x7528;Docker&#xFF1F;</h3><p>&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4F7F;&#x7528;Docker&#x80FD;&#x591F;&#x5E26;&#x6765;&#x5F88;&#x5927;&#x76CA;&#x5904;&#xFF1B;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5F15;&#x5165;Docker&#x5FC5;&#x7136;&#x4F1A;&#x6709;&#x5F88;&#x591A;&#x6311;&#x6218;&#xFF0C;&#x9700;&#x8981;&#x719F;&#x6089;Docker&#x624D;&#x80FD;&#x5E94;&#x5BF9;&#x81EA;&#x5982;&#x3002;<strong>&#x60F3;&#x5FC5;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x8270;&#x96BE;&#x7684;&#x51B3;&#x5B9A;</strong>&#x3002;&#x5982;&#x679C;&#x4ECE;&#x957F;&#x8FDC;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;Docker&#x6B63;&#x5728;&#x6210;&#x4E3A;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#xFF0C;&#x90E8;&#x7F72;&#xFF0C;&#x53D1;&#x5E03;&#x7684;&#x6807;&#x51C6;&#x6280;&#x672F;&#xFF0C;&#x4E5F;&#x8BB8;&#x6211;&#x4EEC;&#x4E0D;&#x5F97;&#x4E0D;&#x7528;&#x5F00;&#x653E;&#x7684;&#x5FC3;&#x6001;&#x5BF9;&#x5F85;&#x5B83;&#x3002;</p>\n<p>&#x4F5C;&#x4E3A;Node.js&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x771F;&#x6B63;&#x7406;&#x89E3;Docker&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x65F6;&#x95F4;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x53EF;&#x4EE5;&#x7ED9;&#x4F60;&#x5E26;&#x6765;&#x5F88;&#x591A;&#x4FBF;&#x5229;&#x3002;&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;</strong>&#xFF0C;&#x8001;&#x53F8;&#x673A;&#x5E26;&#x4F60;&#x73A9;&#x8F6C;&#x9177;&#x70AB;&#x7684;Docker&#x6280;&#x672F;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/03/26/nodejs-docker/nodejs-qq-group.jpeg\"><br></div>\n\n\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://coolshell.cn/articles/17010.html\" target=\"_blank\" rel=\"external\">DOCKER&#x57FA;&#x7840;&#x6280;&#x672F;&#xFF1A;LINUX NAMESPACE&#xFF08;&#x4E0A;&#xFF09;</a></li>\n<li><a href=\"http://coolshell.cn/articles/17029.html\" target=\"_blank\" rel=\"external\">DOCKER&#x57FA;&#x7840;&#x6280;&#x672F;&#xFF1A;LINUX NAMESPACE&#xFF08;&#x4E0B;&#xFF09;</a></li>\n<li><a href=\"http://coolshell.cn/articles/17049.html\" target=\"_blank\" rel=\"external\">DOCKER&#x57FA;&#x7840;&#x6280;&#x672F;&#xFF1A;LINUX CGROUP</a></li>\n<li><a href=\"http://coolshell.cn/articles/17680.html\" target=\"_blank\" rel=\"external\">&#x4ECE;GITLAB&#x8BEF;&#x5220;&#x9664;&#x6570;&#x636E;&#x5E93;&#x60F3;&#x5230;&#x7684;</a></li>\n<li><a href=\"http://coolshell.cn/articles/17737.html\" target=\"_blank\" rel=\"external\">AWS &#x7684; S3 &#x6545;&#x969C;&#x56DE;&#x987E;&#x548C;&#x601D;&#x8003;</a></li>\n</ul>\n","excerpt":"<p><a href=\"https://blog.risingstack.com/node-js-best-practices-2017/\">Node.js Best Practices - How to Become a Better Developer in 2017</a>&#x63D0;&#x5230;&#x7684;&#x51E0;&#x70B9;&#xFF0C;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x6DF1;&#x6709;&#x540C;&#x611F;:</p>\n<ul>\n<li>&#x4F7F;&#x7528;ES6</li>\n<li>&#x4F7F;&#x7528;Promise</li>\n<li>&#x4F7F;&#x7528;LTS</li>\n<li>&#x4F7F;&#x7528;<a href=\"https://www.docker.com/\">Docker</a></li>\n<li>&#x2026;</li>\n</ul>","more":"<p>&#x60F3;&#x5FC5;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;ES6&#xFF0C;Promise&#x4EE5;&#x53CA;LTS&#xFF0C;&#x90A3;<a href=\"https://www.docker.com/\">Docker</a>&#x662F;&#x5565;&#x73A9;&#x610F;&#x554A;&#xFF1F;&#x7FFB;&#x904D;<a href=\"https://nodejs.org/api/\">Node&#x6587;&#x6863;</a>&#x4E5F;&#x6CA1;&#x89C1;&#x8E2A;&#x8FF9;&#x554A;!</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/03/26/nodejs-docker/nodejs-docker.png\"><br></div>\n\n<p><strong>GitHub&#x4ED3;&#x5E93;:</strong> <a href=\"https://github.com/Fundebug/nodejs-docker\">Fundebug/nodejs-docker</a></p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Docker\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Docker\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Docker?\"></a>&#x4EC0;&#x4E48;&#x662F;Docker?</h3><p>Docker&#x662F;&#x6700;&#x6D41;&#x884C;&#x7684;&#x7684;&#x5BB9;&#x5668;&#x5DE5;&#x5177;&#xFF0C;<strong>&#x6CA1;&#x6709;&#x4E4B;&#x4E00;</strong>&#x3002;&#x672C;&#x6587;&#x5E76;&#x4E0D;&#x6253;&#x7B97;&#x6DF1;&#x5165;&#x4ECB;&#x7ECD;Docker&#xFF0C;&#x4E0D;&#x8FC7;&#x53EF;&#x4EE5;&#x4ECE;&#x51E0;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x7406;&#x89E3;Docker&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x8FDB;&#x7A0B;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x5728;Linux&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x6784;&#x6210;&#x4E86;&#x4E00;&#x68F5;&#x6811;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"http://man7.org/linux/man-pages/man1/pstree.1.html\">pstree</a>&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x67E5;&#x770B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">pstree</div><div class=\"line\">init&#x2500;&#x252C;&#x2500;VBoxService&#x2500;&#x2500;&#x2500;7*[{VBoxService}]</div><div class=\"line\">     &#x251C;&#x2500;acpid</div><div class=\"line\">     &#x251C;&#x2500;atd</div><div class=\"line\">     &#x251C;&#x2500;cron</div><div class=\"line\">     &#x251C;&#x2500;dbus-daemon</div><div class=\"line\">     &#x251C;&#x2500;dhclient</div><div class=\"line\">     &#x251C;&#x2500;dockerd&#x2500;&#x252C;&#x2500;docker-containe&#x2500;&#x252C;&#x2500;docker-containe&#x2500;&#x252C;&#x2500;redis-server&#x2500;&#x2500;&#x2500;2*[{redis-server}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x2502;                 &#x2514;&#x2500;8*[{docker-containe}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x251C;&#x2500;docker-containe&#x2500;&#x252C;&#x2500;mongod&#x2500;&#x2500;&#x2500;16*[{mongod}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x2502;                 &#x2514;&#x2500;8*[{docker-containe}]</div><div class=\"line\">     &#x2502;         &#x2502;                 &#x2514;&#x2500;11*[{docker-containe}]</div><div class=\"line\">     &#x2502;         &#x2514;&#x2500;13*[{dockerd}]</div><div class=\"line\">     &#x251C;&#x2500;6*[getty]</div><div class=\"line\">     &#x251C;&#x2500;influxd&#x2500;&#x2500;&#x2500;9*[{influxd}]</div><div class=\"line\">     &#x251C;&#x2500;irqbalance</div><div class=\"line\">     &#x251C;&#x2500;puppet&#x2500;&#x2500;&#x2500;{puppet}</div><div class=\"line\">     &#x251C;&#x2500;rpc.idmapd</div><div class=\"line\">     &#x251C;&#x2500;rpc.statd</div><div class=\"line\">     &#x251C;&#x2500;rpcbind</div><div class=\"line\">     &#x251C;&#x2500;rsyslogd&#x2500;&#x2500;&#x2500;3*[{rsyslogd}]</div><div class=\"line\">     &#x251C;&#x2500;ruby&#x2500;&#x2500;&#x2500;{ruby}</div><div class=\"line\">     &#x251C;&#x2500;sshd&#x2500;&#x252C;&#x2500;sshd&#x2500;&#x2500;&#x2500;sshd&#x2500;&#x2500;&#x2500;zsh&#x2500;&#x2500;&#x2500;pstree</div><div class=\"line\">     &#x2502;      &#x251C;&#x2500;sshd&#x2500;&#x2500;&#x2500;sshd&#x2500;&#x2500;&#x2500;zsh</div><div class=\"line\">     &#x2502;      &#x2514;&#x2500;sshd&#x2500;&#x2500;&#x2500;sshd&#x2500;&#x2500;&#x2500;zsh&#x2500;&#x2500;&#x2500;mongo&#x2500;&#x2500;&#x2500;2*[{mongo}]</div><div class=\"line\">     &#x251C;&#x2500;systemd-logind</div><div class=\"line\">     &#x251C;&#x2500;systemd-udevd</div><div class=\"line\">     &#x251C;&#x2500;upstart-file-br</div><div class=\"line\">     &#x251C;&#x2500;upstart-socket-</div><div class=\"line\">     &#x2514;&#x2500;upstart-udev-br</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;init&#x8FDB;&#x7A0B;&#x4E3A;&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x7684;&#x6839;(root)&#xFF0C;&#x5176;PID&#x4E3A;1&#x3002;</p>\n<p>Docker&#x5C06;&#x4E0D;&#x540C;&#x5E94;&#x7528;&#x7684;&#x8FDB;&#x7A0B;&#x9694;&#x79BB;&#x4E86;&#x8D77;&#x6765;&#xFF0C;&#x8FD9;&#x4E9B;&#x88AB;&#x9694;&#x79BB;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x9694;&#x79BB;&#x662F;&#x57FA;&#x4E8E;&#x4E24;&#x4E2A;Linux&#x5185;&#x6838;&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;Namesapce&#x548C;Cgroups&#x3002;</p>\n<p>Namespace&#x53EF;&#x4EE5;&#x4ECE;UTD&#x3001;IPC&#x3001;PID&#x3001;Mount&#xFF0C;User&#x548C;Network&#x7684;&#x89D2;&#x5EA6;&#x9694;&#x79BB;&#x8FDB;&#x7A0B;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#x5C06;&#x62E5;&#x6709;&#x4E0D;&#x540C;PID&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x6837;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x5C06;&#x770B;&#x4E0D;&#x5230;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x770B;&#x4E0D;&#x5230;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x3002;&#x8FD9;&#x4E0E;Node.js&#x4E2D;&#x6A21;&#x5757;&#x5316;&#x4EE5;&#x9694;&#x79BB;&#x53D8;&#x91CF;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x601D;&#x60F3;&#x662F;&#x5F02;&#x66F2;&#x540C;&#x5DE5;&#x7684;&#x3002;</p>\n<p>&#x901A;&#x8FC7;Cgroups&#xFF0C;&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x8FDB;&#x7A0B;&#x5BF9;CPU&#xFF0C;&#x5185;&#x5B58;&#x7B49;&#x8D44;&#x6E90;&#x7684;&#x4F7F;&#x7528;&#x3002;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Cgroups&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x53EA;&#x80FD;&#x4F7F;&#x7528;1G&#x5185;&#x5B58;&#x3002;</p>\n<p>&#x4ECE;&#x8FDB;&#x7A0B;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker&#xFF0C;&#x90A3;<strong>&#x6BCF;&#x4E00;&#x4E2A;Docker&#x5BB9;&#x5668;&#x5C31;&#x662F;&#x88AB;&#x9694;&#x79BB;&#x7684;&#x8FDB;&#x7A0B;&#x53CA;&#x5176;&#x5B50;&#x8FDB;&#x7A0B;</strong>&#x3002;&#x4E0A;&#x6587;pstree&#x7684;&#x8F93;&#x51FA;&#x4E2D;&#x53EF;&#x4EE5;&#x5206;&#x8FA8;&#x51FA;2&#x4E2A;&#x5BB9;&#x5668;: mongodb&#x548C;redis&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x6587;&#x4EF6;&#x7684;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x57FA;&#x4E8E;Namespace&#x4E0E;Cgroups&#x7684;&#x5BB9;&#x5668;&#x5DE5;&#x5177;&#x5176;&#x5B9E;&#x65E9;&#x5DF2;&#x5B58;&#x5728;&#xFF0C;&#x4F8B;&#x5982;<a href=\"http://linux-vserver.org/Welcome_to_Linux-VServer.org\">Linux-VServer</a>&#xFF0C;<a href=\"https://openvz.org/Main_Page\">OpenVZ</a>&#xFF0C;<a href=\"https://linuxcontainers.org/\">LXC</a>&#x3002;&#x7136;&#x800C;&#xFF0C;&#x771F;&#x6B63;&#x5F15;&#x7206;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x7684;&#x5374;&#x662F;&#x540E;&#x6765;&#x8005;Docker&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x662F;&#x56E0;&#x4E3A;<strong>Docker&#x955C;&#x50CF;</strong>&#x4EE5;&#x53CA;<strong>Dockerfile</strong>&#x3002;</p>\n<p>&#x5728;Linux&#x4E2D;&#xFF0C;&#x4E00;&#x5207;&#x7686;&#x6587;&#x4EF6;&#xFF0C;&#x8FDB;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x79BB;&#x4E0D;&#x5F00;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x8DD1;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;Node.js&#x7A0B;&#x5E8F;&#xFF0C;&#x4F20;&#x7EDF;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x624B;&#x52A8;&#x5B89;&#x88C5;&#x5404;&#x79CD;&#x4F9D;&#x8D56;&#x7136;&#x540E;&#x8FD0;&#x884C;&#xFF1B;&#x800C;Docker&#x5219;&#x662F;&#x5C06;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#xFF08;&#x5305;&#x62EC;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;Node&#xFF0C;NPM&#x6A21;&#x5757;&#xFF0C;&#x6E90;&#x4EE3;&#x7801;&#xFF09;&#x6253;&#x5305;&#x5230;&#x4E00;&#x4E2A;<strong>Docker&#x955C;&#x50CF;</strong>&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x3002;</p>\n<p><strong>Docker&#x955C;&#x50CF;</strong>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>Docker&#x4ED3;&#x5E93;</strong>&#x5171;&#x4EAB;&#x7ED9;&#x5176;&#x4ED6;&#x4EBA;&#xFF0C;&#x8FD9;&#x6837;&#x4ED6;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x5373;&#x53EF;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#x3002;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x53E6;&#x4E00;&#x53F0;&#x4E3B;&#x673A;(&#x6BD4;&#x5982;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x65B0;&#x540C;&#x4E8B;&#x7684;&#x673A;&#x5668;)&#x4E0A;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;Node.js&#x5E94;&#x7528;&#xFF0C;&#x4EC5;&#x4EC5;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;&#x7684;Docker&#x955C;&#x50CF;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x65B9;&#x4FBF;&#x5462;&#xFF1F;</p>\n<p><strong>Docker&#x955C;&#x50CF;</strong>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6587;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x5373;<strong>Dockerfile</strong>&#x8FDB;&#x884C;&#x5B9A;&#x4E49;&#x3002;&#x4E0D;&#x59A8;&#x770B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;(&#x7531;&#x4E8E;&#x4E0D;&#x53EF;&#x6297;&#x529B;&#xFF0C;&#x8FD9;&#x4E2A;Dockerfile&#x6784;&#x5EFA;&#x5927;&#x6982;&#x4F1A;&#x5931;&#x8D25;&#xFF0C;&#x4EC5;&#x4F5C;&#x4E3A;&#x53C2;&#x8003;):</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x57FA;&#x4E8E;Ubuntu</span></div><div class=\"line\"><span class=\"keyword\">FROM</span> ubuntu</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;Node.js&#x4E0E;NPM</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apt-get update &amp;&amp; apt-get -y install nodejs npm</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;NPM&#x6A21;&#x5757;:Express</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> npm install express</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x6DFB;&#x52A0;&#x6E90;&#x4EE3;&#x7801;</span></div><div class=\"line\"><span class=\"keyword\">ADD</span><span class=\"bash\"> app.js /</span></div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;<strong>FROM</strong>&#xFF0C;<strong>RUN</strong>&#x4E0E;<strong>ADD</strong>&#x4E3A;Dockerfile&#x547D;&#x4EE4;&#x3002;&#x7ED3;&#x5408;&#x6CE8;&#x91CA;&#xFF0C;&#x8BE5;Dockerfile&#x7684;&#x542B;&#x4E49;&#x975E;&#x5E38;&#x76F4;&#x767D;&#x3002;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;Dockerfile&#xFF0C;&#x4F7F;&#x7528;<strong>docker build</strong>&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;Docker&#x955C;&#x50CF;&#x3002;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;Docker&#x955C;&#x50CF;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;&#x6765;&#x6267;&#x884C;app.js:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> app = express();</div><div class=\"line\"></div><div class=\"line\">app.get(<span class=\"string\">&quot;/&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    res.send(<span class=\"string\">&quot;Hello Fundebug!\\n&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\">app.listen(<span class=\"number\">3000</span>);</div></pre></td></tr></table></figure>\n<p>Dockerfile&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5C06;<strong>Docker&#x955C;&#x50CF;&#x4EE3;&#x7801;&#x5316;</strong>&#x4E86;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x4E5F;&#x662F;&#x5C06;<strong>&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x7684;&#x8FC7;&#x7A0B;&#x4EE3;&#x7801;&#x5316;</strong>&#x4E86;&#xFF0C;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x50CF;&#x7BA1;&#x7406;&#x6E90;&#x7801;&#x4E00;&#x6837;&#x4F7F;&#x7528;git&#x5BF9;Dockerfile&#x8FDB;&#x884C;&#x7248;&#x672C;&#x7BA1;&#x7406;&#x3002;</p>\n<h3 id=\"&#x4E3A;&#x5565;&#x7528;Docker\"><a href=\"#&#x4E3A;&#x5565;&#x7528;Docker\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x7528;Docker?\"></a>&#x4E3A;&#x5565;&#x7528;Docker?</h3><p>&#x5F53;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;Docker&#x7684;&#x4EF7;&#x503C;&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x521A;&#x5F00;&#x59CB;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x5199;&#x4E00;&#x4E2A;Node.js&#x7A0B;&#x5E8F;&#xFF0C;&#x6302;&#x8F7D;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x7F51;&#x7AD9;&#xFF1B;&#x7136;&#x540E;&#xFF0C;&#x4F60;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x8D26;&#x53F7;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x6570;&#x636E;&#x5E93;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;MySQL; &#x540E;&#x6765;&#xFF0C;&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x6027;&#x80FD;&#xFF0C;&#x4F60;&#x5F15;&#x5165;&#x4E86;Memcached&#x7F13;&#x5B58;&#xFF1B;&#x7EC8;&#x4E8E;&#x6709;&#x4E00;&#x5929;&#xFF0C;&#x4F60;&#x51B3;&#x5B9A;&#x628A;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#xFF1B;&#x5F53;&#x7528;&#x6237;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x4F60;&#x53C8;&#x4E0D;&#x5F97;&#x4E0D;&#x4F7F;&#x7528;Nginx&#x505A;&#x53CD;&#x5411;&#x4EE3;&#x7406;; &#x5BF9;&#x4E86;&#xFF0C;&#x968F;&#x7740;&#x529F;&#x80FD;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x4F9D;&#x8D56;&#x4E5F;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x2026;&#x603B;&#x4E4B;&#xFF0C;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x53EA;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x7EC4;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#xFF0C;&#x914D;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x6B65;&#x9AA4;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x4E8E;&#x662F;&#x4F60;&#x4E0D;&#x5F97;&#x4E0D;&#x5199;&#x4E00;&#x4E2A;&#x5F88;&#x957F;&#x7684;&#x6587;&#x6863;&#x7ED9;&#x65B0;&#x540C;&#x4E8B;&#xFF0C;&#x53EA;&#x4E3A;&#x4E86;&#x8BA9;&#x4ED6;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;<strong>&#x5F00;&#x53D1;&#x73AF;&#x5883;</strong>&#x3002;</p>\n<p>&#x4F7F;&#x7528;Docker&#x7684;&#x8BDD;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x7EC4;&#x4EF6;&#x9010;&#x4E00;&#x7F16;&#x5199;Dockerfile&#xFF0C;&#x5206;&#x522B;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C;&#x5728;&#x5404;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#x3002;&#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x5C06;&#x590D;&#x6742;&#x7684;&#x67B6;&#x6784;&#x7EDF;&#x4E00;&#x4E86;&#xFF0C;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x548C;&#x8FD0;&#x884C;&#x6B65;&#x9AA4;&#x7EDF;&#x4E00;&#x4E3A;&#x51E0;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;: </p>\n<ul>\n<li>&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;: docker build</li>\n<li>&#x4E0A;&#x4F20;Docker&#x955C;&#x50CF;: docker push</li>\n<li>&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;: docker pull</li>\n<li>&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;: docker run</li>\n</ul>\n<h5 id=\"&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x901A;&#x5E38;&#xFF0C;&#x4F60;&#x4F1A;&#x6709;<strong>&#x5F00;&#x53D1;</strong>&#xFF0C;<strong>&#x6D4B;&#x8BD5;</strong>&#x548C;<strong>&#x751F;&#x4EA7;</strong>&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5BF9;&#x4E8E;&#x67D0;&#x4E9B;&#x5E94;&#x7528;&#xFF0C;&#x8FD8;&#x4F1A;&#x9700;&#x8981;&#x8FDB;&#x884C;<strong>&#x6784;&#x5EFA;</strong>&#x3002;&#x4E0D;&#x540C;&#x6B65;&#x9AA4;&#x7684;&#x4F9D;&#x8D56;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x4E0D;&#x540C;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6267;&#x884C;&#x3002;&#x5982;&#x679C;&#x624B;&#x52A8;&#x5730;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#xFF0C;&#x662F;&#x4EF6;&#x5F88;&#x9EBB;&#x70E6;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x4E3A;Node.js&#x5E94;&#x7528;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;npm&#x6A21;&#x5757;&#xFF0C;&#x6216;&#x8005;&#x5347;&#x7EA7;&#x4E00;&#x4E0B;Node.js&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F97;&#x91CD;&#x590D;&#x64CD;&#x4F5C;&#x5F88;&#x591A;&#x6B21;&#xFF1F;&#x53CB;&#x60C5;&#x63D0;&#x793A;&#x4E00;&#x4E0B;&#xFF0C;&#x624B;&#x52A8;&#x6572;&#x547D;&#x4EE4;&#x662F;&#x6781;&#x6613;&#x51FA;&#x9519;&#x7684;&#xFF0C;&#x6709;&#x4E9B;&#x5931;&#x8BEF;&#x4F1A;&#x5BFC;&#x81F4;&#x81F4;&#x547D;&#x7684;&#x540E;&#x679C;&#xFF08;&#x53C2;&#x8003;&#x6700;&#x8FD1;Gitlab&#x8BEF;&#x5220;&#x6570;&#x636E;&#x5E93;&#x4E0E;AWS&#x7684;S3&#x6545;&#x969C;&#xFF09;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F7F;&#x7528;Docker&#x7684;&#x8BDD;&#xFF0C;<strong>&#x5F00;&#x53D1;</strong>&#x3001;<strong>&#x6784;&#x5EFA;</strong>&#x3001;<strong>&#x6D4B;&#x8BD5;</strong>&#x3001;<strong>&#x751F;&#x4EA7;</strong>&#x5C06;&#x5168;&#x90E8;&#x5728;Docker&#x5BB9;&#x5668;&#x4E2D;&#x6267;&#x884C;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x4E3A;&#x4E0D;&#x540C;&#x6B65;&#x9AA4;&#x7F16;&#x5199;&#x4E0D;&#x540C;&#x7684;Dockerfile&#x3002;&#x5F53;&#x4F9D;&#x8D56;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x4EC5;&#x9700;&#x8981;&#x7A0D;&#x5FAE;&#x4FEE;&#x6539;Dockerfile&#x5373;&#x53EF;&#x3002;&#x7ED3;&#x5408;&#x6784;&#x5EFA;&#x5DE5;&#x5177;<a href=\"https://jenkins.io/\">Jenkins</a>&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x6574;&#x4E2A;&#x90E8;&#x7F72;&#x6D41;&#x7A0B;&#x81EA;&#x52A8;&#x5316;&#x3002;</p>\n<p>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;Dockerfile&#x5C06;Docker&#x955C;&#x50CF;&#x63CF;&#x8FF0;&#x5F97;&#x975E;&#x5E38;&#x7CBE;&#x51C6;&#xFF0C;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x5F88;&#x5F3A;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x7248;&#x672C;&#xFF0C;Node.js&#x7684;&#x7248;&#x672C;&#xFF0C;NPM&#x6A21;&#x5757;&#x7684;&#x7248;&#x672C;&#x7B49;&#x3002;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x5728;<strong>&#x6784;&#x5EFA;</strong>&#x3001;<strong>&#x6D4B;&#x8BD5;</strong>&#x3001;<strong>&#x751F;&#x4EA7;</strong>&#x73AF;&#x5883;&#x4E2D;&#x4E5F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x8FD8;&#x6709;&#xFF0C;&#x4E0D;&#x540C;&#x7684;Docker&#x5BB9;&#x5668;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;&#x4E0D;&#x540C;&#x7684;Docker&#x955C;&#x50CF;&#xFF0C;&#x8FD9;&#x6837;&#x4ED6;&#x4EEC;&#x4E92;&#x4E0D;&#x5E72;&#x6270;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x4E24;&#x4E2A;Node.js&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;Node.js&#x3002;</p>\n<h5 id=\"&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"><a href=\"#&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\" class=\"headerlink\" title=\"&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker\"></a>&#x4ECE;&#x96C6;&#x7FA4;&#x7BA1;&#x7406;&#x89D2;&#x5EA6;&#x7406;&#x89E3;Docker</h5><p>&#x67B6;&#x6784;&#x89C4;&#x6A21;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x6709;&#x5FC5;&#x8981;&#x5F15;&#x5165;&#x96C6;&#x7FA4;&#x4E86;&#x3002;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7531;1&#x53F0;&#x53D8;&#x6210;&#x4E86;&#x591A;&#x53F0;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x5907;&#x4EFD;&#x6765;&#x5206;&#x62C5;&#x8D1F;&#x8F7D;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x5BF9;&#x96C6;&#x7FA4;&#x7684;&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x5212;&#x5206;: Nginx&#x670D;&#x52A1;&#x5668;&#xFF0C;Node.js&#x670D;&#x52A1;&#x5668;&#xFF0C;MySQL&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6D4B;&#x8BD5;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x751F;&#x4EA7;&#x670D;&#x52A1;&#x5668;&#x2026;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x662F;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#xFF1B;&#x4E5F;&#x53EF;&#x4EE5;&#x8BF4;&#x8D22;&#x5927;&#x6C14;&#x7C97;&#xFF0C;&#x56E0;&#x4E3A;&#x8D44;&#x6E90;&#x95F2;&#x7F6E;&#x4F1A;&#x975E;&#x5E38;&#x4E25;&#x91CD;&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x70B9;&#xFF0C;&#x6BCF;&#x6B21;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x82B1;&#x5927;&#x91CF;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x79CD;&#x4F4E;&#x6548;&#x7684;&#x91CD;&#x590D;&#x52B3;&#x52A8;&#x3002;</p>\n<p>&#x4E0B;&#x8F7D;Docker&#x955C;&#x50CF;&#x4E4B;&#x540E;&#xFF0C;Docker&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;&#x96C6;&#x7FA4;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x4E3B;&#x673A;&#xFF0C;&#x4E14;&#x4E92;&#x4E0D;&#x5E72;&#x6270;&#xFF1B;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x96C6;&#x7FA4;&#x7684;&#x8282;&#x70B9;&#x4E0A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#x4EFB;&#x4F55;&#x7EC4;&#x4EF6;&#x3002;&#x81F3;&#x4E8E;&#x6574;&#x4E2A;Docker&#x96C6;&#x7FA4;&#x7684;&#x7BA1;&#x7406;&#xFF0C;&#x4E1A;&#x754C;&#x6709;&#x5F88;&#x591A;&#x6210;&#x719F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F8B;&#x5982;<a href=\"http://mesos.apache.org/\">Mesos</a>&#xFF0C;<a href=\"https://kubernetes.io/\">Kubernetes</a>&#x4E0E;<a href=\"https://github.com/docker/swarm\">Docker Swarm</a>&#x3002;&#x8FD9;&#x4E9B;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;<strong>&#x8C03;&#x5EA6;</strong>&#xFF0C;<strong>&#x670D;&#x52A1;&#x53D1;&#x73B0;</strong>&#xFF0C;<strong>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x8BA9;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x3002;</p>\n<h3 id=\"&#x5982;&#x4F55;&#x7528;Docker\"><a href=\"#&#x5982;&#x4F55;&#x7528;Docker\" class=\"headerlink\" title=\"&#x5982;&#x4F55;&#x7528;Docker?\"></a>&#x5982;&#x4F55;&#x7528;Docker?</h3><h5 id=\"&#x7F16;&#x5199;Dockerfile\"><a href=\"#&#x7F16;&#x5199;Dockerfile\" class=\"headerlink\" title=\"&#x7F16;&#x5199;Dockerfile\"></a>&#x7F16;&#x5199;Dockerfile</h5><p>&#x6B63;&#x786E;&#x7684;<a href=\"https://github.com/Fundebug/nodejs-docker/blob/master/Dockerfile\">Dockerfile</a>&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;DaoCloud&#x7684;Ubuntu&#x955C;&#x50CF;</span></div><div class=\"line\"><span class=\"keyword\">FROM</span> daocloud.io/library/ubuntu:<span class=\"number\">14.04</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x955C;&#x50CF;&#x4F5C;&#x8005;</span></div><div class=\"line\"><span class=\"keyword\">MAINTAINER</span> Fundebug &lt;help@fundebug.com&gt;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x65F6;&#x533A;</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> sudo sh -c <span class=\"string\">&quot;echo &apos;Asia/Shanghai&apos; &gt; /etc/timezone&quot;</span> &amp;&amp; \\</span></div><div class=\"line\">    sudo dpkg-reconfigure <span class=\"_\">-f</span> noninteractive tzdata</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684;Ubuntu&#x955C;&#x50CF;</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> <span class=\"built_in\">echo</span> <span class=\"string\">&apos;\\n\\</span></span></div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\</div><div class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\\n\\</div><div class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\\n&apos;\\</div><div class=\"line\">&gt; /etc/apt/sources.list</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;node v6.10.1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> sudo apt-get update &amp;&amp; sudo apt-get install -y wget</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;&#x6DD8;&#x5B9D;&#x955C;&#x50CF;&#x5B89;&#x88C5;Node.js v6.10.1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> wget https://npm.taobao.org/mirrors/node/v6.10.1/node-v6.10.1-linux-x64.tar.gz &amp;&amp; \\</span></div><div class=\"line\">    tar -C /usr/<span class=\"built_in\">local</span> --strip-components 1 -xzf node-v6.10.1-linux-x64.tar.gz &amp;&amp; \\</div><div class=\"line\">    rm node-v6.10.1-linux-x64.tar.gz </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"bash\"> /app</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;npm&#x6A21;&#x5757;</span></div><div class=\"line\"><span class=\"keyword\">ADD</span><span class=\"bash\"> package.json /app/package.json</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x4F7F;&#x7528;&#x6DD8;&#x5B9D;&#x7684;npm&#x955C;&#x50CF;</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> npm install --production <span class=\"_\">-d</span> --registry=https://registry.npm.taobao.org</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x6DFB;&#x52A0;&#x6E90;&#x4EE3;&#x7801;</span></div><div class=\"line\"><span class=\"keyword\">ADD</span><span class=\"bash\"> . /app</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x8FD0;&#x884C;app.js</span></div><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;node&quot;</span>, <span class=\"string\">&quot;/app/app.js&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p>&#x6709;&#x51E0;&#x70B9;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x5730;&#x65B9;&#xFF1A;</p>\n<ul>\n<li>&#x4F7F;&#x7528;&#x56FD;&#x5185;<a href=\"https://www.daocloud.io/\">DaoCloud</a>&#x7684;Docker&#x4ED3;&#x5E93;&#xFF0C;&#x963F;&#x91CC;&#x4E91;&#x7684;ubuntu&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x6DD8;&#x5B9D;&#x7684;npm&#x955C;&#x50CF;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x4E8B;&#x60C5;&#x7684;;</li>\n<li>&#x5C06;&#x65F6;&#x533A;&#x8BBE;&#x4E3A;Asia/Shanghai&#xFF0C;&#x5426;&#x5219;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x95F4;&#x4F1A;&#x4E0D;&#x5927;&#x5BF9;&#x52B2;;</li>\n<li>&#x4F7F;&#x7528;.dockerignore&#x5FFD;&#x7565;&#x4E0D;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5230;Docker&#x955C;&#x50CF;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#xFF0C;&#x5176;&#x8BED;&#x6CD5;&#x4E0E;.gitigore&#x4E00;&#x81F4;;</li>\n</ul>\n<p>&#x66F4;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x662F;&#xFF0C;<strong>package.json&#x9700;&#x8981;&#x5355;&#x72EC;&#x6DFB;&#x52A0;</strong>&#x3002;Docker&#x5728;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x4E00;&#x5C42;&#x4E00;&#x5C42;&#x6784;&#x5EFA;&#x7684;&#xFF0C;&#x4EC5;&#x5F53;&#x8FD9;&#x4E00;&#x5C42;&#x6709;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;&#x5C42;&#x3002;&#x5982;&#x679C;package.json&#x548C;&#x6E90;&#x4EE3;&#x7801;&#x4E00;&#x8D77;&#x6DFB;&#x52A0;&#x5230;&#x955C;&#x50CF;&#xFF0C;&#x5219;&#x6BCF;&#x6B21;&#x4FEE;&#x6539;&#x6E90;&#x7801;&#x90FD;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5B89;&#x88C5;npm&#x6A21;&#x5757;&#xFF0C;&#x8FD9;&#x6837;&#x6728;&#x6709;&#x5FC5;&#x8981;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6B63;&#x786E;&#x7684;&#x987A;&#x5E8F;&#x662F;: &#x6DFB;&#x52A0;package.json&#xFF1B;&#x5B89;&#x88C5;npm&#x6A21;&#x5757;&#xFF1B;&#x6DFB;&#x52A0;&#x6E90;&#x4EE3;&#x7801;&#x3002;</p>\n<h5 id=\"&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"><a href=\"#&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\" class=\"headerlink\" title=\"&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;\"></a>&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</h5><p>&#x4F7F;&#x7528;<strong>docker build</strong>&#x547D;&#x4EE4;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker build -t fundebug/nodejs .</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;-t&#x9009;&#x9879;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7684;&#x540D;&#x79F0;&#x3002;</p>\n<p>&#x4F7F;&#x7528;<strong>docker images</strong>&#x547D;&#x4EE4;&#x67E5;&#x770B;Docker&#x955C;&#x50CF;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker images</div><div class=\"line\">REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE</div><div class=\"line\">fundebug/nodejs               latest              64530ce811a1        32 minutes ago      266.4 MB</div><div class=\"line\">daocloud.io/library/ubuntu    14.04               b969ab9f929b        9 weeks ago         188 MB</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;fundebug/nodejs&#x955C;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x4E3A;266.4MB&#xFF0C;&#x5728;ubuntu&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E86;80MB&#x5DE6;&#x53F3;&#x3002;</p>\n<h5 id=\"&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"><a href=\"#&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;\"></a>&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;</h5><p>&#x4F7F;&#x7528;<strong>docker run</strong>&#x547D;&#x4EE4;&#x8FD0;&#x884C;Docker&#x5BB9;&#x5668;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker run <span class=\"_\">-d</span> --net=host --name=hello-fundebug fundebug/nodejs</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#xFF0C;-d&#x9009;&#x9879;&#x8868;&#x793A;&#x5BB9;&#x5668;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF1B;&#x2013;net&#x9009;&#x9879;&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x6A21;&#x5F0F;&#xFF0C;host&#x8868;&#x793A;&#x4E0E;&#x4E3B;&#x673A;&#x5171;&#x4EAB;&#x7F51;&#x7EDC;&#xFF1B;&#x2013;name&#x6307;&#x5B9A;&#x4E86;&#x5BB9;&#x5668;&#x7684;&#x540D;&#x79F0;&#x3002;</p>\n<p>&#x4F7F;&#x7528;<strong>docker ps</strong>&#x547D;&#x4EE4;&#x67E5;&#x770B;Docker&#x5BB9;&#x5668;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker ps</div><div class=\"line\">CONTAINER ID        IMAGE                             COMMAND                  CREATED             STATUS              PORTS               NAMES</div><div class=\"line\">e8eb5473970c        fundebug/nodejs                   <span class=\"string\">&quot;node /app/app.js&quot;</span>       37 minutes ago      Up 37 minutes                           hello-</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;COMMAND&#x4E3A;&#x201D;node /app/app.js&#x201D;&#xFF0C;&#x8868;&#x793A;&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x662F;&#x6211;&#x4EEC;&#x518D;Dockerfile&#x4E2D;&#x4F7F;&#x7528;CMD&#x6307;&#x5B9A;&#x7684;&#x3002;&#x4E0D;&#x59A8;&#x4F7F;&#x7528;<strong>docker exec</strong>&#x547D;&#x4EE4;&#x5728;&#x5BB9;&#x5668;&#x5185;&#x6267;&#x884C;ps&#x547D;&#x4EE4;<strong>&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x8FDB;&#x7A0B;</strong>&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo docker <span class=\"built_in\">exec</span> hello-fundebug ps <span class=\"_\">-f</span></div><div class=\"line\">UID        PID  PPID  C STIME TTY          TIME CMD</div><div class=\"line\">root         1     0  0 15:14 ?        00:00:00 node /app/app.js</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x7684;1&#x53F7;&#x8FDB;&#x7A0B;&#x5373;&#x4E3A;node&#x8FDB;&#x7A0B;<strong>node /app/app.js</strong>&#x3002;&#x5728;Linux&#x4E2D;&#xFF0C;PID&#x4E3A;1&#x8FDB;&#x7A0B;&#x6309;&#x8BF4;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x5373;init&#x8FDB;&#x7A0B;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x4E86;&#x5185;&#x6838;&#x7684;Namespace&#x673A;&#x5236;&#xFF0C;&#x4E3A;&#x5BB9;&#x5668;&#x521B;&#x5EFA;&#x4E86;&#x72EC;&#x7ACB;&#x7684;PID&#x7A7A;&#x95F4;&#xFF0C;&#x56E0;&#x6B64;&#x5BB9;&#x5668;&#x4E2D;&#x4E5F;&#x6709;1&#x53F7;&#x8FDB;&#x7A0B;&#x3002;</p>\n<h5 id=\"&#x6D4B;&#x8BD5;\"><a href=\"#&#x6D4B;&#x8BD5;\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;\"></a>&#x6D4B;&#x8BD5;</h5><p>&#x4F7F;&#x7528;curl&#x547D;&#x4EE4;&#x8BBF;&#x95EE;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl localhost:3000</div><div class=\"line\">Hello Fundebug!</div></pre></td></tr></table></figure>\n<h3 id=\"&#x662F;&#x5426;&#x7528;Docker&#xFF1F;\"><a href=\"#&#x662F;&#x5426;&#x7528;Docker&#xFF1F;\" class=\"headerlink\" title=\"&#x662F;&#x5426;&#x7528;Docker&#xFF1F;\"></a>&#x662F;&#x5426;&#x7528;Docker&#xFF1F;</h3><p>&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4F7F;&#x7528;Docker&#x80FD;&#x591F;&#x5E26;&#x6765;&#x5F88;&#x5927;&#x76CA;&#x5904;&#xFF1B;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5F15;&#x5165;Docker&#x5FC5;&#x7136;&#x4F1A;&#x6709;&#x5F88;&#x591A;&#x6311;&#x6218;&#xFF0C;&#x9700;&#x8981;&#x719F;&#x6089;Docker&#x624D;&#x80FD;&#x5E94;&#x5BF9;&#x81EA;&#x5982;&#x3002;<strong>&#x60F3;&#x5FC5;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x8270;&#x96BE;&#x7684;&#x51B3;&#x5B9A;</strong>&#x3002;&#x5982;&#x679C;&#x4ECE;&#x957F;&#x8FDC;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;Docker&#x6B63;&#x5728;&#x6210;&#x4E3A;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#xFF0C;&#x90E8;&#x7F72;&#xFF0C;&#x53D1;&#x5E03;&#x7684;&#x6807;&#x51C6;&#x6280;&#x672F;&#xFF0C;&#x4E5F;&#x8BB8;&#x6211;&#x4EEC;&#x4E0D;&#x5F97;&#x4E0D;&#x7528;&#x5F00;&#x653E;&#x7684;&#x5FC3;&#x6001;&#x5BF9;&#x5F85;&#x5B83;&#x3002;</p>\n<p>&#x4F5C;&#x4E3A;Node.js&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x771F;&#x6B63;&#x7406;&#x89E3;Docker&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x65F6;&#x95F4;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x53EF;&#x4EE5;&#x7ED9;&#x4F60;&#x5E26;&#x6765;&#x5F88;&#x591A;&#x4FBF;&#x5229;&#x3002;&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;</strong>&#xFF0C;&#x8001;&#x53F8;&#x673A;&#x5E26;&#x4F60;&#x73A9;&#x8F6C;&#x9177;&#x70AB;&#x7684;Docker&#x6280;&#x672F;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/03/26/nodejs-docker/nodejs-qq-group.jpeg\"><br></div>\n\n\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://coolshell.cn/articles/17010.html\">DOCKER&#x57FA;&#x7840;&#x6280;&#x672F;&#xFF1A;LINUX NAMESPACE&#xFF08;&#x4E0A;&#xFF09;</a></li>\n<li><a href=\"http://coolshell.cn/articles/17029.html\">DOCKER&#x57FA;&#x7840;&#x6280;&#x672F;&#xFF1A;LINUX NAMESPACE&#xFF08;&#x4E0B;&#xFF09;</a></li>\n<li><a href=\"http://coolshell.cn/articles/17049.html\">DOCKER&#x57FA;&#x7840;&#x6280;&#x672F;&#xFF1A;LINUX CGROUP</a></li>\n<li><a href=\"http://coolshell.cn/articles/17680.html\">&#x4ECE;GITLAB&#x8BEF;&#x5220;&#x9664;&#x6570;&#x636E;&#x5E93;&#x60F3;&#x5230;&#x7684;</a></li>\n<li><a href=\"http://coolshell.cn/articles/17737.html\">AWS &#x7684; S3 &#x6545;&#x969C;&#x56DE;&#x987E;&#x548C;&#x601D;&#x8003;</a></li>\n</ul>"},{"title":"Async/AwaitPromise6","date":"2017-04-01T13:00:00.000Z","_content":"\n\n**:** Node.jsPromisePromiseAsync/Await\n\n<!-- more -->\n\n: [6 Reasons Why JavaScripts Async/Await Blows Promises Away](https://hackernoon.com/6-reasons-why-javascripts-async-await-blows-promises-away-tutorial-c7ec10518dd9)\n: [Fundebug](https://fundebug.com/)\n\n****\n\nNode.js 7.6async/await\n\n### Async/Await\n\nasync/await:\n\n- async/await******Promise**\n- async/awaitPromise\n- async/awaitPromise\n- async/await\n\n\n\n### Async/Await\n\ngetJSONpromisepromiseresolvejsonJSON\"done\"\n\nPromise:\n\n```js\nconst makeRequest = () =>\n  getJSON()\n    .then(data => {\n      console.log(data)\n      return \"done\"\n    })\n\nmakeRequest()\n```\n\nAsync/Await:\n\n```js\nconst makeRequest = async () => {\n  console.log(await getJSON())\n  return \"done\"\n}\n\nmakeRequest()\n```\n\n:\n\n- ayncawaitayncasyncpromisepromisereosolvereturn(reosolve\"done\")\n\n- 1awaitasync\n\n```js\n// await\nawait makeRequest()\n\n//  \nmakeRequest().then((result) => {\n  // \n})\n```\n\nawait getJSON()console.loggetJSONpromisereosolve\n\n\n### Async/Await\n\n#### 1. \n\nAsync/Await.thenPromiseresolvedata\n\n#### 2. \n\nAsync/Awaittry/catchpromisetry/catchJSON.parsePromise.catch\n\n```js\nconst makeRequest = () => {\n  try {\n    getJSON()\n      .then(result => {\n        // JSON.parse\n        const data = JSON.parse(result)\n        console.log(data)\n      })\n      // \n      // .catch((err) => {\n      //   console.log(err)\n      // })\n  } catch (err) {\n    console.log(err)\n  }\n}\n```\n\naync/awaitcatchJSON.parse:\n\n```js\nconst makeRequest = async () => {\n  try {\n    // this parse may fail\n    const data = JSON.parse(await getJSON())\n    console.log(data)\n  } catch (err) {\n    console.log(err)\n  }\n}\n```\n\n#### 3. \n\n\n\n```js\nconst makeRequest = () => {\n  return getJSON()\n    .then(data => {\n      if (data.needsAnotherRequest) {\n        return makeAnotherRequest(data)\n          .then(moreData => {\n            console.log(moreData)\n            return moreData\n          })\n      } else {\n        console.log(data)\n        return data\n      }\n    })\n}\n```\n\n6returnPromise\n\nasync/await:\n\n```js\nconst makeRequest = async () => {\n  const data = await getJSON()\n  if (data.needsAnotherRequest) {\n    const moreData = await makeAnotherRequest(data);\n    console.log(moreData)\n    return moreData\n  } else {\n    console.log(data)\n    return data    \n  }\n}\n```\n\n\n#### 4. \n\npromise1promise1promise2promise3:\n\n```js\nconst makeRequest = () => {\n  return promise1()\n    .then(value1 => {\n      return promise2(value1)\n        .then(value2 => {        \n          return promise3(value1, value2)\n        })\n    })\n}\n```\n\npromise3value1promisevalue 1 & 2 Promise.all\n\n```js\nconst makeRequest = () => {\n  return promise1()\n    .then(value1 => {\n      return Promise.all([value1, promise2(value1)])\n    })\n    .then(([value1, value2]) => {      \n      return promise3(value1, value2)\n    })\n}\n```\n\nvalue1value2\n\nasync/await\n\n```js\nconst makeRequest = async () => {\n  const value1 = await promise1()\n  const value2 = await promise2(value1)\n  return promise3(value1, value2)\n}\n```\n\n#### 5. \n\nPromisePromise:\n\n```js\nconst makeRequest = () => {\n  return callAPromise()\n    .then(() => callAPromise())\n    .then(() => callAPromise())\n    .then(() => callAPromise())\n    .then(() => callAPromise())\n    .then(() => {\n      throw new Error(\"oops\");\n    })\n}\n\nmakeRequest()\n  .catch(err => {\n    console.log(err);\n    // output\n    // Error: oops at callAPromise.then.then.then.then.then (index.js:8:13)\n  })\n```\n\nPromisecallAPromise()\n\nasync/await:\n\n```js\nconst makeRequest = async () => {\n  await callAPromise()\n  await callAPromise()\n  await callAPromise()\n  await callAPromise()\n  await callAPromise()\n  throw new Error(\"oops\");\n}\n\nmakeRequest()\n  .catch(err => {\n    console.log(err);\n    // output\n    // Error: oops at makeRequest (index.js:7:9)\n  })\n```\n\nmakeRequestthen\n\n\n#### 6. \n\nasync/await2Promise:\n\n- \n\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-async-await/debug-promise.png\" />\n</div>\n\n- .thenStep Over.then\n\nawait/asyncawait\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-async-await/debug-async-await.png\" />\n</div>\n\n### \n\nAsync/AwaitJavaScriptPromise\n\n\n### \n\n\nAsync/Await\n\n- : .thenC#\n- Node 7LTS: Node 8\n\n\n[Fundebug](https://fundebug.com/)**Node.js: 177654062**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-async-await/nodejs-qq-group.jpeg\" />\n</div>\n\n\n\n","source":"_posts/2017/04/01/nodejs-async-await.md","raw":"---\ntitle: Async/AwaitPromise6\n\ndate: 2017-04-01 21:00:00\n\ntags: [Node.js, ]\n\n---\n\n\n**:** Node.jsPromisePromiseAsync/Await\n\n<!-- more -->\n\n: [6 Reasons Why JavaScripts Async/Await Blows Promises Away](https://hackernoon.com/6-reasons-why-javascripts-async-await-blows-promises-away-tutorial-c7ec10518dd9)\n: [Fundebug](https://fundebug.com/)\n\n****\n\nNode.js 7.6async/await\n\n### Async/Await\n\nasync/await:\n\n- async/await******Promise**\n- async/awaitPromise\n- async/awaitPromise\n- async/await\n\n\n\n### Async/Await\n\ngetJSONpromisepromiseresolvejsonJSON\"done\"\n\nPromise:\n\n```js\nconst makeRequest = () =>\n  getJSON()\n    .then(data => {\n      console.log(data)\n      return \"done\"\n    })\n\nmakeRequest()\n```\n\nAsync/Await:\n\n```js\nconst makeRequest = async () => {\n  console.log(await getJSON())\n  return \"done\"\n}\n\nmakeRequest()\n```\n\n:\n\n- ayncawaitayncasyncpromisepromisereosolvereturn(reosolve\"done\")\n\n- 1awaitasync\n\n```js\n// await\nawait makeRequest()\n\n//  \nmakeRequest().then((result) => {\n  // \n})\n```\n\nawait getJSON()console.loggetJSONpromisereosolve\n\n\n### Async/Await\n\n#### 1. \n\nAsync/Await.thenPromiseresolvedata\n\n#### 2. \n\nAsync/Awaittry/catchpromisetry/catchJSON.parsePromise.catch\n\n```js\nconst makeRequest = () => {\n  try {\n    getJSON()\n      .then(result => {\n        // JSON.parse\n        const data = JSON.parse(result)\n        console.log(data)\n      })\n      // \n      // .catch((err) => {\n      //   console.log(err)\n      // })\n  } catch (err) {\n    console.log(err)\n  }\n}\n```\n\naync/awaitcatchJSON.parse:\n\n```js\nconst makeRequest = async () => {\n  try {\n    // this parse may fail\n    const data = JSON.parse(await getJSON())\n    console.log(data)\n  } catch (err) {\n    console.log(err)\n  }\n}\n```\n\n#### 3. \n\n\n\n```js\nconst makeRequest = () => {\n  return getJSON()\n    .then(data => {\n      if (data.needsAnotherRequest) {\n        return makeAnotherRequest(data)\n          .then(moreData => {\n            console.log(moreData)\n            return moreData\n          })\n      } else {\n        console.log(data)\n        return data\n      }\n    })\n}\n```\n\n6returnPromise\n\nasync/await:\n\n```js\nconst makeRequest = async () => {\n  const data = await getJSON()\n  if (data.needsAnotherRequest) {\n    const moreData = await makeAnotherRequest(data);\n    console.log(moreData)\n    return moreData\n  } else {\n    console.log(data)\n    return data    \n  }\n}\n```\n\n\n#### 4. \n\npromise1promise1promise2promise3:\n\n```js\nconst makeRequest = () => {\n  return promise1()\n    .then(value1 => {\n      return promise2(value1)\n        .then(value2 => {        \n          return promise3(value1, value2)\n        })\n    })\n}\n```\n\npromise3value1promisevalue 1 & 2 Promise.all\n\n```js\nconst makeRequest = () => {\n  return promise1()\n    .then(value1 => {\n      return Promise.all([value1, promise2(value1)])\n    })\n    .then(([value1, value2]) => {      \n      return promise3(value1, value2)\n    })\n}\n```\n\nvalue1value2\n\nasync/await\n\n```js\nconst makeRequest = async () => {\n  const value1 = await promise1()\n  const value2 = await promise2(value1)\n  return promise3(value1, value2)\n}\n```\n\n#### 5. \n\nPromisePromise:\n\n```js\nconst makeRequest = () => {\n  return callAPromise()\n    .then(() => callAPromise())\n    .then(() => callAPromise())\n    .then(() => callAPromise())\n    .then(() => callAPromise())\n    .then(() => {\n      throw new Error(\"oops\");\n    })\n}\n\nmakeRequest()\n  .catch(err => {\n    console.log(err);\n    // output\n    // Error: oops at callAPromise.then.then.then.then.then (index.js:8:13)\n  })\n```\n\nPromisecallAPromise()\n\nasync/await:\n\n```js\nconst makeRequest = async () => {\n  await callAPromise()\n  await callAPromise()\n  await callAPromise()\n  await callAPromise()\n  await callAPromise()\n  throw new Error(\"oops\");\n}\n\nmakeRequest()\n  .catch(err => {\n    console.log(err);\n    // output\n    // Error: oops at makeRequest (index.js:7:9)\n  })\n```\n\nmakeRequestthen\n\n\n#### 6. \n\nasync/await2Promise:\n\n- \n\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-async-await/debug-promise.png\" />\n</div>\n\n- .thenStep Over.then\n\nawait/asyncawait\n\n<div style=\"text-align: center;\">\n<img style=\"width:80%;\" src=\"nodejs-async-await/debug-async-await.png\" />\n</div>\n\n### \n\nAsync/AwaitJavaScriptPromise\n\n\n### \n\n\nAsync/Await\n\n- : .thenC#\n- Node 7LTS: Node 8\n\n\n[Fundebug](https://fundebug.com/)**Node.js: 177654062**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-async-await/nodejs-qq-group.jpeg\" />\n</div>\n\n\n\n","slug":"2017/04/01/nodejs-async-await","published":1,"updated":"2017-04-16T14:46:59.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtn8001l71fy5wra3wcu","content":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> Node.js&#x7684;&#x5F02;&#x6B65;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x6709;&#x6548;&#x63D0;&#x9AD8;&#x4E86;&#x5E94;&#x7528;&#x6027;&#x80FD;&#xFF1B;&#x7136;&#x800C;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#x5374;&#x8BA9;&#x4EBA;&#x671B;&#x800C;&#x751F;&#x754F;&#xFF0C;Promise&#x8BA9;&#x6211;&#x4EEC;&#x544A;&#x522B;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5199;&#x51FA;&#x66F4;&#x4F18;&#x96C5;&#x7684;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#xFF1B;&#x5728;&#x5B9E;&#x8DF5;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5374;&#x53D1;&#x73B0;Promise&#x5E76;&#x4E0D;&#x5B8C;&#x7F8E;&#xFF1B;&#x6280;&#x672F;&#x8FDB;&#x6B65;&#x662F;&#x65E0;&#x6B62;&#x5883;&#x7684;&#xFF0C;&#x8FD9;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E86;Async/Await&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x539F;&#x6587;: <a href=\"https://hackernoon.com/6-reasons-why-javascripts-async-await-blows-promises-away-tutorial-c7ec10518dd9\" target=\"_blank\" rel=\"external\">6 Reasons Why JavaScript&#x2019;s Async/Await Blows Promises Away</a><br>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>Node.js 7.6&#x5DF2;&#x7ECF;&#x652F;&#x6301;async/await&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6CA1;&#x6709;&#x8BD5;&#x8FC7;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x544A;&#x8BC9;&#x4F60;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x5B83;&#x3002;</p>\n<h3 id=\"Async-Await&#x7B80;&#x4ECB;\"><a href=\"#Async-Await&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"Async/Await&#x7B80;&#x4ECB;\"></a>Async/Await&#x7B80;&#x4ECB;</h3><p>&#x5BF9;&#x4E8E;&#x4ECE;&#x672A;&#x542C;&#x8BF4;&#x8FC7;async/await&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x7B80;&#x4ECB;:</p>\n<ul>\n<li>async/await&#x662F;&#x5199;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x7684;&#x65B0;&#x65B9;&#x5F0F;&#xFF0C;&#x4EE5;&#x524D;&#x7684;&#x65B9;&#x6CD5;&#x6709;<strong>&#x56DE;&#x8C03;&#x51FD;&#x6570;</strong>&#x548C;<strong>Promise</strong>&#x3002;</li>\n<li>async/await&#x662F;&#x57FA;&#x4E8E;Promise&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5B83;&#x4E0D;&#x80FD;&#x7528;&#x4E8E;&#x666E;&#x901A;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>\n<li>async/await&#x4E0E;Promise&#x4E00;&#x6837;&#xFF0C;&#x662F;&#x975E;&#x963B;&#x585E;&#x7684;&#x3002;</li>\n<li>async/await&#x4F7F;&#x5F97;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x6B63;&#x662F;&#x5B83;&#x7684;&#x9B54;&#x529B;&#x6240;&#x5728;&#x3002;</li>\n</ul>\n<h3 id=\"Async-Await&#x8BED;&#x6CD5;\"><a href=\"#Async-Await&#x8BED;&#x6CD5;\" class=\"headerlink\" title=\"Async/Await&#x8BED;&#x6CD5;\"></a>Async/Await&#x8BED;&#x6CD5;</h3><p>&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;getJSON&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;promise&#xFF0C;&#x8FD9;&#x4E2A;promise&#x6210;&#x529F;resolve&#x65F6;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;json&#x5BF9;&#x8C61;&#x3002;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6253;&#x5370;&#x8FD4;&#x56DE;&#x7684;JSON&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x201D;done&#x201D;&#x3002;</p>\n<p>&#x4F7F;&#x7528;Promise&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></div><div class=\"line\">  getJSON()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">&quot;done&quot;</span></div><div class=\"line\">    })</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;Async/Await&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> getJSON())</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;done&quot;</span></div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x4EEC;&#x6709;&#x4E00;&#x4E9B;&#x7EC6;&#x5FAE;&#x4E0D;&#x540C;:</p>\n<ul>\n<li><p>&#x51FD;&#x6570;&#x524D;&#x9762;&#x591A;&#x4E86;&#x4E00;&#x4E2A;aync&#x5173;&#x952E;&#x5B57;&#x3002;await&#x5173;&#x952E;&#x5B57;&#x53EA;&#x80FD;&#x7528;&#x5728;aync&#x5B9A;&#x4E49;&#x7684;&#x51FD;&#x6570;&#x5185;&#x3002;async&#x51FD;&#x6570;&#x4F1A;&#x9690;&#x5F0F;&#x5730;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;promise&#xFF0C;&#x8BE5;promise&#x7684;reosolve&#x503C;&#x5C31;&#x662F;&#x51FD;&#x6570;return&#x7684;&#x503C;&#x3002;(&#x793A;&#x4F8B;&#x4E2D;reosolve&#x503C;&#x5C31;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x201D;done&#x201D;)</p>\n</li>\n<li><p>&#x7B2C;1&#x70B9;&#x6697;&#x793A;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x5728;&#x6700;&#x5916;&#x5C42;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;await&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x5728;async&#x51FD;&#x6570;&#x5185;&#x3002;</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// &#x4E0D;&#x80FD;&#x5728;&#x6700;&#x5916;&#x5C42;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;await</span></div><div class=\"line\"><span class=\"keyword\">await</span> makeRequest()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x8FD9;&#x662F;&#x4F1A;&#x51FA;&#x4E8B;&#x60C5;&#x7684; </span></div><div class=\"line\">makeRequest().then(<span class=\"function\">(<span class=\"params\">result</span>) =&gt;</span> {</div><div class=\"line\">  <span class=\"comment\">// &#x4EE3;&#x7801;</span></div><div class=\"line\">})</div></pre></td></tr></table></figure>\n<p>await getJSON()&#x8868;&#x793A;console.log&#x4F1A;&#x7B49;&#x5230;getJSON&#x7684;promise&#x6210;&#x529F;reosolve&#x4E4B;&#x540E;&#x518D;&#x6267;&#x884C;&#x3002;</p>\n<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;Async-Await&#x66F4;&#x597D;&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;Async-Await&#x66F4;&#x597D;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;Async/Await&#x66F4;&#x597D;&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;Async/Await&#x66F4;&#x597D;&#xFF1F;</h3><h4 id=\"1-&#x7B80;&#x6D01;\"><a href=\"#1-&#x7B80;&#x6D01;\" class=\"headerlink\" title=\"1. &#x7B80;&#x6D01;\"></a>1. &#x7B80;&#x6D01;</h4><p>&#x7531;&#x793A;&#x4F8B;&#x53EF;&#x77E5;&#xFF0C;&#x4F7F;&#x7528;Async/Await&#x660E;&#x663E;&#x8282;&#x7EA6;&#x4E86;&#x4E0D;&#x5C11;&#x4EE3;&#x7801;&#x3002;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5199;.then&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5199;&#x533F;&#x540D;&#x51FD;&#x6570;&#x5904;&#x7406;Promise&#x7684;resolve&#x503C;&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x591A;&#x4F59;&#x7684;data&#x53D8;&#x91CF;&#xFF0C;&#x8FD8;&#x907F;&#x514D;&#x4E86;&#x5D4C;&#x5957;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x4E9B;&#x5C0F;&#x7684;&#x4F18;&#x70B9;&#x4F1A;&#x8FC5;&#x901F;&#x7D2F;&#x8BA1;&#x8D77;&#x6765;&#xFF0C;&#x8FD9;&#x5728;&#x4E4B;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#x4E2D;&#x4F1A;&#x66F4;&#x52A0;&#x660E;&#x663E;&#x3002;</p>\n<h4 id=\"2-&#x9519;&#x8BEF;&#x5904;&#x7406;\"><a href=\"#2-&#x9519;&#x8BEF;&#x5904;&#x7406;\" class=\"headerlink\" title=\"2. &#x9519;&#x8BEF;&#x5904;&#x7406;\"></a>2. &#x9519;&#x8BEF;&#x5904;&#x7406;</h4><p>Async/Await&#x8BA9;try/catch&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5904;&#x7406;&#x540C;&#x6B65;&#x548C;&#x5F02;&#x6B65;&#x9519;&#x8BEF;&#x3002;&#x5728;&#x4E0B;&#x9762;&#x7684;promise&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;try/catch&#x4E0D;&#x80FD;&#x5904;&#x7406;JSON.parse&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5728;Promise&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;.catch&#xFF0C;&#x8FD9;&#x6837;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x4EE3;&#x7801;&#x975E;&#x5E38;&#x5197;&#x4F59;&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5B9E;&#x9645;&#x751F;&#x4EA7;&#x4EE3;&#x7801;&#x4F1A;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">try</span> {</div><div class=\"line\">    getJSON()</div><div class=\"line\">      .then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> {</div><div class=\"line\">        <span class=\"comment\">// JSON.parse&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x9519;</span></div><div class=\"line\">        <span class=\"keyword\">const</span> data = <span class=\"built_in\">JSON</span>.parse(result)</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">      })</div><div class=\"line\">      <span class=\"comment\">// &#x53D6;&#x6D88;&#x6CE8;&#x91CA;&#xFF0C;&#x5904;&#x7406;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x7684;&#x9519;&#x8BEF;</span></div><div class=\"line\">      <span class=\"comment\">// .catch((err) =&gt; {</span></div><div class=\"line\">      <span class=\"comment\">//   console.log(err)</span></div><div class=\"line\">      <span class=\"comment\">// })</span></div><div class=\"line\">  } <span class=\"keyword\">catch</span> (err) {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;aync/await&#x7684;&#x8BDD;&#xFF0C;catch&#x80FD;&#x5904;&#x7406;JSON.parse&#x9519;&#x8BEF;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">try</span> {</div><div class=\"line\">    <span class=\"comment\">// this parse may fail</span></div><div class=\"line\">    <span class=\"keyword\">const</span> data = <span class=\"built_in\">JSON</span>.parse(<span class=\"keyword\">await</span> getJSON())</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">  } <span class=\"keyword\">catch</span> (err) {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x6761;&#x4EF6;&#x8BED;&#x53E5;\"><a href=\"#3-&#x6761;&#x4EF6;&#x8BED;&#x53E5;\" class=\"headerlink\" title=\"3. &#x6761;&#x4EF6;&#x8BED;&#x53E5;\"></a>3. &#x6761;&#x4EF6;&#x8BED;&#x53E5;</h4><p>&#x4E0B;&#x9762;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x51B3;&#x5B9A;&#x662F;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x8FD8;&#x662F;&#x7EE7;&#x7EED;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> getJSON()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">if</span> (data.needsAnotherRequest) {</div><div class=\"line\">        <span class=\"keyword\">return</span> makeAnotherRequest(data)</div><div class=\"line\">          .then(<span class=\"function\"><span class=\"params\">moreData</span> =&gt;</span> {</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(moreData)</div><div class=\"line\">            <span class=\"keyword\">return</span> moreData</div><div class=\"line\">          })</div><div class=\"line\">      } <span class=\"keyword\">else</span> {</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">        <span class=\"keyword\">return</span> data</div><div class=\"line\">      }</div><div class=\"line\">    })</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E9B;&#x4EE3;&#x7801;&#x770B;&#x7740;&#x5C31;&#x5934;&#x75DB;&#x3002;&#x5D4C;&#x5957;&#xFF08;6&#x5C42;&#xFF09;&#xFF0C;&#x62EC;&#x53F7;&#xFF0C;return&#x8BED;&#x53E5;&#x5F88;&#x5BB9;&#x6613;&#x8BA9;&#x4EBA;&#x611F;&#x5230;&#x8FF7;&#x832B;&#xFF0C;&#x800C;&#x5B83;&#x4EEC;&#x53EA;&#x662F;&#x9700;&#x8981;&#x5C06;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x4F20;&#x9012;&#x5230;&#x6700;&#x5916;&#x5C42;&#x7684;Promise&#x3002;</p>\n<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4F7F;&#x7528;async/await&#x7F16;&#x5199;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x53EF;&#x8BFB;&#x6027;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> getJSON()</div><div class=\"line\">  <span class=\"keyword\">if</span> (data.needsAnotherRequest) {</div><div class=\"line\">    <span class=\"keyword\">const</span> moreData = <span class=\"keyword\">await</span> makeAnotherRequest(data);</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(moreData)</div><div class=\"line\">    <span class=\"keyword\">return</span> moreData</div><div class=\"line\">  } <span class=\"keyword\">else</span> {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">    <span class=\"keyword\">return</span> data    </div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x4E2D;&#x95F4;&#x503C;\"><a href=\"#4-&#x4E2D;&#x95F4;&#x503C;\" class=\"headerlink\" title=\"4. &#x4E2D;&#x95F4;&#x503C;\"></a>4. &#x4E2D;&#x95F4;&#x503C;</h4><p>&#x4F60;&#x5F88;&#x53EF;&#x80FD;&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x8C03;&#x7528;promise1&#xFF0C;&#x4F7F;&#x7528;promise1&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x53BB;&#x8C03;&#x7528;promise2&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x4E24;&#x8005;&#x7684;&#x7ED3;&#x679C;&#x53BB;&#x8C03;&#x7528;promise3&#x3002;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> promise1()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">value1</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">return</span> promise2(value1)</div><div class=\"line\">        .then(<span class=\"function\"><span class=\"params\">value2</span> =&gt;</span> {        </div><div class=\"line\">          <span class=\"keyword\">return</span> promise3(value1, value2)</div><div class=\"line\">        })</div><div class=\"line\">    })</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;promise3&#x4E0D;&#x9700;&#x8981;value1&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x7B80;&#x5355;&#x5730;&#x5C06;promise&#x5D4C;&#x5957;&#x94FA;&#x5E73;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5FCD;&#x53D7;&#x4E0D;&#x4E86;&#x5D4C;&#x5957;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;value 1 &amp; 2 &#x653E;&#x8FDB;Promise.all&#x6765;&#x907F;&#x514D;&#x6DF1;&#x5C42;&#x5D4C;&#x5957;&#xFF1A;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> promise1()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">value1</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.all([value1, promise2(value1)])</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">[value1, value2]</span>) =&gt;</span> {      </div><div class=\"line\">      <span class=\"keyword\">return</span> promise3(value1, value2)</div><div class=\"line\">    })</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4E3A;&#x4E86;&#x53EF;&#x8BFB;&#x6027;&#x727A;&#x7272;&#x4E86;&#x8BED;&#x4E49;&#x3002;&#x9664;&#x4E86;&#x907F;&#x514D;&#x5D4C;&#x5957;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7406;&#x7531;&#x5C06;value1&#x548C;value2&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#x3002;</p>\n<p>&#x4F7F;&#x7528;async/await&#x7684;&#x8BDD;&#xFF0C;&#x4EE3;&#x7801;&#x4F1A;&#x53D8;&#x5F97;&#x5F02;&#x5E38;&#x7B80;&#x5355;&#x548C;&#x76F4;&#x89C2;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">const</span> value1 = <span class=\"keyword\">await</span> promise1()</div><div class=\"line\">  <span class=\"keyword\">const</span> value2 = <span class=\"keyword\">await</span> promise2(value1)</div><div class=\"line\">  <span class=\"keyword\">return</span> promise3(value1, value2)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h4 id=\"5-&#x9519;&#x8BEF;&#x6808;\"><a href=\"#5-&#x9519;&#x8BEF;&#x6808;\" class=\"headerlink\" title=\"5. &#x9519;&#x8BEF;&#x6808;\"></a>5. &#x9519;&#x8BEF;&#x6808;</h4><p>&#x4E0B;&#x9762;&#x793A;&#x4F8B;&#x4E2D;&#x8C03;&#x7528;&#x4E86;&#x591A;&#x4E2A;Promise&#xFF0C;&#x5047;&#x8BBE;Promise&#x94FE;&#x4E2D;&#x67D0;&#x4E2A;&#x5730;&#x65B9;&#x629B;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> callAPromise()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;oops&quot;</span>);</div><div class=\"line\">    })</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">    <span class=\"comment\">// output</span></div><div class=\"line\">    <span class=\"comment\">// Error: oops at callAPromise.then.then.then.then.then (index.js:8:13)</span></div><div class=\"line\">  })</div></pre></td></tr></table></figure>\n<p>Promise&#x94FE;&#x4E2D;&#x8FD4;&#x56DE;&#x7684;&#x9519;&#x8BEF;&#x6808;&#x6CA1;&#x6709;&#x7ED9;&#x51FA;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x4F4D;&#x7F6E;&#x7684;&#x7EBF;&#x7D22;&#x3002;&#x66F4;&#x7CDF;&#x7CD5;&#x7684;&#x662F;&#xFF0C;&#x5B83;&#x4F1A;&#x8BEF;&#x5BFC;&#x6211;&#x4EEC;&#xFF1B;&#x9519;&#x8BEF;&#x6808;&#x4E2D;&#x552F;&#x4E00;&#x7684;&#x51FD;&#x6570;&#x540D;&#x4E3A;callAPromise&#xFF0C;&#x7136;&#x800C;&#x5B83;&#x548C;&#x9519;&#x8BEF;&#x6CA1;&#x6709;&#x5173;&#x7CFB;&#x3002;(&#x6587;&#x4EF6;&#x540D;&#x548C;&#x884C;&#x53F7;&#x8FD8;&#x662F;&#x6709;&#x7528;&#x7684;)&#x3002;</p>\n<p>&#x7136;&#x800C;&#xFF0C;async/await&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#x6808;&#x4F1A;&#x6307;&#x5411;&#x9519;&#x8BEF;&#x6240;&#x5728;&#x7684;&#x51FD;&#x6570;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;oops&quot;</span>);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">    <span class=\"comment\">// output</span></div><div class=\"line\">    <span class=\"comment\">// Error: oops at makeRequest (index.js:7:9)</span></div><div class=\"line\">  })</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x4F18;&#x52BF;&#x5E76;&#x4E0D;&#x5927;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x4F60;&#x5206;&#x6790;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x7684;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x65F6;&#xFF0C;&#x5B83;&#x5C06;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x77E5;&#x9053;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x5728;makeRequest&#x6BD4;&#x77E5;&#x9053;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x5728;then&#x94FE;&#x4E2D;&#x8981;&#x597D;&#x3002;</p>\n<h4 id=\"6-&#x8C03;&#x8BD5;\"><a href=\"#6-&#x8C03;&#x8BD5;\" class=\"headerlink\" title=\"6. &#x8C03;&#x8BD5;\"></a>6. &#x8C03;&#x8BD5;</h4><p>&#x6700;&#x540E;&#x4E00;&#x70B9;&#xFF0C;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x5728;&#x4E8E;&#xFF0C;async/await&#x80FD;&#x591F;&#x4F7F;&#x5F97;&#x4EE3;&#x7801;&#x8C03;&#x8BD5;&#x66F4;&#x7B80;&#x5355;&#x3002;2&#x4E2A;&#x7406;&#x7531;&#x4F7F;&#x5F97;&#x8C03;&#x8BD5;Promise&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x75DB;&#x82E6;:</p>\n<ul>\n<li>&#x4E0D;&#x80FD;&#x5728;&#x8FD4;&#x56DE;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x4E2D;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;</li>\n</ul>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/04/01/nodejs-async-await/debug-promise.png\"><br></div>\n\n<ul>\n<li>&#x5982;&#x679C;&#x4F60;&#x5728;.then&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#xFF0C;&#x4F7F;&#x7528;Step Over&#x5FEB;&#x6377;&#x952E;&#xFF0C;&#x8C03;&#x8BD5;&#x5668;&#x4E0D;&#x4F1A;&#x8DF3;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;.then&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EA;&#x4F1A;&#x8DF3;&#x8FC7;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x3002;</li>\n</ul>\n<p>&#x4F7F;&#x7528;await/async&#x65F6;&#xFF0C;&#x4F60;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x90A3;&#x4E48;&#x591A;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x50CF;&#x8C03;&#x8BD5;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x4E00;&#x6837;&#x8DF3;&#x8FC7;await&#x8BED;&#x53E5;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/04/01/nodejs-async-await/debug-async-await.png\"><br></div>\n\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>Async/Await&#x662F;&#x8FD1;&#x5E74;&#x6765;JavaScript&#x6DFB;&#x52A0;&#x7684;&#x6700;&#x9769;&#x547D;&#x6027;&#x7684;&#x7684;&#x7279;&#x6027;&#x4E4B;&#x4E00;&#x3002;&#x5B83;&#x4F1A;&#x8BA9;&#x4F60;&#x53D1;&#x73B0;Promise&#x7684;&#x8BED;&#x6CD5;&#x6709;&#x591A;&#x7CDF;&#x7CD5;&#xFF0C;&#x800C;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x76F4;&#x89C2;&#x7684;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"&#x5FE7;&#x8651;\"><a href=\"#&#x5FE7;&#x8651;\" class=\"headerlink\" title=\"&#x5FE7;&#x8651;\"></a>&#x5FE7;&#x8651;</h3><p>&#x5BF9;&#x4E8E;Async/Await&#xFF0C;&#x4E5F;&#x8BB8;&#x4F60;&#x6709;&#x4E00;&#x4E9B;&#x5408;&#x7406;&#x7684;&#x6000;&#x7591;&#xFF1A;</p>\n<ul>\n<li>&#x5B83;&#x4F7F;&#x5F97;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x4E0D;&#x5728;&#x660E;&#x663E;: &#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x4E60;&#x60EF;&#x4E86;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6216;&#x8005;.then&#x6765;&#x8BC6;&#x522B;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x82B1;&#x6570;&#x4E2A;&#x661F;&#x671F;&#x53BB;&#x4E60;&#x60EF;&#x65B0;&#x7684;&#x6807;&#x5FD7;&#x3002;&#x4F46;&#x662F;&#xFF0C;C#&#x62E5;&#x6709;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x5DF2;&#x7ECF;&#x5F88;&#x591A;&#x5E74;&#x4E86;&#xFF0C;&#x719F;&#x6089;&#x5B83;&#x7684;&#x670B;&#x53CB;&#x5E94;&#x8BE5;&#x77E5;&#x9053;&#x6682;&#x65F6;&#x7684;&#x7A0D;&#x5FAE;&#x4E0D;&#x65B9;&#x4FBF;&#x662F;&#x503C;&#x5F97;&#x7684;&#x3002;</li>\n<li>Node 7&#x4E0D;&#x662F;LTS&#xFF08;&#x957F;&#x671F;&#x652F;&#x6301;&#x7248;&#x672C;&#xFF09;: &#x4F46;&#x662F;&#xFF0C;Node 8&#x4E0B;&#x4E2A;&#x6708;&#x5C31;&#x4F1A;&#x53D1;&#x5E03;&#xFF0C;&#x5C06;&#x4EE3;&#x7801;&#x8FC1;&#x79FB;&#x5230;&#x65B0;&#x7248;&#x672C;&#x4F1A;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;</li>\n</ul>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 177654062</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/01/nodejs-async-await/nodejs-qq-group.jpeg\"><br></div>\n\n\n\n","excerpt":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> Node.js&#x7684;&#x5F02;&#x6B65;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x6709;&#x6548;&#x63D0;&#x9AD8;&#x4E86;&#x5E94;&#x7528;&#x6027;&#x80FD;&#xFF1B;&#x7136;&#x800C;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#x5374;&#x8BA9;&#x4EBA;&#x671B;&#x800C;&#x751F;&#x754F;&#xFF0C;Promise&#x8BA9;&#x6211;&#x4EEC;&#x544A;&#x522B;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5199;&#x51FA;&#x66F4;&#x4F18;&#x96C5;&#x7684;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#xFF1B;&#x5728;&#x5B9E;&#x8DF5;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5374;&#x53D1;&#x73B0;Promise&#x5E76;&#x4E0D;&#x5B8C;&#x7F8E;&#xFF1B;&#x6280;&#x672F;&#x8FDB;&#x6B65;&#x662F;&#x65E0;&#x6B62;&#x5883;&#x7684;&#xFF0C;&#x8FD9;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E86;Async/Await&#x3002;</p>","more":"<p>&#x539F;&#x6587;: <a href=\"https://hackernoon.com/6-reasons-why-javascripts-async-await-blows-promises-away-tutorial-c7ec10518dd9\">6 Reasons Why JavaScript&#x2019;s Async/Await Blows Promises Away</a><br>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>Node.js 7.6&#x5DF2;&#x7ECF;&#x652F;&#x6301;async/await&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6CA1;&#x6709;&#x8BD5;&#x8FC7;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x544A;&#x8BC9;&#x4F60;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x5B83;&#x3002;</p>\n<h3 id=\"Async-Await&#x7B80;&#x4ECB;\"><a href=\"#Async-Await&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"Async/Await&#x7B80;&#x4ECB;\"></a>Async/Await&#x7B80;&#x4ECB;</h3><p>&#x5BF9;&#x4E8E;&#x4ECE;&#x672A;&#x542C;&#x8BF4;&#x8FC7;async/await&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x7B80;&#x4ECB;:</p>\n<ul>\n<li>async/await&#x662F;&#x5199;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x7684;&#x65B0;&#x65B9;&#x5F0F;&#xFF0C;&#x4EE5;&#x524D;&#x7684;&#x65B9;&#x6CD5;&#x6709;<strong>&#x56DE;&#x8C03;&#x51FD;&#x6570;</strong>&#x548C;<strong>Promise</strong>&#x3002;</li>\n<li>async/await&#x662F;&#x57FA;&#x4E8E;Promise&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5B83;&#x4E0D;&#x80FD;&#x7528;&#x4E8E;&#x666E;&#x901A;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>\n<li>async/await&#x4E0E;Promise&#x4E00;&#x6837;&#xFF0C;&#x662F;&#x975E;&#x963B;&#x585E;&#x7684;&#x3002;</li>\n<li>async/await&#x4F7F;&#x5F97;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x6B63;&#x662F;&#x5B83;&#x7684;&#x9B54;&#x529B;&#x6240;&#x5728;&#x3002;</li>\n</ul>\n<h3 id=\"Async-Await&#x8BED;&#x6CD5;\"><a href=\"#Async-Await&#x8BED;&#x6CD5;\" class=\"headerlink\" title=\"Async/Await&#x8BED;&#x6CD5;\"></a>Async/Await&#x8BED;&#x6CD5;</h3><p>&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;getJSON&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;promise&#xFF0C;&#x8FD9;&#x4E2A;promise&#x6210;&#x529F;resolve&#x65F6;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;json&#x5BF9;&#x8C61;&#x3002;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6253;&#x5370;&#x8FD4;&#x56DE;&#x7684;JSON&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x201D;done&#x201D;&#x3002;</p>\n<p>&#x4F7F;&#x7528;Promise&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></div><div class=\"line\">  getJSON()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">&quot;done&quot;</span></div><div class=\"line\">    })</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;Async/Await&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">await</span> getJSON())</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;done&quot;</span></div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x4EEC;&#x6709;&#x4E00;&#x4E9B;&#x7EC6;&#x5FAE;&#x4E0D;&#x540C;:</p>\n<ul>\n<li><p>&#x51FD;&#x6570;&#x524D;&#x9762;&#x591A;&#x4E86;&#x4E00;&#x4E2A;aync&#x5173;&#x952E;&#x5B57;&#x3002;await&#x5173;&#x952E;&#x5B57;&#x53EA;&#x80FD;&#x7528;&#x5728;aync&#x5B9A;&#x4E49;&#x7684;&#x51FD;&#x6570;&#x5185;&#x3002;async&#x51FD;&#x6570;&#x4F1A;&#x9690;&#x5F0F;&#x5730;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;promise&#xFF0C;&#x8BE5;promise&#x7684;reosolve&#x503C;&#x5C31;&#x662F;&#x51FD;&#x6570;return&#x7684;&#x503C;&#x3002;(&#x793A;&#x4F8B;&#x4E2D;reosolve&#x503C;&#x5C31;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x201D;done&#x201D;)</p>\n</li>\n<li><p>&#x7B2C;1&#x70B9;&#x6697;&#x793A;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x5728;&#x6700;&#x5916;&#x5C42;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;await&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x5728;async&#x51FD;&#x6570;&#x5185;&#x3002;</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// &#x4E0D;&#x80FD;&#x5728;&#x6700;&#x5916;&#x5C42;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;await</span></div><div class=\"line\"><span class=\"keyword\">await</span> makeRequest()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// &#x8FD9;&#x662F;&#x4F1A;&#x51FA;&#x4E8B;&#x60C5;&#x7684; </span></div><div class=\"line\">makeRequest().then(<span class=\"function\">(<span class=\"params\">result</span>) =&gt;</span> {</div><div class=\"line\">  <span class=\"comment\">// &#x4EE3;&#x7801;</span></div><div class=\"line\">})</div></pre></td></tr></table></figure>\n<p>await getJSON()&#x8868;&#x793A;console.log&#x4F1A;&#x7B49;&#x5230;getJSON&#x7684;promise&#x6210;&#x529F;reosolve&#x4E4B;&#x540E;&#x518D;&#x6267;&#x884C;&#x3002;</p>\n<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;Async-Await&#x66F4;&#x597D;&#xFF1F;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;Async-Await&#x66F4;&#x597D;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;Async/Await&#x66F4;&#x597D;&#xFF1F;\"></a>&#x4E3A;&#x4EC0;&#x4E48;Async/Await&#x66F4;&#x597D;&#xFF1F;</h3><h4 id=\"1-&#x7B80;&#x6D01;\"><a href=\"#1-&#x7B80;&#x6D01;\" class=\"headerlink\" title=\"1. &#x7B80;&#x6D01;\"></a>1. &#x7B80;&#x6D01;</h4><p>&#x7531;&#x793A;&#x4F8B;&#x53EF;&#x77E5;&#xFF0C;&#x4F7F;&#x7528;Async/Await&#x660E;&#x663E;&#x8282;&#x7EA6;&#x4E86;&#x4E0D;&#x5C11;&#x4EE3;&#x7801;&#x3002;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5199;.then&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5199;&#x533F;&#x540D;&#x51FD;&#x6570;&#x5904;&#x7406;Promise&#x7684;resolve&#x503C;&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x591A;&#x4F59;&#x7684;data&#x53D8;&#x91CF;&#xFF0C;&#x8FD8;&#x907F;&#x514D;&#x4E86;&#x5D4C;&#x5957;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x4E9B;&#x5C0F;&#x7684;&#x4F18;&#x70B9;&#x4F1A;&#x8FC5;&#x901F;&#x7D2F;&#x8BA1;&#x8D77;&#x6765;&#xFF0C;&#x8FD9;&#x5728;&#x4E4B;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#x4E2D;&#x4F1A;&#x66F4;&#x52A0;&#x660E;&#x663E;&#x3002;</p>\n<h4 id=\"2-&#x9519;&#x8BEF;&#x5904;&#x7406;\"><a href=\"#2-&#x9519;&#x8BEF;&#x5904;&#x7406;\" class=\"headerlink\" title=\"2. &#x9519;&#x8BEF;&#x5904;&#x7406;\"></a>2. &#x9519;&#x8BEF;&#x5904;&#x7406;</h4><p>Async/Await&#x8BA9;try/catch&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5904;&#x7406;&#x540C;&#x6B65;&#x548C;&#x5F02;&#x6B65;&#x9519;&#x8BEF;&#x3002;&#x5728;&#x4E0B;&#x9762;&#x7684;promise&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;try/catch&#x4E0D;&#x80FD;&#x5904;&#x7406;JSON.parse&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5728;Promise&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;.catch&#xFF0C;&#x8FD9;&#x6837;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x4EE3;&#x7801;&#x975E;&#x5E38;&#x5197;&#x4F59;&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5B9E;&#x9645;&#x751F;&#x4EA7;&#x4EE3;&#x7801;&#x4F1A;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">try</span> {</div><div class=\"line\">    getJSON()</div><div class=\"line\">      .then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> {</div><div class=\"line\">        <span class=\"comment\">// JSON.parse&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x9519;</span></div><div class=\"line\">        <span class=\"keyword\">const</span> data = <span class=\"built_in\">JSON</span>.parse(result)</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">      })</div><div class=\"line\">      <span class=\"comment\">// &#x53D6;&#x6D88;&#x6CE8;&#x91CA;&#xFF0C;&#x5904;&#x7406;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x7684;&#x9519;&#x8BEF;</span></div><div class=\"line\">      <span class=\"comment\">// .catch((err) =&gt; {</span></div><div class=\"line\">      <span class=\"comment\">//   console.log(err)</span></div><div class=\"line\">      <span class=\"comment\">// })</span></div><div class=\"line\">  } <span class=\"keyword\">catch</span> (err) {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;aync/await&#x7684;&#x8BDD;&#xFF0C;catch&#x80FD;&#x5904;&#x7406;JSON.parse&#x9519;&#x8BEF;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">try</span> {</div><div class=\"line\">    <span class=\"comment\">// this parse may fail</span></div><div class=\"line\">    <span class=\"keyword\">const</span> data = <span class=\"built_in\">JSON</span>.parse(<span class=\"keyword\">await</span> getJSON())</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">  } <span class=\"keyword\">catch</span> (err) {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x6761;&#x4EF6;&#x8BED;&#x53E5;\"><a href=\"#3-&#x6761;&#x4EF6;&#x8BED;&#x53E5;\" class=\"headerlink\" title=\"3. &#x6761;&#x4EF6;&#x8BED;&#x53E5;\"></a>3. &#x6761;&#x4EF6;&#x8BED;&#x53E5;</h4><p>&#x4E0B;&#x9762;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x51B3;&#x5B9A;&#x662F;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x8FD8;&#x662F;&#x7EE7;&#x7EED;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> getJSON()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">if</span> (data.needsAnotherRequest) {</div><div class=\"line\">        <span class=\"keyword\">return</span> makeAnotherRequest(data)</div><div class=\"line\">          .then(<span class=\"function\"><span class=\"params\">moreData</span> =&gt;</span> {</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(moreData)</div><div class=\"line\">            <span class=\"keyword\">return</span> moreData</div><div class=\"line\">          })</div><div class=\"line\">      } <span class=\"keyword\">else</span> {</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">        <span class=\"keyword\">return</span> data</div><div class=\"line\">      }</div><div class=\"line\">    })</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E9B;&#x4EE3;&#x7801;&#x770B;&#x7740;&#x5C31;&#x5934;&#x75DB;&#x3002;&#x5D4C;&#x5957;&#xFF08;6&#x5C42;&#xFF09;&#xFF0C;&#x62EC;&#x53F7;&#xFF0C;return&#x8BED;&#x53E5;&#x5F88;&#x5BB9;&#x6613;&#x8BA9;&#x4EBA;&#x611F;&#x5230;&#x8FF7;&#x832B;&#xFF0C;&#x800C;&#x5B83;&#x4EEC;&#x53EA;&#x662F;&#x9700;&#x8981;&#x5C06;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x4F20;&#x9012;&#x5230;&#x6700;&#x5916;&#x5C42;&#x7684;Promise&#x3002;</p>\n<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4F7F;&#x7528;async/await&#x7F16;&#x5199;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x53EF;&#x8BFB;&#x6027;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> getJSON()</div><div class=\"line\">  <span class=\"keyword\">if</span> (data.needsAnotherRequest) {</div><div class=\"line\">    <span class=\"keyword\">const</span> moreData = <span class=\"keyword\">await</span> makeAnotherRequest(data);</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(moreData)</div><div class=\"line\">    <span class=\"keyword\">return</span> moreData</div><div class=\"line\">  } <span class=\"keyword\">else</span> {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(data)</div><div class=\"line\">    <span class=\"keyword\">return</span> data    </div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x4E2D;&#x95F4;&#x503C;\"><a href=\"#4-&#x4E2D;&#x95F4;&#x503C;\" class=\"headerlink\" title=\"4. &#x4E2D;&#x95F4;&#x503C;\"></a>4. &#x4E2D;&#x95F4;&#x503C;</h4><p>&#x4F60;&#x5F88;&#x53EF;&#x80FD;&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x8C03;&#x7528;promise1&#xFF0C;&#x4F7F;&#x7528;promise1&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x53BB;&#x8C03;&#x7528;promise2&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x4E24;&#x8005;&#x7684;&#x7ED3;&#x679C;&#x53BB;&#x8C03;&#x7528;promise3&#x3002;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> promise1()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">value1</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">return</span> promise2(value1)</div><div class=\"line\">        .then(<span class=\"function\"><span class=\"params\">value2</span> =&gt;</span> {        </div><div class=\"line\">          <span class=\"keyword\">return</span> promise3(value1, value2)</div><div class=\"line\">        })</div><div class=\"line\">    })</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;promise3&#x4E0D;&#x9700;&#x8981;value1&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x7B80;&#x5355;&#x5730;&#x5C06;promise&#x5D4C;&#x5957;&#x94FA;&#x5E73;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5FCD;&#x53D7;&#x4E0D;&#x4E86;&#x5D4C;&#x5957;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;value 1 &amp; 2 &#x653E;&#x8FDB;Promise.all&#x6765;&#x907F;&#x514D;&#x6DF1;&#x5C42;&#x5D4C;&#x5957;&#xFF1A;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> promise1()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">value1</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.all([value1, promise2(value1)])</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">[value1, value2]</span>) =&gt;</span> {      </div><div class=\"line\">      <span class=\"keyword\">return</span> promise3(value1, value2)</div><div class=\"line\">    })</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4E3A;&#x4E86;&#x53EF;&#x8BFB;&#x6027;&#x727A;&#x7272;&#x4E86;&#x8BED;&#x4E49;&#x3002;&#x9664;&#x4E86;&#x907F;&#x514D;&#x5D4C;&#x5957;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7406;&#x7531;&#x5C06;value1&#x548C;value2&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#x3002;</p>\n<p>&#x4F7F;&#x7528;async/await&#x7684;&#x8BDD;&#xFF0C;&#x4EE3;&#x7801;&#x4F1A;&#x53D8;&#x5F97;&#x5F02;&#x5E38;&#x7B80;&#x5355;&#x548C;&#x76F4;&#x89C2;&#x3002;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">const</span> value1 = <span class=\"keyword\">await</span> promise1()</div><div class=\"line\">  <span class=\"keyword\">const</span> value2 = <span class=\"keyword\">await</span> promise2(value1)</div><div class=\"line\">  <span class=\"keyword\">return</span> promise3(value1, value2)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h4 id=\"5-&#x9519;&#x8BEF;&#x6808;\"><a href=\"#5-&#x9519;&#x8BEF;&#x6808;\" class=\"headerlink\" title=\"5. &#x9519;&#x8BEF;&#x6808;\"></a>5. &#x9519;&#x8BEF;&#x6808;</h4><p>&#x4E0B;&#x9762;&#x793A;&#x4F8B;&#x4E2D;&#x8C03;&#x7528;&#x4E86;&#x591A;&#x4E2A;Promise&#xFF0C;&#x5047;&#x8BBE;Promise&#x94FE;&#x4E2D;&#x67D0;&#x4E2A;&#x5730;&#x65B9;&#x629B;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">  <span class=\"keyword\">return</span> callAPromise()</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> callAPromise())</div><div class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> {</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;oops&quot;</span>);</div><div class=\"line\">    })</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">    <span class=\"comment\">// output</span></div><div class=\"line\">    <span class=\"comment\">// Error: oops at callAPromise.then.then.then.then.then (index.js:8:13)</span></div><div class=\"line\">  })</div></pre></td></tr></table></figure>\n<p>Promise&#x94FE;&#x4E2D;&#x8FD4;&#x56DE;&#x7684;&#x9519;&#x8BEF;&#x6808;&#x6CA1;&#x6709;&#x7ED9;&#x51FA;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x4F4D;&#x7F6E;&#x7684;&#x7EBF;&#x7D22;&#x3002;&#x66F4;&#x7CDF;&#x7CD5;&#x7684;&#x662F;&#xFF0C;&#x5B83;&#x4F1A;&#x8BEF;&#x5BFC;&#x6211;&#x4EEC;&#xFF1B;&#x9519;&#x8BEF;&#x6808;&#x4E2D;&#x552F;&#x4E00;&#x7684;&#x51FD;&#x6570;&#x540D;&#x4E3A;callAPromise&#xFF0C;&#x7136;&#x800C;&#x5B83;&#x548C;&#x9519;&#x8BEF;&#x6CA1;&#x6709;&#x5173;&#x7CFB;&#x3002;(&#x6587;&#x4EF6;&#x540D;&#x548C;&#x884C;&#x53F7;&#x8FD8;&#x662F;&#x6709;&#x7528;&#x7684;)&#x3002;</p>\n<p>&#x7136;&#x800C;&#xFF0C;async/await&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#x6808;&#x4F1A;&#x6307;&#x5411;&#x9519;&#x8BEF;&#x6240;&#x5728;&#x7684;&#x51FD;&#x6570;:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> makeRequest = <span class=\"keyword\">async</span> () =&gt; {</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">await</span> callAPromise()</div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;oops&quot;</span>);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">makeRequest()</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> {</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">    <span class=\"comment\">// output</span></div><div class=\"line\">    <span class=\"comment\">// Error: oops at makeRequest (index.js:7:9)</span></div><div class=\"line\">  })</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x4F18;&#x52BF;&#x5E76;&#x4E0D;&#x5927;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x4F60;&#x5206;&#x6790;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x7684;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x65F6;&#xFF0C;&#x5B83;&#x5C06;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x77E5;&#x9053;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x5728;makeRequest&#x6BD4;&#x77E5;&#x9053;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x5728;then&#x94FE;&#x4E2D;&#x8981;&#x597D;&#x3002;</p>\n<h4 id=\"6-&#x8C03;&#x8BD5;\"><a href=\"#6-&#x8C03;&#x8BD5;\" class=\"headerlink\" title=\"6. &#x8C03;&#x8BD5;\"></a>6. &#x8C03;&#x8BD5;</h4><p>&#x6700;&#x540E;&#x4E00;&#x70B9;&#xFF0C;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x5728;&#x4E8E;&#xFF0C;async/await&#x80FD;&#x591F;&#x4F7F;&#x5F97;&#x4EE3;&#x7801;&#x8C03;&#x8BD5;&#x66F4;&#x7B80;&#x5355;&#x3002;2&#x4E2A;&#x7406;&#x7531;&#x4F7F;&#x5F97;&#x8C03;&#x8BD5;Promise&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x75DB;&#x82E6;:</p>\n<ul>\n<li>&#x4E0D;&#x80FD;&#x5728;&#x8FD4;&#x56DE;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x4E2D;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;</li>\n</ul>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/04/01/nodejs-async-await/debug-promise.png\"><br></div>\n\n<ul>\n<li>&#x5982;&#x679C;&#x4F60;&#x5728;.then&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#xFF0C;&#x4F7F;&#x7528;Step Over&#x5FEB;&#x6377;&#x952E;&#xFF0C;&#x8C03;&#x8BD5;&#x5668;&#x4E0D;&#x4F1A;&#x8DF3;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;.then&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EA;&#x4F1A;&#x8DF3;&#x8FC7;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x3002;</li>\n</ul>\n<p>&#x4F7F;&#x7528;await/async&#x65F6;&#xFF0C;&#x4F60;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x90A3;&#x4E48;&#x591A;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x50CF;&#x8C03;&#x8BD5;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x4E00;&#x6837;&#x8DF3;&#x8FC7;await&#x8BED;&#x53E5;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:80%;\" src=\"/2017/04/01/nodejs-async-await/debug-async-await.png\"><br></div>\n\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>Async/Await&#x662F;&#x8FD1;&#x5E74;&#x6765;JavaScript&#x6DFB;&#x52A0;&#x7684;&#x6700;&#x9769;&#x547D;&#x6027;&#x7684;&#x7684;&#x7279;&#x6027;&#x4E4B;&#x4E00;&#x3002;&#x5B83;&#x4F1A;&#x8BA9;&#x4F60;&#x53D1;&#x73B0;Promise&#x7684;&#x8BED;&#x6CD5;&#x6709;&#x591A;&#x7CDF;&#x7CD5;&#xFF0C;&#x800C;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x76F4;&#x89C2;&#x7684;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"&#x5FE7;&#x8651;\"><a href=\"#&#x5FE7;&#x8651;\" class=\"headerlink\" title=\"&#x5FE7;&#x8651;\"></a>&#x5FE7;&#x8651;</h3><p>&#x5BF9;&#x4E8E;Async/Await&#xFF0C;&#x4E5F;&#x8BB8;&#x4F60;&#x6709;&#x4E00;&#x4E9B;&#x5408;&#x7406;&#x7684;&#x6000;&#x7591;&#xFF1A;</p>\n<ul>\n<li>&#x5B83;&#x4F7F;&#x5F97;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x4E0D;&#x5728;&#x660E;&#x663E;: &#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x4E60;&#x60EF;&#x4E86;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6216;&#x8005;.then&#x6765;&#x8BC6;&#x522B;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x82B1;&#x6570;&#x4E2A;&#x661F;&#x671F;&#x53BB;&#x4E60;&#x60EF;&#x65B0;&#x7684;&#x6807;&#x5FD7;&#x3002;&#x4F46;&#x662F;&#xFF0C;C#&#x62E5;&#x6709;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x5DF2;&#x7ECF;&#x5F88;&#x591A;&#x5E74;&#x4E86;&#xFF0C;&#x719F;&#x6089;&#x5B83;&#x7684;&#x670B;&#x53CB;&#x5E94;&#x8BE5;&#x77E5;&#x9053;&#x6682;&#x65F6;&#x7684;&#x7A0D;&#x5FAE;&#x4E0D;&#x65B9;&#x4FBF;&#x662F;&#x503C;&#x5F97;&#x7684;&#x3002;</li>\n<li>Node 7&#x4E0D;&#x662F;LTS&#xFF08;&#x957F;&#x671F;&#x652F;&#x6301;&#x7248;&#x672C;&#xFF09;: &#x4F46;&#x662F;&#xFF0C;Node 8&#x4E0B;&#x4E2A;&#x6708;&#x5C31;&#x4F1A;&#x53D1;&#x5E03;&#xFF0C;&#x5C06;&#x4EE3;&#x7801;&#x8FC1;&#x79FB;&#x5230;&#x65B0;&#x7248;&#x672C;&#x4F1A;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;</li>\n</ul>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 177654062</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/01/nodejs-async-await/nodejs-qq-group.jpeg\"><br></div>"},{"title":"Script error.","date":"2017-04-05T02:00:00.000Z","_content":"\n\n[Fundebug](https://fundebug.com/)[JavaScript](https://docs.fundebug.com/notifier/javascript/)**Script error.**0...\n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:80%;\" src=\"understand-script-error/script-error.png\" />\n</div>\n\n`Script error.`\n\n###  (Same origin policy)\n\n`Script error.`[MDN - Same-origin policy](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy):\n> Two pages have the same origin if the protocol, port (if one is specified), and host are the same for both pages. \n\n()JavaScript`https://fundebug.com/app.js`:\n\n<style type=\"text/css\">\n\tcode {\n\t\ttext-overflow:clip;/**/\n            white-space:nowrap;/**/\n            overflow:hidden;/**/\n\t}\n</style>\n\n|                                   |    |    |\n| ----------------------------------   | --------: | :----: |\n| `https://fundebug.com/vendor.js`   |         |         |\n| `http://fundebug.com/vendor.js`    |         |   |\n| `https://fundebug.com:8001/app.js` |         |   |\n| `https://docs.fundebug.com/nav.js`  |         |   |\n| `https://kiwenlau.com/totop.js`     |         |   |\n\n[ - FreeBuf](http://www.freebuf.com/articles/web/65468.html)\n\n> GmailJavaScript Gmail\n\n### Script error. ?\n\n(css, image, javascript)CDNJavaScript****, `Script error.`\n\n([Cryptic Script Error. reported in Javascript in Chrome and Firefox](http://stackoverflow.com/questions/5913978/cryptic-script-error-reported-in-javascript-in-chrome-and-firefox))\n\n> JavaScript `<script src=\"cbcc.com/index.html\">``' ....' is undefined``'...' is undefined` \n\n\n### \n\n[webkit](http://trac.webkit.org/browser/branches/chromium/648/Source/WebCore/dom/ScriptExecutionContext.cpp)\n\n```c++\nbool ScriptExecutionContext::dispatchErrorEvent(const String& errorMessage, \n    int lineNumber, \n    const String& sourceURL)\n{\n    EventTarget* target = errorEventTarget();\n    if (!target)\n        return false;\n    ...\n    if (securityOrigin()->canRequest(targetUrl)) {\n        message = errorMessage;\n        line = lineNumber;\n        sourceName = sourceURL;\n    } else {\n        message = \"Script error.\";\n        sourceName = String();\n        line = 0;\n    }\n    ...\n}\n```\n\nurl(`securityOrigin()->canRequest(targetUrl)`)`Script error.`, 0.\n\nCDN`Script error.`\n\n### \n\n**index.html**onerror\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Test Script error</title>\n    <script type=\"text/javascript\">\n      window.onerror = function(errorMessage, scriptURI, lineNumber, columnNumber, error){\n        console.log(errorMessage);\n        console.log(scriptURI);\n        console.log(lineNumber);\n        console.log(columnNumber);\n        console.log(error);\n      }\n    </script>\n    <script type=\"text/javascript\" src=\"./scripterror.js\"></script>\n</head>\n<body>\n</body>\n</html>\n```\n\n**scripterror.js**Error\n\n```js\nthrow new Error('Hello, Fundebug');\n```\n\n[`http-server`](https://www.npmjs.com/package/http-server)[http://localhost:8080/index.html](http://localhost:8080/index.html)\n\nChrome:\n\n<div style=\"text-align: left;\">\n<img style=\"width:35.8%;\" src=\"understand-script-error/script-error-ok.png\" />\n</div>\n\n\n`Scrpt error.` `scripterror.js``coding.net`:\n\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Test Script error</title>\n    <script type=\"text/javascript\">\n      window.onerror = function(errorMessage, scriptURI, lineNumber, columnNumber, error){\n        console.log(errorMessage);\n        console.log(scriptURI);\n        console.log(lineNumber);\n        console.log(columnNumber);\n        console.log(error);\n      }\n    </script>\n    <script type=\"text/javascript\" src=\"http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js\"></script>\n</head>\n<body>\n</body>\n</html>\n```\n`http-server`, \n\n<div style=\"text-align: left;\">\n<img style=\"width:35.8%;\" src=\"understand-script-error/script-error-not-ok-chrome.png\" />\n</div>\n\n`Script error.`\n\n### \n\n`Script error.``Script error.`**Script error**[](http://blog.fundebug.com/2017/04/06/test-script-error/)[](http://blog.fundebug.com/2017/04/07/solve-script-error/)\n","source":"_posts/2017/04/05/understand-script-error.md","raw":"---\ntitle: Script error.\n\ndate: 2017-04-05 10:00:00\n\ntags: [JavaScript, BUG]\n\n---\n\n\n[Fundebug](https://fundebug.com/)[JavaScript](https://docs.fundebug.com/notifier/javascript/)**Script error.**0...\n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:80%;\" src=\"understand-script-error/script-error.png\" />\n</div>\n\n`Script error.`\n\n###  (Same origin policy)\n\n`Script error.`[MDN - Same-origin policy](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy):\n> Two pages have the same origin if the protocol, port (if one is specified), and host are the same for both pages. \n\n()JavaScript`https://fundebug.com/app.js`:\n\n<style type=\"text/css\">\n\tcode {\n\t\ttext-overflow:clip;/**/\n            white-space:nowrap;/**/\n            overflow:hidden;/**/\n\t}\n</style>\n\n|                                   |    |    |\n| ----------------------------------   | --------: | :----: |\n| `https://fundebug.com/vendor.js`   |         |         |\n| `http://fundebug.com/vendor.js`    |         |   |\n| `https://fundebug.com:8001/app.js` |         |   |\n| `https://docs.fundebug.com/nav.js`  |         |   |\n| `https://kiwenlau.com/totop.js`     |         |   |\n\n[ - FreeBuf](http://www.freebuf.com/articles/web/65468.html)\n\n> GmailJavaScript Gmail\n\n### Script error. ?\n\n(css, image, javascript)CDNJavaScript****, `Script error.`\n\n([Cryptic Script Error. reported in Javascript in Chrome and Firefox](http://stackoverflow.com/questions/5913978/cryptic-script-error-reported-in-javascript-in-chrome-and-firefox))\n\n> JavaScript `<script src=\"cbcc.com/index.html\">``' ....' is undefined``'...' is undefined` \n\n\n### \n\n[webkit](http://trac.webkit.org/browser/branches/chromium/648/Source/WebCore/dom/ScriptExecutionContext.cpp)\n\n```c++\nbool ScriptExecutionContext::dispatchErrorEvent(const String& errorMessage, \n    int lineNumber, \n    const String& sourceURL)\n{\n    EventTarget* target = errorEventTarget();\n    if (!target)\n        return false;\n    ...\n    if (securityOrigin()->canRequest(targetUrl)) {\n        message = errorMessage;\n        line = lineNumber;\n        sourceName = sourceURL;\n    } else {\n        message = \"Script error.\";\n        sourceName = String();\n        line = 0;\n    }\n    ...\n}\n```\n\nurl(`securityOrigin()->canRequest(targetUrl)`)`Script error.`, 0.\n\nCDN`Script error.`\n\n### \n\n**index.html**onerror\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Test Script error</title>\n    <script type=\"text/javascript\">\n      window.onerror = function(errorMessage, scriptURI, lineNumber, columnNumber, error){\n        console.log(errorMessage);\n        console.log(scriptURI);\n        console.log(lineNumber);\n        console.log(columnNumber);\n        console.log(error);\n      }\n    </script>\n    <script type=\"text/javascript\" src=\"./scripterror.js\"></script>\n</head>\n<body>\n</body>\n</html>\n```\n\n**scripterror.js**Error\n\n```js\nthrow new Error('Hello, Fundebug');\n```\n\n[`http-server`](https://www.npmjs.com/package/http-server)[http://localhost:8080/index.html](http://localhost:8080/index.html)\n\nChrome:\n\n<div style=\"text-align: left;\">\n<img style=\"width:35.8%;\" src=\"understand-script-error/script-error-ok.png\" />\n</div>\n\n\n`Scrpt error.` `scripterror.js``coding.net`:\n\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Test Script error</title>\n    <script type=\"text/javascript\">\n      window.onerror = function(errorMessage, scriptURI, lineNumber, columnNumber, error){\n        console.log(errorMessage);\n        console.log(scriptURI);\n        console.log(lineNumber);\n        console.log(columnNumber);\n        console.log(error);\n      }\n    </script>\n    <script type=\"text/javascript\" src=\"http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js\"></script>\n</head>\n<body>\n</body>\n</html>\n```\n`http-server`, \n\n<div style=\"text-align: left;\">\n<img style=\"width:35.8%;\" src=\"understand-script-error/script-error-not-ok-chrome.png\" />\n</div>\n\n`Script error.`\n\n### \n\n`Script error.``Script error.`**Script error**[](http://blog.fundebug.com/2017/04/06/test-script-error/)[](http://blog.fundebug.com/2017/04/07/solve-script-error/)\n","slug":"2017/04/05/understand-script-error","published":1,"updated":"2017-04-07T11:53:07.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtna001o71fy31wxa3gf","content":"<p>&#x4E00;&#x4E9B;&#x7528;&#x6237;&#x5411;&#x6211;&#x4EEC;&#x53CD;&#x9988;&#xFF0C;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x7684;<a href=\"https://docs.fundebug.com/notifier/javascript/\" target=\"_blank\" rel=\"external\">JavaScript</a>&#x76D1;&#x63A7;&#x63D2;&#x4EF6;&#x6293;&#x5230;&#x4E86;&#x5F88;&#x591A;<strong>Script error.</strong>&#xFF0C;&#x7136;&#x540E;&#x884C;&#x53F7;&#x548C;&#x5217;&#x53F7;&#x90FD;&#x662F;0&#x2026;&#x8FD9;&#x5C31;&#x5F88;&#x5C34;&#x5C2C;&#x4E86;&#x3002;</p>\n<a id=\"more\"></a>\n<div style=\"text-align: left;\"><br><img style=\"width:80%;\" src=\"/2017/04/05/understand-script-error/script-error.png\"><br></div>\n\n<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BE6;&#x7EC6;&#x5730;&#x89E3;&#x6790;&#x4E00;&#x4E0B;<code>Script error.</code>&#xFF0C;&#x540E;&#x7EED;&#x6211;&#x4EEC;&#x8FD8;&#x4F1A;&#x6DF1;&#x5EA6;&#x6D4B;&#x8BD5;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"&#x540C;&#x6E90;&#x7B56;&#x7565;-Same-origin-policy\"><a href=\"#&#x540C;&#x6E90;&#x7B56;&#x7565;-Same-origin-policy\" class=\"headerlink\" title=\"&#x540C;&#x6E90;&#x7B56;&#x7565; (Same origin policy)\"></a>&#x540C;&#x6E90;&#x7B56;&#x7565; (Same origin policy)</h3><p>&#x89E3;&#x91CA;<code>Script error.</code>&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x7B80;&#x5355;&#x804A;&#x804A;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x3002;&#x6458;&#x81EA;<a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\" target=\"_blank\" rel=\"external\">MDN - Same-origin policy</a>:</p>\n<blockquote>\n<p>Two pages have the same origin if the protocol, port (if one is specified), and host are the same for both pages. </p>\n</blockquote>\n<p>&#x6240;&#x8C13;&#x540C;&#x6E90;&#xFF0C;&#x5C31;&#x662F;&#x6307;&#x4E24;&#x4E2A;&#x9875;&#x9762;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x534F;&#x8BAE;&#x3001;&#x7AEF;&#x53E3;&#x548C;&#x4E3B;&#x673A;(&#x57DF;&#x540D;)&#x3002;&#x901A;&#x8FC7;&#x7B2C;&#x4E09;&#x65B9;&#x52A0;&#x8F7D;&#x7684;JavaScript&#x811A;&#x672C;&#x662F;&#x4E0D;&#x540C;&#x6E90;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x8868;&#x683C;&#x7B80;&#x5355;&#x5217;&#x51FA;&#x4E86;&#x548C;<code>https://fundebug.com/app.js</code>&#x662F;&#x5426;&#x540C;&#x6E90;&#x7684;&#x6587;&#x4EF6;:</p>\n<style type=\"text/css\">\n    code {\n        text-overflow:clip;/**/\n            white-space:nowrap;/**/\n            overflow:hidden;/**/\n    }\n</style>\n\n<table>\n<thead>\n<tr>\n<th>&#x7F51;&#x5740;</th>\n<th style=\"text-align:right\">&#x662F;&#x5426;&#x540C;&#x6E90;</th>\n<th style=\"text-align:center\">&#x539F;&#x56E0;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>https://fundebug.com/vendor.js</code></td>\n<td style=\"text-align:right\">&#x662F;</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td><code>http://fundebug.com/vendor.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x534F;&#x8BAE;&#x4E0D;&#x540C;</td>\n</tr>\n<tr>\n<td><code>https://fundebug.com:8001/app.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x7AEF;&#x53E3;&#x4E0D;&#x540C;</td>\n</tr>\n<tr>\n<td><code>https://docs.fundebug.com/nav.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x5B50;&#x57DF;&#x540D;&#x4E0D;&#x540C;</td>\n</tr>\n<tr>\n<td><code>https://kiwenlau.com/totop.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x57DF;&#x540D;&#x4E0D;&#x540C;</td>\n</tr>\n</tbody>\n</table>\n<p>&#x6CA1;&#x6709;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x7684;&#x8BDD;&#xFF0C;&#x5C06;&#x4F1A;&#x600E;&#x6837;&#xFF1F;&#x6458;&#x81EA;<a href=\"http://www.freebuf.com/articles/web/65468.html\" target=\"_blank\" rel=\"external\">&#x540C;&#x6E90;&#x7B56;&#x7565;&#x8BE6;&#x89E3;&#x53CA;&#x7ED5;&#x8FC7; - FreeBuf</a>&#xFF1A;</p>\n<blockquote>\n<p>&#x5047;&#x8BBE;&#x4F60;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x767B;&#x5F55;Gmail&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x6076;&#x610F;&#x7AD9;&#x70B9;&#xFF08;&#x53E6;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x9009;&#x9879;&#x5361;&#xFF09;&#x3002;&#x6CA1;&#x6709;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;JavaScript&#x83B7;&#x53D6;&#x4F60;&#x7684;&#x90AE;&#x4EF6;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x654F;&#x611F;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#x9605;&#x8BFB;&#x4F60;&#x7684;&#x79C1;&#x5BC6;&#x90AE;&#x4EF6;&#xFF0C;&#x53D1;&#x9001;&#x865A;&#x5047;&#x90AE;&#x4EF6;&#xFF0C;&#x770B;&#x4F60;&#x7684;&#x804A;&#x5929;&#x8BB0;&#x5F55;&#x7B49;&#x7B49;&#x3002; &#x5982;&#x679C;&#x5C06;Gmail&#x66FF;&#x6362;&#x4E3A;&#x4F60;&#x7684;&#x94F6;&#x884C;&#x5E10;&#x6237;&#xFF0C;&#x95EE;&#x9898;&#x5C31;&#x5927;&#x6761;&#x4E86;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script-error\"><a href=\"#&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script-error\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script error. ?\"></a>&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script error. ?</h3><p>&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x7F51;&#x7AD9;&#x7684;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x90FD;&#x4F1A;&#x5C06;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;(css, image, javascript)&#x653E;&#x5728;&#x7B2C;&#x4E09;&#x65B9;CDN&#x3002;&#x5F53;&#x8FD9;&#x4E9B;&#x4ECE;&#x7B2C;&#x4E09;&#x65B9;&#x52A0;&#x8F7D;&#x7684;JavaScript&#x811A;&#x672C;&#x6267;&#x884C;&#x51FA;&#x9519;&#xFF0C;&#x56E0;&#x4E3A;&#x8FDD;&#x80CC;&#x4E86;<strong>&#x540C;&#x6E90;&#x7B56;&#x7565;</strong>, &#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x4E0D;&#x88AB;&#x6CC4;&#x9732;&#xFF0C;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x4E0D;&#x4F1A;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x53D6;&#x800C;&#x4EE3;&#x4E4B;&#x53EA;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>Script error.</code>&#x3002;</p>\n<p>&#x66B4;&#x9732;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x4F1A;&#x600E;&#x6837;&#x5462;&#xFF1F;&#x6458;&#x81EA;(<a href=\"http://stackoverflow.com/questions/5913978/cryptic-script-error-reported-in-javascript-in-chrome-and-firefox\" target=\"_blank\" rel=\"external\">Cryptic &#x201C;Script Error.&#x201D; reported in Javascript in Chrome and Firefox</a>)&#xFF1A;</p>\n<blockquote>\n<p>&#x5047;&#x60F3;&#x4F60;&#x4E0D;&#x5C0F;&#x5FC3;&#x8BBF;&#x95EE;&#x4E86;&#x4E00;&#x4E2A;&#x6076;&#x610F;&#x7F51;&#x7AD9;&#xFF0C;&#x7F51;&#x9875;&#x91CC;&#x9762;&#x5077;&#x5077;&#x653E;&#x5165;&#x4E86;&#x4E00;&#x6BB5;JavaScript&#x811A;&#x672C; <code>&lt;script src=&quot;cbcc.com/index.html&quot;&gt;</code>&#xFF0C;&#x8FD9;&#x6BB5;&#x811A;&#x672C;&#x6307;&#x5411;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x67D0;&#x94F6;&#x884C;&#x7F51;&#x7AD9;&#x9996;&#x9875;&#x3002;&#x867D;&#x7136;&#x811A;&#x672C;&#x4F1A;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x4F46;&#x662F;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x5374;&#x6709;&#x53EF;&#x80FD;&#x6CC4;&#x9732;&#x4F60;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x767B;&#x5F55;&#x8FC7;&#x8BE5;&#x94F6;&#x884C;&#x7F51;&#x7AD9;&#x5E76;&#x4E14;&#x5904;&#x4E8E;&#x767B;&#x5F55;&#x72B6;&#x6001;&#xFF0C;&#x90A3;&#x4E48;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x53EF;&#x80FD;&#x4E3A;<code>&apos;&#x6B22;&#x8FCE;&#x4F60; ....&apos; is undefined</code>&#xFF1B;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x767B;&#x5F55;&#xFF0C;&#x90A3;&#x4E48;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x53EF;&#x80FD;&#x662F;<code>&apos;&#x8BF7;&#x767B;&#x5F55;...&apos; is undefined</code>&#x3002; &#x7136;&#x540E;&#x9ED1;&#x5BA2;&#x5C31;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x786E;&#x5B9A;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x94F6;&#x884C;&#x7F51;&#x7AD9;&#xFF0C;&#x5E76;&#x4E14;&#x4F2A;&#x9020;&#x4E00;&#x4E2A;&#x9493;&#x9C7C;&#x7F51;&#x7AD9;&#x6765;&#x9A97;&#x53D6;&#x94B1;&#x8D22;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x6E90;&#x7801;\"><a href=\"#&#x6E90;&#x7801;\" class=\"headerlink\" title=\"&#x6E90;&#x7801;\"></a>&#x6E90;&#x7801;</h3><p><a href=\"http://trac.webkit.org/browser/branches/chromium/648/Source/WebCore/dom/ScriptExecutionContext.cpp\" target=\"_blank\" rel=\"external\">webkit&#x6E90;&#x7801;</a>&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">bool</span> ScriptExecutionContext::dispatchErrorEvent(<span class=\"keyword\">const</span> String&amp; errorMessage, </div><div class=\"line\">    <span class=\"keyword\">int</span> lineNumber, </div><div class=\"line\">    <span class=\"keyword\">const</span> String&amp; sourceURL)</div><div class=\"line\">{</div><div class=\"line\">    EventTarget* target = errorEventTarget();</div><div class=\"line\">    <span class=\"keyword\">if</span> (!target)</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    ...</div><div class=\"line\">    <span class=\"keyword\">if</span> (securityOrigin()-&gt;canRequest(targetUrl)) {</div><div class=\"line\">        message = errorMessage;</div><div class=\"line\">        line = lineNumber;</div><div class=\"line\">        sourceName = sourceURL;</div><div class=\"line\">    } <span class=\"keyword\">else</span> {</div><div class=\"line\">        message = <span class=\"string\">&quot;Script error.&quot;</span>;</div><div class=\"line\">        sourceName = String();</div><div class=\"line\">        line = <span class=\"number\">0</span>;</div><div class=\"line\">    }</div><div class=\"line\">    ...</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x5224;&#x65AD;&#x6240;&#x52A0;&#x8F7D;&#x7684;&#x8D44;&#x6E90;url&#x662F;&#x5426;&#x540C;&#x6E90;(<code>securityOrigin()-&gt;canRequest(targetUrl)</code>)&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x540C;&#x6E90;&#xFF0C;&#x5219;&#x5C06;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x9690;&#x85CF;&#xFF0C;&#x8D4B;&#x503C;&#x4E3A;<code>Script error.</code>, &#x5E76;&#x4E14;&#x5C06;&#x884C;&#x53F7;&#x8BBE;&#x4E3A;0.</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4ECE;&#x7B2C;&#x4E09;&#x65B9;CDN&#x670D;&#x52A1;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x9519;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C06;&#x53EA;&#x80FD;&#x770B;&#x5230;<code>Script error.</code>&#x3002;</p>\n<h3 id=\"&#x9519;&#x8BEF;&#x590D;&#x73B0;\"><a href=\"#&#x9519;&#x8BEF;&#x590D;&#x73B0;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x590D;&#x73B0;\"></a>&#x9519;&#x8BEF;&#x590D;&#x73B0;</h3><p>&#x6211;&#x4EEC;&#x7528;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x3002;&#x4E0B;&#x9762;&#x662F;<strong>index.html</strong>&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;onerror&#x6765;&#x6355;&#x83B7;&#x9519;&#x8BEF;&#x3002;</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Test Script error<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">      <span class=\"built_in\">window</span>.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">errorMessage, scriptURI, lineNumber, columnNumber, error</span>)</span>{</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(errorMessage);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(scriptURI);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(lineNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(columnNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error);</div><div class=\"line\">      }</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x5728;<strong>scripterror.js</strong>&#x4E2D;&#x629B;&#x51FA;&#x4E00;&#x4E2A;Error&#x5BF9;&#x8C61;&#xFF1A;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;Hello, Fundebug&apos;</span>);</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;&#x7684;<a href=\"https://www.npmjs.com/package/http-server\" target=\"_blank\" rel=\"external\"><code>http-server</code></a>&#x6302;&#x8F7D;&#x6587;&#x4EF6;&#xFF0C;&#x6253;&#x5F00;<a href=\"http://localhost:8080/index.html\" target=\"_blank\" rel=\"external\">http://localhost:8080/index.html</a>&#xFF0C;</p>\n<p>&#x5728;Chrome&#x6D4F;&#x89C8;&#x5668;&#x63A7;&#x5236;&#x53F0;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8BE6;&#x7EC6;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:35.8%;\" src=\"/2017/04/05/understand-script-error/script-error-ok.png\"><br></div>\n\n\n<p>&#x4E3A;&#x4E86;&#x590D;&#x73B0;<code>Scrpt error.</code>&#xFF0C; &#x5C06;<code>scripterror.js</code>&#x653E;&#x5230;&#x6211;&#x5728;<code>coding.net</code>&#x7684;&#x4E2A;&#x4EBA;&#x9879;&#x76EE;&#x4E0B;&#x9762;:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Test Script error<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">      <span class=\"built_in\">window</span>.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">errorMessage, scriptURI, lineNumber, columnNumber, error</span>)</span>{</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(errorMessage);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(scriptURI);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(lineNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(columnNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error);</div><div class=\"line\">      }</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;<code>http-server</code>, &#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:35.8%;\" src=\"/2017/04/05/understand-script-error/script-error-not-ok-chrome.png\"><br></div>\n\n<p>&#x56E0;&#x4E3A;&#x8FDD;&#x80CC;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF0C;&#x8FD9;&#x65F6;&#x53EA;&#x80FD;&#x62FF;&#x5230;<code>Script error.</code>&#x3002;</p>\n<h3 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h3><p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;<code>Script error.</code>&#x7684;&#x7531;&#x6765;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x4F8B;&#x6765;&#x6F14;&#x793A;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;<code>Script error.</code>&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5BF9;<strong>Script error</strong>&#x8FDB;&#x884C;<a href=\"http://blog.fundebug.com/2017/04/06/test-script-error/\" target=\"_blank\" rel=\"external\">&#x6DF1;&#x5EA6;&#x6D4B;&#x8BD5;</a>&#x5E76;&#x63D0;&#x51FA;<a href=\"http://blog.fundebug.com/2017/04/07/solve-script-error/\" target=\"_blank\" rel=\"external\">&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</a></p>\n","excerpt":"<p>&#x4E00;&#x4E9B;&#x7528;&#x6237;&#x5411;&#x6211;&#x4EEC;&#x53CD;&#x9988;&#xFF0C;<a href=\"https://fundebug.com/\">Fundebug</a>&#x7684;<a href=\"https://docs.fundebug.com/notifier/javascript/\">JavaScript</a>&#x76D1;&#x63A7;&#x63D2;&#x4EF6;&#x6293;&#x5230;&#x4E86;&#x5F88;&#x591A;<strong>Script error.</strong>&#xFF0C;&#x7136;&#x540E;&#x884C;&#x53F7;&#x548C;&#x5217;&#x53F7;&#x90FD;&#x662F;0&#x2026;&#x8FD9;&#x5C31;&#x5F88;&#x5C34;&#x5C2C;&#x4E86;&#x3002;</p>","more":"<div style=\"text-align: left;\"><br><img style=\"width:80%;\" src=\"/2017/04/05/understand-script-error/script-error.png\"><br></div>\n\n<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BE6;&#x7EC6;&#x5730;&#x89E3;&#x6790;&#x4E00;&#x4E0B;<code>Script error.</code>&#xFF0C;&#x540E;&#x7EED;&#x6211;&#x4EEC;&#x8FD8;&#x4F1A;&#x6DF1;&#x5EA6;&#x6D4B;&#x8BD5;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"&#x540C;&#x6E90;&#x7B56;&#x7565;-Same-origin-policy\"><a href=\"#&#x540C;&#x6E90;&#x7B56;&#x7565;-Same-origin-policy\" class=\"headerlink\" title=\"&#x540C;&#x6E90;&#x7B56;&#x7565; (Same origin policy)\"></a>&#x540C;&#x6E90;&#x7B56;&#x7565; (Same origin policy)</h3><p>&#x89E3;&#x91CA;<code>Script error.</code>&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x7B80;&#x5355;&#x804A;&#x804A;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x3002;&#x6458;&#x81EA;<a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\">MDN - Same-origin policy</a>:</p>\n<blockquote>\n<p>Two pages have the same origin if the protocol, port (if one is specified), and host are the same for both pages. </p>\n</blockquote>\n<p>&#x6240;&#x8C13;&#x540C;&#x6E90;&#xFF0C;&#x5C31;&#x662F;&#x6307;&#x4E24;&#x4E2A;&#x9875;&#x9762;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x534F;&#x8BAE;&#x3001;&#x7AEF;&#x53E3;&#x548C;&#x4E3B;&#x673A;(&#x57DF;&#x540D;)&#x3002;&#x901A;&#x8FC7;&#x7B2C;&#x4E09;&#x65B9;&#x52A0;&#x8F7D;&#x7684;JavaScript&#x811A;&#x672C;&#x662F;&#x4E0D;&#x540C;&#x6E90;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x8868;&#x683C;&#x7B80;&#x5355;&#x5217;&#x51FA;&#x4E86;&#x548C;<code>https://fundebug.com/app.js</code>&#x662F;&#x5426;&#x540C;&#x6E90;&#x7684;&#x6587;&#x4EF6;:</p>\n<style type=\"text/css\">\n    code {\n        text-overflow:clip;/**/\n            white-space:nowrap;/**/\n            overflow:hidden;/**/\n    }\n</style>\n\n<table>\n<thead>\n<tr>\n<th>&#x7F51;&#x5740;</th>\n<th style=\"text-align:right\">&#x662F;&#x5426;&#x540C;&#x6E90;</th>\n<th style=\"text-align:center\">&#x539F;&#x56E0;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>https://fundebug.com/vendor.js</code></td>\n<td style=\"text-align:right\">&#x662F;</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td><code>http://fundebug.com/vendor.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x534F;&#x8BAE;&#x4E0D;&#x540C;</td>\n</tr>\n<tr>\n<td><code>https://fundebug.com:8001/app.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x7AEF;&#x53E3;&#x4E0D;&#x540C;</td>\n</tr>\n<tr>\n<td><code>https://docs.fundebug.com/nav.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x5B50;&#x57DF;&#x540D;&#x4E0D;&#x540C;</td>\n</tr>\n<tr>\n<td><code>https://kiwenlau.com/totop.js</code></td>\n<td style=\"text-align:right\">&#x5426;</td>\n<td style=\"text-align:center\">&#x57DF;&#x540D;&#x4E0D;&#x540C;</td>\n</tr>\n</tbody>\n</table>\n<p>&#x6CA1;&#x6709;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x7684;&#x8BDD;&#xFF0C;&#x5C06;&#x4F1A;&#x600E;&#x6837;&#xFF1F;&#x6458;&#x81EA;<a href=\"http://www.freebuf.com/articles/web/65468.html\">&#x540C;&#x6E90;&#x7B56;&#x7565;&#x8BE6;&#x89E3;&#x53CA;&#x7ED5;&#x8FC7; - FreeBuf</a>&#xFF1A;</p>\n<blockquote>\n<p>&#x5047;&#x8BBE;&#x4F60;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x767B;&#x5F55;Gmail&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x6076;&#x610F;&#x7AD9;&#x70B9;&#xFF08;&#x53E6;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x9009;&#x9879;&#x5361;&#xFF09;&#x3002;&#x6CA1;&#x6709;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;JavaScript&#x83B7;&#x53D6;&#x4F60;&#x7684;&#x90AE;&#x4EF6;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x654F;&#x611F;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#x9605;&#x8BFB;&#x4F60;&#x7684;&#x79C1;&#x5BC6;&#x90AE;&#x4EF6;&#xFF0C;&#x53D1;&#x9001;&#x865A;&#x5047;&#x90AE;&#x4EF6;&#xFF0C;&#x770B;&#x4F60;&#x7684;&#x804A;&#x5929;&#x8BB0;&#x5F55;&#x7B49;&#x7B49;&#x3002; &#x5982;&#x679C;&#x5C06;Gmail&#x66FF;&#x6362;&#x4E3A;&#x4F60;&#x7684;&#x94F6;&#x884C;&#x5E10;&#x6237;&#xFF0C;&#x95EE;&#x9898;&#x5C31;&#x5927;&#x6761;&#x4E86;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script-error\"><a href=\"#&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script-error\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script error. ?\"></a>&#x4E3A;&#x5565;&#x51FA;&#x73B0;Script error. ?</h3><p>&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x7F51;&#x7AD9;&#x7684;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x90FD;&#x4F1A;&#x5C06;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;(css, image, javascript)&#x653E;&#x5728;&#x7B2C;&#x4E09;&#x65B9;CDN&#x3002;&#x5F53;&#x8FD9;&#x4E9B;&#x4ECE;&#x7B2C;&#x4E09;&#x65B9;&#x52A0;&#x8F7D;&#x7684;JavaScript&#x811A;&#x672C;&#x6267;&#x884C;&#x51FA;&#x9519;&#xFF0C;&#x56E0;&#x4E3A;&#x8FDD;&#x80CC;&#x4E86;<strong>&#x540C;&#x6E90;&#x7B56;&#x7565;</strong>, &#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x4E0D;&#x88AB;&#x6CC4;&#x9732;&#xFF0C;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x4E0D;&#x4F1A;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x53D6;&#x800C;&#x4EE3;&#x4E4B;&#x53EA;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>Script error.</code>&#x3002;</p>\n<p>&#x66B4;&#x9732;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x4F1A;&#x600E;&#x6837;&#x5462;&#xFF1F;&#x6458;&#x81EA;(<a href=\"http://stackoverflow.com/questions/5913978/cryptic-script-error-reported-in-javascript-in-chrome-and-firefox\">Cryptic &#x201C;Script Error.&#x201D; reported in Javascript in Chrome and Firefox</a>)&#xFF1A;</p>\n<blockquote>\n<p>&#x5047;&#x60F3;&#x4F60;&#x4E0D;&#x5C0F;&#x5FC3;&#x8BBF;&#x95EE;&#x4E86;&#x4E00;&#x4E2A;&#x6076;&#x610F;&#x7F51;&#x7AD9;&#xFF0C;&#x7F51;&#x9875;&#x91CC;&#x9762;&#x5077;&#x5077;&#x653E;&#x5165;&#x4E86;&#x4E00;&#x6BB5;JavaScript&#x811A;&#x672C; <code>&lt;script src=&quot;cbcc.com/index.html&quot;&gt;</code>&#xFF0C;&#x8FD9;&#x6BB5;&#x811A;&#x672C;&#x6307;&#x5411;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x67D0;&#x94F6;&#x884C;&#x7F51;&#x7AD9;&#x9996;&#x9875;&#x3002;&#x867D;&#x7136;&#x811A;&#x672C;&#x4F1A;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x4F46;&#x662F;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x5374;&#x6709;&#x53EF;&#x80FD;&#x6CC4;&#x9732;&#x4F60;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x767B;&#x5F55;&#x8FC7;&#x8BE5;&#x94F6;&#x884C;&#x7F51;&#x7AD9;&#x5E76;&#x4E14;&#x5904;&#x4E8E;&#x767B;&#x5F55;&#x72B6;&#x6001;&#xFF0C;&#x90A3;&#x4E48;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x53EF;&#x80FD;&#x4E3A;<code>&apos;&#x6B22;&#x8FCE;&#x4F60; ....&apos; is undefined</code>&#xFF1B;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x767B;&#x5F55;&#xFF0C;&#x90A3;&#x4E48;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x53EF;&#x80FD;&#x662F;<code>&apos;&#x8BF7;&#x767B;&#x5F55;...&apos; is undefined</code>&#x3002; &#x7136;&#x540E;&#x9ED1;&#x5BA2;&#x5C31;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x786E;&#x5B9A;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x94F6;&#x884C;&#x7F51;&#x7AD9;&#xFF0C;&#x5E76;&#x4E14;&#x4F2A;&#x9020;&#x4E00;&#x4E2A;&#x9493;&#x9C7C;&#x7F51;&#x7AD9;&#x6765;&#x9A97;&#x53D6;&#x94B1;&#x8D22;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x6E90;&#x7801;\"><a href=\"#&#x6E90;&#x7801;\" class=\"headerlink\" title=\"&#x6E90;&#x7801;\"></a>&#x6E90;&#x7801;</h3><p><a href=\"http://trac.webkit.org/browser/branches/chromium/648/Source/WebCore/dom/ScriptExecutionContext.cpp\">webkit&#x6E90;&#x7801;</a>&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">bool</span> ScriptExecutionContext::dispatchErrorEvent(<span class=\"keyword\">const</span> String&amp; errorMessage, </div><div class=\"line\">    <span class=\"keyword\">int</span> lineNumber, </div><div class=\"line\">    <span class=\"keyword\">const</span> String&amp; sourceURL)</div><div class=\"line\">{</div><div class=\"line\">    EventTarget* target = errorEventTarget();</div><div class=\"line\">    <span class=\"keyword\">if</span> (!target)</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    ...</div><div class=\"line\">    <span class=\"keyword\">if</span> (securityOrigin()-&gt;canRequest(targetUrl)) {</div><div class=\"line\">        message = errorMessage;</div><div class=\"line\">        line = lineNumber;</div><div class=\"line\">        sourceName = sourceURL;</div><div class=\"line\">    } <span class=\"keyword\">else</span> {</div><div class=\"line\">        message = <span class=\"string\">&quot;Script error.&quot;</span>;</div><div class=\"line\">        sourceName = String();</div><div class=\"line\">        line = <span class=\"number\">0</span>;</div><div class=\"line\">    }</div><div class=\"line\">    ...</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x5224;&#x65AD;&#x6240;&#x52A0;&#x8F7D;&#x7684;&#x8D44;&#x6E90;url&#x662F;&#x5426;&#x540C;&#x6E90;(<code>securityOrigin()-&gt;canRequest(targetUrl)</code>)&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x540C;&#x6E90;&#xFF0C;&#x5219;&#x5C06;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x9690;&#x85CF;&#xFF0C;&#x8D4B;&#x503C;&#x4E3A;<code>Script error.</code>, &#x5E76;&#x4E14;&#x5C06;&#x884C;&#x53F7;&#x8BBE;&#x4E3A;0.</p>\n<p>&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4ECE;&#x7B2C;&#x4E09;&#x65B9;CDN&#x670D;&#x52A1;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x9519;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C06;&#x53EA;&#x80FD;&#x770B;&#x5230;<code>Script error.</code>&#x3002;</p>\n<h3 id=\"&#x9519;&#x8BEF;&#x590D;&#x73B0;\"><a href=\"#&#x9519;&#x8BEF;&#x590D;&#x73B0;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x590D;&#x73B0;\"></a>&#x9519;&#x8BEF;&#x590D;&#x73B0;</h3><p>&#x6211;&#x4EEC;&#x7528;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x3002;&#x4E0B;&#x9762;&#x662F;<strong>index.html</strong>&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;onerror&#x6765;&#x6355;&#x83B7;&#x9519;&#x8BEF;&#x3002;</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Test Script error<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">      <span class=\"built_in\">window</span>.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">errorMessage, scriptURI, lineNumber, columnNumber, error</span>)</span>{</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(errorMessage);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(scriptURI);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(lineNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(columnNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error);</div><div class=\"line\">      }</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x5728;<strong>scripterror.js</strong>&#x4E2D;&#x629B;&#x51FA;&#x4E00;&#x4E2A;Error&#x5BF9;&#x8C61;&#xFF1A;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;Hello, Fundebug&apos;</span>);</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;&#x7684;<a href=\"https://www.npmjs.com/package/http-server\"><code>http-server</code></a>&#x6302;&#x8F7D;&#x6587;&#x4EF6;&#xFF0C;&#x6253;&#x5F00;<a href=\"http://localhost:8080/index.html\">http://localhost:8080/index.html</a>&#xFF0C;</p>\n<p>&#x5728;Chrome&#x6D4F;&#x89C8;&#x5668;&#x63A7;&#x5236;&#x53F0;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8BE6;&#x7EC6;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:35.8%;\" src=\"/2017/04/05/understand-script-error/script-error-ok.png\"><br></div>\n\n\n<p>&#x4E3A;&#x4E86;&#x590D;&#x73B0;<code>Scrpt error.</code>&#xFF0C; &#x5C06;<code>scripterror.js</code>&#x653E;&#x5230;&#x6211;&#x5728;<code>coding.net</code>&#x7684;&#x4E2A;&#x4EBA;&#x9879;&#x76EE;&#x4E0B;&#x9762;:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Test Script error<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">      <span class=\"built_in\">window</span>.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">errorMessage, scriptURI, lineNumber, columnNumber, error</span>)</span>{</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(errorMessage);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(scriptURI);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(lineNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(columnNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error);</div><div class=\"line\">      }</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;<code>http-server</code>, &#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:35.8%;\" src=\"/2017/04/05/understand-script-error/script-error-not-ok-chrome.png\"><br></div>\n\n<p>&#x56E0;&#x4E3A;&#x8FDD;&#x80CC;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF0C;&#x8FD9;&#x65F6;&#x53EA;&#x80FD;&#x62FF;&#x5230;<code>Script error.</code>&#x3002;</p>\n<h3 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h3><p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;<code>Script error.</code>&#x7684;&#x7531;&#x6765;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x4F8B;&#x6765;&#x6F14;&#x793A;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;<code>Script error.</code>&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5BF9;<strong>Script error</strong>&#x8FDB;&#x884C;<a href=\"http://blog.fundebug.com/2017/04/06/test-script-error/\">&#x6DF1;&#x5EA6;&#x6D4B;&#x8BD5;</a>&#x5E76;&#x63D0;&#x51FA;<a href=\"http://blog.fundebug.com/2017/04/07/solve-script-error/\">&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</a></p>"},{"title":"Script error.","date":"2017-04-07T02:00:00.000Z","_content":"\nCDN`Script error.`\n\n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:80%;\" src=\"solve-script-error/script-error.png\" />\n</div>\n\n\n### 1.  `crossorigin=\"anonymous\"` script\n\n ```js\n <script src=\"https://xxx.com/xxx.js\" crossorigin=\"anonymous\"></script>\n ```\n \n `crossorigin``anonymous``use-credentials`\n \n> The \"anonymous\" keyword means that there will be no exchange of user credentials via cookies, client-side SSL certificates or HTTP authentication\n\nanonymousCookieHTTP`anonymous` crossorigin: [CORS settings attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes)\n\n### 2. \n\n ```js\n Access-Control-Allow-Origin: *\n ```\n\n> Access-Control-Allow-OriginHTML5Access-Control-Allow-OriginResponse header\n\n\nCDNAccess-Control-Allow-Origin`curl`\n\n```shell\ncurl --head https://og6593g2z.qnssl.com/fundebug.0.0.4.min.js | grep \"Access-Control-Allow-Origin\"\n```\n:\n\n<div style=\"text-align: left;\">\n<img style=\"width:59.2%;\" src=\"solve-script-error/qiniu.png\" />\n</div>\n\n\n()NodejsExpress\n\n```\napp.use(function(req, res, next)\n{\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE\");\n    next();\n});\n```\n\nAccess-Control-Allow-Origin\n\n- PHP: [ajax Access-Control-Allow-Origin](http://blog.csdn.net/fdipzone/article/details/46390573/)\n- Java: [Java No 'Access-Control-Allow-Origin'..](http://blog.csdn.net/caixiajia/article/details/53648145)\n- Nginx: [nginx Access-Control-Allow-Origin css](http://www.cnblogs.com/wei-lai/p/6269639.html)\n\n\n[Fundebug](https://fundebug.com)QQ\n \n<div style=\"text-align: center;\">\n<img style=\"width:15%;\" src=\"solve-script-error/QRCode.png\" />\n</div>\n","source":"_posts/2017/04/07/solve-script-error.md","raw":"---\ntitle: Script error.\n\ndate: 2017-04-07 10:00:00\n\ntags: [JavaScript, BUG]\n---\n\nCDN`Script error.`\n\n\n<!-- more -->\n\n<div style=\"text-align: left;\">\n<img style=\"width:80%;\" src=\"solve-script-error/script-error.png\" />\n</div>\n\n\n### 1.  `crossorigin=\"anonymous\"` script\n\n ```js\n <script src=\"https://xxx.com/xxx.js\" crossorigin=\"anonymous\"></script>\n ```\n \n `crossorigin``anonymous``use-credentials`\n \n> The \"anonymous\" keyword means that there will be no exchange of user credentials via cookies, client-side SSL certificates or HTTP authentication\n\nanonymousCookieHTTP`anonymous` crossorigin: [CORS settings attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes)\n\n### 2. \n\n ```js\n Access-Control-Allow-Origin: *\n ```\n\n> Access-Control-Allow-OriginHTML5Access-Control-Allow-OriginResponse header\n\n\nCDNAccess-Control-Allow-Origin`curl`\n\n```shell\ncurl --head https://og6593g2z.qnssl.com/fundebug.0.0.4.min.js | grep \"Access-Control-Allow-Origin\"\n```\n:\n\n<div style=\"text-align: left;\">\n<img style=\"width:59.2%;\" src=\"solve-script-error/qiniu.png\" />\n</div>\n\n\n()NodejsExpress\n\n```\napp.use(function(req, res, next)\n{\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE\");\n    next();\n});\n```\n\nAccess-Control-Allow-Origin\n\n- PHP: [ajax Access-Control-Allow-Origin](http://blog.csdn.net/fdipzone/article/details/46390573/)\n- Java: [Java No 'Access-Control-Allow-Origin'..](http://blog.csdn.net/caixiajia/article/details/53648145)\n- Nginx: [nginx Access-Control-Allow-Origin css](http://www.cnblogs.com/wei-lai/p/6269639.html)\n\n\n[Fundebug](https://fundebug.com)QQ\n \n<div style=\"text-align: center;\">\n<img style=\"width:15%;\" src=\"solve-script-error/QRCode.png\" />\n</div>\n","slug":"2017/04/07/solve-script-error","published":1,"updated":"2017-04-07T01:31:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtno001q71fycji311hd","content":"<p>&#x4E3A;&#x4E86;&#x52A0;&#x5FEB;&#x7F51;&#x7AD9;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x8981;&#x5C06;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x653E;&#x5230;&#x7B2C;&#x4E09;&#x65B9;CDN&#x4E0A;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x6211;&#x4EEC;&#x53C8;&#x9700;&#x8981;&#x5728;&#x51FA;&#x9519;&#x4EE5;&#x540E;&#x80FD;&#x591F;&#x77E5;&#x9053;&#x8BE6;&#x7EC6;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x907F;&#x514D;&#x51FA;&#x73B0;<code>Script error.</code></p>\n<a id=\"more\"></a>\n<div style=\"text-align: left;\"><br><img style=\"width:80%;\" src=\"/2017/04/07/solve-script-error/script-error.png\"><br></div>\n\n\n<h3 id=\"1-&#x6DFB;&#x52A0;-crossorigin-quot-anonymous-quot-&#x5230;script&#x6807;&#x7B7E;\"><a href=\"#1-&#x6DFB;&#x52A0;-crossorigin-quot-anonymous-quot-&#x5230;script&#x6807;&#x7B7E;\" class=\"headerlink\" title=\"1. &#x6DFB;&#x52A0; crossorigin=&quot;anonymous&quot; &#x5230;script&#x6807;&#x7B7E;\"></a>1. &#x6DFB;&#x52A0; <code>crossorigin=&quot;anonymous&quot;</code> &#x5230;script&#x6807;&#x7B7E;</h3> <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script src=<span class=\"string\">&quot;https://xxx.com/xxx.js&quot;</span> crossorigin=<span class=\"string\">&quot;anonymous&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<p> <code>crossorigin</code>&#x53EF;&#x4EE5;&#x53D6;&#x679A;&#x4E3E;&#x503C;<code>anonymous</code>&#x6216;&#x5219;<code>use-credentials</code>&#x3002;</p>\n<blockquote>\n<p>The &#x201C;anonymous&#x201D; keyword means that there will be no exchange of user credentials via cookies, client-side SSL certificates or HTTP authentication</p>\n</blockquote>\n<p>anonymous&#x5373;&#x4E0D;&#x53D1;&#x9001;Cookie&#x548C;HTTP&#x8BA4;&#x8BC1;&#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x4E8E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>anonymous</code>&#x5C31;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x3002; &#x5173;&#x4E8E;crossorigin&#x8BE6;&#x60C5;&#x53EF;&#x4EE5;&#x53C2;&#x8003;: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes\" target=\"_blank\" rel=\"external\">CORS settings attributes</a></p>\n<h3 id=\"2-&#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;\"><a href=\"#2-&#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"2. &#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;\"></a>2. &#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;</h3> <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">Access-Control-Allow-Origin: *</div></pre></td></tr></table></figure>\n<blockquote>\n<p>Access-Control-Allow-Origin&#x662F;HTML5&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x8D44;&#x6E90;&#x8DE8;&#x57DF;&#x7684;&#x7B56;&#x7565;&#x3002;&#x4ED6;&#x662F;&#x901A;&#x8FC7;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8FD4;&#x56DE;&#x5E26;&#x6709;Access-Control-Allow-Origin&#x6807;&#x8BC6;&#x7684;Response header&#xFF0C;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x8D44;&#x6E90;&#x7684;&#x8DE8;&#x57DF;&#x6743;&#x9650;&#x95EE;&#x9898;&#x3002;</p>\n</blockquote>\n<p>CDN&#x670D;&#x52A1;&#x5546;&#x6BD4;&#x5982;&#x4E03;&#x725B;&#x9ED8;&#x8BA4;&#x5DF2;&#x7ECF;&#x914D;&#x7F6E;&#x597D;&#x4E86;Access-Control-Allow-Origin&#xFF0C;&#x4F7F;&#x7528;<code>curl</code>&#x547D;&#x4EE4;&#x83B7;&#x53D6;&#x5934;&#x90E8;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl --head https://og6593g2z.qnssl.com/fundebug.0.0.4.min.js | grep &quot;Access-Control-Allow-Origin&quot;</div></pre></td></tr></table></figure>\n<p>&#x7ED3;&#x679C;&#x5982;&#x4E0B;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:59.2%;\" src=\"/2017/04/07/solve-script-error/qiniu.png\"><br></div>\n\n\n<p>&#x5982;&#x679C;&#x60A8;&#x6709;&#x5355;&#x72EC;&#x7684;&#x5B50;&#x57DF;&#x540D;(&#x5B50;&#x57DF;&#x540D;&#x4E5F;&#x4F1A;&#x88AB;&#x8BA4;&#x5B9A;&#x4E3A;&#x4E0D;&#x540C;&#x6E90;)&#x7528;&#x6765;&#x5206;&#x53D1;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x505A;&#x4E00;&#x70B9;&#x914D;&#x7F6E;&#x3002;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x8BED;&#x8A00;&#x548C;&#x6846;&#x67B6;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x4E0D;&#x4E00;&#x4E00;&#x5217;&#x51FA;&#xFF0C;Nodejs&#x7684;Express&#x6846;&#x67B6;&#x4E0B;&#x662F;&#x8FD9;&#x6837;&#x914D;&#x7F6E;&#x7684;&#xFF1A;</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.use(function(req, res, next)</div><div class=\"line\">{</div><div class=\"line\">    res.header(<span class=\"string\">&quot;Access-Control-Allow-Origin&quot;</span>, <span class=\"string\">&quot;*&quot;</span>);</div><div class=\"line\">    res.header(<span class=\"string\">&quot;Access-Control-Allow-Methods&quot;</span>, <span class=\"string\">&quot;<span class=\"keyword\">GET</span>, <span class=\"keyword\">POST</span>, <span class=\"keyword\">PUT</span>, <span class=\"keyword\">DELETE</span>&quot;</span>);</div><div class=\"line\">    next();</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B83;&#x8BBE;&#x7F6E;Access-Control-Allow-Origin&#x8BF7;&#x53C2;&#x8003;</p>\n<ul>\n<li>PHP: <a href=\"http://blog.csdn.net/fdipzone/article/details/46390573/\" target=\"_blank\" rel=\"external\">ajax &#x8BBE;&#x7F6E;Access-Control-Allow-Origin&#x5B9E;&#x73B0;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;</a></li>\n<li>Java: <a href=\"http://blog.csdn.net/caixiajia/article/details/53648145\" target=\"_blank\" rel=\"external\">Java &#x65E0;&#x6CD5;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#xFF08;No &#x2018;Access-Control-Allow-Origin&#x2019;..&#xFF09;</a></li>\n<li>Nginx: <a href=\"http://www.cnblogs.com/wei-lai/p/6269639.html\" target=\"_blank\" rel=\"external\">nginx Access-Control-Allow-Origin css&#x8DE8;&#x57DF;</a></li>\n</ul>\n<p>&#x5982;&#x679C;&#x6709;&#x4EFB;&#x4F55;&#x7591;&#x95EE;&#xFF0C;&#x53EF;&#x4EE5;&#x8054;&#x7CFB;&#x6211;&#x4EEC;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com\" target=\"_blank\" rel=\"external\">Fundebug</a>&#x7684;QQ&#x4EA4;&#x6D41;&#x7FA4;&#xFF1A;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:15%;\" src=\"/2017/04/07/solve-script-error/QRCode.png\"><br></div>\n","excerpt":"<p>&#x4E3A;&#x4E86;&#x52A0;&#x5FEB;&#x7F51;&#x7AD9;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x8981;&#x5C06;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x653E;&#x5230;&#x7B2C;&#x4E09;&#x65B9;CDN&#x4E0A;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x6211;&#x4EEC;&#x53C8;&#x9700;&#x8981;&#x5728;&#x51FA;&#x9519;&#x4EE5;&#x540E;&#x80FD;&#x591F;&#x77E5;&#x9053;&#x8BE6;&#x7EC6;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x907F;&#x514D;&#x51FA;&#x73B0;<code>Script error.</code></p>","more":"<div style=\"text-align: left;\"><br><img style=\"width:80%;\" src=\"/2017/04/07/solve-script-error/script-error.png\"><br></div>\n\n\n<h3 id=\"1-&#x6DFB;&#x52A0;-crossorigin-quot-anonymous-quot-&#x5230;script&#x6807;&#x7B7E;\"><a href=\"#1-&#x6DFB;&#x52A0;-crossorigin-quot-anonymous-quot-&#x5230;script&#x6807;&#x7B7E;\" class=\"headerlink\" title=\"1. &#x6DFB;&#x52A0; crossorigin=&quot;anonymous&quot; &#x5230;script&#x6807;&#x7B7E;\"></a>1. &#x6DFB;&#x52A0; <code>crossorigin=&quot;anonymous&quot;</code> &#x5230;script&#x6807;&#x7B7E;</h3> <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;script src=<span class=\"string\">&quot;https://xxx.com/xxx.js&quot;</span> crossorigin=<span class=\"string\">&quot;anonymous&quot;</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<p> <code>crossorigin</code>&#x53EF;&#x4EE5;&#x53D6;&#x679A;&#x4E3E;&#x503C;<code>anonymous</code>&#x6216;&#x5219;<code>use-credentials</code>&#x3002;</p>\n<blockquote>\n<p>The &#x201C;anonymous&#x201D; keyword means that there will be no exchange of user credentials via cookies, client-side SSL certificates or HTTP authentication</p>\n</blockquote>\n<p>anonymous&#x5373;&#x4E0D;&#x53D1;&#x9001;Cookie&#x548C;HTTP&#x8BA4;&#x8BC1;&#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x4E8E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>anonymous</code>&#x5C31;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x3002; &#x5173;&#x4E8E;crossorigin&#x8BE6;&#x60C5;&#x53EF;&#x4EE5;&#x53C2;&#x8003;: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes\">CORS settings attributes</a></p>\n<h3 id=\"2-&#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;\"><a href=\"#2-&#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"2. &#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;\"></a>2. &#x6DFB;&#x52A0;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;&#x8BBE;&#x7F6E;</h3> <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\">Access-Control-Allow-Origin: *</div></pre></td></tr></table></figure>\n<blockquote>\n<p>Access-Control-Allow-Origin&#x662F;HTML5&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x8D44;&#x6E90;&#x8DE8;&#x57DF;&#x7684;&#x7B56;&#x7565;&#x3002;&#x4ED6;&#x662F;&#x901A;&#x8FC7;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8FD4;&#x56DE;&#x5E26;&#x6709;Access-Control-Allow-Origin&#x6807;&#x8BC6;&#x7684;Response header&#xFF0C;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x8D44;&#x6E90;&#x7684;&#x8DE8;&#x57DF;&#x6743;&#x9650;&#x95EE;&#x9898;&#x3002;</p>\n</blockquote>\n<p>CDN&#x670D;&#x52A1;&#x5546;&#x6BD4;&#x5982;&#x4E03;&#x725B;&#x9ED8;&#x8BA4;&#x5DF2;&#x7ECF;&#x914D;&#x7F6E;&#x597D;&#x4E86;Access-Control-Allow-Origin&#xFF0C;&#x4F7F;&#x7528;<code>curl</code>&#x547D;&#x4EE4;&#x83B7;&#x53D6;&#x5934;&#x90E8;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl --head https://og6593g2z.qnssl.com/fundebug.0.0.4.min.js | grep &quot;Access-Control-Allow-Origin&quot;</div></pre></td></tr></table></figure>\n<p>&#x7ED3;&#x679C;&#x5982;&#x4E0B;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:59.2%;\" src=\"/2017/04/07/solve-script-error/qiniu.png\"><br></div>\n\n\n<p>&#x5982;&#x679C;&#x60A8;&#x6709;&#x5355;&#x72EC;&#x7684;&#x5B50;&#x57DF;&#x540D;(&#x5B50;&#x57DF;&#x540D;&#x4E5F;&#x4F1A;&#x88AB;&#x8BA4;&#x5B9A;&#x4E3A;&#x4E0D;&#x540C;&#x6E90;)&#x7528;&#x6765;&#x5206;&#x53D1;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x505A;&#x4E00;&#x70B9;&#x914D;&#x7F6E;&#x3002;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x8BED;&#x8A00;&#x548C;&#x6846;&#x67B6;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x4E0D;&#x4E00;&#x4E00;&#x5217;&#x51FA;&#xFF0C;Nodejs&#x7684;Express&#x6846;&#x67B6;&#x4E0B;&#x662F;&#x8FD9;&#x6837;&#x914D;&#x7F6E;&#x7684;&#xFF1A;</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.use(function(req, res, next)</div><div class=\"line\">{</div><div class=\"line\">    res.header(<span class=\"string\">&quot;Access-Control-Allow-Origin&quot;</span>, <span class=\"string\">&quot;*&quot;</span>);</div><div class=\"line\">    res.header(<span class=\"string\">&quot;Access-Control-Allow-Methods&quot;</span>, <span class=\"string\">&quot;<span class=\"keyword\">GET</span>, <span class=\"keyword\">POST</span>, <span class=\"keyword\">PUT</span>, <span class=\"keyword\">DELETE</span>&quot;</span>);</div><div class=\"line\">    next();</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B83;&#x8BBE;&#x7F6E;Access-Control-Allow-Origin&#x8BF7;&#x53C2;&#x8003;</p>\n<ul>\n<li>PHP: <a href=\"http://blog.csdn.net/fdipzone/article/details/46390573/\">ajax &#x8BBE;&#x7F6E;Access-Control-Allow-Origin&#x5B9E;&#x73B0;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;</a></li>\n<li>Java: <a href=\"http://blog.csdn.net/caixiajia/article/details/53648145\">Java &#x65E0;&#x6CD5;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#xFF08;No &#x2018;Access-Control-Allow-Origin&#x2019;..&#xFF09;</a></li>\n<li>Nginx: <a href=\"http://www.cnblogs.com/wei-lai/p/6269639.html\">nginx Access-Control-Allow-Origin css&#x8DE8;&#x57DF;</a></li>\n</ul>\n<p>&#x5982;&#x679C;&#x6709;&#x4EFB;&#x4F55;&#x7591;&#x95EE;&#xFF0C;&#x53EF;&#x4EE5;&#x8054;&#x7CFB;&#x6211;&#x4EEC;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com\">Fundebug</a>&#x7684;QQ&#x4EA4;&#x6D41;&#x7FA4;&#xFF1A;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:15%;\" src=\"/2017/04/07/solve-script-error/QRCode.png\"><br></div>"},{"title":"Script error.","date":"2017-04-06T02:00:00.000Z","_content":"\n[Script error.](https://blog.fundebug.com/2017/04/05/understand-script-error/)`Script error.`JS\n\n<!-- more -->\n\n**GitHub:** [Fundebug/script-error](https://github.com/Fundebug/script-error)\n\n<div style=\"text-align: left;\">\n<img style=\"width:80%;\" src=\"test-script-error/script-error.png\" />\n</div>\n\n### \n\n**index.html**onerror\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Test Script error</title>\n    <script type=\"text/javascript\">\n      window.onerror = function(errorMessage, scriptURI, lineNumber, columnNumber, error){\n        console.log(errorMessage);\n        console.log(scriptURI);\n        console.log(lineNumber);\n        console.log(columnNumber);\n        console.log(error);\n      }\n    </script>\n    <script type=\"text/javascript\" src=\"./scripterror.js\"></script>\n</head>\n<body>\n</body>\n</html>\n```\n\n**scripterror.js**Error\n\n```js\nthrow new Error('Hello, Fundebug');\n```\n\nError`window.onerror`\n\n\n### \n\n`index.html`, Safari, Firefox, IE\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/1.png\" />\n</div>\n\nChrome`Script error.`\n\n<div style=\"text-align: left;\">\n<img style=\"width:30%;\" src=\"test-script-error/1chrome.png\" />\n</div>\n\n[Chrome](http://stackoverflow.com/questions/20748630/load-local-javascript-file-in-chrome-for-testing)\n\n> To load local resources in Chrome when just using your local computer and not using a webserver you need to add the --allow-file-access-from-files flag.\n\n[chrome ajax](http://blog.csdn.net/u010874036/article/details/51728622)\n\n### \n\n[`http-server`](https://www.npmjs.com/package/http-server)\n\nhttp-server:\n\n```shell\nnpm install http-server -g\n```\n\nhttp-server:\n\n```\nhttp-server\nStarting up http-server, serving ./\nAvailable on:\n  http://127.0.0.1:8080\n  http://172.20.1.86:8080\n  http://192.168.59.100:8080\nHit CTRL-C to stop the server\n```\n\n[http://localhost:8080/index.html](http://localhost:8080/index.html)\n\n<div style=\"text-align: left;\">\n<img style=\"width:38.2%;\" src=\"test-script-error/chrome_error.png\" />\n</div>\n\n\n### `scripterror.js`\n\n`Script error.`, `scripterror.js`[Coding](https://coding.net)[](https://www.qiniu.com/)\n\n#### Coding\n\n**index.html**\n\n```html\n<script type=\"text/javascript\" src=\"http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js\"></script>\n```\n\nChrome, SafariIE`Script error.`\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/2.png\" />\n</div>\n\nFirefox\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/2firefox.png\" />\n</div>\n\n\n#### \n\n**index.html**\n\n```html\n<script type=\"text/javascript\" src=\"https://og6593g2z.qnssl.com/scripterror.js\"></script>\n```\n\nCoding\n\n`crossorigin=\"anaonymous\"`:\n\n```html\n<script type=\"text/javascript\" src=\"https://og6593g2z.qnssl.com/scripterror.js\" crossorigin=\"anonymous\"></script>\n```\n\n\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/4.png\" />\n</div>\n\nChrome, SafariIEScript error. , [MDN - CORS settings attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes)IE11\n\nCoding`scripterror.js`**Response Headers**:\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/5.png\" />\n</div>\n\n`Access-Control-Allow-Origin`Coding\n\n**Script error**[](http://blog.fundebug.com/2017/04/07/solve-script-error/)\n","source":"_posts/2017/04/06/test-script-error.md","raw":"---\ntitle: Script error.\n\ndate: 2017-04-06 10:00:00\n\ntags: [JavaScript, BUG]\n---\n\n[Script error.](https://blog.fundebug.com/2017/04/05/understand-script-error/)`Script error.`JS\n\n<!-- more -->\n\n**GitHub:** [Fundebug/script-error](https://github.com/Fundebug/script-error)\n\n<div style=\"text-align: left;\">\n<img style=\"width:80%;\" src=\"test-script-error/script-error.png\" />\n</div>\n\n### \n\n**index.html**onerror\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Test Script error</title>\n    <script type=\"text/javascript\">\n      window.onerror = function(errorMessage, scriptURI, lineNumber, columnNumber, error){\n        console.log(errorMessage);\n        console.log(scriptURI);\n        console.log(lineNumber);\n        console.log(columnNumber);\n        console.log(error);\n      }\n    </script>\n    <script type=\"text/javascript\" src=\"./scripterror.js\"></script>\n</head>\n<body>\n</body>\n</html>\n```\n\n**scripterror.js**Error\n\n```js\nthrow new Error('Hello, Fundebug');\n```\n\nError`window.onerror`\n\n\n### \n\n`index.html`, Safari, Firefox, IE\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/1.png\" />\n</div>\n\nChrome`Script error.`\n\n<div style=\"text-align: left;\">\n<img style=\"width:30%;\" src=\"test-script-error/1chrome.png\" />\n</div>\n\n[Chrome](http://stackoverflow.com/questions/20748630/load-local-javascript-file-in-chrome-for-testing)\n\n> To load local resources in Chrome when just using your local computer and not using a webserver you need to add the --allow-file-access-from-files flag.\n\n[chrome ajax](http://blog.csdn.net/u010874036/article/details/51728622)\n\n### \n\n[`http-server`](https://www.npmjs.com/package/http-server)\n\nhttp-server:\n\n```shell\nnpm install http-server -g\n```\n\nhttp-server:\n\n```\nhttp-server\nStarting up http-server, serving ./\nAvailable on:\n  http://127.0.0.1:8080\n  http://172.20.1.86:8080\n  http://192.168.59.100:8080\nHit CTRL-C to stop the server\n```\n\n[http://localhost:8080/index.html](http://localhost:8080/index.html)\n\n<div style=\"text-align: left;\">\n<img style=\"width:38.2%;\" src=\"test-script-error/chrome_error.png\" />\n</div>\n\n\n### `scripterror.js`\n\n`Script error.`, `scripterror.js`[Coding](https://coding.net)[](https://www.qiniu.com/)\n\n#### Coding\n\n**index.html**\n\n```html\n<script type=\"text/javascript\" src=\"http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js\"></script>\n```\n\nChrome, SafariIE`Script error.`\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/2.png\" />\n</div>\n\nFirefox\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/2firefox.png\" />\n</div>\n\n\n#### \n\n**index.html**\n\n```html\n<script type=\"text/javascript\" src=\"https://og6593g2z.qnssl.com/scripterror.js\"></script>\n```\n\nCoding\n\n`crossorigin=\"anaonymous\"`:\n\n```html\n<script type=\"text/javascript\" src=\"https://og6593g2z.qnssl.com/scripterror.js\" crossorigin=\"anonymous\"></script>\n```\n\n\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/4.png\" />\n</div>\n\nChrome, SafariIEScript error. , [MDN - CORS settings attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes)IE11\n\nCoding`scripterror.js`**Response Headers**:\n\n<div style=\"text-align: left;\">\n<img style=\"width:90%;\" src=\"test-script-error/5.png\" />\n</div>\n\n`Access-Control-Allow-Origin`Coding\n\n**Script error**[](http://blog.fundebug.com/2017/04/07/solve-script-error/)\n","slug":"2017/04/06/test-script-error","published":1,"updated":"2017-04-07T11:55:13.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtnq001s71fy7cvmjiqn","content":"<p><a href=\"https://blog.fundebug.com/2017/04/05/understand-script-error/\" target=\"_blank\" rel=\"external\">Script error.&#x5168;&#x9762;&#x89E3;&#x6790;</a>&#x4E2D;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x4E86;<code>Script error.</code>&#x7684;&#x7531;&#x6765;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#xFF08;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x3001;&#x672C;&#x5730;&#x8FDC;&#x7A0B;&#x6258;&#x7BA1;JS&#x6587;&#x4EF6;&#xFF09;&#x8003;&#x8651;&#x8FDB;&#x53BB;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x4E3A;&#x8BFB;&#x8005;&#x5E26;&#x6765;&#x4E00;&#x4E2A;&#x5168;&#x9762;&#x7684;&#x4E86;&#x89E3;&#x3002;</p>\n<a id=\"more\"></a>\n<p><strong>GitHub&#x4ED3;&#x5E93;:</strong> <a href=\"https://github.com/Fundebug/script-error\" target=\"_blank\" rel=\"external\">Fundebug/script-error</a></p>\n<div style=\"text-align: left;\"><br><img style=\"width:80%;\" src=\"/2017/04/06/test-script-error/script-error.png\"><br></div>\n\n<h3 id=\"&#x57FA;&#x672C;&#x51C6;&#x5907;\"><a href=\"#&#x57FA;&#x672C;&#x51C6;&#x5907;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x51C6;&#x5907;\"></a>&#x57FA;&#x672C;&#x51C6;&#x5907;</h3><p><strong>index.html</strong>&#x4E2D;&#x4F7F;&#x7528;onerror&#x76D1;&#x63A7;&#x9519;&#x8BEF;&#x3002;</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Test Script error<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">      <span class=\"built_in\">window</span>.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">errorMessage, scriptURI, lineNumber, columnNumber, error</span>)</span>{</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(errorMessage);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(scriptURI);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(lineNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(columnNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error);</div><div class=\"line\">      }</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><strong>scripterror.js</strong>&#x4E2D;&#x629B;&#x51FA;&#x4E00;&#x4E2A;Error&#x5BF9;&#x8C61;&#xFF1A;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;Hello, Fundebug&apos;</span>);</div></pre></td></tr></table></figure>\n<p>&#x8BE5;Error&#x5BF9;&#x8C61;&#x4F1A;&#x88AB;<code>window.onerror</code>&#x6355;&#x83B7;&#x3002;</p>\n<h3 id=\"&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;\"><a href=\"#&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;\" class=\"headerlink\" title=\"&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;\"></a>&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;</h3><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;&#x672C;&#x5730;&#x6253;&#x5F00;<code>index.html</code>, &#x53EF;&#x4EE5;&#x770B;&#x5230;Safari, Firefox, IE&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x80FD;&#x6B63;&#x786E;&#x6253;&#x5370;&#x51FA;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/1.png\"><br></div>\n\n<p>&#x552F;&#x72EC;Chrome&#x53EA;&#x663E;&#x793A;<code>Script error.</code></p>\n<div style=\"text-align: left;\"><br><img style=\"width:30%;\" src=\"/2017/04/06/test-script-error/1chrome.png\"><br></div>\n\n<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;<a href=\"http://stackoverflow.com/questions/20748630/load-local-javascript-file-in-chrome-for-testing\" target=\"_blank\" rel=\"external\">Chrome&#x6D4F;&#x89C8;&#x5668;&#x9ED8;&#x8BA4;&#x4E0D;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x6587;&#x4EF6;</a>&#xFF1A;</p>\n<blockquote>\n<p>To load local resources in Chrome when just using your local computer and not using a webserver you need to add the &#x2013;allow-file-access-from-files flag.</p>\n</blockquote>\n<p>&#x5982;&#x679C;&#x4E00;&#x5B9A;&#x8981;&#x4F7F;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x542F;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x7684;&#x5019;&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href=\"http://blog.csdn.net/u010874036/article/details/51728622\" target=\"_blank\" rel=\"external\">chrome &#x7B49;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x652F;&#x6301;&#x672C;&#x5730;ajax&#x8BF7;&#x6C42;&#x7684;&#x95EE;&#x9898;</a>&#x3002;</p>\n<h3 id=\"&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;\"><a href=\"#&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;\"></a>&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;</h3><p>&#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;<a href=\"https://www.npmjs.com/package/http-server\" target=\"_blank\" rel=\"external\"><code>http-server</code></a>&#x3002;</p>\n<p>&#x5B89;&#x88C5;http-server:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install http-server -g</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;http-server:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">http</span>-server</div><div class=\"line\">Starting up <span class=\"keyword\">http</span>-server, serving ./</div><div class=\"line\">Available <span class=\"keyword\">on</span>:</div><div class=\"line\">  <span class=\"keyword\">http</span>://<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8080</span></div><div class=\"line\">  <span class=\"keyword\">http</span>://<span class=\"number\">172.20</span><span class=\"number\">.1</span><span class=\"number\">.86</span>:<span class=\"number\">8080</span></div><div class=\"line\">  <span class=\"keyword\">http</span>://<span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.100</span>:<span class=\"number\">8080</span></div><div class=\"line\">Hit CTRL-C <span class=\"built_in\">to</span> <span class=\"built_in\">stop</span> <span class=\"keyword\">the</span> server</div></pre></td></tr></table></figure>\n<p>&#x8BBF;&#x95EE;<a href=\"http://localhost:8080/index.html\" target=\"_blank\" rel=\"external\">http://localhost:8080/index.html</a></p>\n<div style=\"text-align: left;\"><br><img style=\"width:38.2%;\" src=\"/2017/04/06/test-script-error/chrome_error.png\"><br></div>\n\n\n<h3 id=\"&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;scripterror-js&#x6258;&#x7BA1;\"><a href=\"#&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;scripterror-js&#x6258;&#x7BA1;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;scripterror.js&#x6258;&#x7BA1;\"></a>&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;<code>scripterror.js</code>&#x6258;&#x7BA1;</h3><p>&#x4E3A;&#x4E86;&#x6D4B;&#x8BD5;<code>Script error.</code>, &#x6211;&#x5C06;<code>scripterror.js</code>&#x5206;&#x522B;&#x6258;&#x7BA1;&#x5728;&#x4E86;<a href=\"https://coding.net\" target=\"_blank\" rel=\"external\">Coding</a>&#x548C;<a href=\"https://www.qiniu.com/\" target=\"_blank\" rel=\"external\">&#x4E03;&#x725B;</a>&#x3002;</p>\n<h4 id=\"Coding\"><a href=\"#Coding\" class=\"headerlink\" title=\"Coding\"></a>Coding</h4><p><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>Chrome, Safari&#x548C;IE&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x5C06;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x9690;&#x85CF;&#xFF0C;&#x8FD4;&#x56DE;<code>Script error.</code>&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/2.png\"><br></div>\n\n<p>&#x4E0D;&#x8FC7;Firefox&#x6BD4;&#x8F83;&#x7279;&#x522B;&#xFF0C;&#x4F9D;&#x7136;&#x5C06;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x5B8C;&#x6574;&#x7684;&#x6253;&#x5370;&#x51FA;&#x6765;&#xFF0C;&#x5927;&#x6982;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x5F00;&#x53D1;&#x8005;&#x6392;&#x9519;&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/2firefox.png\"><br></div>\n\n\n<h4 id=\"&#x4E03;&#x725B;&#x4E91;\"><a href=\"#&#x4E03;&#x725B;&#x4E91;\" class=\"headerlink\" title=\"&#x4E03;&#x725B;&#x4E91;\"></a>&#x4E03;&#x725B;&#x4E91;</h4><p><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://og6593g2z.qnssl.com/scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x7ED3;&#x679C;&#x548C;&#x6258;&#x7BA1;&#x5728;Coding&#x4E0A;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>\n<p>&#x5C06;&#x5F15;&#x5165;&#x811A;&#x672C;&#x4FEE;&#x6539;&#x4E00;&#x4E0B;&#xFF0C;&#x52A0;&#x5165;<code>crossorigin=&quot;anaonymous&quot;</code>:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://og6593g2z.qnssl.com/scripterror.js&quot;</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">&quot;anonymous&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x518D;&#x6B21;&#x6267;&#x884C;&#x8FD0;&#x884C;&#xFF0C;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x8868;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/4.png\"><br></div>\n\n<p>Chrome, Safari&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x4E86;&#xFF0C;&#x4F46;&#x662F;IE&#x6D4F;&#x89C8;&#x5668;&#x4F9D;&#x7136;&#x662F;Script error. &#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x6BD4;&#x8F83;&#x5947;&#x602A;, &#x6839;&#x636E;<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes\" target=\"_blank\" rel=\"external\">MDN - CORS settings attributes</a>&#xFF0C;IE11&#x5E94;&#x8BE5;&#x662F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;</p>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x5C06;Coding&#x548C;&#x4E03;&#x725B;&#x5BF9;&#x4E8E;<code>scripterror.js</code>&#x7684;<strong>Response Headers</strong>&#x5BF9;&#x4E00;&#x4E0B;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/5.png\"><br></div>\n\n<p>&#x4E03;&#x725B;&#x7684;<code>Access-Control-Allow-Origin</code>&#x5141;&#x8BB8;&#x6765;&#x81EA;&#x6240;&#x6709;&#x57DF;&#x540D;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;Coding&#x6CA1;&#x6709;&#x3002;&#x4E03;&#x725B;&#x662F;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x6258;&#x7BA1;&#x5206;&#x53D1;&#x5E73;&#x53F0;&#xFF0C;&#x56E0;&#x6B64;&#x7279;&#x610F;&#x914D;&#x7F6E;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x8FD4;&#x56DE;&#x5934;&#xFF0C;&#x65B9;&#x4FBF;&#x5F00;&#x53D1;&#x8005;&#x5C06;&#x811A;&#x672C;&#x653E;&#x5728;&#x4E03;&#x725B;&#x4E91;&#x540C;&#x65F6;&#x53C8;&#x53EF;&#x4EE5;&#x62FF;&#x5230;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x3002;</p>\n<p>&#x4E0B;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x63D0;&#x51FA;<strong>Script error</strong>&#x7684;<a href=\"http://blog.fundebug.com/2017/04/07/solve-script-error/\" target=\"_blank\" rel=\"external\">&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</a>&#x3002;</p>\n","excerpt":"<p><a href=\"https://blog.fundebug.com/2017/04/05/understand-script-error/\">Script error.&#x5168;&#x9762;&#x89E3;&#x6790;</a>&#x4E2D;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x4E86;<code>Script error.</code>&#x7684;&#x7531;&#x6765;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#xFF08;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x3001;&#x672C;&#x5730;&#x8FDC;&#x7A0B;&#x6258;&#x7BA1;JS&#x6587;&#x4EF6;&#xFF09;&#x8003;&#x8651;&#x8FDB;&#x53BB;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x4E3A;&#x8BFB;&#x8005;&#x5E26;&#x6765;&#x4E00;&#x4E2A;&#x5168;&#x9762;&#x7684;&#x4E86;&#x89E3;&#x3002;</p>","more":"<p><strong>GitHub&#x4ED3;&#x5E93;:</strong> <a href=\"https://github.com/Fundebug/script-error\">Fundebug/script-error</a></p>\n<div style=\"text-align: left;\"><br><img style=\"width:80%;\" src=\"/2017/04/06/test-script-error/script-error.png\"><br></div>\n\n<h3 id=\"&#x57FA;&#x672C;&#x51C6;&#x5907;\"><a href=\"#&#x57FA;&#x672C;&#x51C6;&#x5907;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x51C6;&#x5907;\"></a>&#x57FA;&#x672C;&#x51C6;&#x5907;</h3><p><strong>index.html</strong>&#x4E2D;&#x4F7F;&#x7528;onerror&#x76D1;&#x63A7;&#x9519;&#x8BEF;&#x3002;</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Test Script error<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">      <span class=\"built_in\">window</span>.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">errorMessage, scriptURI, lineNumber, columnNumber, error</span>)</span>{</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(errorMessage);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(scriptURI);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(lineNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(columnNumber);</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(error);</div><div class=\"line\">      }</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><strong>scripterror.js</strong>&#x4E2D;&#x629B;&#x51FA;&#x4E00;&#x4E2A;Error&#x5BF9;&#x8C61;&#xFF1A;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;Hello, Fundebug&apos;</span>);</div></pre></td></tr></table></figure>\n<p>&#x8BE5;Error&#x5BF9;&#x8C61;&#x4F1A;&#x88AB;<code>window.onerror</code>&#x6355;&#x83B7;&#x3002;</p>\n<h3 id=\"&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;\"><a href=\"#&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;\" class=\"headerlink\" title=\"&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;\"></a>&#x672C;&#x5730;&#x76F4;&#x63A5;&#x6253;&#x5F00;</h3><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;&#x672C;&#x5730;&#x6253;&#x5F00;<code>index.html</code>, &#x53EF;&#x4EE5;&#x770B;&#x5230;Safari, Firefox, IE&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x80FD;&#x6B63;&#x786E;&#x6253;&#x5370;&#x51FA;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/1.png\"><br></div>\n\n<p>&#x552F;&#x72EC;Chrome&#x53EA;&#x663E;&#x793A;<code>Script error.</code></p>\n<div style=\"text-align: left;\"><br><img style=\"width:30%;\" src=\"/2017/04/06/test-script-error/1chrome.png\"><br></div>\n\n<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;<a href=\"http://stackoverflow.com/questions/20748630/load-local-javascript-file-in-chrome-for-testing\">Chrome&#x6D4F;&#x89C8;&#x5668;&#x9ED8;&#x8BA4;&#x4E0D;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x6587;&#x4EF6;</a>&#xFF1A;</p>\n<blockquote>\n<p>To load local resources in Chrome when just using your local computer and not using a webserver you need to add the &#x2013;allow-file-access-from-files flag.</p>\n</blockquote>\n<p>&#x5982;&#x679C;&#x4E00;&#x5B9A;&#x8981;&#x4F7F;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x542F;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x7684;&#x5019;&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href=\"http://blog.csdn.net/u010874036/article/details/51728622\">chrome &#x7B49;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x652F;&#x6301;&#x672C;&#x5730;ajax&#x8BF7;&#x6C42;&#x7684;&#x95EE;&#x9898;</a>&#x3002;</p>\n<h3 id=\"&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;\"><a href=\"#&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;\"></a>&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6302;&#x8F7D;&#x9759;&#x6001;&#x8D44;&#x6E90;</h3><p>&#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;<a href=\"https://www.npmjs.com/package/http-server\"><code>http-server</code></a>&#x3002;</p>\n<p>&#x5B89;&#x88C5;http-server:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install http-server -g</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;http-server:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">http</span>-server</div><div class=\"line\">Starting up <span class=\"keyword\">http</span>-server, serving ./</div><div class=\"line\">Available <span class=\"keyword\">on</span>:</div><div class=\"line\">  <span class=\"keyword\">http</span>://<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8080</span></div><div class=\"line\">  <span class=\"keyword\">http</span>://<span class=\"number\">172.20</span><span class=\"number\">.1</span><span class=\"number\">.86</span>:<span class=\"number\">8080</span></div><div class=\"line\">  <span class=\"keyword\">http</span>://<span class=\"number\">192.168</span><span class=\"number\">.59</span><span class=\"number\">.100</span>:<span class=\"number\">8080</span></div><div class=\"line\">Hit CTRL-C <span class=\"built_in\">to</span> <span class=\"built_in\">stop</span> <span class=\"keyword\">the</span> server</div></pre></td></tr></table></figure>\n<p>&#x8BBF;&#x95EE;<a href=\"http://localhost:8080/index.html\">http://localhost:8080/index.html</a></p>\n<div style=\"text-align: left;\"><br><img style=\"width:38.2%;\" src=\"/2017/04/06/test-script-error/chrome_error.png\"><br></div>\n\n\n<h3 id=\"&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;scripterror-js&#x6258;&#x7BA1;\"><a href=\"#&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;scripterror-js&#x6258;&#x7BA1;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;scripterror.js&#x6258;&#x7BA1;\"></a>&#x60C5;&#x51B5;&#x4E09;&#xFF1A;&#x5C06;<code>scripterror.js</code>&#x6258;&#x7BA1;</h3><p>&#x4E3A;&#x4E86;&#x6D4B;&#x8BD5;<code>Script error.</code>, &#x6211;&#x5C06;<code>scripterror.js</code>&#x5206;&#x522B;&#x6258;&#x7BA1;&#x5728;&#x4E86;<a href=\"https://coding.net\">Coding</a>&#x548C;<a href=\"https://www.qiniu.com/\">&#x4E03;&#x725B;</a>&#x3002;</p>\n<h4 id=\"Coding\"><a href=\"#Coding\" class=\"headerlink\" title=\"Coding\"></a>Coding</h4><p><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://coding.net/u/stefanzan/p/stefanzan/git/raw/coding-pages/public/js/src/scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>Chrome, Safari&#x548C;IE&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x5C06;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x9690;&#x85CF;&#xFF0C;&#x8FD4;&#x56DE;<code>Script error.</code>&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/2.png\"><br></div>\n\n<p>&#x4E0D;&#x8FC7;Firefox&#x6BD4;&#x8F83;&#x7279;&#x522B;&#xFF0C;&#x4F9D;&#x7136;&#x5C06;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x5B8C;&#x6574;&#x7684;&#x6253;&#x5370;&#x51FA;&#x6765;&#xFF0C;&#x5927;&#x6982;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x5F00;&#x53D1;&#x8005;&#x6392;&#x9519;&#x3002;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/2firefox.png\"><br></div>\n\n\n<h4 id=\"&#x4E03;&#x725B;&#x4E91;\"><a href=\"#&#x4E03;&#x725B;&#x4E91;\" class=\"headerlink\" title=\"&#x4E03;&#x725B;&#x4E91;\"></a>&#x4E03;&#x725B;&#x4E91;</h4><p><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://og6593g2z.qnssl.com/scripterror.js&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x7ED3;&#x679C;&#x548C;&#x6258;&#x7BA1;&#x5728;Coding&#x4E0A;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>\n<p>&#x5C06;&#x5F15;&#x5165;&#x811A;&#x672C;&#x4FEE;&#x6539;&#x4E00;&#x4E0B;&#xFF0C;&#x52A0;&#x5165;<code>crossorigin=&quot;anaonymous&quot;</code>:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://og6593g2z.qnssl.com/scripterror.js&quot;</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">&quot;anonymous&quot;</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>&#x518D;&#x6B21;&#x6267;&#x884C;&#x8FD0;&#x884C;&#xFF0C;&#x5728;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x8868;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/4.png\"><br></div>\n\n<p>Chrome, Safari&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x4E86;&#xFF0C;&#x4F46;&#x662F;IE&#x6D4F;&#x89C8;&#x5668;&#x4F9D;&#x7136;&#x662F;Script error. &#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x6BD4;&#x8F83;&#x5947;&#x602A;, &#x6839;&#x636E;<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes\">MDN - CORS settings attributes</a>&#xFF0C;IE11&#x5E94;&#x8BE5;&#x662F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;</p>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x5C06;Coding&#x548C;&#x4E03;&#x725B;&#x5BF9;&#x4E8E;<code>scripterror.js</code>&#x7684;<strong>Response Headers</strong>&#x5BF9;&#x4E00;&#x4E0B;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:90%;\" src=\"/2017/04/06/test-script-error/5.png\"><br></div>\n\n<p>&#x4E03;&#x725B;&#x7684;<code>Access-Control-Allow-Origin</code>&#x5141;&#x8BB8;&#x6765;&#x81EA;&#x6240;&#x6709;&#x57DF;&#x540D;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;Coding&#x6CA1;&#x6709;&#x3002;&#x4E03;&#x725B;&#x662F;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x6258;&#x7BA1;&#x5206;&#x53D1;&#x5E73;&#x53F0;&#xFF0C;&#x56E0;&#x6B64;&#x7279;&#x610F;&#x914D;&#x7F6E;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x8FD4;&#x56DE;&#x5934;&#xFF0C;&#x65B9;&#x4FBF;&#x5F00;&#x53D1;&#x8005;&#x5C06;&#x811A;&#x672C;&#x653E;&#x5728;&#x4E03;&#x725B;&#x4E91;&#x540C;&#x65F6;&#x53C8;&#x53EF;&#x4EE5;&#x62FF;&#x5230;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#x3002;</p>\n<p>&#x4E0B;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x63D0;&#x51FA;<strong>Script error</strong>&#x7684;<a href=\"http://blog.fundebug.com/2017/04/07/solve-script-error/\">&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</a>&#x3002;</p>"},{"title":"Node.js2017","date":"2017-04-10T04:00:00.000Z","_content":"\n**:** **ECMAScript****Node.js****NPM**Node.js\n\n\n<!-- more -->\n\n: [Node.js Interview Questions and Answers (2017 Edition)](https://blog.risingstack.com/node-js-interview-questions-and-answers-2017/)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\n### \n\n- \n- \n- Promise?\n- \n- Stub?\n- \n- HTTP\n- CookiesXSS\n- \n\n### \n\n#### 1. \n\n(Error-First Callback)\n\n```javascript\nfs.readFile(filePath, function(err, data)\n{\n    if (err)\n    {\n        // \n        return console.log(err);\n    }\n    console.log(data);\n});\n```\n\n#### 2. \n\n:\n\n- : \n- [aync](https://www.npmjs.com/package/async)\n- Promise\n- aync/await([Async/AwaitPromise6](https://blog.fundebug.com/2017/04/04/nodejs-async-await/))\n\n#### 3. Promise?\n\nPromise100msresult**catch**Promise\n\n```javascript\nnew Promise((resolve, reject) =>\n    {\n        setTimeout(() =>\n        {\n            resolve('result');\n        }, 100)\n    })\n    .then(console.log)\n    .catch(console.error);\n```\n\n#### 4. \n\n:\n\n- [ESLint](http://eslint.org/)\n- [Standard](https://standardjs.com/)\n\n[JavaScript Clean Coding](https://blog.risingstack.com/javascript-clean-coding-best-practices-node-js-at-scale/)\n\n#### 5. Stub?\n\nStubStub\n\n```javascript\nvar fs = require('fs');\n\nvar writeFileStub = sinon.stub(fs, 'writeFile', function(path, data, cb)\n{\n    return cb(null);\n});\n\nexpect(writeFileStub).to.be.called;\nwriteFileStub.restore();\n```\n\n#### 6. \n\n************:\n\n<div style=\"text-align: left;\">\n<img style=\"width:30%;\" src=\"nodejs-interview-2017/test_pyramid.png\" />\n</div>\n\nHTTP:\n\n- (stub)\n- (stub)\n- (stub)\n\n#### 7. HTTP\n\n\n\n#### 8. CookiesXSS\n\nXSS(Cross-Site Scripting)HTMLJavaScriptHTTP**set-cookie**:\n\n- HttpOnly - **cross-site scripting**Javascriptcookie\n- secure - HTTPScookie\n\n: **Set-Cookie: sid=<cookie-value>; HttpOnly**. Express[cookie-session](https://github.com/expressjs/cookie-session#cookie-options)\n\n#### 9. \n\nNode.jsExpress[27](https://github.com/expressjs/express/blob/master/package.json#L29):\n\n- npm outdated\n- [Trace by RisingStack](https://trace.risingstack.com/)\n- [NSP](https://nodesecurity.io/)\n- [GreenKeeper](https://greenkeeper.io/)\n- [Snyk](https://snyk.io/)\n\n### \n\n#### 1. \n\n```javascript\nnew Promise((resolve, reject) =>\n    {\n        throw new Error('error')\n    })\n    .then(console.log)\n```\n\n\n\n**then****catch**:\n\n```javascript\nnew Promise((resolve, reject) =>\n    {\n        throw new Error('error')\n    })\n    .then(console.log).catch(console.error)\n```\n\n\n\n**unhandledRejection**Promise:\n\n```javascript\nprocess.on('unhandledRejection', (err) =>\n{\n    console.log(err)\n})\n```\n\n------\n\n### 2. \n\n```javascript\nfunction checkApiKey(apiKeyFromDb, apiKeyReceived)\n{\n    if (apiKeyFromDb === apiKeyReceived)\n    {\n        return true\n    }\n    return false\n}\n```\n\n[timing attacks](https://en.wikipedia.org/wiki/Timing_attack)****?Node.jsV8[cryptiles](https://www.npmjs.com/package/cryptiles):\n\n```javascript\nfunction checkApiKey(apiKeyFromDb, apiKeyReceived)\n{\n    return cryptiles.fixedTimeComparison(apiKeyFromDb, apiKeyReceived)\n}\n```\n\n### 3. \n\n```javascript\nPromise.resolve(1)  \n  .then((x) => x + 1)\n  .then((x) => { throw new Error('My Error') })\n  .catch(() => 1)\n  .then((x) => x + 1)\n  .then((x) => console.log(x))\n  .catch(console.error)\n```\n\n2:\n\n1. Promiseresolve1\n2. x112\n3. x2\n4. 1\n5. x112\n6. x22\n7. \n\n[Fundebug](https://fundebug.com/)**Node.js: 177654062**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-interview-2017/nodejs-qq-group.jpeg\" />\n</div>\n\n### \n\n- [10Node.js](http://wwsun.github.io/posts/nodejs-interview-questions.html)\n- [XSS - Stealing Cookies 101](http://jehiah.cz/a/xss-stealing-cookies-101)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/04/10/nodejs-interview-2017.md","raw":"---\ntitle: Node.js2017\n\ndate: 2017-04-10 12:00:00\n\ntags: [Node.js, ]\n---\n\n**:** **ECMAScript****Node.js****NPM**Node.js\n\n\n<!-- more -->\n\n: [Node.js Interview Questions and Answers (2017 Edition)](https://blog.risingstack.com/node-js-interview-questions-and-answers-2017/)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\n### \n\n- \n- \n- Promise?\n- \n- Stub?\n- \n- HTTP\n- CookiesXSS\n- \n\n### \n\n#### 1. \n\n(Error-First Callback)\n\n```javascript\nfs.readFile(filePath, function(err, data)\n{\n    if (err)\n    {\n        // \n        return console.log(err);\n    }\n    console.log(data);\n});\n```\n\n#### 2. \n\n:\n\n- : \n- [aync](https://www.npmjs.com/package/async)\n- Promise\n- aync/await([Async/AwaitPromise6](https://blog.fundebug.com/2017/04/04/nodejs-async-await/))\n\n#### 3. Promise?\n\nPromise100msresult**catch**Promise\n\n```javascript\nnew Promise((resolve, reject) =>\n    {\n        setTimeout(() =>\n        {\n            resolve('result');\n        }, 100)\n    })\n    .then(console.log)\n    .catch(console.error);\n```\n\n#### 4. \n\n:\n\n- [ESLint](http://eslint.org/)\n- [Standard](https://standardjs.com/)\n\n[JavaScript Clean Coding](https://blog.risingstack.com/javascript-clean-coding-best-practices-node-js-at-scale/)\n\n#### 5. Stub?\n\nStubStub\n\n```javascript\nvar fs = require('fs');\n\nvar writeFileStub = sinon.stub(fs, 'writeFile', function(path, data, cb)\n{\n    return cb(null);\n});\n\nexpect(writeFileStub).to.be.called;\nwriteFileStub.restore();\n```\n\n#### 6. \n\n************:\n\n<div style=\"text-align: left;\">\n<img style=\"width:30%;\" src=\"nodejs-interview-2017/test_pyramid.png\" />\n</div>\n\nHTTP:\n\n- (stub)\n- (stub)\n- (stub)\n\n#### 7. HTTP\n\n\n\n#### 8. CookiesXSS\n\nXSS(Cross-Site Scripting)HTMLJavaScriptHTTP**set-cookie**:\n\n- HttpOnly - **cross-site scripting**Javascriptcookie\n- secure - HTTPScookie\n\n: **Set-Cookie: sid=<cookie-value>; HttpOnly**. Express[cookie-session](https://github.com/expressjs/cookie-session#cookie-options)\n\n#### 9. \n\nNode.jsExpress[27](https://github.com/expressjs/express/blob/master/package.json#L29):\n\n- npm outdated\n- [Trace by RisingStack](https://trace.risingstack.com/)\n- [NSP](https://nodesecurity.io/)\n- [GreenKeeper](https://greenkeeper.io/)\n- [Snyk](https://snyk.io/)\n\n### \n\n#### 1. \n\n```javascript\nnew Promise((resolve, reject) =>\n    {\n        throw new Error('error')\n    })\n    .then(console.log)\n```\n\n\n\n**then****catch**:\n\n```javascript\nnew Promise((resolve, reject) =>\n    {\n        throw new Error('error')\n    })\n    .then(console.log).catch(console.error)\n```\n\n\n\n**unhandledRejection**Promise:\n\n```javascript\nprocess.on('unhandledRejection', (err) =>\n{\n    console.log(err)\n})\n```\n\n------\n\n### 2. \n\n```javascript\nfunction checkApiKey(apiKeyFromDb, apiKeyReceived)\n{\n    if (apiKeyFromDb === apiKeyReceived)\n    {\n        return true\n    }\n    return false\n}\n```\n\n[timing attacks](https://en.wikipedia.org/wiki/Timing_attack)****?Node.jsV8[cryptiles](https://www.npmjs.com/package/cryptiles):\n\n```javascript\nfunction checkApiKey(apiKeyFromDb, apiKeyReceived)\n{\n    return cryptiles.fixedTimeComparison(apiKeyFromDb, apiKeyReceived)\n}\n```\n\n### 3. \n\n```javascript\nPromise.resolve(1)  \n  .then((x) => x + 1)\n  .then((x) => { throw new Error('My Error') })\n  .catch(() => 1)\n  .then((x) => x + 1)\n  .then((x) => console.log(x))\n  .catch(console.error)\n```\n\n2:\n\n1. Promiseresolve1\n2. x112\n3. x2\n4. 1\n5. x112\n6. x22\n7. \n\n[Fundebug](https://fundebug.com/)**Node.js: 177654062**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"nodejs-interview-2017/nodejs-qq-group.jpeg\" />\n</div>\n\n### \n\n- [10Node.js](http://wwsun.github.io/posts/nodejs-interview-questions.html)\n- [XSS - Stealing Cookies 101](http://jehiah.cz/a/xss-stealing-cookies-101)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"2017/04/10/nodejs-interview-2017","published":1,"updated":"2017-04-16T14:46:36.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtns001t71fyifqszugw","content":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x4ECE;<strong>ECMAScript&#x6807;&#x51C6;</strong>&#xFF0C;<strong>Node.js&#x8BED;&#x6CD5;</strong>&#x4EE5;&#x53CA;<strong>NPM&#x6A21;&#x5757;</strong>&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;Node.js&#x7684;&#x53D1;&#x5C55;&#x8BA9;&#x4EBA;&#x76EE;&#x4E0D;&#x6687;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;&#x9762;&#x8BD5;&#x9898;&#x4E5F;&#x5F97;&#x4E0E;&#x65F6;&#x4FF1;&#x8FDB;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x539F;&#x6587;: <a href=\"https://blog.risingstack.com/node-js-interview-questions-and-answers-2017/\" target=\"_blank\" rel=\"external\">Node.js Interview Questions and Answers (2017 Edition)</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<h3 id=\"&#x95EE;&#x9898;\"><a href=\"#&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;\"></a>&#x95EE;&#x9898;</h3><ul>\n<li>&#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;</li>\n<li>&#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;</li>\n<li>&#x4EC0;&#x4E48;&#x662F;Promise?</li>\n<li>&#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;</li>\n<li>&#x4EC0;&#x4E48;&#x662F;Stub?&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</li>\n<li>&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</li>\n<li>&#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</li>\n<li>Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;</li>\n<li>&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;</li>\n</ul>\n<h3 id=\"&#x7B54;&#x6848;\"><a href=\"#&#x7B54;&#x6848;\" class=\"headerlink\" title=\"&#x7B54;&#x6848;\"></a>&#x7B54;&#x6848;</h3><h4 id=\"1-&#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;\"><a href=\"#1-&#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;\" class=\"headerlink\" title=\"1. &#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;\"></a>1. &#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;</h4><p>&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;(Error-First Callback)&#x7528;&#x4E8E;&#x540C;&#x65F6;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x548C;&#x6570;&#x636E;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x9A8C;&#x8BC1;&#x5B83;&#x662F;&#x5426;&#x51FA;&#x9519;&#xFF1B;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x3002;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">fs.readFile(filePath, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, data</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"comment\">// &#x5904;&#x7406;&#x9519;&#x8BEF;</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(data);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;\"><a href=\"#2-&#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;\" class=\"headerlink\" title=\"2. &#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;\"></a>2. &#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;</h4><p>&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;:</p>\n<ul>\n<li>&#x6A21;&#x5757;&#x5316;: &#x5C06;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;&#x72EC;&#x7ACB;&#x7684;&#x51FD;&#x6570;</li>\n<li>&#x4F7F;&#x7528;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x5E93;&#xFF0C;&#x4F8B;&#x5982;<a href=\"https://www.npmjs.com/package/async\" target=\"_blank\" rel=\"external\">aync</a></li>\n<li>&#x4F7F;&#x7528;Promise</li>\n<li>&#x4F7F;&#x7528;aync/await(&#x53C2;&#x8003;<a href=\"https://blog.fundebug.com/2017/04/04/nodejs-async-await/\" target=\"_blank\" rel=\"external\">Async/Await&#x66FF;&#x4EE3;Promise&#x7684;6&#x4E2A;&#x7406;&#x7531;</a>)</li>\n</ul>\n<h4 id=\"3-&#x4EC0;&#x4E48;&#x662F;Promise\"><a href=\"#3-&#x4EC0;&#x4E48;&#x662F;Promise\" class=\"headerlink\" title=\"3. &#x4EC0;&#x4E48;&#x662F;Promise?\"></a>3. &#x4EC0;&#x4E48;&#x662F;Promise?</h4><p>Promise&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x66F4;&#x597D;&#x5730;&#x5904;&#x7406;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;100ms&#x540E;&#x4F1A;&#x6253;&#x5370;result&#x5B57;&#x7B26;&#x4E32;&#x3002;<strong>catch</strong>&#x7528;&#x4E8E;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x3002;&#x591A;&#x4E2A;Promise&#x53EF;&#x4EE5;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#x3002;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span></div><div class=\"line\">    {</div><div class=\"line\">        setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span></div><div class=\"line\">        {</div><div class=\"line\">            resolve(<span class=\"string\">&apos;result&apos;</span>);</div><div class=\"line\">        }, <span class=\"number\">100</span>)</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"built_in\">console</span>.log)</div><div class=\"line\">    .catch(<span class=\"built_in\">console</span>.error);</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;\"><a href=\"#4-&#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;\" class=\"headerlink\" title=\"4. &#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;\"></a>4. &#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;</h4><p>&#x56E2;&#x961F;&#x534F;&#x4F5C;&#x65F6;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x56E2;&#x961F;&#x6210;&#x5458;&#x624D;&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x5730;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x6BCF;&#x6B21;&#x53BB;&#x9002;&#x5E94;&#x65B0;&#x7684;&#x98CE;&#x683C;&#x3002;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;:</p>\n<ul>\n<li><a href=\"http://eslint.org/\" target=\"_blank\" rel=\"external\">ESLint</a></li>\n<li><a href=\"https://standardjs.com/\" target=\"_blank\" rel=\"external\">Standard</a></li>\n</ul>\n<p>&#x611F;&#x5174;&#x8DA3;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href=\"https://blog.risingstack.com/javascript-clean-coding-best-practices-node-js-at-scale/\" target=\"_blank\" rel=\"external\">JavaScript Clean Coding</a></p>\n<h4 id=\"5-&#x4EC0;&#x4E48;&#x662F;Stub-&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"><a href=\"#5-&#x4EC0;&#x4E48;&#x662F;Stub-&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"5. &#x4EC0;&#x4E48;&#x662F;Stub?&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"></a>5. &#x4EC0;&#x4E48;&#x662F;Stub?&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</h4><p>Stub&#x7528;&#x4E8E;&#x6A21;&#x62DF;&#x6A21;&#x5757;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x6D4B;&#x8BD5;&#x65F6;&#xFF0C;Stub&#x53EF;&#x4EE5;&#x4E3A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#x6A21;&#x62DF;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5199;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x771F;&#x6B63;&#x53BB;&#x5199;&#x3002;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&apos;fs&apos;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> writeFileStub = sinon.stub(fs, <span class=\"string\">&apos;writeFile&apos;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">path, data, cb</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">return</span> cb(<span class=\"literal\">null</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\">expect(writeFileStub).to.be.called;</div><div class=\"line\">writeFileStub.restore();</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"><a href=\"#6-&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"6. &#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"></a>6. &#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</h4><p>&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#x53CD;&#x6620;&#x4E86;&#x9700;&#x8981;&#x5199;&#x7684;<strong>&#x5355;&#x5143;&#x6D4B;&#x8BD5;</strong>&#x3001;<strong>&#x96C6;&#x6210;&#x6D4B;&#x8BD5;</strong>&#x4EE5;&#x53CA;<strong>&#x7AEF;&#x5230;&#x7AEF;&#x6D4B;&#x8BD5;</strong>&#x7684;&#x6BD4;&#x4F8B;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:30%;\" src=\"/2017/04/10/nodejs-interview-2017/test_pyramid.png\"><br></div>\n\n<p>&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;&#x65F6;&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<ul>\n<li>&#x5F88;&#x591A;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x5206;&#x522B;&#x6D4B;&#x8BD5;&#x5404;&#x4E2A;&#x6A21;&#x5757;(&#x4F9D;&#x8D56;&#x9700;&#x8981;stub)</li>\n<li>&#x8F83;&#x5C11;&#x7684;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#xFF0C;&#x6D4B;&#x8BD5;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;(&#x4F9D;&#x8D56;&#x4E0D;&#x80FD;stub)</li>\n<li>&#x5C11;&#x91CF;&#x7AEF;&#x5230;&#x7AEF;&#x6D4B;&#x8BD5;&#xFF0C;&#x53BB;&#x8C03;&#x7528;&#x771F;&#x6B63;&#x5730;&#x63A5;&#x53E3;(&#x4F9D;&#x8D56;&#x4E0D;&#x80FD;stub)</li>\n</ul>\n<h4 id=\"7-&#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;\"><a href=\"#7-&#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;\" class=\"headerlink\" title=\"7. &#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;\"></a>7. &#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</h4><p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6807;&#x51C6;&#x7B54;&#x6848;&#x3002;&#x9700;&#x8981;&#x63CF;&#x8FF0;&#x6846;&#x67B6;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x53CD;&#x6620;&#x5F00;&#x53D1;&#x8005;&#x5BF9;&#x6846;&#x67B6;&#x7684;&#x719F;&#x6089;&#x7A0B;&#x5EA6;&#x3002;</p>\n<h4 id=\"8-Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;\"><a href=\"#8-Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;\" class=\"headerlink\" title=\"8. Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;\"></a>8. Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;</h4><p>XSS(Cross-Site Scripting&#xFF0C;&#x8DE8;&#x7AD9;&#x811A;&#x672C;&#x653B;&#x51FB;)&#x662F;&#x6307;&#x653B;&#x51FB;&#x8005;&#x5728;&#x8FD4;&#x56DE;&#x7684;HTML&#x4E2D;&#x63D2;&#x5165;JavaScript&#x811A;&#x672C;&#x3002;&#x4E3A;&#x4E86;&#x51CF;&#x8F7B;&#x8FD9;&#x4E9B;&#x653B;&#x51FB;&#xFF0C;&#x9700;&#x8981;&#x5728;HTTP&#x5934;&#x90E8;&#x914D;&#x7F6E;<strong>set-cookie</strong>:</p>\n<ul>\n<li>HttpOnly - &#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x9632;&#x6B62;<strong>cross-site scripting</strong>&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F1A;&#x7981;&#x6B62;Javascript&#x811A;&#x672C;&#x8BBF;&#x95EE;cookie&#x3002;</li>\n<li>secure - &#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#x4EC5;&#x5728;&#x8BF7;&#x6C42;&#x4E3A;HTTPS&#x65F6;&#x53D1;&#x9001;cookie&#x3002;</li>\n</ul>\n<p>&#x7ED3;&#x679C;&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x6837;&#x7684;: <strong>Set-Cookie: sid=<cookie-value>; HttpOnly</cookie-value></strong>. &#x4F7F;&#x7528;Express&#x7684;&#x8BDD;&#xFF0C;<a href=\"https://github.com/expressjs/cookie-session#cookie-options\" target=\"_blank\" rel=\"external\">cookie-session</a>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x597D;&#x4E86;&#x3002;</p>\n<h4 id=\"9-&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;\"><a href=\"#9-&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;\" class=\"headerlink\" title=\"9. &#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;\"></a>9. &#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;</h4><p>&#x7F16;&#x5199;Node.js&#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x4F9D;&#x8D56;&#x6210;&#x767E;&#x4E0A;&#x5343;&#x7684;&#x6A21;&#x5757;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4F7F;&#x7528;&#x4E86;Express&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x76F4;&#x63A5;&#x4F9D;&#x8D56;<a href=\"https://github.com/expressjs/express/blob/master/package.json#L29\" target=\"_blank\" rel=\"external\">27&#x4E2A;&#x6A21;&#x5757;</a>&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x624B;&#x52A8;&#x68C0;&#x67E5;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#x3002;&#x552F;&#x4E00;&#x7684;&#x529E;&#x6CD5;&#x662F;&#x5BF9;&#x4F9D;&#x8D56;&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x5316;&#x7684;&#x5B89;&#x5168;&#x68C0;&#x67E5;&#xFF0C;&#x6709;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x53EF;&#x4F9B;&#x9009;&#x62E9;:</p>\n<ul>\n<li>npm outdated</li>\n<li><a href=\"https://trace.risingstack.com/\" target=\"_blank\" rel=\"external\">Trace by RisingStack</a></li>\n<li><a href=\"https://nodesecurity.io/\" target=\"_blank\" rel=\"external\">NSP</a></li>\n<li><a href=\"https://greenkeeper.io/\" target=\"_blank\" rel=\"external\">GreenKeeper</a></li>\n<li><a href=\"https://snyk.io/\" target=\"_blank\" rel=\"external\">Snyk</a></li>\n</ul>\n<h3 id=\"&#x9644;&#x52A0;&#x9898;\"><a href=\"#&#x9644;&#x52A0;&#x9898;\" class=\"headerlink\" title=\"&#x9644;&#x52A0;&#x9898;\"></a>&#x9644;&#x52A0;&#x9898;</h3><h4 id=\"1-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"><a href=\"#1-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\" class=\"headerlink\" title=\"1. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"></a>1. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;error&apos;</span>)</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"built_in\">console</span>.log)</div></pre></td></tr></table></figure>\n<p><strong>then</strong>&#x4E4B;&#x540E;&#x6CA1;&#x6709;<strong>catch</strong>&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x9519;&#x8BEF;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x89E3;&#x51B3;&#x95EE;&#x9898;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;error&apos;</span>)</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"built_in\">console</span>.log).catch(<span class=\"built_in\">console</span>.error)</div></pre></td></tr></table></figure>\n<p>&#x8C03;&#x8BD5;&#x4E00;&#x4E2A;&#x5927;&#x578B;&#x7684;&#x9879;&#x76EE;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76D1;&#x63A7;<strong>unhandledRejection</strong>&#x4E8B;&#x4EF6;&#x6765;&#x6355;&#x83B7;&#x6240;&#x6709;&#x672A;&#x5904;&#x7406;&#x7684;Promise&#x9519;&#x8BEF;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">process.on(<span class=\"string\">&apos;unhandledRejection&apos;</span>, (err) =&gt;</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">})</div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"2-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"><a href=\"#2-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\" class=\"headerlink\" title=\"2. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"></a>2. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkApiKey</span>(<span class=\"params\">apiKeyFromDb, apiKeyReceived</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (apiKeyFromDb === apiKeyReceived)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6BD4;&#x8F83;&#x5BC6;&#x7801;&#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x6CC4;&#x9732;&#x4EFB;&#x4F55;&#x4FE1;&#x606F;&#xFF0C;&#x56E0;&#x6B64;&#x6BD4;&#x8F83;&#x5FC5;&#x987B;&#x5728;&#x56FA;&#x5B9A;&#x65F6;&#x95F4;&#x5B8C;&#x6210;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"https://en.wikipedia.org/wiki/Timing_attack\" target=\"_blank\" rel=\"external\">timing attacks</a>&#x6765;&#x653B;&#x51FB;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x3002;<strong>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x8FD9;&#x6837;&#x5462;</strong>?Node.js&#x4F7F;&#x7528;V8&#x5F15;&#x64CE;&#xFF0C;&#x5B83;&#x4F1A;&#x4ECE;&#x6027;&#x80FD;&#x89D2;&#x5EA6;&#x4F18;&#x5316;&#x4EE3;&#x7801;&#x3002;&#x5B83;&#x4F1A;&#x9010;&#x4E2A;&#x6BD4;&#x8F83;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5B57;&#x6BCD;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x73B0;&#x4E0D;&#x5339;&#x914D;&#x65F6;&#x5C31;&#x505C;&#x6B62;&#x6BD4;&#x8F83;&#x3002;&#x5F53;&#x653B;&#x51FB;&#x8005;&#x7684;&#x5BC6;&#x7801;&#x66F4;&#x51C6;&#x786E;&#x65F6;&#xFF0C;&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x95F4;&#x8D8A;&#x957F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x95F4;&#x957F;&#x77ED;&#x6765;&#x5224;&#x65AD;&#x5BC6;&#x7801;&#x7684;&#x6B63;&#x786E;&#x6027;&#x3002;&#x4F7F;&#x7528;<a href=\"https://www.npmjs.com/package/cryptiles\" target=\"_blank\" rel=\"external\">cryptiles</a>&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkApiKey</span>(<span class=\"params\">apiKeyFromDb, apiKeyReceived</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">return</span> cryptiles.fixedTimeComparison(apiKeyFromDb, apiKeyReceived)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"3-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;\"><a href=\"#3-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;\" class=\"headerlink\" title=\"3. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;\"></a>3. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)  </div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x + <span class=\"number\">1</span>)</div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> { <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;My Error&apos;</span>) })</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"number\">1</span>)</div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x + <span class=\"number\">1</span>)</div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(x))</div><div class=\"line\">  .catch(<span class=\"built_in\">console</span>.error)</div></pre></td></tr></table></figure>\n<p>&#x7B54;&#x6848;&#x662F;2&#xFF0C;&#x9010;&#x884C;&#x89E3;&#x91CA;&#x5982;&#x4E0B;:</p>\n<ol>\n<li>&#x521B;&#x5EFA;&#x65B0;&#x7684;Promise&#xFF0C;resolve&#x503C;&#x4E3A;1&#x3002;</li>\n<li>x&#x4E3A;1&#xFF0C;&#x52A0;1&#x4E4B;&#x540E;&#x8FD4;&#x56DE;2&#x3002;</li>\n<li>x&#x4E3A;2&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x7528;&#x5230;&#x3002;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x3002;</li>\n<li>&#x6355;&#x83B7;&#x9519;&#x8BEF;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x3002;&#x8FD4;&#x56DE;1&#x3002;</li>\n<li>x&#x4E3A;1&#xFF0C;&#x52A0;1&#x4E4B;&#x540E;&#x8FD4;&#x56DE;2&#x3002;</li>\n<li>x&#x4E3A;2&#xFF0C;&#x6253;&#x5370;2&#x3002;</li>\n<li>&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x9519;&#x8BEF;&#x629B;&#x51FA;&#x3002;</li>\n</ol>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 177654062</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/10/nodejs-interview-2017/nodejs-qq-group.jpeg\"><br></div>\n\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://wwsun.github.io/posts/nodejs-interview-questions.html\" target=\"_blank\" rel=\"external\">10&#x4E2A;&#x5E38;&#x89C1;&#x7684;Node.js&#x9762;&#x8BD5;&#x9898;</a></li>\n<li><a href=\"http://jehiah.cz/a/xss-stealing-cookies-101\" target=\"_blank\" rel=\"external\">XSS - Stealing Cookies 101</a></li>\n</ul>\n","excerpt":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x4ECE;<strong>ECMAScript&#x6807;&#x51C6;</strong>&#xFF0C;<strong>Node.js&#x8BED;&#x6CD5;</strong>&#x4EE5;&#x53CA;<strong>NPM&#x6A21;&#x5757;</strong>&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;Node.js&#x7684;&#x53D1;&#x5C55;&#x8BA9;&#x4EBA;&#x76EE;&#x4E0D;&#x6687;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;&#x9762;&#x8BD5;&#x9898;&#x4E5F;&#x5F97;&#x4E0E;&#x65F6;&#x4FF1;&#x8FDB;&#x3002;</p>","more":"<p>&#x539F;&#x6587;: <a href=\"https://blog.risingstack.com/node-js-interview-questions-and-answers-2017/\">Node.js Interview Questions and Answers (2017 Edition)</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<h3 id=\"&#x95EE;&#x9898;\"><a href=\"#&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;\"></a>&#x95EE;&#x9898;</h3><ul>\n<li>&#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;</li>\n<li>&#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;</li>\n<li>&#x4EC0;&#x4E48;&#x662F;Promise?</li>\n<li>&#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;</li>\n<li>&#x4EC0;&#x4E48;&#x662F;Stub?&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</li>\n<li>&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</li>\n<li>&#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</li>\n<li>Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;</li>\n<li>&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;</li>\n</ul>\n<h3 id=\"&#x7B54;&#x6848;\"><a href=\"#&#x7B54;&#x6848;\" class=\"headerlink\" title=\"&#x7B54;&#x6848;\"></a>&#x7B54;&#x6848;</h3><h4 id=\"1-&#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;\"><a href=\"#1-&#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;\" class=\"headerlink\" title=\"1. &#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;\"></a>1. &#x4EC0;&#x4E48;&#x662F;&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1F;</h4><p>&#x9519;&#x8BEF;&#x4F18;&#x5148;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;(Error-First Callback)&#x7528;&#x4E8E;&#x540C;&#x65F6;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x548C;&#x6570;&#x636E;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x9A8C;&#x8BC1;&#x5B83;&#x662F;&#x5426;&#x51FA;&#x9519;&#xFF1B;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x3002;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">fs.readFile(filePath, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, data</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (err)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"comment\">// &#x5904;&#x7406;&#x9519;&#x8BEF;</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err);</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(data);</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;\"><a href=\"#2-&#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;\" class=\"headerlink\" title=\"2. &#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;\"></a>2. &#x5982;&#x4F55;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF1F;</h4><p>&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x56DE;&#x8C03;&#x5730;&#x72F1;:</p>\n<ul>\n<li>&#x6A21;&#x5757;&#x5316;: &#x5C06;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;&#x72EC;&#x7ACB;&#x7684;&#x51FD;&#x6570;</li>\n<li>&#x4F7F;&#x7528;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x5E93;&#xFF0C;&#x4F8B;&#x5982;<a href=\"https://www.npmjs.com/package/async\">aync</a></li>\n<li>&#x4F7F;&#x7528;Promise</li>\n<li>&#x4F7F;&#x7528;aync/await(&#x53C2;&#x8003;<a href=\"https://blog.fundebug.com/2017/04/04/nodejs-async-await/\">Async/Await&#x66FF;&#x4EE3;Promise&#x7684;6&#x4E2A;&#x7406;&#x7531;</a>)</li>\n</ul>\n<h4 id=\"3-&#x4EC0;&#x4E48;&#x662F;Promise\"><a href=\"#3-&#x4EC0;&#x4E48;&#x662F;Promise\" class=\"headerlink\" title=\"3. &#x4EC0;&#x4E48;&#x662F;Promise?\"></a>3. &#x4EC0;&#x4E48;&#x662F;Promise?</h4><p>Promise&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x66F4;&#x597D;&#x5730;&#x5904;&#x7406;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;100ms&#x540E;&#x4F1A;&#x6253;&#x5370;result&#x5B57;&#x7B26;&#x4E32;&#x3002;<strong>catch</strong>&#x7528;&#x4E8E;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x3002;&#x591A;&#x4E2A;Promise&#x53EF;&#x4EE5;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#x3002;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span></div><div class=\"line\">    {</div><div class=\"line\">        setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span></div><div class=\"line\">        {</div><div class=\"line\">            resolve(<span class=\"string\">&apos;result&apos;</span>);</div><div class=\"line\">        }, <span class=\"number\">100</span>)</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"built_in\">console</span>.log)</div><div class=\"line\">    .catch(<span class=\"built_in\">console</span>.error);</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;\"><a href=\"#4-&#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;\" class=\"headerlink\" title=\"4. &#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;\"></a>4. &#x7528;&#x4EC0;&#x4E48;&#x5DE5;&#x5177;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#xFF1F;</h4><p>&#x56E2;&#x961F;&#x534F;&#x4F5C;&#x65F6;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x7684;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x56E2;&#x961F;&#x6210;&#x5458;&#x624D;&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x5730;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x6BCF;&#x6B21;&#x53BB;&#x9002;&#x5E94;&#x65B0;&#x7684;&#x98CE;&#x683C;&#x3002;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;:</p>\n<ul>\n<li><a href=\"http://eslint.org/\">ESLint</a></li>\n<li><a href=\"https://standardjs.com/\">Standard</a></li>\n</ul>\n<p>&#x611F;&#x5174;&#x8DA3;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href=\"https://blog.risingstack.com/javascript-clean-coding-best-practices-node-js-at-scale/\">JavaScript Clean Coding</a></p>\n<h4 id=\"5-&#x4EC0;&#x4E48;&#x662F;Stub-&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"><a href=\"#5-&#x4EC0;&#x4E48;&#x662F;Stub-&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"5. &#x4EC0;&#x4E48;&#x662F;Stub?&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"></a>5. &#x4EC0;&#x4E48;&#x662F;Stub?&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</h4><p>Stub&#x7528;&#x4E8E;&#x6A21;&#x62DF;&#x6A21;&#x5757;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x6D4B;&#x8BD5;&#x65F6;&#xFF0C;Stub&#x53EF;&#x4EE5;&#x4E3A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#x6A21;&#x62DF;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5199;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x771F;&#x6B63;&#x53BB;&#x5199;&#x3002;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&apos;fs&apos;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> writeFileStub = sinon.stub(fs, <span class=\"string\">&apos;writeFile&apos;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">path, data, cb</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">return</span> cb(<span class=\"literal\">null</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\">expect(writeFileStub).to.be.called;</div><div class=\"line\">writeFileStub.restore();</div></pre></td></tr></table></figure>\n<h4 id=\"6-&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"><a href=\"#6-&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"6. &#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;\"></a>6. &#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#xFF1F;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</h4><p>&#x6D4B;&#x8BD5;&#x91D1;&#x5B57;&#x5854;&#x53CD;&#x6620;&#x4E86;&#x9700;&#x8981;&#x5199;&#x7684;<strong>&#x5355;&#x5143;&#x6D4B;&#x8BD5;</strong>&#x3001;<strong>&#x96C6;&#x6210;&#x6D4B;&#x8BD5;</strong>&#x4EE5;&#x53CA;<strong>&#x7AEF;&#x5230;&#x7AEF;&#x6D4B;&#x8BD5;</strong>&#x7684;&#x6BD4;&#x4F8B;:</p>\n<div style=\"text-align: left;\"><br><img style=\"width:30%;\" src=\"/2017/04/10/nodejs-interview-2017/test_pyramid.png\"><br></div>\n\n<p>&#x6D4B;&#x8BD5;HTTP&#x63A5;&#x53E3;&#x65F6;&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<ul>\n<li>&#x5F88;&#x591A;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x5206;&#x522B;&#x6D4B;&#x8BD5;&#x5404;&#x4E2A;&#x6A21;&#x5757;(&#x4F9D;&#x8D56;&#x9700;&#x8981;stub)</li>\n<li>&#x8F83;&#x5C11;&#x7684;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#xFF0C;&#x6D4B;&#x8BD5;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;(&#x4F9D;&#x8D56;&#x4E0D;&#x80FD;stub)</li>\n<li>&#x5C11;&#x91CF;&#x7AEF;&#x5230;&#x7AEF;&#x6D4B;&#x8BD5;&#xFF0C;&#x53BB;&#x8C03;&#x7528;&#x771F;&#x6B63;&#x5730;&#x63A5;&#x53E3;(&#x4F9D;&#x8D56;&#x4E0D;&#x80FD;stub)</li>\n</ul>\n<h4 id=\"7-&#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;\"><a href=\"#7-&#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;\" class=\"headerlink\" title=\"7. &#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;\"></a>7. &#x6700;&#x559C;&#x6B22;&#x54EA;&#x4E2A;HTTP&#x6846;&#x67B6;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</h4><p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6807;&#x51C6;&#x7B54;&#x6848;&#x3002;&#x9700;&#x8981;&#x63CF;&#x8FF0;&#x6846;&#x67B6;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x53CD;&#x6620;&#x5F00;&#x53D1;&#x8005;&#x5BF9;&#x6846;&#x67B6;&#x7684;&#x719F;&#x6089;&#x7A0B;&#x5EA6;&#x3002;</p>\n<h4 id=\"8-Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;\"><a href=\"#8-Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;\" class=\"headerlink\" title=\"8. Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;\"></a>8. Cookies&#x5982;&#x4F55;&#x9632;&#x8303;XSS&#x653B;&#x51FB;&#xFF1F;</h4><p>XSS(Cross-Site Scripting&#xFF0C;&#x8DE8;&#x7AD9;&#x811A;&#x672C;&#x653B;&#x51FB;)&#x662F;&#x6307;&#x653B;&#x51FB;&#x8005;&#x5728;&#x8FD4;&#x56DE;&#x7684;HTML&#x4E2D;&#x63D2;&#x5165;JavaScript&#x811A;&#x672C;&#x3002;&#x4E3A;&#x4E86;&#x51CF;&#x8F7B;&#x8FD9;&#x4E9B;&#x653B;&#x51FB;&#xFF0C;&#x9700;&#x8981;&#x5728;HTTP&#x5934;&#x90E8;&#x914D;&#x7F6E;<strong>set-cookie</strong>:</p>\n<ul>\n<li>HttpOnly - &#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x9632;&#x6B62;<strong>cross-site scripting</strong>&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F1A;&#x7981;&#x6B62;Javascript&#x811A;&#x672C;&#x8BBF;&#x95EE;cookie&#x3002;</li>\n<li>secure - &#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#x4EC5;&#x5728;&#x8BF7;&#x6C42;&#x4E3A;HTTPS&#x65F6;&#x53D1;&#x9001;cookie&#x3002;</li>\n</ul>\n<p>&#x7ED3;&#x679C;&#x5E94;&#x8BE5;&#x662F;&#x8FD9;&#x6837;&#x7684;: <strong>Set-Cookie: sid=<cookie-value>; HttpOnly</cookie-value></strong>. &#x4F7F;&#x7528;Express&#x7684;&#x8BDD;&#xFF0C;<a href=\"https://github.com/expressjs/cookie-session#cookie-options\">cookie-session</a>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x597D;&#x4E86;&#x3002;</p>\n<h4 id=\"9-&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;\"><a href=\"#9-&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;\" class=\"headerlink\" title=\"9. &#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;\"></a>9. &#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1F;</h4><p>&#x7F16;&#x5199;Node.js&#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x4F9D;&#x8D56;&#x6210;&#x767E;&#x4E0A;&#x5343;&#x7684;&#x6A21;&#x5757;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4F7F;&#x7528;&#x4E86;Express&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x76F4;&#x63A5;&#x4F9D;&#x8D56;<a href=\"https://github.com/expressjs/express/blob/master/package.json#L29\">27&#x4E2A;&#x6A21;&#x5757;</a>&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x624B;&#x52A8;&#x68C0;&#x67E5;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;&#x3002;&#x552F;&#x4E00;&#x7684;&#x529E;&#x6CD5;&#x662F;&#x5BF9;&#x4F9D;&#x8D56;&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x5316;&#x7684;&#x5B89;&#x5168;&#x68C0;&#x67E5;&#xFF0C;&#x6709;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x53EF;&#x4F9B;&#x9009;&#x62E9;:</p>\n<ul>\n<li>npm outdated</li>\n<li><a href=\"https://trace.risingstack.com/\">Trace by RisingStack</a></li>\n<li><a href=\"https://nodesecurity.io/\">NSP</a></li>\n<li><a href=\"https://greenkeeper.io/\">GreenKeeper</a></li>\n<li><a href=\"https://snyk.io/\">Snyk</a></li>\n</ul>\n<h3 id=\"&#x9644;&#x52A0;&#x9898;\"><a href=\"#&#x9644;&#x52A0;&#x9898;\" class=\"headerlink\" title=\"&#x9644;&#x52A0;&#x9898;\"></a>&#x9644;&#x52A0;&#x9898;</h3><h4 id=\"1-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"><a href=\"#1-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\" class=\"headerlink\" title=\"1. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"></a>1. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;error&apos;</span>)</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"built_in\">console</span>.log)</div></pre></td></tr></table></figure>\n<p><strong>then</strong>&#x4E4B;&#x540E;&#x6CA1;&#x6709;<strong>catch</strong>&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x9519;&#x8BEF;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x89E3;&#x51B3;&#x95EE;&#x9898;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;error&apos;</span>)</div><div class=\"line\">    })</div><div class=\"line\">    .then(<span class=\"built_in\">console</span>.log).catch(<span class=\"built_in\">console</span>.error)</div></pre></td></tr></table></figure>\n<p>&#x8C03;&#x8BD5;&#x4E00;&#x4E2A;&#x5927;&#x578B;&#x7684;&#x9879;&#x76EE;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76D1;&#x63A7;<strong>unhandledRejection</strong>&#x4E8B;&#x4EF6;&#x6765;&#x6355;&#x83B7;&#x6240;&#x6709;&#x672A;&#x5904;&#x7406;&#x7684;Promise&#x9519;&#x8BEF;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">process.on(<span class=\"string\">&apos;unhandledRejection&apos;</span>, (err) =&gt;</div><div class=\"line\">{</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">})</div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"2-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"><a href=\"#2-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\" class=\"headerlink\" title=\"2. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;\"></a>2. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkApiKey</span>(<span class=\"params\">apiKeyFromDb, apiKeyReceived</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">if</span> (apiKeyFromDb === apiKeyReceived)</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6BD4;&#x8F83;&#x5BC6;&#x7801;&#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x6CC4;&#x9732;&#x4EFB;&#x4F55;&#x4FE1;&#x606F;&#xFF0C;&#x56E0;&#x6B64;&#x6BD4;&#x8F83;&#x5FC5;&#x987B;&#x5728;&#x56FA;&#x5B9A;&#x65F6;&#x95F4;&#x5B8C;&#x6210;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href=\"https://en.wikipedia.org/wiki/Timing_attack\">timing attacks</a>&#x6765;&#x653B;&#x51FB;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x3002;<strong>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x8FD9;&#x6837;&#x5462;</strong>?Node.js&#x4F7F;&#x7528;V8&#x5F15;&#x64CE;&#xFF0C;&#x5B83;&#x4F1A;&#x4ECE;&#x6027;&#x80FD;&#x89D2;&#x5EA6;&#x4F18;&#x5316;&#x4EE3;&#x7801;&#x3002;&#x5B83;&#x4F1A;&#x9010;&#x4E2A;&#x6BD4;&#x8F83;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5B57;&#x6BCD;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x73B0;&#x4E0D;&#x5339;&#x914D;&#x65F6;&#x5C31;&#x505C;&#x6B62;&#x6BD4;&#x8F83;&#x3002;&#x5F53;&#x653B;&#x51FB;&#x8005;&#x7684;&#x5BC6;&#x7801;&#x66F4;&#x51C6;&#x786E;&#x65F6;&#xFF0C;&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x95F4;&#x8D8A;&#x957F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x95F4;&#x957F;&#x77ED;&#x6765;&#x5224;&#x65AD;&#x5BC6;&#x7801;&#x7684;&#x6B63;&#x786E;&#x6027;&#x3002;&#x4F7F;&#x7528;<a href=\"https://www.npmjs.com/package/cryptiles\">cryptiles</a>&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkApiKey</span>(<span class=\"params\">apiKeyFromDb, apiKeyReceived</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    <span class=\"keyword\">return</span> cryptiles.fixedTimeComparison(apiKeyFromDb, apiKeyReceived)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"3-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;\"><a href=\"#3-&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;\" class=\"headerlink\" title=\"3. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;\"></a>3. &#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)  </div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x + <span class=\"number\">1</span>)</div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> { <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&apos;My Error&apos;</span>) })</div><div class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"number\">1</span>)</div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x + <span class=\"number\">1</span>)</div><div class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(x))</div><div class=\"line\">  .catch(<span class=\"built_in\">console</span>.error)</div></pre></td></tr></table></figure>\n<p>&#x7B54;&#x6848;&#x662F;2&#xFF0C;&#x9010;&#x884C;&#x89E3;&#x91CA;&#x5982;&#x4E0B;:</p>\n<ol>\n<li>&#x521B;&#x5EFA;&#x65B0;&#x7684;Promise&#xFF0C;resolve&#x503C;&#x4E3A;1&#x3002;</li>\n<li>x&#x4E3A;1&#xFF0C;&#x52A0;1&#x4E4B;&#x540E;&#x8FD4;&#x56DE;2&#x3002;</li>\n<li>x&#x4E3A;2&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x7528;&#x5230;&#x3002;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x3002;</li>\n<li>&#x6355;&#x83B7;&#x9519;&#x8BEF;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x3002;&#x8FD4;&#x56DE;1&#x3002;</li>\n<li>x&#x4E3A;1&#xFF0C;&#x52A0;1&#x4E4B;&#x540E;&#x8FD4;&#x56DE;2&#x3002;</li>\n<li>x&#x4E3A;2&#xFF0C;&#x6253;&#x5370;2&#x3002;</li>\n<li>&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x9519;&#x8BEF;&#x629B;&#x51FA;&#x3002;</li>\n</ol>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 177654062</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/10/nodejs-interview-2017/nodejs-qq-group.jpeg\"><br></div>\n\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"http://wwsun.github.io/posts/nodejs-interview-questions.html\">10&#x4E2A;&#x5E38;&#x89C1;&#x7684;Node.js&#x9762;&#x8BD5;&#x9898;</a></li>\n<li><a href=\"http://jehiah.cz/a/xss-stealing-cookies-101\">XSS - Stealing Cookies 101</a></li>\n</ul>"},{"title":"/var/run/docker.sock","date":"2017-04-17T04:00:00.000Z","_content":"\n**:** **/var/run/docker.sock****/var/run/docker.sock**Docker**DockerDocker**PortainerKubernetes\n\n<!-- more -->\n\n: [About /var/run/docker.sock](https://medium.com/lucjuggery/about-var-run-docker-sock-3bfd276e12fd)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\nDocker HubDocker**/var/run/docker.sock********Docker(Docker daemon)****Unix(Unix domain socket)**Docker\n\n<div style=\"text-align: center;\">\n<img style=\"width:70%;\" src=\"about-docker-sock/01.png\" />\n</div>\n\n: [http://blog.honeybadger.io](http://blog.honeybadger.io/how-unicorn-talks-to-nginx-an-introduction-to-unix-sockets-in-ruby/)\n\n### \n\n [Portainer](http://portainer.io/)DockerSwarmPortainerDocker**/var/run/docker.sock**:\n\n```bash\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n```\n\n9000(container)(image)(volume)...\n\n<div style=\"text-align: center;\">\n<img style=\"width:70%;\" src=\"about-docker-sock/02.png\" />\n</div>\n\nPortainer**/var/run/docker.sock****Docker**\n\n### DockerAPI\n\nDockerDockerUnix/var/run/docker.sockDocker daemon(ubuntucat /etc/default/docker )\n\n```bash\n-H unix:///var/run/docker.sock\n```\n\n: TCP**-H**\n\n[Docker engine API v1.27](https://docs.docker.com/engine/api/v1.27) ()HTTP/var/run/docker.sock\n\n### \n\nPortainerUIHTTPdocker.sockDocker[*curl*](https://curl.haxx.se/)HTTP\n\n#### 1. nginx\n\ncurlUnix**{Image:nginx}**Docker**/containers/create**NginxID\n\n```bash\ncurl -XPOST --unix-socket /var/run/docker.sock -d {Image:nginx} -H Content-Type: application/json http://localhost/containers/create\n```\n\nID:\n\n```javascript\n{Id:fcb65c6147efb862d5ea3a2ef20e793c52f0fafa3eb04e4292cb4784c5777d65\",Warnings:null}\n```\n\n#### 2. nginx\n\nID**/containers/<ID>/start**\n\n```bash\ncurl -XPOST --unix-socket /var/run/docker.sock http://localhost/containers/fcb6...7d65/start\n```\n\n:\n\n```\ndocker ls\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES\nfcb65c6147ef nginx nginx -g daemon  5 minutes ago Up 5 seconds 80/tcp, 443/tcp ecstatic_kirch\n...\n```\n\ndocker.sock\n\n### Docker\n\nDockerAPI**/events**Docker(load balancer)/Docker\n\n#### 1. alpine\n\n(interactive mode)docker.sock\n\n```bash\ndocker run -v /var/run/docker.sock:/var/run/docker.sock -ti alpine sh\n```\n\n#### 2. Docker\n\nalpineDockerHTTP**/events**Docker daemon()\n\n```bash\ncurl --unix-socket /var/run/docker.sock http://localhost/events\n```\n\n#### 3. \n\nNginxaplpineDocker daemon\n\n```bash\ndocker run -p 8080:80 -d nginx\n```\n\n3\n\n- \n- (bridge network)\n- \n\n### \n\n**/var/run/docker.sock**curlDockerHTTP\n\n: DockerDocker\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"about-docker-sock/docker.JPG\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/04/17/about-docker-sock.md","raw":"---\ntitle: /var/run/docker.sock\n\ndate: 2017-04-17 12:00:00\n\ntags: [Docker, ]\n\n---\n\n**:** **/var/run/docker.sock****/var/run/docker.sock**Docker**DockerDocker**PortainerKubernetes\n\n<!-- more -->\n\n: [About /var/run/docker.sock](https://medium.com/lucjuggery/about-var-run-docker-sock-3bfd276e12fd)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\nDocker HubDocker**/var/run/docker.sock********Docker(Docker daemon)****Unix(Unix domain socket)**Docker\n\n<div style=\"text-align: center;\">\n<img style=\"width:70%;\" src=\"about-docker-sock/01.png\" />\n</div>\n\n: [http://blog.honeybadger.io](http://blog.honeybadger.io/how-unicorn-talks-to-nginx-an-introduction-to-unix-sockets-in-ruby/)\n\n### \n\n [Portainer](http://portainer.io/)DockerSwarmPortainerDocker**/var/run/docker.sock**:\n\n```bash\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n```\n\n9000(container)(image)(volume)...\n\n<div style=\"text-align: center;\">\n<img style=\"width:70%;\" src=\"about-docker-sock/02.png\" />\n</div>\n\nPortainer**/var/run/docker.sock****Docker**\n\n### DockerAPI\n\nDockerDockerUnix/var/run/docker.sockDocker daemon(ubuntucat /etc/default/docker )\n\n```bash\n-H unix:///var/run/docker.sock\n```\n\n: TCP**-H**\n\n[Docker engine API v1.27](https://docs.docker.com/engine/api/v1.27) ()HTTP/var/run/docker.sock\n\n### \n\nPortainerUIHTTPdocker.sockDocker[*curl*](https://curl.haxx.se/)HTTP\n\n#### 1. nginx\n\ncurlUnix**{Image:nginx}**Docker**/containers/create**NginxID\n\n```bash\ncurl -XPOST --unix-socket /var/run/docker.sock -d {Image:nginx} -H Content-Type: application/json http://localhost/containers/create\n```\n\nID:\n\n```javascript\n{Id:fcb65c6147efb862d5ea3a2ef20e793c52f0fafa3eb04e4292cb4784c5777d65\",Warnings:null}\n```\n\n#### 2. nginx\n\nID**/containers/<ID>/start**\n\n```bash\ncurl -XPOST --unix-socket /var/run/docker.sock http://localhost/containers/fcb6...7d65/start\n```\n\n:\n\n```\ndocker ls\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES\nfcb65c6147ef nginx nginx -g daemon  5 minutes ago Up 5 seconds 80/tcp, 443/tcp ecstatic_kirch\n...\n```\n\ndocker.sock\n\n### Docker\n\nDockerAPI**/events**Docker(load balancer)/Docker\n\n#### 1. alpine\n\n(interactive mode)docker.sock\n\n```bash\ndocker run -v /var/run/docker.sock:/var/run/docker.sock -ti alpine sh\n```\n\n#### 2. Docker\n\nalpineDockerHTTP**/events**Docker daemon()\n\n```bash\ncurl --unix-socket /var/run/docker.sock http://localhost/events\n```\n\n#### 3. \n\nNginxaplpineDocker daemon\n\n```bash\ndocker run -p 8080:80 -d nginx\n```\n\n3\n\n- \n- (bridge network)\n- \n\n### \n\n**/var/run/docker.sock**curlDockerHTTP\n\n: DockerDocker\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"about-docker-sock/docker.JPG\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"2017/04/17/about-docker-sock","published":1,"updated":"2017-04-16T14:12:11.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtnv001v71fywsf8e5b4","content":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4ECB;&#x7ECD;&#x4E86;&#x4EC0;&#x4E48;&#x662F;<strong>/var/run/docker.sock</strong>&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x4F7F;&#x7528;<strong>/var/run/docker.sock</strong>&#x4E0E;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x793A;&#x4F8B;&#x3002;&#x7406;&#x89E3;&#x8FD9;&#x4E9B;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4E00;&#x4E9B;<strong>&#x80FD;&#x591F;&#x7BA1;&#x7406;Docker&#x7684;Docker&#x5BB9;&#x5668;</strong>&#xFF0C;&#x6BD4;&#x5982;Portainer&#x3001;Kubernetes&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x795E;&#x5947;&#x5462;&#xFF1F;</p>\n<a id=\"more\"></a>\n<p>&#x539F;&#x6587;: <a href=\"https://medium.com/lucjuggery/about-var-run-docker-sock-3bfd276e12fd\" target=\"_blank\" rel=\"external\">About /var/run/docker.sock</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>&#x8FD0;&#x884C;&#x8FC7;Docker Hub&#x7684;Docker&#x955C;&#x50CF;&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x5BB9;&#x5668;&#x65F6;&#x9700;&#x8981;&#x6302;&#x8F7D;<strong>/var/run/docker.sock</strong>&#x6587;&#x4EF6;&#x3002;<strong>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x4E9B;&#x5BB9;&#x5668;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#xFF1F;</strong>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x5B83;&#x662F;<strong>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;(Docker daemon)</strong>&#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x7684;<strong>Unix&#x57DF;&#x5957;&#x63A5;&#x5B57;(Unix domain socket)</strong>&#xFF0C;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x4E0E;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:70%;\" src=\"/2017/04/17/about-docker-sock/01.png\"><br></div>\n\n<p>&#x56FE;&#x7247;&#x6765;&#x6E90;: <a href=\"http://blog.honeybadger.io/how-unicorn-talks-to-nginx-an-introduction-to-unix-sockets-in-ruby/\" target=\"_blank\" rel=\"external\">http://blog.honeybadger.io</a></p>\n<h3 id=\"&#x4E3E;&#x4F8B;\"><a href=\"#&#x4E3E;&#x4F8B;\" class=\"headerlink\" title=\"&#x4E3E;&#x4F8B;\"></a>&#x4E3E;&#x4F8B;</h3><p>&#x4E0D;&#x59A8;&#x770B;&#x4E00;&#x4E0B; <a href=\"http://portainer.io/\" target=\"_blank\" rel=\"external\">Portainer</a>&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;&#x7528;&#x4E8E;&#x7BA1;&#x7406;Docker&#x4E3B;&#x673A;&#x548C;Swarm&#x96C6;&#x7FA4;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;Portainer&#x7BA1;&#x7406;&#x672C;&#x5730;Docker&#x4E3B;&#x673A;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x7ED1;&#x5B9A;<strong>/var/run/docker.sock</strong>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker run <span class=\"_\">-d</span> -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer</div></pre></td></tr></table></figure>\n<p>&#x8BBF;&#x95EE;9000&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x7BA1;&#x7406;&#x5BB9;&#x5668;(container)&#xFF0C;&#x955C;&#x50CF;(image)&#xFF0C;&#x6570;&#x636E;&#x5377;(volume)&#x2026;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:70%;\" src=\"/2017/04/17/about-docker-sock/02.png\"><br></div>\n\n<p>Portainer&#x901A;&#x8FC7;&#x7ED1;&#x5B9A;&#x7684;<strong>/var/run/docker.sock</strong>&#x6587;&#x4EF6;&#x4E0E;<strong>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;</strong>&#x901A;&#x4FE1;&#xFF0C;&#x6267;&#x884C;&#x5404;&#x79CD;&#x7BA1;&#x7406;&#x64CD;&#x4F5C;&#x3002;</p>\n<h3 id=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API\"><a href=\"#Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API\" class=\"headerlink\" title=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API\"></a>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API</h3><p>&#x5B89;&#x88C5;Docker&#x4E4B;&#x540E;&#xFF0C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x4F1A;&#x76D1;&#x542C;Unix&#x57DF;&#x5957;&#x63A5;&#x5B57;&#xFF1A;/var/run/docker.sock&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Docker daemon&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x770B;&#x51FA;&#x6765;(&#x5728;ubuntu&#x4E0A;&#x6267;&#x884C;cat /etc/default/docker )&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">-H unix:///var/run/docker.sock</div></pre></td></tr></table></figure>\n<p>&#x6CE8;: &#x76D1;&#x542C;&#x7F51;&#x7EDC;TCP&#x5957;&#x63A5;&#x5B57;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x5957;&#x63A5;&#x5B57;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x76F8;&#x5E94;&#x7684;<strong>-H</strong>&#x9009;&#x9879;&#x3002;</p>\n<p><a href=\"https://docs.docker.com/engine/api/v1.27\" target=\"_blank\" rel=\"external\">Docker engine API v1.27</a> (&#x6700;&#x65B0;&#x7248;)&#x5B9A;&#x4E49;&#x7684;&#x6240;&#x6709;HTTP&#x63A5;&#x53E3;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;/var/run/docker.sock&#x8C03;&#x7528;&#x3002;</p>\n<h3 id=\"&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"><a href=\"#&#x8FD0;&#x884C;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"></a>&#x8FD0;&#x884C;&#x5BB9;&#x5668;</h3><p>&#x4F7F;&#x7528;Portainer&#x7684;UI&#xFF0C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;HTTP&#x8BF7;&#x6C42;&#x662F;&#x901A;&#x8FC7;docker.sock&#x53D1;&#x9001;&#x7ED9;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"https://curl.haxx.se/\" target=\"_blank\" rel=\"external\"><em>curl</em></a>&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x6765;&#x8BF4;&#x660E;&#x8FD9;&#x4E00;&#x70B9;&#x3002;&#x4F7F;&#x7528;HTTP&#x63A5;&#x53E3;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x3002;</p>\n<h4 id=\"1-&#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;\"><a href=\"#1-&#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"1. &#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;\"></a>1. &#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;</h4><p>curl&#x547D;&#x4EE4;&#x901A;&#x8FC7;Unix&#x5957;&#x63A5;&#x5B57;&#x53D1;&#x9001;<strong>{&#x201C;Image&#x201D;:&#x201D;nginx&#x201D;}</strong>&#x5230;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;<strong>/containers/create</strong>&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C06;&#x4F1A;&#x57FA;&#x4E8E;Nginx&#x955C;&#x50CF;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x5E76;&#x8FD4;&#x56DE;&#x5BB9;&#x5668;&#x7684;ID&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -XPOST --unix-socket /var/run/docker.sock <span class=\"_\">-d</span> &#x2018;{&#x201C;Image&#x201D;:&#x201D;nginx&#x201D;}&#x2019; -H &#x2018;Content-Type: application/json&#x2019; http://localhost/containers/create</div></pre></td></tr></table></figure>\n<p>&#x8F93;&#x51FA;&#x8FD4;&#x56DE;&#x4E86;&#x5BB9;&#x5668;ID:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">{&#x201C;Id&#x201D;:&#x201D;fcb65c6147efb862d5ea3a2ef20e793c52f0fafa3eb04e4292cb4784c5777d65<span class=\"string\">&quot;,&#x201D;Warnings&#x201D;:null}</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x542F;&#x52A8;nginx&#x5BB9;&#x5668;\"><a href=\"#2-&#x542F;&#x52A8;nginx&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"2. &#x542F;&#x52A8;nginx&#x5BB9;&#x5668;\"></a>2. &#x542F;&#x52A8;nginx&#x5BB9;&#x5668;</h4><p>&#x4F7F;&#x7528;&#x8FD4;&#x56DE;&#x7684;&#x5BB9;&#x5668;ID&#xFF0C;&#x8C03;&#x7528;<strong>/containers/<id>/start</id></strong>&#x63A5;&#x53E3;&#xFF0C;&#x5373;&#x53EF;&#x542F;&#x52A8;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -XPOST --unix-socket /var/run/docker.sock http://localhost/containers/fcb6...7d65/start</div></pre></td></tr></table></figure>\n<p>&#x67E5;&#x770B;&#x5DF2;&#x542F;&#x52A8;&#x7684;&#x5BB9;&#x5668;:</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker ls</div><div class=\"line\">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES</div><div class=\"line\">fcb65c6147ef nginx &#x201C;nginx -g &#x2018;daemon &#x2026;&#x201D; <span class=\"number\">5</span> minutes ago Up <span class=\"number\">5</span> seconds <span class=\"number\">80</span>/tcp, <span class=\"number\">443</span>/tcp ecstatic_kirch</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4F7F;&#x7528;docker.sock&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x5176;&#x5B9E;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;</p>\n<h3 id=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"><a href=\"#Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\" class=\"headerlink\" title=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"></a>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;</h3><p>Docker&#x7684;API&#x63D0;&#x4F9B;&#x4E86;<strong>/events</strong>&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x83B7;&#x53D6;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x4EA7;&#x751F;&#x7684;&#x6240;&#x6709;&#x4E8B;&#x4EF6;&#x6D41;&#x3002;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7EC4;&#x4EF6;(load balancer)&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x7684;&#x521B;&#x5EFA;/&#x5220;&#x9664;&#x4E8B;&#x4EF6;&#xFF0C;&#x4ECE;&#x800C;&#x52A8;&#x6001;&#x5730;&#x66F4;&#x65B0;&#x914D;&#x7F6E;&#x3002;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x5229;&#x7528;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>\n<h4 id=\"1-&#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;\"><a href=\"#1-&#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"1. &#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;\"></a>1. &#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;</h4><p>&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x91C7;&#x7528;&#x4EA4;&#x4E92;&#x6A21;&#x5F0F;(interactive mode&#xFF0C;&#x8BE5;&#x6A21;&#x5F0F;&#x4E0B;&#x4F1A;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x5185;)&#xFF0C;&#x540C;&#x65F6;&#x7ED1;&#x5B9A;docker.sock&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker run -v /var/run/docker.sock:/var/run/docker.sock -ti alpine sh</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"><a href=\"#2-&#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\" class=\"headerlink\" title=\"2. &#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"></a>2. &#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;</h4><p>&#x5728;alpine&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Docker&#x5957;&#x63A5;&#x5B57;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x5230;<strong>/events</strong>&#x63A5;&#x53E3;&#x3002;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x4F1A;&#x4E00;&#x76F4;&#x7B49;&#x5F85;Docker daemon&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x5F53;&#x65B0;&#x7684;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x65F6;(&#x4F8B;&#x5982;&#x521B;&#x5EFA;&#x4E86;&#x65B0;&#x7684;&#x5BB9;&#x5668;)&#xFF0C;&#x4F1A;&#x770B;&#x5230;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl --unix-socket /var/run/docker.sock http://localhost/events</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;\"><a href=\"#3-&#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;\" class=\"headerlink\" title=\"3. &#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;\"></a>3. &#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;</h4><p>&#x57FA;&#x4E8E;Nginx&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x4E4B;&#x540E;&#xFF0C;&#x901A;&#x8FC7;aplpine&#x5BB9;&#x5668;&#x7684;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x5230;Docker daemon&#x751F;&#x6210;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker run -p 8080:80 <span class=\"_\">-d</span> nginx</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x5230;3&#x4E2A;&#x4E8B;&#x4EF6;&#xFF1A;</p>\n<ul>\n<li>&#x521B;&#x5EFA;&#x5BB9;&#x5668;</li>\n<li>&#x8FDE;&#x63A5;&#x9ED8;&#x8BA4;&#x7684;&#x6865;&#x63A5;&#x7F51;&#x7EDC;(bridge network)</li>\n<li>&#x542F;&#x52A8;&#x5BB9;&#x5668;</li>\n</ul>\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>&#x5E0C;&#x671B;&#x8FD9;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x91CA;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x7406;&#x89E3;<strong>/var/run/docker.sock</strong>&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x660E;&#x767D;&#x5B83;&#x7ED1;&#x5B9A;&#x5230;&#x5BB9;&#x5668;&#x65F6;&#x6709;&#x4F55;&#x4F5C;&#x7528;&#x3002;&#x663E;&#x7136;&#xFF0C;&#x771F;&#x6B63;&#x7684;&#x5E94;&#x7528;&#x4F1A;&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x800C;&#x4E0D;&#x662F;curl&#x547D;&#x4EE4;&#x7ED9;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x3002;</p>\n<p>&#x6CE8;&#x610F;: &#x7ED1;&#x5B9A;Docker&#x5957;&#x63A5;&#x5B57;&#x4E4B;&#x540E;&#xFF0C;&#x5BB9;&#x5668;&#x7684;&#x6743;&#x9650;&#x4F1A;&#x5F88;&#x9AD8;&#xFF0C;&#x53EF;&#x4EE5;&#x63A7;&#x5236;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x5FC5;&#x987B;&#x8C28;&#x614E;&#x4F7F;&#x7528;&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x8DB3;&#x591F;&#x4FE1;&#x4EFB;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/17/about-docker-sock/docker.JPG\"><br></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","excerpt":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4ECB;&#x7ECD;&#x4E86;&#x4EC0;&#x4E48;&#x662F;<strong>/var/run/docker.sock</strong>&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x4F7F;&#x7528;<strong>/var/run/docker.sock</strong>&#x4E0E;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x793A;&#x4F8B;&#x3002;&#x7406;&#x89E3;&#x8FD9;&#x4E9B;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4E00;&#x4E9B;<strong>&#x80FD;&#x591F;&#x7BA1;&#x7406;Docker&#x7684;Docker&#x5BB9;&#x5668;</strong>&#xFF0C;&#x6BD4;&#x5982;Portainer&#x3001;Kubernetes&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x795E;&#x5947;&#x5462;&#xFF1F;</p>","more":"<p>&#x539F;&#x6587;: <a href=\"https://medium.com/lucjuggery/about-var-run-docker-sock-3bfd276e12fd\">About /var/run/docker.sock</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>&#x8FD0;&#x884C;&#x8FC7;Docker Hub&#x7684;Docker&#x955C;&#x50CF;&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x5BB9;&#x5668;&#x65F6;&#x9700;&#x8981;&#x6302;&#x8F7D;<strong>/var/run/docker.sock</strong>&#x6587;&#x4EF6;&#x3002;<strong>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x4E9B;&#x5BB9;&#x5668;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#xFF1F;</strong>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x5B83;&#x662F;<strong>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;(Docker daemon)</strong>&#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x7684;<strong>Unix&#x57DF;&#x5957;&#x63A5;&#x5B57;(Unix domain socket)</strong>&#xFF0C;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x4E0E;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:70%;\" src=\"/2017/04/17/about-docker-sock/01.png\"><br></div>\n\n<p>&#x56FE;&#x7247;&#x6765;&#x6E90;: <a href=\"http://blog.honeybadger.io/how-unicorn-talks-to-nginx-an-introduction-to-unix-sockets-in-ruby/\">http://blog.honeybadger.io</a></p>\n<h3 id=\"&#x4E3E;&#x4F8B;\"><a href=\"#&#x4E3E;&#x4F8B;\" class=\"headerlink\" title=\"&#x4E3E;&#x4F8B;\"></a>&#x4E3E;&#x4F8B;</h3><p>&#x4E0D;&#x59A8;&#x770B;&#x4E00;&#x4E0B; <a href=\"http://portainer.io/\">Portainer</a>&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;&#x7528;&#x4E8E;&#x7BA1;&#x7406;Docker&#x4E3B;&#x673A;&#x548C;Swarm&#x96C6;&#x7FA4;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;Portainer&#x7BA1;&#x7406;&#x672C;&#x5730;Docker&#x4E3B;&#x673A;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x7ED1;&#x5B9A;<strong>/var/run/docker.sock</strong>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker run <span class=\"_\">-d</span> -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer</div></pre></td></tr></table></figure>\n<p>&#x8BBF;&#x95EE;9000&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x7BA1;&#x7406;&#x5BB9;&#x5668;(container)&#xFF0C;&#x955C;&#x50CF;(image)&#xFF0C;&#x6570;&#x636E;&#x5377;(volume)&#x2026;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:70%;\" src=\"/2017/04/17/about-docker-sock/02.png\"><br></div>\n\n<p>Portainer&#x901A;&#x8FC7;&#x7ED1;&#x5B9A;&#x7684;<strong>/var/run/docker.sock</strong>&#x6587;&#x4EF6;&#x4E0E;<strong>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;</strong>&#x901A;&#x4FE1;&#xFF0C;&#x6267;&#x884C;&#x5404;&#x79CD;&#x7BA1;&#x7406;&#x64CD;&#x4F5C;&#x3002;</p>\n<h3 id=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API\"><a href=\"#Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API\" class=\"headerlink\" title=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API\"></a>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;API</h3><p>&#x5B89;&#x88C5;Docker&#x4E4B;&#x540E;&#xFF0C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x4F1A;&#x76D1;&#x542C;Unix&#x57DF;&#x5957;&#x63A5;&#x5B57;&#xFF1A;/var/run/docker.sock&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Docker daemon&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x770B;&#x51FA;&#x6765;(&#x5728;ubuntu&#x4E0A;&#x6267;&#x884C;cat /etc/default/docker )&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">-H unix:///var/run/docker.sock</div></pre></td></tr></table></figure>\n<p>&#x6CE8;: &#x76D1;&#x542C;&#x7F51;&#x7EDC;TCP&#x5957;&#x63A5;&#x5B57;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x5957;&#x63A5;&#x5B57;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x76F8;&#x5E94;&#x7684;<strong>-H</strong>&#x9009;&#x9879;&#x3002;</p>\n<p><a href=\"https://docs.docker.com/engine/api/v1.27\">Docker engine API v1.27</a> (&#x6700;&#x65B0;&#x7248;)&#x5B9A;&#x4E49;&#x7684;&#x6240;&#x6709;HTTP&#x63A5;&#x53E3;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;/var/run/docker.sock&#x8C03;&#x7528;&#x3002;</p>\n<h3 id=\"&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"><a href=\"#&#x8FD0;&#x884C;&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x5BB9;&#x5668;\"></a>&#x8FD0;&#x884C;&#x5BB9;&#x5668;</h3><p>&#x4F7F;&#x7528;Portainer&#x7684;UI&#xFF0C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;HTTP&#x8BF7;&#x6C42;&#x662F;&#x901A;&#x8FC7;docker.sock&#x53D1;&#x9001;&#x7ED9;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"https://curl.haxx.se/\"><em>curl</em></a>&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x6765;&#x8BF4;&#x660E;&#x8FD9;&#x4E00;&#x70B9;&#x3002;&#x4F7F;&#x7528;HTTP&#x63A5;&#x53E3;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x3002;</p>\n<h4 id=\"1-&#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;\"><a href=\"#1-&#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"1. &#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;\"></a>1. &#x521B;&#x5EFA;nginx&#x5BB9;&#x5668;</h4><p>curl&#x547D;&#x4EE4;&#x901A;&#x8FC7;Unix&#x5957;&#x63A5;&#x5B57;&#x53D1;&#x9001;<strong>{&#x201C;Image&#x201D;:&#x201D;nginx&#x201D;}</strong>&#x5230;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;<strong>/containers/create</strong>&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C06;&#x4F1A;&#x57FA;&#x4E8E;Nginx&#x955C;&#x50CF;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x5E76;&#x8FD4;&#x56DE;&#x5BB9;&#x5668;&#x7684;ID&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -XPOST --unix-socket /var/run/docker.sock <span class=\"_\">-d</span> &#x2018;{&#x201C;Image&#x201D;:&#x201D;nginx&#x201D;}&#x2019; -H &#x2018;Content-Type: application/json&#x2019; http://localhost/containers/create</div></pre></td></tr></table></figure>\n<p>&#x8F93;&#x51FA;&#x8FD4;&#x56DE;&#x4E86;&#x5BB9;&#x5668;ID:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">{&#x201C;Id&#x201D;:&#x201D;fcb65c6147efb862d5ea3a2ef20e793c52f0fafa3eb04e4292cb4784c5777d65<span class=\"string\">&quot;,&#x201D;Warnings&#x201D;:null}</span></div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x542F;&#x52A8;nginx&#x5BB9;&#x5668;\"><a href=\"#2-&#x542F;&#x52A8;nginx&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"2. &#x542F;&#x52A8;nginx&#x5BB9;&#x5668;\"></a>2. &#x542F;&#x52A8;nginx&#x5BB9;&#x5668;</h4><p>&#x4F7F;&#x7528;&#x8FD4;&#x56DE;&#x7684;&#x5BB9;&#x5668;ID&#xFF0C;&#x8C03;&#x7528;<strong>/containers/<ID>/start</ID></strong>&#x63A5;&#x53E3;&#xFF0C;&#x5373;&#x53EF;&#x542F;&#x52A8;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -XPOST --unix-socket /var/run/docker.sock http://localhost/containers/fcb6...7d65/start</div></pre></td></tr></table></figure>\n<p>&#x67E5;&#x770B;&#x5DF2;&#x542F;&#x52A8;&#x7684;&#x5BB9;&#x5668;:</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker ls</div><div class=\"line\">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES</div><div class=\"line\">fcb65c6147ef nginx &#x201C;nginx -g &#x2018;daemon &#x2026;&#x201D; <span class=\"number\">5</span> minutes ago Up <span class=\"number\">5</span> seconds <span class=\"number\">80</span>/tcp, <span class=\"number\">443</span>/tcp ecstatic_kirch</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4F7F;&#x7528;docker.sock&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x5176;&#x5B9E;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;</p>\n<h3 id=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"><a href=\"#Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\" class=\"headerlink\" title=\"Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"></a>Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;</h3><p>Docker&#x7684;API&#x63D0;&#x4F9B;&#x4E86;<strong>/events</strong>&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x83B7;&#x53D6;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x4EA7;&#x751F;&#x7684;&#x6240;&#x6709;&#x4E8B;&#x4EF6;&#x6D41;&#x3002;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7EC4;&#x4EF6;(load balancer)&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x7684;&#x521B;&#x5EFA;/&#x5220;&#x9664;&#x4E8B;&#x4EF6;&#xFF0C;&#x4ECE;&#x800C;&#x52A8;&#x6001;&#x5730;&#x66F4;&#x65B0;&#x914D;&#x7F6E;&#x3002;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x5229;&#x7528;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>\n<h4 id=\"1-&#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;\"><a href=\"#1-&#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;\" class=\"headerlink\" title=\"1. &#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;\"></a>1. &#x8FD0;&#x884C;alpine&#x5BB9;&#x5668;</h4><p>&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x91C7;&#x7528;&#x4EA4;&#x4E92;&#x6A21;&#x5F0F;(interactive mode&#xFF0C;&#x8BE5;&#x6A21;&#x5F0F;&#x4E0B;&#x4F1A;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x5185;)&#xFF0C;&#x540C;&#x65F6;&#x7ED1;&#x5B9A;docker.sock&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker run -v /var/run/docker.sock:/var/run/docker.sock -ti alpine sh</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"><a href=\"#2-&#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\" class=\"headerlink\" title=\"2. &#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;\"></a>2. &#x76D1;&#x542C;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x4E8B;&#x4EF6;&#x6D41;</h4><p>&#x5728;alpine&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Docker&#x5957;&#x63A5;&#x5B57;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x5230;<strong>/events</strong>&#x63A5;&#x53E3;&#x3002;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x4F1A;&#x4E00;&#x76F4;&#x7B49;&#x5F85;Docker daemon&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x5F53;&#x65B0;&#x7684;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x65F6;(&#x4F8B;&#x5982;&#x521B;&#x5EFA;&#x4E86;&#x65B0;&#x7684;&#x5BB9;&#x5668;)&#xFF0C;&#x4F1A;&#x770B;&#x5230;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl --unix-socket /var/run/docker.sock http://localhost/events</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;\"><a href=\"#3-&#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;\" class=\"headerlink\" title=\"3. &#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;\"></a>3. &#x89C2;&#x5BDF;&#x4E8B;&#x4EF6;</h4><p>&#x57FA;&#x4E8E;Nginx&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x4E4B;&#x540E;&#xFF0C;&#x901A;&#x8FC7;aplpine&#x5BB9;&#x5668;&#x7684;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x5230;Docker daemon&#x751F;&#x6210;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker run -p 8080:80 <span class=\"_\">-d</span> nginx</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x5230;3&#x4E2A;&#x4E8B;&#x4EF6;&#xFF1A;</p>\n<ul>\n<li>&#x521B;&#x5EFA;&#x5BB9;&#x5668;</li>\n<li>&#x8FDE;&#x63A5;&#x9ED8;&#x8BA4;&#x7684;&#x6865;&#x63A5;&#x7F51;&#x7EDC;(bridge network)</li>\n<li>&#x542F;&#x52A8;&#x5BB9;&#x5668;</li>\n</ul>\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>&#x5E0C;&#x671B;&#x8FD9;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x91CA;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x7406;&#x89E3;<strong>/var/run/docker.sock</strong>&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x660E;&#x767D;&#x5B83;&#x7ED1;&#x5B9A;&#x5230;&#x5BB9;&#x5668;&#x65F6;&#x6709;&#x4F55;&#x4F5C;&#x7528;&#x3002;&#x663E;&#x7136;&#xFF0C;&#x771F;&#x6B63;&#x7684;&#x5E94;&#x7528;&#x4F1A;&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x800C;&#x4E0D;&#x662F;curl&#x547D;&#x4EE4;&#x7ED9;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x3002;</p>\n<p>&#x6CE8;&#x610F;: &#x7ED1;&#x5B9A;Docker&#x5957;&#x63A5;&#x5B57;&#x4E4B;&#x540E;&#xFF0C;&#x5BB9;&#x5668;&#x7684;&#x6743;&#x9650;&#x4F1A;&#x5F88;&#x9AD8;&#xFF0C;&#x53EF;&#x4EE5;&#x63A7;&#x5236;Docker&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x5FC5;&#x987B;&#x8C28;&#x614E;&#x4F7F;&#x7528;&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x8DB3;&#x591F;&#x4FE1;&#x4EFB;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/17/about-docker-sock/docker.JPG\"><br></div>"},{"title":"Docker System","date":"2017-04-18T13:00:00.000Z","_content":"\n**:** Docker - **Docker System**\n\n<!-- more -->\n\n: [Whats eating my disk? Docker System Commands explained](https://cntnr.io/whats-eating-my-disk-docker-system-commands-explained-d778178f96f1)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\nDocker[Docker 1.13](https://blog.docker.com/2017/01/whats-new-in-docker-1-13/)/Docker\n\nDocker[play-with-docker.com](https://cntnr.io/building-a-0-docker-swarm-in-seconds-80bf13a4d0a7)**Add new instance**Docker 17.03df:\n\n```bash\n$ df -h\nFilesystem           Size       Used Available Use% Mounted on\n/dev/mapper/...      10.0G    443.3M      9.6G   4% /\ntmpfs                60.0G         0     60.0G   0% /dev\ntmpfs                60.0G         0     60.0G   0% /sys/fs/cgroup\n/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/resolv.conf\n/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hostname\n/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hosts\nshm                  64.0M         0     64.0M   0% /dev/shm\n/dev/mapper/...      10.0G    443.3M      9.6G   4% /graph/overlay2\n```\n\n[play-with-docker.com](http://labs.play-with-docker.com/)10GB500MB\n\nDockerfile**Alpine**31GB**dd****CMD****/bin/true**\n\n```dockerfile\nFROM alpine\nRUN dd if=/dev/zero of=1g1.img bs=1G count=1\nRUN dd if=/dev/zero of=1g2.img bs=1G count=1\nRUN dd if=/dev/zero of=1g3.img bs=1G count=1\nCMD /bin/true\n```\n\n**docker build -t test .**3GB\n\n```bash\n$ docker image ls\nREPOSITORY          TAG                CREATED             SIZE\ntest                latest             38 seconds ago      3.23GB\nalpine              latest             5 weeks ago         3.99MB\n```\n\n\n\n```bash\n$ df -h\nFilesystem        Size       Used Available Use% Mounted on\n/dev/mapper/...   10.0G      3.4G      6.5G  34% /\n```\n\n2Dockerfile[](https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#build-cache)ddecho\n\n```bash\nFROM alpine\nRUN echo foo\nRUN dd if=/dev/zero of=1g1.img bs=1G count=1\nRUN dd if=/dev/zero of=1g2.img bs=1G count=1\n# RUN dd if=/dev/zero of=1g3.img bs=1G count=1\nCMD /bin/true\n```\n\n1GB\n\n```bash\n$ df -h\nFilesystem        Size       Used Available Use% Mounted on\n/dev/mapper/...   10.0G      5.4G      4.5G  54% /\n```\n\nDockerDocker 1.13**docker system df**LinuxdfDocker\n\n```bash\n$ docker system df\nTYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE\nImages              3         0         5.373GB       5.373GB (100%)\nContainers          0         0         0B            0B\nLocal Volumes       0         0         0B            0B\n```\n\n3Docker: apline31GB21GB5GB(RECLAIMABLE)100%**docker run test**test:\n\n```bash\n$ docker system df\nTYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE\nImages              3         1         5.373GB       3.225GB (60%)\nContainers          1         0         0B            0B\nLocal Volumes       0         0         0B            0B\n```\n\n**/bin/true**testtest(active)\n\nDocker**docker system prune**dangling([What are Docker <none>:<none> images?](http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/))\n\n```bash\n$ docker system prune\nWARNING! This will remove:\n        - all stopped containers\n        - all volumes not used by at least one container\n        - all networks not used by at least one container\n        - all dangling images\nAre you sure you want to continue? [y/N] y\nDeleted Containers:\n1cdf866157b4a97e151125af3c2a7f186a59b6f63807e2014ce1a00d68f44e1d\nDeleted Images:\ndeleted: sha256:f59bb277...\ndeleted: sha256:695b8e70...\ndeleted: sha256:93b1cceb...\ndeleted: sha256:c74d6bcd...\ndeleted: sha256:df8b9bb1...\ndeleted: sha256:dfe8340f...\ndeleted: sha256:ce1ee654...\nTotal reclaimed space: 3.221GB\n```\n\ndangling31GB<none>:<none>dangling3GB! \n\n**-a**WARNING:\n\n```bash\n$ docker system prune -a\nWARNING! This will remove:\n        - all stopped containers\n        - all volumes not used by at least one container\n        - all networks not used by at least one container\n        - all images without at least one container associated to them\nAre you sure you want to continue? [y/N] y\nDeleted Images:\nuntagged: test:latest\ndeleted: sha256:c515ebfa2...\ndeleted: sha256:07302c011...\ndeleted: sha256:37c0c6474...\ndeleted: sha256:5cc2b6bc4...\ndeleted: sha256:b283b9c35...\ndeleted: sha256:8a8b9bd8b...\nuntagged: alpine:latest\nuntagged: alpine@sha256:58e1a1bb75db1...\ndeleted: sha256:4a415e366...\ndeleted: sha256:23b9c7b43...\nTotal reclaimed space: 2.151GB\n```\n\n**prune -a**()\n\n**prune**()\n\n```bash\n$ df -h\nFilesystem          Size      Used Available Use% Mounted on\n/dev/mapper/...    10.0G    442.5M      9.6G   4% /\n```\n\n4%DockerDocker()WordPress\n\n: [What's eating my disk?!Clean up your Docker System](https://youtu.be/G308610YNU4)\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"docker-system-explain/docker.JPG\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/04/18/docker-system-explain.md","raw":"---\ntitle: Docker System\n\ndate: 2017-04-18 21:00:00\n\ntags: [Docker, ]\n\n---\n\n**:** Docker - **Docker System**\n\n<!-- more -->\n\n: [Whats eating my disk? Docker System Commands explained](https://cntnr.io/whats-eating-my-disk-docker-system-commands-explained-d778178f96f1)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\nDocker[Docker 1.13](https://blog.docker.com/2017/01/whats-new-in-docker-1-13/)/Docker\n\nDocker[play-with-docker.com](https://cntnr.io/building-a-0-docker-swarm-in-seconds-80bf13a4d0a7)**Add new instance**Docker 17.03df:\n\n```bash\n$ df -h\nFilesystem           Size       Used Available Use% Mounted on\n/dev/mapper/...      10.0G    443.3M      9.6G   4% /\ntmpfs                60.0G         0     60.0G   0% /dev\ntmpfs                60.0G         0     60.0G   0% /sys/fs/cgroup\n/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/resolv.conf\n/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hostname\n/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hosts\nshm                  64.0M         0     64.0M   0% /dev/shm\n/dev/mapper/...      10.0G    443.3M      9.6G   4% /graph/overlay2\n```\n\n[play-with-docker.com](http://labs.play-with-docker.com/)10GB500MB\n\nDockerfile**Alpine**31GB**dd****CMD****/bin/true**\n\n```dockerfile\nFROM alpine\nRUN dd if=/dev/zero of=1g1.img bs=1G count=1\nRUN dd if=/dev/zero of=1g2.img bs=1G count=1\nRUN dd if=/dev/zero of=1g3.img bs=1G count=1\nCMD /bin/true\n```\n\n**docker build -t test .**3GB\n\n```bash\n$ docker image ls\nREPOSITORY          TAG                CREATED             SIZE\ntest                latest             38 seconds ago      3.23GB\nalpine              latest             5 weeks ago         3.99MB\n```\n\n\n\n```bash\n$ df -h\nFilesystem        Size       Used Available Use% Mounted on\n/dev/mapper/...   10.0G      3.4G      6.5G  34% /\n```\n\n2Dockerfile[](https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#build-cache)ddecho\n\n```bash\nFROM alpine\nRUN echo foo\nRUN dd if=/dev/zero of=1g1.img bs=1G count=1\nRUN dd if=/dev/zero of=1g2.img bs=1G count=1\n# RUN dd if=/dev/zero of=1g3.img bs=1G count=1\nCMD /bin/true\n```\n\n1GB\n\n```bash\n$ df -h\nFilesystem        Size       Used Available Use% Mounted on\n/dev/mapper/...   10.0G      5.4G      4.5G  54% /\n```\n\nDockerDocker 1.13**docker system df**LinuxdfDocker\n\n```bash\n$ docker system df\nTYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE\nImages              3         0         5.373GB       5.373GB (100%)\nContainers          0         0         0B            0B\nLocal Volumes       0         0         0B            0B\n```\n\n3Docker: apline31GB21GB5GB(RECLAIMABLE)100%**docker run test**test:\n\n```bash\n$ docker system df\nTYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE\nImages              3         1         5.373GB       3.225GB (60%)\nContainers          1         0         0B            0B\nLocal Volumes       0         0         0B            0B\n```\n\n**/bin/true**testtest(active)\n\nDocker**docker system prune**dangling([What are Docker <none>:<none> images?](http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/))\n\n```bash\n$ docker system prune\nWARNING! This will remove:\n        - all stopped containers\n        - all volumes not used by at least one container\n        - all networks not used by at least one container\n        - all dangling images\nAre you sure you want to continue? [y/N] y\nDeleted Containers:\n1cdf866157b4a97e151125af3c2a7f186a59b6f63807e2014ce1a00d68f44e1d\nDeleted Images:\ndeleted: sha256:f59bb277...\ndeleted: sha256:695b8e70...\ndeleted: sha256:93b1cceb...\ndeleted: sha256:c74d6bcd...\ndeleted: sha256:df8b9bb1...\ndeleted: sha256:dfe8340f...\ndeleted: sha256:ce1ee654...\nTotal reclaimed space: 3.221GB\n```\n\ndangling31GB<none>:<none>dangling3GB! \n\n**-a**WARNING:\n\n```bash\n$ docker system prune -a\nWARNING! This will remove:\n        - all stopped containers\n        - all volumes not used by at least one container\n        - all networks not used by at least one container\n        - all images without at least one container associated to them\nAre you sure you want to continue? [y/N] y\nDeleted Images:\nuntagged: test:latest\ndeleted: sha256:c515ebfa2...\ndeleted: sha256:07302c011...\ndeleted: sha256:37c0c6474...\ndeleted: sha256:5cc2b6bc4...\ndeleted: sha256:b283b9c35...\ndeleted: sha256:8a8b9bd8b...\nuntagged: alpine:latest\nuntagged: alpine@sha256:58e1a1bb75db1...\ndeleted: sha256:4a415e366...\ndeleted: sha256:23b9c7b43...\nTotal reclaimed space: 2.151GB\n```\n\n**prune -a**()\n\n**prune**()\n\n```bash\n$ df -h\nFilesystem          Size      Used Available Use% Mounted on\n/dev/mapper/...    10.0G    442.5M      9.6G   4% /\n```\n\n4%DockerDocker()WordPress\n\n: [What's eating my disk?!Clean up your Docker System](https://youtu.be/G308610YNU4)\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"docker-system-explain/docker.JPG\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"2017/04/18/docker-system-explain","published":1,"updated":"2017-04-18T11:55:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgtnx001x71fyektczln6","content":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> Docker&#x955C;&#x50CF;&#xFF0C;&#x5BB9;&#x5668;&#xFF0C;&#x6570;&#x636E;&#x5377;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x90FD;&#x4F1A;&#x5360;&#x7528;&#x4E3B;&#x673A;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x78C1;&#x76D8;&#x5F88;&#x5BB9;&#x6613;&#x5C31;&#x4F1A;&#x88AB;&#x7528;&#x5B8C;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4ECB;&#x7ECD;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848; - <strong>Docker System&#x547D;&#x4EE4;</strong>&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x539F;&#x6587;: <a href=\"https://cntnr.io/whats-eating-my-disk-docker-system-commands-explained-d778178f96f1\" target=\"_blank\" rel=\"external\">What&#x2019;s eating my disk? Docker System Commands explained</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>&#x7528;&#x4E86;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;Docker&#x540E;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x5360;&#x7528;&#x4E86;&#x4E0D;&#x5C11;&#x786C;&#x76D8;&#x7A7A;&#x95F4;&#x3002;&#x8FD8;&#x597D;<a href=\"https://blog.docker.com/2017/01/whats-new-in-docker-1-13/\" target=\"_blank\" rel=\"external\">Docker 1.13</a>&#x5F15;&#x5165;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x6765;&#x67E5;&#x770B;/&#x6E05;&#x7406;Docker&#x4F7F;&#x7528;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;</p>\n<p>&#x672C;&#x6587;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x53EF;&#x4EE5;&#x8BC1;&#x660E;Docker&#x80FD;&#x591F;&#x5F88;&#x5FEB;&#x5730;&#x5C06;&#x78C1;&#x76D8;&#x5360;&#x6EE1;&#x3002;&#x8BE5;&#x793A;&#x4F8B;&#x901A;&#x8FC7;<a href=\"https://cntnr.io/building-a-0-docker-swarm-in-seconds-80bf13a4d0a7\" target=\"_blank\" rel=\"external\">play-with-docker.com</a>&#x8FD0;&#x884C;&#x3002;&#x70B9;&#x51FB;<strong>Add new instance</strong>&#x5373;&#x53EF;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x8BE5;&#x5B9E;&#x4F8B;&#x5B89;&#x88C5;&#x4E86;&#x6700;&#x65B0;&#x7248;&#x7684;Docker 17.03&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4E3B;&#x8981;&#x8BA8;&#x8BBA;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x59A8;&#x4F7F;&#x7528;df&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x78C1;&#x76D8;&#x7684;&#x521D;&#x59CB;&#x72B6;&#x6001;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem           Size       Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...      10.0G    443.3M      9.6G   4% /</div><div class=\"line\">tmpfs                60.0G         0     60.0G   0% /dev</div><div class=\"line\">tmpfs                60.0G         0     60.0G   0% /sys/fs/cgroup</div><div class=\"line\">/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/resolv.conf</div><div class=\"line\">/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hostname</div><div class=\"line\">/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hosts</div><div class=\"line\">shm                  64.0M         0     64.0M   0% /dev/shm</div><div class=\"line\">/dev/mapper/...      10.0G    443.3M      9.6G   4% /graph/overlay2</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5728;&#x65B0;&#x521B;&#x5EFA;&#x7684;<a href=\"http://labs.play-with-docker.com/\" target=\"_blank\" rel=\"external\">play-with-docker.com</a>&#x5B9E;&#x4F8B;&#xFF0C;&#x4E00;&#x5171;&#x6709;10GB&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x5176;&#x4E2D;&#x63A5;&#x8FD1;500MB&#x5DF2;&#x88AB;&#x5360;&#x7528;&#x3002;</p>\n<p>&#x63A5;&#x4E0B;&#x6765;&#x7F16;&#x5199;Dockerfile&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x57FA;&#x4E8E;<strong>Alpine&#x955C;&#x50CF;</strong>&#xFF1B;&#x955C;&#x50CF;&#x5C06;&#x5199;&#x5165;3&#x4E2A;&#x968F;&#x673A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;1GB&#xFF0C;&#x6587;&#x4EF6;&#x7531;<strong>dd</strong>&#x547D;&#x4EE4;&#x751F;&#x6210;&#xFF1B;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x4F5C;&#x7528;&#xFF0C;&#x56E0;&#x6B64;<strong>CMD</strong>&#x8BBE;&#x4E3A;<strong>/bin/true</strong>&#x3002;</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> alpine</div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> dd <span class=\"keyword\">if</span>=/dev/zero of=1g1.img bs=1G count=1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> dd <span class=\"keyword\">if</span>=/dev/zero of=1g2.img bs=1G count=1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> dd <span class=\"keyword\">if</span>=/dev/zero of=1g3.img bs=1G count=1</span></div><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> /bin/<span class=\"literal\">true</span></span></div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;<strong>docker build -t test .</strong>&#x5373;&#x53EF;&#x521B;&#x5EFA;&#x955C;&#x50CF;&#xFF0C;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#x5C06;&#x751F;&#x6210;&#x4E00;&#x4E2A;3GB&#x7684;&#x955C;&#x50CF;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker image ls</div><div class=\"line\">REPOSITORY          TAG                CREATED             SIZE</div><div class=\"line\"><span class=\"built_in\">test</span>                latest             38 seconds ago      3.23GB</div><div class=\"line\">alpine              latest             5 weeks ago         3.99MB</div></pre></td></tr></table></figure>\n<p>&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#xFF0C;&#x8BE5;&#x955C;&#x50CF;&#x5360;&#x7528;&#x4E86;&#x76F8;&#x5E94;&#x5927;&#x5C0F;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem        Size       Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...   10.0G      3.4G      6.5G  34% /</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x53EA;&#x5199;&#x5165;2&#x4E2A;&#x968F;&#x673A;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4FEE;&#x6539;Dockerfile&#xFF0C;&#x5220;&#x6389;&#x4E00;&#x884C;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;<a href=\"https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#build-cache\" target=\"_blank\" rel=\"external\">&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x65F6;&#x4F7F;&#x7528;&#x7F13;&#x5B58;</a>&#xFF0C;&#x6211;&#x5728;dd&#x547D;&#x4EE4;&#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x884C;echo&#x547D;&#x4EE4;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">FROM alpine</div><div class=\"line\">RUN <span class=\"built_in\">echo</span> foo</div><div class=\"line\">RUN dd <span class=\"keyword\">if</span>=/dev/zero of=1g1.img bs=1G count=1</div><div class=\"line\">RUN dd <span class=\"keyword\">if</span>=/dev/zero of=1g2.img bs=1G count=1</div><div class=\"line\"><span class=\"comment\"># RUN dd if=/dev/zero of=1g3.img bs=1G count=1</span></div><div class=\"line\">CMD /bin/<span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<p>&#x672C;&#x6765;&#x4EE5;&#x4E3A;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x8282;&#x7701;1GB&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x7136;&#x800C;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x66F4;&#x52A0;&#x7CDF;&#x7CD5;&#xFF01;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem        Size       Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...   10.0G      5.4G      4.5G  54% /</div></pre></td></tr></table></figure>\n<p>&#x65E7;&#x7684;Docker&#x955C;&#x50CF;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#xFF0C;&#x6700;&#x7EC8;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x4F1A;&#x5F88;&#x5FEB;&#x88AB;&#x7528;&#x5B8C;&#x3002;Docker 1.13&#x5F15;&#x5165;&#x4E86;<strong>docker system df</strong>&#x547D;&#x4EE4;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;Linux&#x4E0A;&#x7684;df&#x547D;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x67E5;&#x770B;Docker&#x7684;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system df</div><div class=\"line\">TYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE</div><div class=\"line\">Images              3         0         5.373GB       5.373GB (100%)</div><div class=\"line\">Containers          0         0         0B            0B</div><div class=\"line\">Local Volumes       0         0         0B            0B</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5B9E;&#x4F8B;&#x4E0A;&#x4E00;&#x5171;&#x6709;3&#x4E2A;Docker&#x955C;&#x50CF;: apline&#x955C;&#x50CF;&#xFF0C;&#x5305;&#x542B;3&#x4E2A;1GB&#x968F;&#x673A;&#x6587;&#x4EF6;&#x7684;&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x5305;&#x542B;2&#x4E2A;1GB&#x968F;&#x673A;&#x6587;&#x4EF6;&#x7684;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x5360;&#x7528;&#x4E86;&#x8D85;&#x8FC7;5GB&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x5E76;&#x6CA1;&#x6709;&#x57FA;&#x4E8E;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4EEC;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x56DE;&#x6536;&#x7684;(RECLAIMABLE)&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x4E3A;100%&#x3002;&#x4F7F;&#x7528;<strong>docker run test</strong>&#x8FD0;&#x884C;test&#x955C;&#x50CF;&#x518D;&#x67E5;&#x770B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system df</div><div class=\"line\">TYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE</div><div class=\"line\">Images              3         1         5.373GB       3.225GB (60%)</div><div class=\"line\">Containers          1         0         0B            0B</div><div class=\"line\">Local Volumes       0         0         0B            0B</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#x60C5;&#x51B5;&#x5C31;&#x4E0D;&#x540C;&#x4E86;&#xFF0C;&#x6211;&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x6267;&#x884C;<strong>/bin/true</strong>&#x4E4B;&#x540E;&#x5C31;&#x5F88;&#x5FEB;&#x9000;&#x51FA;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x7ED1;&#x5B9A;&#x4E86;test&#x955C;&#x50CF;&#xFF0C;test&#x955C;&#x50CF;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x6D3B;&#x8DC3;(active)&#x56E0;&#x800C;&#x4E0D;&#x80FD;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x8FD9;&#x5BFC;&#x81F4;&#x53EF;&#x56DE;&#x6536;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x53D8;&#x5C11;&#x4E86;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x6765;&#x6E05;&#x7406;&#x4E00;&#x4E0B;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;Docker&#x63D0;&#x4F9B;&#x4E86;<strong>docker system prune</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6E05;&#x7406;dangling&#x955C;&#x50CF;(&#x53C2;&#x8003;<a href=\"http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/\" target=\"_blank\" rel=\"external\">What are Docker <none>:<none> images?</none></none></a>)&#x548C;&#x5BB9;&#x5668;&#xFF0C;&#x4EE5;&#x53CA;&#x5931;&#x6548;&#x7684;&#x6570;&#x636E;&#x5377;&#x548C;&#x7F51;&#x7EDC;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system prune</div><div class=\"line\">WARNING! This will remove:</div><div class=\"line\">        - all stopped containers</div><div class=\"line\">        - all volumes not used by at least one container</div><div class=\"line\">        - all networks not used by at least one container</div><div class=\"line\">        - all dangling images</div><div class=\"line\">Are you sure you want to <span class=\"built_in\">continue</span>? [y/N] y</div><div class=\"line\">Deleted Containers:</div><div class=\"line\">1cdf866157b4a97e151125af3c2a7f186a59b6f63807e2014ce1a00d68f44e1d</div><div class=\"line\">Deleted Images:</div><div class=\"line\">deleted: sha256:f59bb277...</div><div class=\"line\">deleted: sha256:695b8e70...</div><div class=\"line\">deleted: sha256:93b1cceb...</div><div class=\"line\">deleted: sha256:c74d6bcd...</div><div class=\"line\">deleted: sha256:df8b9bb1...</div><div class=\"line\">deleted: sha256:dfe8340f...</div><div class=\"line\">deleted: sha256:ce1ee654...</div><div class=\"line\">Total reclaimed space: 3.221GB</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x8B66;&#x544A;&#x4FE1;&#x606F;&#x53EF;&#x77E5;&#xFF0C;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x4F1A;&#x5220;&#x9664;&#x6240;&#x6709;&#x5173;&#x95ED;&#x7684;&#x5BB9;&#x5668;&#x4EE5;&#x53CA;dangling&#x955C;&#x50CF;&#x3002;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x542B;&#x6709;3&#x4E2A;1GB&#x968F;&#x673A;&#x6587;&#x4EF6;&#x7684;&#x955C;&#x50CF;&#x7684;&#x540D;&#x79F0;&#x88AB;&#x5360;&#x7528;&#x4E86;&#xFF0C;&#x540D;&#x79F0;&#x4E3A;<none>:<none>&#xFF0C;&#x4E3A;dangling&#x955C;&#x50CF;&#xFF0C;&#x56E0;&#x6B64;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#x4E5F;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x4E00;&#x5171;3GB&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x88AB;&#x56DE;&#x6536;&#x4E86;! </none></none></p>\n<p>&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#xFF0C;&#x4F7F;&#x7528;<strong>-a</strong>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x505A;&#x6DF1;&#x5EA6;&#x6E05;&#x7406;&#x3002;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x66F4;&#x52A0;&#x4E25;&#x91CD;&#x7684;WARNING&#x4FE1;&#x606F;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system prune <span class=\"_\">-a</span></div><div class=\"line\">WARNING! This will remove:</div><div class=\"line\">        - all stopped containers</div><div class=\"line\">        - all volumes not used by at least one container</div><div class=\"line\">        - all networks not used by at least one container</div><div class=\"line\">        - all images without at least one container associated to them</div><div class=\"line\">Are you sure you want to <span class=\"built_in\">continue</span>? [y/N] y</div><div class=\"line\">Deleted Images:</div><div class=\"line\">untagged: <span class=\"built_in\">test</span>:latest</div><div class=\"line\">deleted: sha256:c515ebfa2...</div><div class=\"line\">deleted: sha256:07302c011...</div><div class=\"line\">deleted: sha256:37c0c6474...</div><div class=\"line\">deleted: sha256:5cc2b6bc4...</div><div class=\"line\">deleted: sha256:b283b9c35...</div><div class=\"line\">deleted: sha256:8a8b9bd8b...</div><div class=\"line\">untagged: alpine:latest</div><div class=\"line\">untagged: alpine@sha256:58e1a1bb75db1...</div><div class=\"line\">deleted: sha256:4a415e366...</div><div class=\"line\">deleted: sha256:23b9c7b43...</div><div class=\"line\">Total reclaimed space: 2.151GB</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5C06;&#x6E05;&#x7406;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x4F1A;&#x4FDD;&#x7559;&#x771F;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x5BB9;&#x5668;&#xFF0C;&#x6570;&#x636E;&#x5377;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x683C;&#x5916;&#x8C28;&#x614E;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x8FD0;&#x884C;<strong>prune -a</strong>&#x547D;&#x4EE4;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x4E9B;&#x5907;&#x7528;&#x955C;&#x50CF;(&#x7528;&#x4E8E;&#x5907;&#x4EFD;&#xFF0C;&#x56DE;&#x6EDA;&#x7B49;)&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x7528;&#x5230;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x88AB;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x5219;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x65F6;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;&#x3002;</p>\n<p>&#x6B64;&#x65F6;&#xFF0C;&#x6240;&#x6709;&#x672A;&#x7ED1;&#x5B9A;&#x5BB9;&#x5668;&#x7684;&#x955C;&#x50CF;&#x5C06;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x7531;&#x4E8E;&#x7B2C;&#x4E00;&#x6B21;<strong>prune</strong>&#x547D;&#x4EE4;&#x5220;&#x9664;&#x4E86;&#x6240;&#x6709;&#x5BB9;&#x5668;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x6709;&#x955C;&#x50CF;(&#x5B83;&#x4EEC;&#x6CA1;&#x6709;&#x7ED1;&#x5B9A;&#x4EFB;&#x4F55;&#x5BB9;&#x5668;)&#x90FD;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem          Size      Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...    10.0G    442.5M      9.6G   4% /</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#xFF0C;&#x5DF2;&#x4F7F;&#x7528;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x53C8;&#x53D8;&#x6210;&#x4E86;4%&#x3002;&#x672C;&#x6587;&#x7684;&#x793A;&#x4F8B;&#x53EA;&#x662F;&#x51B0;&#x5C71;&#x4E00;&#x89D2;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x65E6;&#x6211;&#x4EEC;&#x8FD0;&#x884C;&#x4E86;&#x771F;&#x6B63;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x4E86;Docker&#x6570;&#x636E;&#x5377;&#x548C;Docker&#x7F51;&#x7EDC;&#xFF0C;&#x5219;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x5C06;&#x4F1A;&#x66F4;&#x5FEB;&#x7528;&#x5B8C;&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x535A;&#x5BA2;&#x6700;&#x540E;&#x7684;&#x89C6;&#x9891;(&#x4E0D;&#x8981;&#x5FD8;&#x4E86;&#x8BA2;&#x9605;&#xFF01;)&#x3002;&#x5728;&#x89C6;&#x9891;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;WordPress&#x5E94;&#x7528;&#xFF0C;&#x5B83;&#x7531;&#x6570;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x6570;&#x636E;&#x5377;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x6784;&#x6210;&#x3002;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5F88;&#x5FEB;&#x5730;&#x6D88;&#x8017;&#x6389;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x6211;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x89C6;&#x9891;: <a href=\"https://youtu.be/G308610YNU4\" target=\"_blank\" rel=\"external\">What&#x2019;s eating my disk?!Clean up your Docker System</a></p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/18/docker-system-explain/docker.JPG\"><br></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","excerpt":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> Docker&#x955C;&#x50CF;&#xFF0C;&#x5BB9;&#x5668;&#xFF0C;&#x6570;&#x636E;&#x5377;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x90FD;&#x4F1A;&#x5360;&#x7528;&#x4E3B;&#x673A;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x78C1;&#x76D8;&#x5F88;&#x5BB9;&#x6613;&#x5C31;&#x4F1A;&#x88AB;&#x7528;&#x5B8C;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4ECB;&#x7ECD;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848; - <strong>Docker System&#x547D;&#x4EE4;</strong>&#x3002;</p>","more":"<p>&#x539F;&#x6587;: <a href=\"https://cntnr.io/whats-eating-my-disk-docker-system-commands-explained-d778178f96f1\">What&#x2019;s eating my disk? Docker System Commands explained</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>&#x7528;&#x4E86;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;Docker&#x540E;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x5360;&#x7528;&#x4E86;&#x4E0D;&#x5C11;&#x786C;&#x76D8;&#x7A7A;&#x95F4;&#x3002;&#x8FD8;&#x597D;<a href=\"https://blog.docker.com/2017/01/whats-new-in-docker-1-13/\">Docker 1.13</a>&#x5F15;&#x5165;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x6765;&#x67E5;&#x770B;/&#x6E05;&#x7406;Docker&#x4F7F;&#x7528;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;</p>\n<p>&#x672C;&#x6587;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x53EF;&#x4EE5;&#x8BC1;&#x660E;Docker&#x80FD;&#x591F;&#x5F88;&#x5FEB;&#x5730;&#x5C06;&#x78C1;&#x76D8;&#x5360;&#x6EE1;&#x3002;&#x8BE5;&#x793A;&#x4F8B;&#x901A;&#x8FC7;<a href=\"https://cntnr.io/building-a-0-docker-swarm-in-seconds-80bf13a4d0a7\">play-with-docker.com</a>&#x8FD0;&#x884C;&#x3002;&#x70B9;&#x51FB;<strong>Add new instance</strong>&#x5373;&#x53EF;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x8BE5;&#x5B9E;&#x4F8B;&#x5B89;&#x88C5;&#x4E86;&#x6700;&#x65B0;&#x7248;&#x7684;Docker 17.03&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4E3B;&#x8981;&#x8BA8;&#x8BBA;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x59A8;&#x4F7F;&#x7528;df&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x78C1;&#x76D8;&#x7684;&#x521D;&#x59CB;&#x72B6;&#x6001;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem           Size       Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...      10.0G    443.3M      9.6G   4% /</div><div class=\"line\">tmpfs                60.0G         0     60.0G   0% /dev</div><div class=\"line\">tmpfs                60.0G         0     60.0G   0% /sys/fs/cgroup</div><div class=\"line\">/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/resolv.conf</div><div class=\"line\">/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hostname</div><div class=\"line\">/dev/xvda1           49.1G      3.7G     43.3G   8% /etc/hosts</div><div class=\"line\">shm                  64.0M         0     64.0M   0% /dev/shm</div><div class=\"line\">/dev/mapper/...      10.0G    443.3M      9.6G   4% /graph/overlay2</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5728;&#x65B0;&#x521B;&#x5EFA;&#x7684;<a href=\"http://labs.play-with-docker.com/\">play-with-docker.com</a>&#x5B9E;&#x4F8B;&#xFF0C;&#x4E00;&#x5171;&#x6709;10GB&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x5176;&#x4E2D;&#x63A5;&#x8FD1;500MB&#x5DF2;&#x88AB;&#x5360;&#x7528;&#x3002;</p>\n<p>&#x63A5;&#x4E0B;&#x6765;&#x7F16;&#x5199;Dockerfile&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x57FA;&#x4E8E;<strong>Alpine&#x955C;&#x50CF;</strong>&#xFF1B;&#x955C;&#x50CF;&#x5C06;&#x5199;&#x5165;3&#x4E2A;&#x968F;&#x673A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;1GB&#xFF0C;&#x6587;&#x4EF6;&#x7531;<strong>dd</strong>&#x547D;&#x4EE4;&#x751F;&#x6210;&#xFF1B;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x4F5C;&#x7528;&#xFF0C;&#x56E0;&#x6B64;<strong>CMD</strong>&#x8BBE;&#x4E3A;<strong>/bin/true</strong>&#x3002;</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> alpine</div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> dd <span class=\"keyword\">if</span>=/dev/zero of=1g1.img bs=1G count=1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> dd <span class=\"keyword\">if</span>=/dev/zero of=1g2.img bs=1G count=1</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> dd <span class=\"keyword\">if</span>=/dev/zero of=1g3.img bs=1G count=1</span></div><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> /bin/<span class=\"literal\">true</span></span></div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;<strong>docker build -t test .</strong>&#x5373;&#x53EF;&#x521B;&#x5EFA;&#x955C;&#x50CF;&#xFF0C;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#x5C06;&#x751F;&#x6210;&#x4E00;&#x4E2A;3GB&#x7684;&#x955C;&#x50CF;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker image ls</div><div class=\"line\">REPOSITORY          TAG                CREATED             SIZE</div><div class=\"line\"><span class=\"built_in\">test</span>                latest             38 seconds ago      3.23GB</div><div class=\"line\">alpine              latest             5 weeks ago         3.99MB</div></pre></td></tr></table></figure>\n<p>&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#xFF0C;&#x8BE5;&#x955C;&#x50CF;&#x5360;&#x7528;&#x4E86;&#x76F8;&#x5E94;&#x5927;&#x5C0F;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem        Size       Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...   10.0G      3.4G      6.5G  34% /</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x53EA;&#x5199;&#x5165;2&#x4E2A;&#x968F;&#x673A;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4FEE;&#x6539;Dockerfile&#xFF0C;&#x5220;&#x6389;&#x4E00;&#x884C;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;<a href=\"https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#build-cache\">&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x65F6;&#x4F7F;&#x7528;&#x7F13;&#x5B58;</a>&#xFF0C;&#x6211;&#x5728;dd&#x547D;&#x4EE4;&#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x884C;echo&#x547D;&#x4EE4;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">FROM alpine</div><div class=\"line\">RUN <span class=\"built_in\">echo</span> foo</div><div class=\"line\">RUN dd <span class=\"keyword\">if</span>=/dev/zero of=1g1.img bs=1G count=1</div><div class=\"line\">RUN dd <span class=\"keyword\">if</span>=/dev/zero of=1g2.img bs=1G count=1</div><div class=\"line\"><span class=\"comment\"># RUN dd if=/dev/zero of=1g3.img bs=1G count=1</span></div><div class=\"line\">CMD /bin/<span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<p>&#x672C;&#x6765;&#x4EE5;&#x4E3A;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x8282;&#x7701;1GB&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x7136;&#x800C;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x66F4;&#x52A0;&#x7CDF;&#x7CD5;&#xFF01;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem        Size       Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...   10.0G      5.4G      4.5G  54% /</div></pre></td></tr></table></figure>\n<p>&#x65E7;&#x7684;Docker&#x955C;&#x50CF;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#xFF0C;&#x6700;&#x7EC8;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x4F1A;&#x5F88;&#x5FEB;&#x88AB;&#x7528;&#x5B8C;&#x3002;Docker 1.13&#x5F15;&#x5165;&#x4E86;<strong>docker system df</strong>&#x547D;&#x4EE4;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;Linux&#x4E0A;&#x7684;df&#x547D;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x67E5;&#x770B;Docker&#x7684;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system df</div><div class=\"line\">TYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE</div><div class=\"line\">Images              3         0         5.373GB       5.373GB (100%)</div><div class=\"line\">Containers          0         0         0B            0B</div><div class=\"line\">Local Volumes       0         0         0B            0B</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x5B9E;&#x4F8B;&#x4E0A;&#x4E00;&#x5171;&#x6709;3&#x4E2A;Docker&#x955C;&#x50CF;: apline&#x955C;&#x50CF;&#xFF0C;&#x5305;&#x542B;3&#x4E2A;1GB&#x968F;&#x673A;&#x6587;&#x4EF6;&#x7684;&#x955C;&#x50CF;&#x4EE5;&#x53CA;&#x5305;&#x542B;2&#x4E2A;1GB&#x968F;&#x673A;&#x6587;&#x4EF6;&#x7684;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x5360;&#x7528;&#x4E86;&#x8D85;&#x8FC7;5GB&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x5E76;&#x6CA1;&#x6709;&#x57FA;&#x4E8E;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4EEC;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x56DE;&#x6536;&#x7684;(RECLAIMABLE)&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x4E3A;100%&#x3002;&#x4F7F;&#x7528;<strong>docker run test</strong>&#x8FD0;&#x884C;test&#x955C;&#x50CF;&#x518D;&#x67E5;&#x770B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system df</div><div class=\"line\">TYPE                TOTAL     ACTIVE    SIZE          RECLAIMABLE</div><div class=\"line\">Images              3         1         5.373GB       3.225GB (60%)</div><div class=\"line\">Containers          1         0         0B            0B</div><div class=\"line\">Local Volumes       0         0         0B            0B</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#x60C5;&#x51B5;&#x5C31;&#x4E0D;&#x540C;&#x4E86;&#xFF0C;&#x6211;&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x6267;&#x884C;<strong>/bin/true</strong>&#x4E4B;&#x540E;&#x5C31;&#x5F88;&#x5FEB;&#x9000;&#x51FA;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x7ED1;&#x5B9A;&#x4E86;test&#x955C;&#x50CF;&#xFF0C;test&#x955C;&#x50CF;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x6D3B;&#x8DC3;(active)&#x56E0;&#x800C;&#x4E0D;&#x80FD;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x8FD9;&#x5BFC;&#x81F4;&#x53EF;&#x56DE;&#x6536;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x53D8;&#x5C11;&#x4E86;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x6765;&#x6E05;&#x7406;&#x4E00;&#x4E0B;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;Docker&#x63D0;&#x4F9B;&#x4E86;<strong>docker system prune</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6E05;&#x7406;dangling&#x955C;&#x50CF;(&#x53C2;&#x8003;<a href=\"http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/\">What are Docker <none>:<none> images?</none></none></a>)&#x548C;&#x5BB9;&#x5668;&#xFF0C;&#x4EE5;&#x53CA;&#x5931;&#x6548;&#x7684;&#x6570;&#x636E;&#x5377;&#x548C;&#x7F51;&#x7EDC;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system prune</div><div class=\"line\">WARNING! This will remove:</div><div class=\"line\">        - all stopped containers</div><div class=\"line\">        - all volumes not used by at least one container</div><div class=\"line\">        - all networks not used by at least one container</div><div class=\"line\">        - all dangling images</div><div class=\"line\">Are you sure you want to <span class=\"built_in\">continue</span>? [y/N] y</div><div class=\"line\">Deleted Containers:</div><div class=\"line\">1cdf866157b4a97e151125af3c2a7f186a59b6f63807e2014ce1a00d68f44e1d</div><div class=\"line\">Deleted Images:</div><div class=\"line\">deleted: sha256:f59bb277...</div><div class=\"line\">deleted: sha256:695b8e70...</div><div class=\"line\">deleted: sha256:93b1cceb...</div><div class=\"line\">deleted: sha256:c74d6bcd...</div><div class=\"line\">deleted: sha256:df8b9bb1...</div><div class=\"line\">deleted: sha256:dfe8340f...</div><div class=\"line\">deleted: sha256:ce1ee654...</div><div class=\"line\">Total reclaimed space: 3.221GB</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x8B66;&#x544A;&#x4FE1;&#x606F;&#x53EF;&#x77E5;&#xFF0C;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x4F1A;&#x5220;&#x9664;&#x6240;&#x6709;&#x5173;&#x95ED;&#x7684;&#x5BB9;&#x5668;&#x4EE5;&#x53CA;dangling&#x955C;&#x50CF;&#x3002;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x542B;&#x6709;3&#x4E2A;1GB&#x968F;&#x673A;&#x6587;&#x4EF6;&#x7684;&#x955C;&#x50CF;&#x7684;&#x540D;&#x79F0;&#x88AB;&#x5360;&#x7528;&#x4E86;&#xFF0C;&#x540D;&#x79F0;&#x4E3A;<none>:<none>&#xFF0C;&#x4E3A;dangling&#x955C;&#x50CF;&#xFF0C;&#x56E0;&#x6B64;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#x4E5F;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x4E00;&#x5171;3GB&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x88AB;&#x56DE;&#x6536;&#x4E86;! </none></none></p>\n<p>&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#xFF0C;&#x4F7F;&#x7528;<strong>-a</strong>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x505A;&#x6DF1;&#x5EA6;&#x6E05;&#x7406;&#x3002;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x66F4;&#x52A0;&#x4E25;&#x91CD;&#x7684;WARNING&#x4FE1;&#x606F;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ docker system prune <span class=\"_\">-a</span></div><div class=\"line\">WARNING! This will remove:</div><div class=\"line\">        - all stopped containers</div><div class=\"line\">        - all volumes not used by at least one container</div><div class=\"line\">        - all networks not used by at least one container</div><div class=\"line\">        - all images without at least one container associated to them</div><div class=\"line\">Are you sure you want to <span class=\"built_in\">continue</span>? [y/N] y</div><div class=\"line\">Deleted Images:</div><div class=\"line\">untagged: <span class=\"built_in\">test</span>:latest</div><div class=\"line\">deleted: sha256:c515ebfa2...</div><div class=\"line\">deleted: sha256:07302c011...</div><div class=\"line\">deleted: sha256:37c0c6474...</div><div class=\"line\">deleted: sha256:5cc2b6bc4...</div><div class=\"line\">deleted: sha256:b283b9c35...</div><div class=\"line\">deleted: sha256:8a8b9bd8b...</div><div class=\"line\">untagged: alpine:latest</div><div class=\"line\">untagged: alpine@sha256:58e1a1bb75db1...</div><div class=\"line\">deleted: sha256:4a415e366...</div><div class=\"line\">deleted: sha256:23b9c7b43...</div><div class=\"line\">Total reclaimed space: 2.151GB</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5C06;&#x6E05;&#x7406;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x4F1A;&#x4FDD;&#x7559;&#x771F;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x5BB9;&#x5668;&#xFF0C;&#x6570;&#x636E;&#x5377;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x683C;&#x5916;&#x8C28;&#x614E;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x8FD0;&#x884C;<strong>prune -a</strong>&#x547D;&#x4EE4;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x4E9B;&#x5907;&#x7528;&#x955C;&#x50CF;(&#x7528;&#x4E8E;&#x5907;&#x4EFD;&#xFF0C;&#x56DE;&#x6EDA;&#x7B49;)&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x7528;&#x5230;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E9B;&#x955C;&#x50CF;&#x88AB;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x5219;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x65F6;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;&#x3002;</p>\n<p>&#x6B64;&#x65F6;&#xFF0C;&#x6240;&#x6709;&#x672A;&#x7ED1;&#x5B9A;&#x5BB9;&#x5668;&#x7684;&#x955C;&#x50CF;&#x5C06;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;&#x7531;&#x4E8E;&#x7B2C;&#x4E00;&#x6B21;<strong>prune</strong>&#x547D;&#x4EE4;&#x5220;&#x9664;&#x4E86;&#x6240;&#x6709;&#x5BB9;&#x5668;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x6709;&#x955C;&#x50CF;(&#x5B83;&#x4EEC;&#x6CA1;&#x6709;&#x7ED1;&#x5B9A;&#x4EFB;&#x4F55;&#x5BB9;&#x5668;)&#x90FD;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ df -h</div><div class=\"line\">Filesystem          Size      Used Available Use% Mounted on</div><div class=\"line\">/dev/mapper/...    10.0G    442.5M      9.6G   4% /</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#xFF0C;&#x5DF2;&#x4F7F;&#x7528;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x53C8;&#x53D8;&#x6210;&#x4E86;4%&#x3002;&#x672C;&#x6587;&#x7684;&#x793A;&#x4F8B;&#x53EA;&#x662F;&#x51B0;&#x5C71;&#x4E00;&#x89D2;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x65E6;&#x6211;&#x4EEC;&#x8FD0;&#x884C;&#x4E86;&#x771F;&#x6B63;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x4E86;Docker&#x6570;&#x636E;&#x5377;&#x548C;Docker&#x7F51;&#x7EDC;&#xFF0C;&#x5219;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x5C06;&#x4F1A;&#x66F4;&#x5FEB;&#x7528;&#x5B8C;&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x535A;&#x5BA2;&#x6700;&#x540E;&#x7684;&#x89C6;&#x9891;(&#x4E0D;&#x8981;&#x5FD8;&#x4E86;&#x8BA2;&#x9605;&#xFF01;)&#x3002;&#x5728;&#x89C6;&#x9891;&#x4E2D;&#xFF0C;&#x6211;&#x4ECB;&#x7ECD;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;WordPress&#x5E94;&#x7528;&#xFF0C;&#x5B83;&#x7531;&#x6570;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x6570;&#x636E;&#x5377;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x6784;&#x6210;&#x3002;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5F88;&#x5FEB;&#x5730;&#x6D88;&#x8017;&#x6389;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x6211;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x89C6;&#x9891;: <a href=\"https://youtu.be/G308610YNU4\">What&#x2019;s eating my disk?!Clean up your Docker System</a></p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/18/docker-system-explain/docker.JPG\"><br></div>"},{"title":"SSH","date":"2017-04-24T03:00:00.000Z","_content":"\nSSH**(Local Port Forwarding)****(Local Port Forwarding)****(Dynamic Port Forwarding)**/****\n\n<!-- more -->\n\nSSHSSH([SSH Tunnel](http://blog.trackets.com/2014/05/17/ssh-tunnel-local-and-remote-port-forwarding-explained-with-examples.html))SSH**SSH****SSH**SSHSSH(SSHSecure Shell)\n\nA1SSHB1SSHA1SSHB1(**-L-R-D**)A1B1SSH\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"ssh-port-forwarding/ssh_tunnel.jpeg\" />\n</div>\n\n### \n\n#### :\n\n> B13000A1\n\nNode.js:\n\n```javascript\nvar http = require('http');\n\nvar server = http.createServer(function(request, response)\n{\n    response.writeHead(200,\n    {\n        \"Content-Type\": \"text/plain\"\n    });\n    response.end(\"Hello Fundebug\\n\");\n});\n\nserver.listen(3000);\n```\n\nB1IP**103.59.22.17**:[http://103.59.22.17:3000](http://103.59.22.17:3000)\n\n#### \n\n> 223000IPIP\n\n#### \n\n******-L**:\n\n```shell\n-L ::: \n```\n\n****A12000B13000\n\n```shell\n# A1B1\nssh -L localhost:2000:localhost:3000 root@103.59.22.17\n```\n\nA1[http://localhost:2000](http://localhost:2000)B1Node.js\n\n```shell\n# A1B1Node.js\ncurl http://localhost:2000\nHello Fundebug\n```\n\n**-L******2000A1\n\n```bash\n# A1B12000\nssh -L 2000:localhost:3000 root@103.59.22.17\n```\n\nA2A1A2A1B1Node.js\n\n**-L******B2IP192.168.59.100:\n\n```bash\n# A1B1B2\nssh -L 2000:192.168.59.100:3000 root@103.59.22.17\n```\n\nNode.jsB2A12000B2\n\n### \n\n#### :\n\n> A13000B1\n\nNode.js[http://localhost:3000](http://localhost:3000)\n\n#### \n\n> IPIPIP\n\n#### \n\n******-R**:\n\n```shell\n-R ::: \n```\n\n****B12000A13000\n\n```shell\n# A1B1\nssh -R localhost:2000:localhost:3000 root@103.59.22.17\n```\n\nA1[http://localhost:2000](http://localhost:2000)\n\n```shell\n# B1A1Node.js\ncurl http://localhost:2000\nHello Fundebug\n```\n\n********A2IP192.168.0.100\n\n```bash\n# A1B1\nssh -R 2000:192.168.0.100:3000 root@103.59.22.17\n```\n\nNode.jsA2A12000A2\n\n### \n\n#### :\n\n> B1A1\n\n#### \n\n> A1B1\n\n#### \n\n********SSH**********:****:****192.168.1.100:3000**SSH**192.168.1.100:3000**\n\n```\n-D :\n```\n\n****A1B1B1\n\n```bash\n# A1B1\nssh -D localhost:2000 root@103.59.22.17\n```\n\nSocket([Socket Proxy](https://en.wikipedia.org/wiki/SOCKS))SSH2000FirefoxSocket****>****>****>****->****:\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"ssh-port-forwarding/socket_proxy.png\" />\n</div>\n\nFirefox2000SSHNode.jsB1Firefox[localhost:3000](localhost:3000)B1...\n\n### \n\n********ABCANode.jsBABAIP\n\nB3000C2000\n\n```bash\n# BC\nssh -R localhost:3000:localhost:2000 root@103.59.22.17\n```\n\nC2000A3000\n\n```bash\n# AC\nssh -R localhost:2000:localhost:3000 root@103.59.22.17\n```\n\nB[http://localhost:3000](http://localhost:3000)A\n\n```shell\n# BA\ncurl http://localhost:3000\nHello Fundebug\n```\n\n\n\n### \n\n- [SSH PortForwarding](https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding?action=fullsearch&value=linkto%3A%22SSH%2FOpenSSH%2FPortForwarding%22&context=180)\n- [SSH](http://www.pchou.info/linux/2015/11/01/ssh-tunnel.html)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/04/24/ssh-port-forwarding.md","raw":"---\ntitle: SSH\n\ndate: 2017-04-24 11:00:00\n\ntags: [Linux]\n\n---\n\nSSH**(Local Port Forwarding)****(Local Port Forwarding)****(Dynamic Port Forwarding)**/****\n\n<!-- more -->\n\nSSHSSH([SSH Tunnel](http://blog.trackets.com/2014/05/17/ssh-tunnel-local-and-remote-port-forwarding-explained-with-examples.html))SSH**SSH****SSH**SSHSSH(SSHSecure Shell)\n\nA1SSHB1SSHA1SSHB1(**-L-R-D**)A1B1SSH\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"ssh-port-forwarding/ssh_tunnel.jpeg\" />\n</div>\n\n### \n\n#### :\n\n> B13000A1\n\nNode.js:\n\n```javascript\nvar http = require('http');\n\nvar server = http.createServer(function(request, response)\n{\n    response.writeHead(200,\n    {\n        \"Content-Type\": \"text/plain\"\n    });\n    response.end(\"Hello Fundebug\\n\");\n});\n\nserver.listen(3000);\n```\n\nB1IP**103.59.22.17**:[http://103.59.22.17:3000](http://103.59.22.17:3000)\n\n#### \n\n> 223000IPIP\n\n#### \n\n******-L**:\n\n```shell\n-L ::: \n```\n\n****A12000B13000\n\n```shell\n# A1B1\nssh -L localhost:2000:localhost:3000 root@103.59.22.17\n```\n\nA1[http://localhost:2000](http://localhost:2000)B1Node.js\n\n```shell\n# A1B1Node.js\ncurl http://localhost:2000\nHello Fundebug\n```\n\n**-L******2000A1\n\n```bash\n# A1B12000\nssh -L 2000:localhost:3000 root@103.59.22.17\n```\n\nA2A1A2A1B1Node.js\n\n**-L******B2IP192.168.59.100:\n\n```bash\n# A1B1B2\nssh -L 2000:192.168.59.100:3000 root@103.59.22.17\n```\n\nNode.jsB2A12000B2\n\n### \n\n#### :\n\n> A13000B1\n\nNode.js[http://localhost:3000](http://localhost:3000)\n\n#### \n\n> IPIPIP\n\n#### \n\n******-R**:\n\n```shell\n-R ::: \n```\n\n****B12000A13000\n\n```shell\n# A1B1\nssh -R localhost:2000:localhost:3000 root@103.59.22.17\n```\n\nA1[http://localhost:2000](http://localhost:2000)\n\n```shell\n# B1A1Node.js\ncurl http://localhost:2000\nHello Fundebug\n```\n\n********A2IP192.168.0.100\n\n```bash\n# A1B1\nssh -R 2000:192.168.0.100:3000 root@103.59.22.17\n```\n\nNode.jsA2A12000A2\n\n### \n\n#### :\n\n> B1A1\n\n#### \n\n> A1B1\n\n#### \n\n********SSH**********:****:****192.168.1.100:3000**SSH**192.168.1.100:3000**\n\n```\n-D :\n```\n\n****A1B1B1\n\n```bash\n# A1B1\nssh -D localhost:2000 root@103.59.22.17\n```\n\nSocket([Socket Proxy](https://en.wikipedia.org/wiki/SOCKS))SSH2000FirefoxSocket****>****>****>****->****:\n\n<div style=\"text-align: center;\">\n<img style=\"width:60%;\" src=\"ssh-port-forwarding/socket_proxy.png\" />\n</div>\n\nFirefox2000SSHNode.jsB1Firefox[localhost:3000](localhost:3000)B1...\n\n### \n\n********ABCANode.jsBABAIP\n\nB3000C2000\n\n```bash\n# BC\nssh -R localhost:3000:localhost:2000 root@103.59.22.17\n```\n\nC2000A3000\n\n```bash\n# AC\nssh -R localhost:2000:localhost:3000 root@103.59.22.17\n```\n\nB[http://localhost:3000](http://localhost:3000)A\n\n```shell\n# BA\ncurl http://localhost:3000\nHello Fundebug\n```\n\n\n\n### \n\n- [SSH PortForwarding](https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding?action=fullsearch&value=linkto%3A%22SSH%2FOpenSSH%2FPortForwarding%22&context=180)\n- [SSH](http://www.pchou.info/linux/2015/11/01/ssh-tunnel.html)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"2017/04/24/ssh-port-forwarding","published":1,"updated":"2017-04-24T02:10:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgto0002071fy3tn2cksx","content":"<p>SSH&#x6709;&#x4E09;&#x79CD;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x6A21;&#x5F0F;&#xFF0C;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;(Local Port Forwarding)</strong>&#xFF0C;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;(Local Port Forwarding)</strong>&#x4EE5;&#x53CA;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;(Dynamic Port Forwarding)</strong>&#x3002;&#x5BF9;&#x4E8E;&#x672C;&#x5730;/&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x4E24;&#x8005;&#x7684;&#x65B9;&#x5411;&#x6070;&#x597D;&#x76F8;&#x53CD;&#x3002;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x3002;</p>\n<a id=\"more\"></a>\n<p>SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x4E5F;&#x88AB;&#x79F0;&#x4F5C;SSH&#x96A7;&#x9053;(<a href=\"http://blog.trackets.com/2014/05/17/ssh-tunnel-local-and-remote-port-forwarding-explained-with-examples.html\" target=\"_blank\" rel=\"external\">SSH Tunnel</a>)&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x901A;&#x8FC7;SSH&#x767B;&#x9646;&#x4E4B;&#x540E;&#xFF0C;&#x5728;<strong>SSH&#x5BA2;&#x6237;&#x7AEF;</strong>&#x4E0E;<strong>SSH&#x670D;&#x52A1;&#x7AEF;</strong>&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x4E86;&#x4E00;&#x4E2A;&#x96A7;&#x9053;&#xFF0C;&#x4ECE;&#x800C;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;SSH&#x96A7;&#x9053;&#x662F;&#x975E;&#x5E38;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;SSH&#x662F;&#x901A;&#x8FC7;&#x52A0;&#x5BC6;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x7684;(SSH&#x5168;&#x79F0;&#x4E3A;Secure Shell)&#x3002;</p>\n<p>&#x5728;&#x672C;&#x6587;&#x6240;&#x6709;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x4E3A;SSH&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E3A;SSH&#x670D;&#x52A1;&#x7AEF;&#x3002;&#x4ECE;A1&#x4E3B;&#x673A;&#x901A;&#x8FC7;SSH&#x767B;&#x9646;B1&#x4E3B;&#x673A;&#xFF0C;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x9009;&#x9879;(<strong>-L&#x3001;-R&#x548C;-D</strong>)&#xFF0C;&#x5373;&#x53EF;&#x5728;A1&#x4E0E;B1&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;SSH&#x96A7;&#x9053;&#xFF0C;&#x4ECE;&#x800C;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/04/24/ssh-port-forwarding/ssh_tunnel.jpeg\"><br></div>\n\n<h3 id=\"&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><h4 id=\"&#x5E94;&#x7528;&#x573A;&#x666F;\"><a href=\"#&#x5E94;&#x7528;&#x573A;&#x666F;\" class=\"headerlink\" title=\"&#x5E94;&#x7528;&#x573A;&#x666F;:\"></a>&#x5E94;&#x7528;&#x573A;&#x666F;:</h4><blockquote>\n<p>&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x7AEF;&#x53E3;&#x4E3A;3000&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x3002;</p>\n</blockquote>\n<p>&#x793A;&#x4F8B;&#x4E3A;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;Node.js&#x670D;&#x52A1;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&apos;http&apos;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> server = http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">request, response</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>,</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;text/plain&quot;</span></div><div class=\"line\">    });</div><div class=\"line\">    response.end(<span class=\"string\">&quot;Hello Fundebug\\n&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\">server.listen(<span class=\"number\">3000</span>);</div></pre></td></tr></table></figure>\n<p>&#x5047;&#x8BBE;&#x4E91;&#x4E3B;&#x673A;B1&#x7684;IP&#x4E3A;<strong>103.59.22.17</strong>&#xFF0C;&#x5219;&#x8BE5;&#x670D;&#x52A1;&#x7684;&#x8BBF;&#x95EE;&#x5730;&#x5740;&#x4E3A;:<a href=\"http://103.59.22.17:3000\" target=\"_blank\" rel=\"external\">http://103.59.22.17:3000</a></p>\n<h4 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;</h4><blockquote>\n<p>&#x4E00;&#x822C;&#x6765;&#x8BB2;&#xFF0C;&#x4E91;&#x4E3B;&#x673A;&#x7684;&#x9632;&#x706B;&#x5899;&#x9ED8;&#x8BA4;&#x53EA;&#x6253;&#x5F00;&#x4E86;22&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x8BBF;&#x95EE;3000&#x7AEF;&#x53E3;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x9632;&#x706B;&#x5899;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x5B89;&#x5168;&#xFF0C;&#x9632;&#x706B;&#x5899;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x7684;IP&#x5730;&#x5740;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x672C;&#x5730;&#x516C;&#x5FD8;IP&#x901A;&#x5E38;&#x662F;&#x7F51;&#x7EDC;&#x63D0;&#x4F9B;&#x5546;&#x52A8;&#x6001;&#x5206;&#x914D;&#x7684;&#xFF0C;&#x662F;&#x4E0D;&#x65AD;&#x53D8;&#x5316;&#x7684;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x9700;&#x8981;&#x7ECF;&#x5E38;&#x4FEE;&#x6539;&#xFF0C;&#x5C31;&#x4F1A;&#x5F88;&#x9EBB;&#x70E6;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;</h4><p>&#x6240;&#x8C13;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C31;&#x662F;<strong>&#x5C06;&#x53D1;&#x9001;&#x5230;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#xFF0C;&#x6765;&#x8BBF;&#x95EE;&#x76EE;&#x6807;&#x7AEF;&#x53E3;&#x7684;&#x670D;&#x52A1;&#x3002;&#x4F7F;&#x7528;<strong>-L</strong>&#x5C5E;&#x6027;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x8F6C;&#x53D1;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x8BED;&#x6CD5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">-L &#x672C;&#x5730;&#x7F51;&#x5361;&#x5730;&#x5740;:&#x672C;&#x5730;&#x7AEF;&#x53E3;:&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x53D1;&#x9001;&#x5230;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x7684;3000&#x7AEF;&#x53E3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</div><div class=\"line\">ssh -L localhost:2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x4E0A;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;<a href=\"http://localhost:2000\" target=\"_blank\" rel=\"external\">http://localhost:2000</a>&#x6765;&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;</div><div class=\"line\">curl http://localhost:2000</div><div class=\"line\">Hello Fundebug</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;<strong>-L&#x9009;&#x9879;</strong>&#x4E2D;&#x7684;<strong>&#x672C;&#x5730;&#x7F51;&#x5361;&#x5730;&#x5740;</strong>&#x662F;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x7684;&#xFF0C;&#x8FD9;&#x65F6;&#x8868;&#x793A;2000&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;&#x4E86;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x7684;&#x6240;&#x6709;&#x7F51;&#x5361;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x3002;2000&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;&#x672C;&#x5730;&#x6240;&#x6709;&#x7F51;&#x5361;</span></div><div class=\"line\">ssh -L 2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x672C;&#x5730;&#x4E3B;&#x673A;A2&#x80FD;&#x591F;&#x8BBF;&#x95EE;A1&#xFF0C;&#x5219;A2&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;A1&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;<strong>-L&#x9009;&#x9879;</strong>&#x4E2D;&#x7684;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;</strong>&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x7684;&#x5730;&#x5740;&#x3002;&#x5047;&#x8BBE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B2&#x7684;&#x5C40;&#x57DF;&#x7F51;IP&#x5730;&#x5740;&#x4E3A;192.168.59.100&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x3002;&#x8BF7;&#x6C42;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B2&#x4E0A;</span></div><div class=\"line\">ssh -L 2000:192.168.59.100:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x5C06;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B2&#x4E0A;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x5230;A1&#x4E3B;&#x673A;2000&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x90FD;&#x4F1A;&#x88AB;&#x8F6C;&#x53D1;&#x5230;B2&#x4E3B;&#x673A;&#x4E0A;&#x3002;</p>\n<h3 id=\"&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><h4 id=\"&#x5E94;&#x7528;&#x573A;&#x666F;-1\"><a href=\"#&#x5E94;&#x7528;&#x573A;&#x666F;-1\" class=\"headerlink\" title=\"&#x5E94;&#x7528;&#x573A;&#x666F;:\"></a>&#x5E94;&#x7528;&#x573A;&#x666F;:</h4><blockquote>\n<p>&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x7AEF;&#x53E3;&#x4E3A;3000&#xFF0C;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x3002;</p>\n</blockquote>\n<p>&#x5C06;&#x524D;&#x6587;&#x7684;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x672C;&#x5730;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"http://localhost:3000\" target=\"_blank\" rel=\"external\">http://localhost:3000</a>&#x8BBF;&#x95EE;&#x8BE5;&#x670D;&#x52A1;&#x3002;</p>\n<h4 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;</h4><blockquote>\n<p>&#x901A;&#x5E38;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x662F;&#x6CA1;&#x6709;&#x72EC;&#x7ACB;&#x7684;&#x516C;&#x7F51;IP&#x7684;&#xFF0C;&#x5B83;&#x4E0E;&#x540C;&#x4E00;&#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x4E3B;&#x673A;&#x5171;&#x4EAB;&#x4E00;&#x4E2A;IP&#x3002;&#x6CA1;&#x6709;&#x516C;&#x7F51;IP&#xFF0C;&#x4E91;&#x4E3B;&#x673A;&#x662F;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x670D;&#x52A1;&#x7684;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;</h4><p>&#x6240;&#x8C13;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C31;&#x662F;<strong>&#x5C06;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#xFF0C;&#x6765;&#x8BBF;&#x95EE;&#x76EE;&#x6807;&#x7AEF;&#x53E3;&#x7684;&#x670D;&#x52A1;&#x3002;&#x4F7F;&#x7528;<strong>-R</strong>&#x5C5E;&#x6027;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x8F6C;&#x53D1;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x8BED;&#x6CD5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">-R &#x8FDC;&#x7A0B;&#x7F51;&#x5361;&#x5730;&#x5740;:&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;:&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x7AEF;&#x53E3;3000&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</div><div class=\"line\">ssh -R localhost:2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;A1&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;<a href=\"http://localhost:2000\" target=\"_blank\" rel=\"external\">http://localhost:2000</a>&#x6765;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x7684;&#x670D;&#x52A1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;</div><div class=\"line\">curl http://localhost:2000</div><div class=\"line\">Hello Fundebug</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x7406;&#xFF0C;<strong>&#x8FDC;&#x7A0B;&#x7F51;&#x5361;&#x5730;&#x5740;</strong>&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;</strong>&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x5730;&#x5740;&#x3002;&#x5047;&#x8BBE;&#x672C;&#x5730;&#x4E3B;&#x673A;A2&#x7684;&#x5C40;&#x57DF;&#x7F51;IP&#x5730;&#x5740;&#x4E3A;192.168.0.100&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -R 2000:192.168.0.100:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x5C06;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A2&#x4E0A;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;A1&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x90FD;&#x4F1A;&#x88AB;&#x8F6C;&#x53D1;&#x5230;A2&#x4E3B;&#x673A;&#x4E0A;&#x3002;</p>\n<h3 id=\"&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><h4 id=\"&#x5E94;&#x7528;&#x573A;&#x666F;-2\"><a href=\"#&#x5E94;&#x7528;&#x573A;&#x666F;-2\" class=\"headerlink\" title=\"&#x5E94;&#x7528;&#x573A;&#x666F;:\"></a>&#x5E94;&#x7528;&#x573A;&#x666F;:</h4><blockquote>\n<p>&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x8FD0;&#x884C;&#x4E86;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x5206;&#x522B;&#x4F7F;&#x7528;&#x4E86;&#x4E0D;&#x540C;&#x7AEF;&#x53E3;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;</h4><blockquote>\n<p>&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x7531;&#x4E8E;&#x9632;&#x706B;&#x5899;&#x9650;&#x5236;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1B;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;&#x7AEF;&#x53E3;&#x5206;&#x522B;&#x521B;&#x5EFA;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;</h4><p>&#x5BF9;&#x4E8E;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x548C;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x90FD;&#x5B58;&#x5728;&#x4E24;&#x4E2A;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5206;&#x522B;&#x4F4D;&#x4E8E;SSH&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x800C;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x5219;&#x53EA;&#x662F;&#x7ED1;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;</strong>&#xFF0C;&#x800C;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x5219;&#x662F;&#x4E0D;&#x56FA;&#x5B9A;&#x7684;&#x3002;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x662F;&#x7531;&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;&#x8BF7;&#x6C42;&#x5730;&#x5740;&#x4E3A;<strong>192.168.1.100:3000</strong>&#xFF0C;&#x5219;&#x901A;&#x8FC7;SSH&#x8F6C;&#x53D1;&#x7684;&#x8BF7;&#x6C42;&#x5730;&#x5740;&#x4E5F;&#x662F;<strong>192.168.1.100:3000</strong>&#x3002;</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"deletion\">-D &#x672C;&#x5730;&#x7F51;&#x5361;&#x5730;&#x5740;:&#x672C;&#x5730;&#x7AEF;&#x53E3;</span></div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;B1&#xFF0C;&#x800C;&#x7531;B1&#x53BB;&#x771F;&#x6B63;&#x5730;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -D localhost:2000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x800C;&#x5728;&#x672C;&#x5730;&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x7531;Socket&#x4EE3;&#x7406;(<a href=\"https://en.wikipedia.org/wiki/SOCKS\" target=\"_blank\" rel=\"external\">Socket Proxy</a>)&#x8F6C;&#x53D1;&#x5230;SSH&#x7ED1;&#x5B9A;&#x7684;2000&#x7AEF;&#x53E3;&#x3002;&#x4EE5;Firefox&#x6D4F;&#x89C8;&#x5668;&#x4E3A;&#x4F8B;&#xFF0C;&#x914D;&#x7F6E;Socket&#x4EE3;&#x7406;&#x9700;&#x8981;&#x627E;&#x5230;<strong>&#x9996;&#x9009;&#x9879;</strong>&gt;<strong>&#x9AD8;&#x7EA7;</strong>&gt;<strong>&#x7F51;&#x7EDC;</strong>&gt;<strong>&#x8FDE;&#x63A5;</strong>-&gt;<strong>&#x8BBE;&#x7F6E;</strong>:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/04/24/ssh-port-forwarding/socket_proxy.png\"><br></div>\n\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;Firefox&#x6D4F;&#x89C8;&#x5668;&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x8F6C;&#x53D1;&#x5230;2000&#x7AEF;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;SSH&#x8F6C;&#x53D1;&#x5230;&#x771F;&#x6B63;&#x5730;&#x8BF7;&#x6C42;&#x5730;&#x5740;&#x3002;&#x82E5;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#xFF0C;&#x5219;&#x5728;Firefox&#x4E2D;&#x8BBF;&#x95EE;<a href=\"localhost:3000\" target=\"_blank\" rel=\"external\">localhost:3000</a>&#x5373;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x3002;&#x5982;&#x679C;&#x4E3B;&#x673A;B1&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x5916;&#x7F51;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x2026;&#x2026;</p>\n<h3 id=\"&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><p><strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x4E0E;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x94FE;&#x5F0F;&#x8F6C;&#x53D1;&#x3002;&#x5047;&#x8BBE;A&#x4E3B;&#x673A;&#x5728;&#x516C;&#x53F8;&#xFF0C;B&#x4E3B;&#x673A;&#x5728;&#x5BB6;&#xFF0C;C&#x4E3B;&#x673A;&#x4E3A;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;&#x3002;A&#x4E3B;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x4E86;&#x524D;&#x6587;&#x7684;Node.js&#x670D;&#x52A1;&#xFF0C;&#x9700;&#x8981;&#x5728;B&#x4E3B;&#x673A;&#x4E0A;&#x8BBF;&#x95EE;&#x8BE5;&#x670D;&#x52A1;&#x3002;&#x7531;&#x4E8E;A&#x548C;B&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#xFF0C;&#x4E14;A&#x4E3B;&#x673A;&#x6CA1;&#x6709;&#x72EC;&#x7ACB;&#x516C;&#x5171;IP&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x901A;&#x8FC7;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C06;&#x53D1;&#x9001;&#x5230;B&#x4E3B;&#x673A;3000&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#x7684;2000&#x7AEF;&#x53E3;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;B&#x4E3B;&#x673A;&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -R localhost:3000:localhost:2000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C06;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;A&#x4E3B;&#x673A;&#x7684;3000&#x7AEF;&#x53E3;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;A&#x4E3B;&#x673A;&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -R localhost:2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x4E3B;&#x673A;B&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;<a href=\"http://localhost:3000\" target=\"_blank\" rel=\"external\">http://localhost:3000</a>&#x6765;&#x8BBF;&#x95EE;&#x4E3B;&#x673A;A&#x4E0A;&#x7684;&#x670D;&#x52A1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x4E3B;&#x673A;B&#x8BBF;&#x95EE;&#x4E3B;&#x673A;A&#x4E0A;&#x7684;&#x670D;&#x52A1;</div><div class=\"line\">curl http://localhost:3000</div><div class=\"line\">Hello Fundebug</div></pre></td></tr></table></figure>\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding?action=fullsearch&amp;value=linkto%3A%22SSH%2FOpenSSH%2FPortForwarding%22&amp;context=180\" target=\"_blank\" rel=\"external\">SSH PortForwarding</a></li>\n<li><a href=\"http://www.pchou.info/linux/2015/11/01/ssh-tunnel.html\" target=\"_blank\" rel=\"external\">SSH&#x96A7;&#x9053;&#x7684;&#x539F;&#x7406;&#x548C;&#x5B9E;&#x73B0;</a></li>\n</ul>\n","excerpt":"<p>SSH&#x6709;&#x4E09;&#x79CD;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x6A21;&#x5F0F;&#xFF0C;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;(Local Port Forwarding)</strong>&#xFF0C;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;(Local Port Forwarding)</strong>&#x4EE5;&#x53CA;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;(Dynamic Port Forwarding)</strong>&#x3002;&#x5BF9;&#x4E8E;&#x672C;&#x5730;/&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x4E24;&#x8005;&#x7684;&#x65B9;&#x5411;&#x6070;&#x597D;&#x76F8;&#x53CD;&#x3002;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x5219;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x3002;</p>","more":"<p>SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x4E5F;&#x88AB;&#x79F0;&#x4F5C;SSH&#x96A7;&#x9053;(<a href=\"http://blog.trackets.com/2014/05/17/ssh-tunnel-local-and-remote-port-forwarding-explained-with-examples.html\">SSH Tunnel</a>)&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x901A;&#x8FC7;SSH&#x767B;&#x9646;&#x4E4B;&#x540E;&#xFF0C;&#x5728;<strong>SSH&#x5BA2;&#x6237;&#x7AEF;</strong>&#x4E0E;<strong>SSH&#x670D;&#x52A1;&#x7AEF;</strong>&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x4E86;&#x4E00;&#x4E2A;&#x96A7;&#x9053;&#xFF0C;&#x4ECE;&#x800C;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;SSH&#x96A7;&#x9053;&#x662F;&#x975E;&#x5E38;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;SSH&#x662F;&#x901A;&#x8FC7;&#x52A0;&#x5BC6;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x7684;(SSH&#x5168;&#x79F0;&#x4E3A;Secure Shell)&#x3002;</p>\n<p>&#x5728;&#x672C;&#x6587;&#x6240;&#x6709;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x4E3A;SSH&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E3A;SSH&#x670D;&#x52A1;&#x7AEF;&#x3002;&#x4ECE;A1&#x4E3B;&#x673A;&#x901A;&#x8FC7;SSH&#x767B;&#x9646;B1&#x4E3B;&#x673A;&#xFF0C;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x9009;&#x9879;(<strong>-L&#x3001;-R&#x548C;-D</strong>)&#xFF0C;&#x5373;&#x53EF;&#x5728;A1&#x4E0E;B1&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;SSH&#x96A7;&#x9053;&#xFF0C;&#x4ECE;&#x800C;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/04/24/ssh-port-forwarding/ssh_tunnel.jpeg\"><br></div>\n\n<h3 id=\"&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><h4 id=\"&#x5E94;&#x7528;&#x573A;&#x666F;\"><a href=\"#&#x5E94;&#x7528;&#x573A;&#x666F;\" class=\"headerlink\" title=\"&#x5E94;&#x7528;&#x573A;&#x666F;:\"></a>&#x5E94;&#x7528;&#x573A;&#x666F;:</h4><blockquote>\n<p>&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x7AEF;&#x53E3;&#x4E3A;3000&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x3002;</p>\n</blockquote>\n<p>&#x793A;&#x4F8B;&#x4E3A;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;Node.js&#x670D;&#x52A1;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&apos;http&apos;</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> server = http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">request, response</span>)</span></div><div class=\"line\">{</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>,</div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;text/plain&quot;</span></div><div class=\"line\">    });</div><div class=\"line\">    response.end(<span class=\"string\">&quot;Hello Fundebug\\n&quot;</span>);</div><div class=\"line\">});</div><div class=\"line\"></div><div class=\"line\">server.listen(<span class=\"number\">3000</span>);</div></pre></td></tr></table></figure>\n<p>&#x5047;&#x8BBE;&#x4E91;&#x4E3B;&#x673A;B1&#x7684;IP&#x4E3A;<strong>103.59.22.17</strong>&#xFF0C;&#x5219;&#x8BE5;&#x670D;&#x52A1;&#x7684;&#x8BBF;&#x95EE;&#x5730;&#x5740;&#x4E3A;:<a href=\"http://103.59.22.17:3000\">http://103.59.22.17:3000</a></p>\n<h4 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;</h4><blockquote>\n<p>&#x4E00;&#x822C;&#x6765;&#x8BB2;&#xFF0C;&#x4E91;&#x4E3B;&#x673A;&#x7684;&#x9632;&#x706B;&#x5899;&#x9ED8;&#x8BA4;&#x53EA;&#x6253;&#x5F00;&#x4E86;22&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x8BBF;&#x95EE;3000&#x7AEF;&#x53E3;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x9632;&#x706B;&#x5899;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x5B89;&#x5168;&#xFF0C;&#x9632;&#x706B;&#x5899;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x7684;IP&#x5730;&#x5740;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x672C;&#x5730;&#x516C;&#x5FD8;IP&#x901A;&#x5E38;&#x662F;&#x7F51;&#x7EDC;&#x63D0;&#x4F9B;&#x5546;&#x52A8;&#x6001;&#x5206;&#x914D;&#x7684;&#xFF0C;&#x662F;&#x4E0D;&#x65AD;&#x53D8;&#x5316;&#x7684;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x9700;&#x8981;&#x7ECF;&#x5E38;&#x4FEE;&#x6539;&#xFF0C;&#x5C31;&#x4F1A;&#x5F88;&#x9EBB;&#x70E6;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;</h4><p>&#x6240;&#x8C13;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C31;&#x662F;<strong>&#x5C06;&#x53D1;&#x9001;&#x5230;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#xFF0C;&#x6765;&#x8BBF;&#x95EE;&#x76EE;&#x6807;&#x7AEF;&#x53E3;&#x7684;&#x670D;&#x52A1;&#x3002;&#x4F7F;&#x7528;<strong>-L</strong>&#x5C5E;&#x6027;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x8F6C;&#x53D1;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x8BED;&#x6CD5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">-L &#x672C;&#x5730;&#x7F51;&#x5361;&#x5730;&#x5740;:&#x672C;&#x5730;&#x7AEF;&#x53E3;:&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x53D1;&#x9001;&#x5230;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x7684;3000&#x7AEF;&#x53E3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</div><div class=\"line\">ssh -L localhost:2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x4E0A;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;<a href=\"http://localhost:2000\">http://localhost:2000</a>&#x6765;&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;</div><div class=\"line\">curl http://localhost:2000</div><div class=\"line\">Hello Fundebug</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;<strong>-L&#x9009;&#x9879;</strong>&#x4E2D;&#x7684;<strong>&#x672C;&#x5730;&#x7F51;&#x5361;&#x5730;&#x5740;</strong>&#x662F;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x7684;&#xFF0C;&#x8FD9;&#x65F6;&#x8868;&#x793A;2000&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;&#x4E86;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x7684;&#x6240;&#x6709;&#x7F51;&#x5361;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x3002;2000&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;&#x672C;&#x5730;&#x6240;&#x6709;&#x7F51;&#x5361;</span></div><div class=\"line\">ssh -L 2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x672C;&#x5730;&#x4E3B;&#x673A;A2&#x80FD;&#x591F;&#x8BBF;&#x95EE;A1&#xFF0C;&#x5219;A2&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;A1&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;<strong>-L&#x9009;&#x9879;</strong>&#x4E2D;&#x7684;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;</strong>&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x7684;&#x5730;&#x5740;&#x3002;&#x5047;&#x8BBE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B2&#x7684;&#x5C40;&#x57DF;&#x7F51;IP&#x5730;&#x5740;&#x4E3A;192.168.59.100&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x3002;&#x8BF7;&#x6C42;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B2&#x4E0A;</span></div><div class=\"line\">ssh -L 2000:192.168.59.100:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x5C06;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B2&#x4E0A;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x5230;A1&#x4E3B;&#x673A;2000&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x90FD;&#x4F1A;&#x88AB;&#x8F6C;&#x53D1;&#x5230;B2&#x4E3B;&#x673A;&#x4E0A;&#x3002;</p>\n<h3 id=\"&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><h4 id=\"&#x5E94;&#x7528;&#x573A;&#x666F;-1\"><a href=\"#&#x5E94;&#x7528;&#x573A;&#x666F;-1\" class=\"headerlink\" title=\"&#x5E94;&#x7528;&#x573A;&#x666F;:\"></a>&#x5E94;&#x7528;&#x573A;&#x666F;:</h4><blockquote>\n<p>&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x8FD0;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x7AEF;&#x53E3;&#x4E3A;3000&#xFF0C;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x3002;</p>\n</blockquote>\n<p>&#x5C06;&#x524D;&#x6587;&#x7684;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x672C;&#x5730;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"http://localhost:3000\">http://localhost:3000</a>&#x8BBF;&#x95EE;&#x8BE5;&#x670D;&#x52A1;&#x3002;</p>\n<h4 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;</h4><blockquote>\n<p>&#x901A;&#x5E38;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x662F;&#x6CA1;&#x6709;&#x72EC;&#x7ACB;&#x7684;&#x516C;&#x7F51;IP&#x7684;&#xFF0C;&#x5B83;&#x4E0E;&#x540C;&#x4E00;&#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x4E3B;&#x673A;&#x5171;&#x4EAB;&#x4E00;&#x4E2A;IP&#x3002;&#x6CA1;&#x6709;&#x516C;&#x7F51;IP&#xFF0C;&#x4E91;&#x4E3B;&#x673A;&#x662F;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x670D;&#x52A1;&#x7684;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;</h4><p>&#x6240;&#x8C13;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C31;&#x662F;<strong>&#x5C06;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#xFF0C;&#x6765;&#x8BBF;&#x95EE;&#x76EE;&#x6807;&#x7AEF;&#x53E3;&#x7684;&#x670D;&#x52A1;&#x3002;&#x4F7F;&#x7528;<strong>-R</strong>&#x5C5E;&#x6027;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x8F6C;&#x53D1;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x8BED;&#x6CD5;&#x662F;&#x8FD9;&#x6837;&#x7684;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">-R &#x8FDC;&#x7A0B;&#x7F51;&#x5361;&#x5730;&#x5740;:&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;:&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x7AEF;&#x53E3;3000&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</div><div class=\"line\">ssh -R localhost:2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;A1&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;<a href=\"http://localhost:2000\">http://localhost:2000</a>&#x6765;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x7684;&#x670D;&#x52A1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x4E0A;&#x7684;Node.js&#x670D;&#x52A1;</div><div class=\"line\">curl http://localhost:2000</div><div class=\"line\">Hello Fundebug</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x7406;&#xFF0C;<strong>&#x8FDC;&#x7A0B;&#x7F51;&#x5361;&#x5730;&#x5740;</strong>&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;</strong>&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x5730;&#x5740;&#x3002;&#x5047;&#x8BBE;&#x672C;&#x5730;&#x4E3B;&#x673A;A2&#x7684;&#x5C40;&#x57DF;&#x7F51;IP&#x5730;&#x5740;&#x4E3A;192.168.0.100&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -R 2000:192.168.0.100:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x82E5;&#x5C06;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A2&#x4E0A;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;A1&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x90FD;&#x4F1A;&#x88AB;&#x8F6C;&#x53D1;&#x5230;A2&#x4E3B;&#x673A;&#x4E0A;&#x3002;</p>\n<h3 id=\"&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><h4 id=\"&#x5E94;&#x7528;&#x573A;&#x666F;-2\"><a href=\"#&#x5E94;&#x7528;&#x573A;&#x666F;-2\" class=\"headerlink\" title=\"&#x5E94;&#x7528;&#x573A;&#x666F;:\"></a>&#x5E94;&#x7528;&#x573A;&#x666F;:</h4><blockquote>\n<p>&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x8FD0;&#x884C;&#x4E86;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x5206;&#x522B;&#x4F7F;&#x7528;&#x4E86;&#x4E0D;&#x540C;&#x7AEF;&#x53E3;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"><a href=\"#&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\" class=\"headerlink\" title=\"&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;\"></a>&#x4E3A;&#x5565;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5462;&#xFF1F;</h4><blockquote>\n<p>&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x7531;&#x4E8E;&#x9632;&#x706B;&#x5899;&#x9650;&#x5236;&#xFF0C;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1B;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;&#x7AEF;&#x53E3;&#x5206;&#x522B;&#x521B;&#x5EFA;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#x3002;</p>\n</blockquote>\n<h4 id=\"&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1F;</h4><p>&#x5BF9;&#x4E8E;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x548C;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x90FD;&#x5B58;&#x5728;&#x4E24;&#x4E2A;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5206;&#x522B;&#x4F4D;&#x4E8E;SSH&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x800C;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x5219;&#x53EA;&#x662F;&#x7ED1;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;<strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;</strong>&#xFF0C;&#x800C;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x5219;&#x662F;&#x4E0D;&#x56FA;&#x5B9A;&#x7684;&#x3002;<strong>&#x76EE;&#x6807;&#x5730;&#x5740;:&#x76EE;&#x6807;&#x7AEF;&#x53E3;</strong>&#x662F;&#x7531;&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;&#x8BF7;&#x6C42;&#x5730;&#x5740;&#x4E3A;<strong>192.168.1.100:3000</strong>&#xFF0C;&#x5219;&#x901A;&#x8FC7;SSH&#x8F6C;&#x53D1;&#x7684;&#x8BF7;&#x6C42;&#x5730;&#x5740;&#x4E5F;&#x662F;<strong>192.168.1.100:3000</strong>&#x3002;</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"deletion\">-D &#x672C;&#x5730;&#x7F51;&#x5361;&#x5730;&#x5740;:&#x672C;&#x5730;&#x7AEF;&#x53E3;</span></div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;<strong>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;B1&#xFF0C;&#x800C;&#x7531;B1&#x53BB;&#x771F;&#x6B63;&#x5730;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;&#x672C;&#x5730;&#x4E3B;&#x673A;A1&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -D localhost:2000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x800C;&#x5728;&#x672C;&#x5730;&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x7531;Socket&#x4EE3;&#x7406;(<a href=\"https://en.wikipedia.org/wiki/SOCKS\">Socket Proxy</a>)&#x8F6C;&#x53D1;&#x5230;SSH&#x7ED1;&#x5B9A;&#x7684;2000&#x7AEF;&#x53E3;&#x3002;&#x4EE5;Firefox&#x6D4F;&#x89C8;&#x5668;&#x4E3A;&#x4F8B;&#xFF0C;&#x914D;&#x7F6E;Socket&#x4EE3;&#x7406;&#x9700;&#x8981;&#x627E;&#x5230;<strong>&#x9996;&#x9009;&#x9879;</strong>&gt;<strong>&#x9AD8;&#x7EA7;</strong>&gt;<strong>&#x7F51;&#x7EDC;</strong>&gt;<strong>&#x8FDE;&#x63A5;</strong>-&gt;<strong>&#x8BBE;&#x7F6E;</strong>:</p>\n<div style=\"text-align: center;\"><br><img style=\"width:60%;\" src=\"/2017/04/24/ssh-port-forwarding/socket_proxy.png\"><br></div>\n\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;Firefox&#x6D4F;&#x89C8;&#x5668;&#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x8F6C;&#x53D1;&#x5230;2000&#x7AEF;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;SSH&#x8F6C;&#x53D1;&#x5230;&#x771F;&#x6B63;&#x5730;&#x8BF7;&#x6C42;&#x5730;&#x5740;&#x3002;&#x82E5;Node.js&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;B1&#x4E0A;&#xFF0C;&#x5219;&#x5728;Firefox&#x4E2D;&#x8BBF;&#x95EE;<a href=\"localhost:3000\">localhost:3000</a>&#x5373;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x3002;&#x5982;&#x679C;&#x4E3B;&#x673A;B1&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x5916;&#x7F51;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x2026;&#x2026;</p>\n<h3 id=\"&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"><a href=\"#&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\" class=\"headerlink\" title=\"&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;\"></a>&#x94FE;&#x5F0F;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><p><strong>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x4E0E;<strong>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x94FE;&#x5F0F;&#x8F6C;&#x53D1;&#x3002;&#x5047;&#x8BBE;A&#x4E3B;&#x673A;&#x5728;&#x516C;&#x53F8;&#xFF0C;B&#x4E3B;&#x673A;&#x5728;&#x5BB6;&#xFF0C;C&#x4E3B;&#x673A;&#x4E3A;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;&#x3002;A&#x4E3B;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x4E86;&#x524D;&#x6587;&#x7684;Node.js&#x670D;&#x52A1;&#xFF0C;&#x9700;&#x8981;&#x5728;B&#x4E3B;&#x673A;&#x4E0A;&#x8BBF;&#x95EE;&#x8BE5;&#x670D;&#x52A1;&#x3002;&#x7531;&#x4E8E;A&#x548C;B&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#xFF0C;&#x4E14;A&#x4E3B;&#x673A;&#x6CA1;&#x6709;&#x72EC;&#x7ACB;&#x516C;&#x5171;IP&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x901A;&#x8FC7;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C06;&#x53D1;&#x9001;&#x5230;B&#x4E3B;&#x673A;3000&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#x7684;2000&#x7AEF;&#x53E3;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;B&#x4E3B;&#x673A;&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -R localhost:3000:localhost:2000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C06;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#x7AEF;&#x53E3;2000&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8F6C;&#x53D1;&#x5230;A&#x4E3B;&#x673A;&#x7684;3000&#x7AEF;&#x53E3;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5728;A&#x4E3B;&#x673A;&#x767B;&#x9646;&#x8FDC;&#x7A0B;&#x4E91;&#x4E3B;&#x673A;C&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</span></div><div class=\"line\">ssh -R localhost:2000:localhost:3000 root@103.59.22.17</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x4E3B;&#x673A;B&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;<a href=\"http://localhost:3000\">http://localhost:3000</a>&#x6765;&#x8BBF;&#x95EE;&#x4E3B;&#x673A;A&#x4E0A;&#x7684;&#x670D;&#x52A1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\"># &#x5728;&#x4E3B;&#x673A;B&#x8BBF;&#x95EE;&#x4E3B;&#x673A;A&#x4E0A;&#x7684;&#x670D;&#x52A1;</div><div class=\"line\">curl http://localhost:3000</div><div class=\"line\">Hello Fundebug</div></pre></td></tr></table></figure>\n<h3 id=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"><a href=\"#&#x53C2;&#x8003;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x94FE;&#x63A5;\"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h3><ul>\n<li><a href=\"https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding?action=fullsearch&amp;value=linkto%3A%22SSH%2FOpenSSH%2FPortForwarding%22&amp;context=180\">SSH PortForwarding</a></li>\n<li><a href=\"http://www.pchou.info/linux/2015/11/01/ssh-tunnel.html\">SSH&#x96A7;&#x9053;&#x7684;&#x539F;&#x7406;&#x548C;&#x5B9E;&#x73B0;</a></li>\n</ul>"},{"title":"DockerJava","date":"2017-05-02T02:00:00.000Z","_content":"\n**:** Docker(Multi-stage build)Dockerfile\n\n<!-- more -->\n\n: [Creating Smaller Java Image using Docker Multi-stage Build](http://blog.arungupta.me/smaller-java-image-docker-multi-stage-build/)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\n**Github:** [arun-gupta/docker-java-multistage](https://github.com/arun-gupta/docker-java-multistage)\n\n[DockerCon 2017](http://2017.dockercon.com/)Java:\n\n- Docker(Docker Multi-stage build)\n- [Oracle JRE in Docker Store](https://blogs.oracle.com/developers/official-docker-image-for-oracle-java-and-the-openjdk-roadmap-for-containers)\n\n**Docker(Docker Multi-stage build)**Java\n\n\n### ?\n\nJavaDockerMavenGradleJARWARMavenJavaMavenJAR`pm.xml`Docker\n\nDockerfile:\n\n```dockerfile\nFROM maven:3.5-jdk-8\n \nCOPY src /usr/src/myapp/src\nCOPY pom.xml /usr/src/myapp\nRUN mvn -f /usr/src/myapp/pom.xml clean package\n \nENV WILDFLY_VERSION 10.1.0.Final\nENV WILDFLY_HOME /usr\n \nRUN cd $WILDFLY_HOME && curl http://download.jboss.org/wildfly/$WILDFLY_VERSION/wildfly-$WILDFLY_VERSION.tar.gz | tar zx && mv $WILDFLY_HOME/wildfly-$WILDFLY_VERSION $WILDFLY_HOME/wildfly\n \nRUN cp /usr/src/myapp/target/people-1.0-SNAPSHOT.war $WILDFLY_HOME/wildfly/standalone/deployments/people.war\n \nEXPOSE 8080\n \nCMD [\"/usr/wildfly/bin/standalone.sh\", \"-b\", \"0.0.0.0\"]\n \n```\n\nDockerfile:\n\n- `maven:3.5-jdk-8` \n- \n- Maven\n- WildFly\n- .warWildFly`deployments`\n- WildFly\n\nDockefile\n\n- `Maven`WildFly\n- Maven\n- WildFlyDockerfileWildFly\n- \n\nDockerDockerfileDockerfileMaven.war(volume)DockerfileWildFly.warDockerfile\n\n### Docker\n\n(multi-stage build)Dockerfile`FROM``FROM``FROM``COPY --from=<image-number>`image-number0\n\n`FROM``as <stage-name>`(stage name):\n\n```Dockerfile\nFROM maven:3.5-jdk-8 as BUILD\n```\n\nCOPY`--from`\n\nDockerfile:\n\n```Dockerfile\nFROM maven:3.5-jdk-8 as BUILD\n \nCOPY src /usr/src/myapp/src\nCOPY pom.xml /usr/src/myapp\nRUN mvn -f /usr/src/myapp/pom.xml clean package\n \nFROM jboss/wildfly:10.1.0.Final\n \nCOPY --from=BUILD /usr/src/myapp/target/people-1.0-SNAPSHOT.war /opt/jboss/wildfly/standalone/deployments/people.war\n```\n\nDockerfile:\n\n- `FROM`\n- `maven:3.5-jdk-8` WAR`build`\n- `jboss/wildfly:10.1.0.Final` WAR`COPY --from`WildFly`deloyments`\n\n### Docker\n\n- DockerfileDockerfile\n- \n- WildFlyWildFlyWildFly\n\n****Docker `curl -fsSL https://test.docker.com/ | sh`Docker\n\nDockerfile816MB584MB\n\n```shell\ndocker-java-multistage $ docker images\nREPOSITORY                          TAG                 IMAGE ID            CREATED             SIZE\npeople                              multistage          d36a4b82ad87        59 seconds ago      584MB\npeople                              singlestage         13dbcf8f54f6        5 minutes ago       816MB\n```\n\n\n\n[PR #31257](https://github.com/moby/moby/pull/31257)\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"about-docker-sock/docker.JPG\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/05/02/about-docker-sock.md","raw":"---\ntitle: DockerJava\n\ndate: 2017-05-02 10:00:00\n\ntags: [Docker, , Java]\n\n---\n\n**:** Docker(Multi-stage build)Dockerfile\n\n<!-- more -->\n\n: [Creating Smaller Java Image using Docker Multi-stage Build](http://blog.arungupta.me/smaller-java-image-docker-multi-stage-build/)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\n**Github:** [arun-gupta/docker-java-multistage](https://github.com/arun-gupta/docker-java-multistage)\n\n[DockerCon 2017](http://2017.dockercon.com/)Java:\n\n- Docker(Docker Multi-stage build)\n- [Oracle JRE in Docker Store](https://blogs.oracle.com/developers/official-docker-image-for-oracle-java-and-the-openjdk-roadmap-for-containers)\n\n**Docker(Docker Multi-stage build)**Java\n\n\n### ?\n\nJavaDockerMavenGradleJARWARMavenJavaMavenJAR`pm.xml`Docker\n\nDockerfile:\n\n```dockerfile\nFROM maven:3.5-jdk-8\n \nCOPY src /usr/src/myapp/src\nCOPY pom.xml /usr/src/myapp\nRUN mvn -f /usr/src/myapp/pom.xml clean package\n \nENV WILDFLY_VERSION 10.1.0.Final\nENV WILDFLY_HOME /usr\n \nRUN cd $WILDFLY_HOME && curl http://download.jboss.org/wildfly/$WILDFLY_VERSION/wildfly-$WILDFLY_VERSION.tar.gz | tar zx && mv $WILDFLY_HOME/wildfly-$WILDFLY_VERSION $WILDFLY_HOME/wildfly\n \nRUN cp /usr/src/myapp/target/people-1.0-SNAPSHOT.war $WILDFLY_HOME/wildfly/standalone/deployments/people.war\n \nEXPOSE 8080\n \nCMD [\"/usr/wildfly/bin/standalone.sh\", \"-b\", \"0.0.0.0\"]\n \n```\n\nDockerfile:\n\n- `maven:3.5-jdk-8` \n- \n- Maven\n- WildFly\n- .warWildFly`deployments`\n- WildFly\n\nDockefile\n\n- `Maven`WildFly\n- Maven\n- WildFlyDockerfileWildFly\n- \n\nDockerDockerfileDockerfileMaven.war(volume)DockerfileWildFly.warDockerfile\n\n### Docker\n\n(multi-stage build)Dockerfile`FROM``FROM``FROM``COPY --from=<image-number>`image-number0\n\n`FROM``as <stage-name>`(stage name):\n\n```Dockerfile\nFROM maven:3.5-jdk-8 as BUILD\n```\n\nCOPY`--from`\n\nDockerfile:\n\n```Dockerfile\nFROM maven:3.5-jdk-8 as BUILD\n \nCOPY src /usr/src/myapp/src\nCOPY pom.xml /usr/src/myapp\nRUN mvn -f /usr/src/myapp/pom.xml clean package\n \nFROM jboss/wildfly:10.1.0.Final\n \nCOPY --from=BUILD /usr/src/myapp/target/people-1.0-SNAPSHOT.war /opt/jboss/wildfly/standalone/deployments/people.war\n```\n\nDockerfile:\n\n- `FROM`\n- `maven:3.5-jdk-8` WAR`build`\n- `jboss/wildfly:10.1.0.Final` WAR`COPY --from`WildFly`deloyments`\n\n### Docker\n\n- DockerfileDockerfile\n- \n- WildFlyWildFlyWildFly\n\n****Docker `curl -fsSL https://test.docker.com/ | sh`Docker\n\nDockerfile816MB584MB\n\n```shell\ndocker-java-multistage $ docker images\nREPOSITORY                          TAG                 IMAGE ID            CREATED             SIZE\npeople                              multistage          d36a4b82ad87        59 seconds ago      584MB\npeople                              singlestage         13dbcf8f54f6        5 minutes ago       816MB\n```\n\n\n\n[PR #31257](https://github.com/moby/moby/pull/31257)\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"about-docker-sock/docker.JPG\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"2017/05/02/about-docker-sock","published":1,"updated":"2017-05-01T07:40:59.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgto1002271fy1nm9ivrr","content":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x6700;&#x65B0;&#x7248;Docker&#x5C06;&#x652F;&#x6301;&#x591A;&#x6B65;&#x6784;&#x5EFA;(Multi-stage build)&#xFF0C;&#x8FD9;&#x6837;&#x4F7F;&#x7528;&#x5355;&#x4E2A;Dockerfile&#x5C31;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#xFF0C;&#x6D4B;&#x8BD5;&#x4EE5;&#x53CA;&#x53D1;&#x5E03;&#x7B49;&#x591A;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x6548;&#x51CF;&#x5C0F;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x539F;&#x6587;: <a href=\"http://blog.arungupta.me/smaller-java-image-docker-multi-stage-build/\" target=\"_blank\" rel=\"external\">Creating Smaller Java Image using Docker Multi-stage Build</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p><strong>Github&#x4ED3;&#x5E93;:</strong> <a href=\"https://github.com/arun-gupta/docker-java-multistage\" target=\"_blank\" rel=\"external\">arun-gupta/docker-java-multistage</a></p>\n<p><a href=\"http://2017.dockercon.com/\" target=\"_blank\" rel=\"external\">DockerCon 2017</a>&#x4E2D;&#x4E0E;Java&#x5F00;&#x53D1;&#x8005;&#x76F4;&#x63A5;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#x6709;:</p>\n<ul>\n<li>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;(Docker Multi-stage build)</li>\n<li><a href=\"https://blogs.oracle.com/developers/official-docker-image-for-oracle-java-and-the-openjdk-roadmap-for-containers\" target=\"_blank\" rel=\"external\">Oracle JRE in Docker Store</a></li>\n</ul>\n<p>&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4ECB;&#x7ECD;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;<strong>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;(Docker Multi-stage build)</strong>&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#x5C55;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x66F4;&#x5C0F;&#x7684;Java&#x955C;&#x50CF;&#x3002;</p>\n<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;?\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;?</h3><p>&#x4E3A;Java&#x5E94;&#x7528;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#x610F;&#x5473;&#x7740;&#x7F16;&#x8BD1;&#x6E90;&#x4EE3;&#x7801;&#x4EE5;&#x53CA;&#x6253;&#x5305;&#x76EE;&#x6807;&#x4EE3;&#x7801;&#x3002;&#x5F00;&#x53D1;&#x8005;&#x901A;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;Maven&#x6216;&#x8005;Gradle&#x6765;&#x6784;&#x5EFA;JAR&#x6216;WAR&#x6587;&#x4EF6;&#x3002;&#x82E5;&#x4F7F;&#x7528;Maven&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x6765;&#x6784;&#x5EFA;Java&#x5E94;&#x7528;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x6240;&#x6709;Maven&#x4F9D;&#x8D56;&#x3002;&#x4E0B;&#x8F7D;&#x7684;JAR&#x5305;&#x6570;&#x76EE;&#x7531;<code>pm.xml</code>&#x51B3;&#x5B9A;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x975E;&#x5E38;&#x591A;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x751F;&#x6210;&#x7684;Docker&#x955C;&#x50CF;&#x4E2D;&#x5C06;&#x7559;&#x4E0B;&#x592A;&#x591A;&#x591A;&#x4F59;&#x7684;&#x6587;&#x4EF6;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x4E3A;&#x793A;&#x4F8B;Dockerfile:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> maven:<span class=\"number\">3.5</span>-jdk-<span class=\"number\">8</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> src /usr/src/myapp/src</span></div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> pom.xml /usr/src/myapp</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> mvn <span class=\"_\">-f</span> /usr/src/myapp/pom.xml clean package</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">ENV</span> WILDFLY_VERSION <span class=\"number\">10.1</span>.<span class=\"number\">0</span>.Final</div><div class=\"line\"><span class=\"keyword\">ENV</span> WILDFLY_HOME /usr</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> <span class=\"built_in\">cd</span> <span class=\"variable\">$WILDFLY_HOME</span> &amp;&amp; curl http://download.jboss.org/wildfly/<span class=\"variable\">$WILDFLY_VERSION</span>/wildfly-<span class=\"variable\">$WILDFLY_VERSION</span>.tar.gz | tar zx &amp;&amp; mv <span class=\"variable\">$WILDFLY_HOME</span>/wildfly-<span class=\"variable\">$WILDFLY_VERSION</span> <span class=\"variable\">$WILDFLY_HOME</span>/wildfly</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> cp /usr/src/myapp/target/people-1.0-SNAPSHOT.war <span class=\"variable\">$WILDFLY_HOME</span>/wildfly/standalone/deployments/people.war</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">EXPOSE</span> <span class=\"number\">8080</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;/usr/wildfly/bin/standalone.sh&quot;</span>, <span class=\"string\">&quot;-b&quot;</span>, <span class=\"string\">&quot;0.0.0.0&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p>&#x7531;Dockerfile&#x53EF;&#x77E5;:</p>\n<ul>\n<li><code>maven:3.5-jdk-8</code> &#x662F;&#x57FA;&#x7840;&#x955C;&#x50CF;</li>\n<li>&#x5C06;&#x6E90;&#x4EE3;&#x7801;&#x62F7;&#x8D1D;&#x5230;&#x955C;&#x50CF;&#x4E2D;</li>\n<li>Maven&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5E94;&#x7528;</li>\n<li>&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;WildFly</li>\n<li>&#x5C06;&#x751F;&#x6210;&#x7684;.war&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;WildFly&#x7684;<code>deployments</code>&#x76EE;&#x5F55;</li>\n<li>&#x542F;&#x52A8;WildFly</li>\n</ul>\n<p>&#x8FD9;&#x4E2A;Dockefile&#x5B58;&#x5728;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF1A;</p>\n<ul>\n<li>&#x4F7F;&#x7528;<code>Maven</code>&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x8BDD;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;WildFly&#x3002;</li>\n<li>&#x6784;&#x5EFA;&#x5E94;&#x7528;&#x65F6;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5F88;&#x591A;Maven&#x4F9D;&#x8D56;&#xFF0C;&#x5B83;&#x4EEC;&#x4F1A;&#x7EE7;&#x7EED;&#x7559;&#x5728;&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x8FD0;&#x884C;&#x5E94;&#x7528;&#x65F6;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5B83;&#x4EEC;&#x3002;&#x8FD9;&#x5BFC;&#x81F4;&#x4E86;&#x955C;&#x50CF;&#x8FC7;&#x5927;&#x3002;</li>\n<li>&#x4FEE;&#x6539;WildFly&#x7248;&#x672C;&#x5219;&#x9700;&#x8981;&#x4FEE;&#x6539;Dockerfile&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x3002;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;WildFly&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x60C5;&#x51B5;&#x4F1A;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x3002;</li>\n<li>&#x6253;&#x5305;&#x5E94;&#x7528;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x6D4B;&#x8BD5;&#x7684;&#x4F9D;&#x8D56;&#x4E5F;&#x9700;&#x8981;&#x7559;&#x5728;&#x751F;&#x6210;&#x7684;&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x662F;&#x6CA1;&#x5FC5;&#x8981;&#x7684;&#x3002;</li>\n</ul>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;Dockerfile&#x62C6;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;Dockerfile&#x4EE5;Maven&#x955C;&#x50CF;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5E94;&#x7528;&#xFF0C;&#x5E76;&#x5C06;&#x6784;&#x5EFA;&#x597D;&#x7684;.war&#x6587;&#x4EF6;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5377;(volume)&#x590D;&#x5236;&#x5230;&#x5171;&#x4EAB;&#x7684;&#x76EE;&#x5F55;&#xFF1B;&#x7B2C;&#x4E8C;&#x4E2A;Dockerfile&#x4EE5;WildFly&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x5377;&#x5C06;.war&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x51FA;&#x6765;&#x5C31;&#x597D;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x6709;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x7EF4;&#x62A4;&#x591A;&#x4E2A;Dockerfile&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5377;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x4E5F;&#x4E0D;&#x65B9;&#x4FBF;&#x3002;</p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;</h3><p>&#x591A;&#x6B65;&#x6784;&#x5EFA;(multi-stage build)&#x5141;&#x8BB8;&#x5728;Dockerfile&#x4E2D;&#x4F7F;&#x7528;&#x591A;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#x3002;&#x4E24;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#x4E4B;&#x95F4;&#x7684;&#x6240;&#x6709;&#x6307;&#x4EE4;&#x4F1A;&#x751F;&#x4EA7;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#x4E4B;&#x540E;&#x7684;&#x6307;&#x4EE4;&#x5C06;&#x751F;&#x6210;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x3002;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>COPY --from=&lt;image-number&gt;</code>&#x6307;&#x4EE4;&#x62F7;&#x8D1D;&#xFF0C;&#x5176;&#x4E2D;image-number&#x4E3A;&#x955C;&#x50CF;&#x7F16;&#x53F7;&#xFF0C;0&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x3002;&#x6CA1;&#x6709;&#x88AB;&#x62F7;&#x8D1D;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x4E0D;&#x4F1A;&#x5B58;&#x5728;&#x4E8E;&#x6700;&#x7EC8;&#x751F;&#x6210;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x51CF;&#x5C0F;&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x3002;</p>\n<p><code>FROM</code>&#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>as &lt;stage-name&gt;</code>&#x6765;&#x6307;&#x5B9A;&#x6B65;&#x9AA4;&#x540D;&#x79F0;(stage name):</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> maven:<span class=\"number\">3.5</span>-jdk-<span class=\"number\">8</span> as BUILD</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;COPY&#x6307;&#x4EE4;&#x7684;<code>--from</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#x540D;&#x79F0;&#x4EE3;&#x66FF;&#x955C;&#x50CF;&#x7F16;&#x53F7;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x4E3A;&#x793A;&#x4F8B;Dockerfile:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> maven:<span class=\"number\">3.5</span>-jdk-<span class=\"number\">8</span> as BUILD</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> src /usr/src/myapp/src</span></div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> pom.xml /usr/src/myapp</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> mvn <span class=\"_\">-f</span> /usr/src/myapp/pom.xml clean package</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">FROM</span> jboss/wildfly:<span class=\"number\">10.1</span>.<span class=\"number\">0</span>.Final</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> --from=BUILD /usr/src/myapp/target/people-1.0-SNAPSHOT.war /opt/jboss/wildfly/standalone/deployments/people.war</span></div></pre></td></tr></table></figure>\n<p>&#x7531;Dockerfile&#x53EF;&#x77E5;:</p>\n<ul>\n<li>&#x4E00;&#x5171;&#x6709;&#x4E24;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#xFF0C;&#x56E0;&#x6B64;&#x4E3A;&#x4E24;&#x6B65;&#x6784;&#x5EFA;&#x3002;</li>\n<li><code>maven:3.5-jdk-8</code> &#x662F;&#x7B2C;&#x4E00;&#x6B65;&#x6784;&#x5EFA;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5E94;&#x7528;&#x7684;WAR&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x7684;&#x540D;&#x79F0;&#x4E3A;<code>build</code>&#x3002;</li>\n<li><code>jboss/wildfly:10.1.0.Final</code> &#x662F;&#x7B2C;&#x4E8C;&#x6B65;&#x6784;&#x5EFA;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x3002;&#x7B2C;&#x4E00;&#x6B65;&#x6784;&#x5EFA;&#x7684;WAR&#x6587;&#x4EF6;&#x901A;&#x8FC7;<code>COPY --from</code>&#x6307;&#x4EE4;&#x62F7;&#x8D1D;&#x5230;WildFly&#x7684;<code>deloyments</code>&#x76EE;&#x5F55;&#x3002;</li>\n</ul>\n<h3 id=\"Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;\"><a href=\"#Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;\" class=\"headerlink\" title=\"Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;\"></a>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;</h3><ul>\n<li>&#x4EC5;&#x9700;&#x8981;&#x4E00;&#x4E2A;Dockerfile&#x6765;&#x5B9A;&#x4E49;&#x6574;&#x4E2A;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;Dockerfile&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5377;&#x6765;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x3002;</li>\n<li>&#x53EF;&#x4EE5;&#x4E3A;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x6765;&#x6EE1;&#x8DB3;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x51CF;&#x5C0F;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6784;&#x5EFA;&#x6B65;&#x9AA4;&#x7684;&#x591A;&#x4F59;&#x6587;&#x4EF6;&#x90FD;&#x88AB;&#x4E22;&#x5F03;&#x4E86;&#x3002;</li>\n<li>&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x7684;WildFly&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x751F;&#x4EA7;&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x624B;&#x52A8;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;WildFly&#x3002;&#x8FD9;&#x6837;&#xFF0C;WildFly&#x5347;&#x7EA7;&#x65F6;&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;</li>\n</ul>\n<p><strong>&#x6CE8;&#xFF1A;</strong>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x8FD8;&#x6CA1;&#x6709;&#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>curl -fsSL https://test.docker.com/ | sh</code>&#x547D;&#x4EE4;&#x5B89;&#x88C5;&#x6700;&#x65B0;&#x7684;&#x6D4B;&#x8BD5;&#x7248;Docker&#x8BD5;&#x7528;&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x7B2C;&#x4E00;&#x4E2A;Dockerfile&#x6784;&#x5EFA;&#x7684;&#x955C;&#x50CF;&#x4E3A;816MB&#xFF0C;&#x800C;&#x4F7F;&#x7528;&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x7684;&#x8BDD;&#xFF0C;&#x955C;&#x50CF;&#x53EA;&#x6709;584MB&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker-java-multistage $ docker images</div><div class=\"line\">REPOSITORY                          TAG                 IMAGE ID            CREATED             SIZE</div><div class=\"line\">people                              multistage          d36a4b82ad87        59 seconds ago      584MB</div><div class=\"line\">people                              singlestage         13dbcf8f54f6        5 minutes ago       816MB</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4F7F;&#x7528;&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x51CF;&#x5C0F;&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x3002;</p>\n<p>&#x67E5;&#x770B;<a href=\"https://github.com/moby/moby/pull/31257\" target=\"_blank\" rel=\"external\">PR #31257</a>&#xFF0C;&#x6709;&#x66F4;&#x52A0;&#x8BE6;&#x7EC6;&#x7684;&#x8BA8;&#x8BBA;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/05/02/about-docker-sock/docker.JPG\"><br></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","excerpt":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x6700;&#x65B0;&#x7248;Docker&#x5C06;&#x652F;&#x6301;&#x591A;&#x6B65;&#x6784;&#x5EFA;(Multi-stage build)&#xFF0C;&#x8FD9;&#x6837;&#x4F7F;&#x7528;&#x5355;&#x4E2A;Dockerfile&#x5C31;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#xFF0C;&#x6D4B;&#x8BD5;&#x4EE5;&#x53CA;&#x53D1;&#x5E03;&#x7B49;&#x591A;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x6548;&#x51CF;&#x5C0F;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>","more":"<p>&#x539F;&#x6587;: <a href=\"http://blog.arungupta.me/smaller-java-image-docker-multi-stage-build/\">Creating Smaller Java Image using Docker Multi-stage Build</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p><strong>Github&#x4ED3;&#x5E93;:</strong> <a href=\"https://github.com/arun-gupta/docker-java-multistage\">arun-gupta/docker-java-multistage</a></p>\n<p><a href=\"http://2017.dockercon.com/\">DockerCon 2017</a>&#x4E2D;&#x4E0E;Java&#x5F00;&#x53D1;&#x8005;&#x76F4;&#x63A5;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#x6709;:</p>\n<ul>\n<li>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;(Docker Multi-stage build)</li>\n<li><a href=\"https://blogs.oracle.com/developers/official-docker-image-for-oracle-java-and-the-openjdk-roadmap-for-containers\">Oracle JRE in Docker Store</a></li>\n</ul>\n<p>&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4ECB;&#x7ECD;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;<strong>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;(Docker Multi-stage build)</strong>&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#x5C55;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x66F4;&#x5C0F;&#x7684;Java&#x955C;&#x50CF;&#x3002;</p>\n<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;?\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x591A;&#x6B65;&#x6784;&#x5EFA;?</h3><p>&#x4E3A;Java&#x5E94;&#x7528;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#x610F;&#x5473;&#x7740;&#x7F16;&#x8BD1;&#x6E90;&#x4EE3;&#x7801;&#x4EE5;&#x53CA;&#x6253;&#x5305;&#x76EE;&#x6807;&#x4EE3;&#x7801;&#x3002;&#x5F00;&#x53D1;&#x8005;&#x901A;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;Maven&#x6216;&#x8005;Gradle&#x6765;&#x6784;&#x5EFA;JAR&#x6216;WAR&#x6587;&#x4EF6;&#x3002;&#x82E5;&#x4F7F;&#x7528;Maven&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x6765;&#x6784;&#x5EFA;Java&#x5E94;&#x7528;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x6240;&#x6709;Maven&#x4F9D;&#x8D56;&#x3002;&#x4E0B;&#x8F7D;&#x7684;JAR&#x5305;&#x6570;&#x76EE;&#x7531;<code>pm.xml</code>&#x51B3;&#x5B9A;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x975E;&#x5E38;&#x591A;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x751F;&#x6210;&#x7684;Docker&#x955C;&#x50CF;&#x4E2D;&#x5C06;&#x7559;&#x4E0B;&#x592A;&#x591A;&#x591A;&#x4F59;&#x7684;&#x6587;&#x4EF6;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x4E3A;&#x793A;&#x4F8B;Dockerfile:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> maven:<span class=\"number\">3.5</span>-jdk-<span class=\"number\">8</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> src /usr/src/myapp/src</span></div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> pom.xml /usr/src/myapp</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> mvn <span class=\"_\">-f</span> /usr/src/myapp/pom.xml clean package</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">ENV</span> WILDFLY_VERSION <span class=\"number\">10.1</span>.<span class=\"number\">0</span>.Final</div><div class=\"line\"><span class=\"keyword\">ENV</span> WILDFLY_HOME /usr</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> <span class=\"built_in\">cd</span> <span class=\"variable\">$WILDFLY_HOME</span> &amp;&amp; curl http://download.jboss.org/wildfly/<span class=\"variable\">$WILDFLY_VERSION</span>/wildfly-<span class=\"variable\">$WILDFLY_VERSION</span>.tar.gz | tar zx &amp;&amp; mv <span class=\"variable\">$WILDFLY_HOME</span>/wildfly-<span class=\"variable\">$WILDFLY_VERSION</span> <span class=\"variable\">$WILDFLY_HOME</span>/wildfly</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> cp /usr/src/myapp/target/people-1.0-SNAPSHOT.war <span class=\"variable\">$WILDFLY_HOME</span>/wildfly/standalone/deployments/people.war</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">EXPOSE</span> <span class=\"number\">8080</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> [<span class=\"string\">&quot;/usr/wildfly/bin/standalone.sh&quot;</span>, <span class=\"string\">&quot;-b&quot;</span>, <span class=\"string\">&quot;0.0.0.0&quot;</span>]</span></div></pre></td></tr></table></figure>\n<p>&#x7531;Dockerfile&#x53EF;&#x77E5;:</p>\n<ul>\n<li><code>maven:3.5-jdk-8</code> &#x662F;&#x57FA;&#x7840;&#x955C;&#x50CF;</li>\n<li>&#x5C06;&#x6E90;&#x4EE3;&#x7801;&#x62F7;&#x8D1D;&#x5230;&#x955C;&#x50CF;&#x4E2D;</li>\n<li>Maven&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5E94;&#x7528;</li>\n<li>&#x4E0B;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;WildFly</li>\n<li>&#x5C06;&#x751F;&#x6210;&#x7684;.war&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;WildFly&#x7684;<code>deployments</code>&#x76EE;&#x5F55;</li>\n<li>&#x542F;&#x52A8;WildFly</li>\n</ul>\n<p>&#x8FD9;&#x4E2A;Dockefile&#x5B58;&#x5728;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF1A;</p>\n<ul>\n<li>&#x4F7F;&#x7528;<code>Maven</code>&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x7684;&#x8BDD;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;WildFly&#x3002;</li>\n<li>&#x6784;&#x5EFA;&#x5E94;&#x7528;&#x65F6;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x5F88;&#x591A;Maven&#x4F9D;&#x8D56;&#xFF0C;&#x5B83;&#x4EEC;&#x4F1A;&#x7EE7;&#x7EED;&#x7559;&#x5728;&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x8FD0;&#x884C;&#x5E94;&#x7528;&#x65F6;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5B83;&#x4EEC;&#x3002;&#x8FD9;&#x5BFC;&#x81F4;&#x4E86;&#x955C;&#x50CF;&#x8FC7;&#x5927;&#x3002;</li>\n<li>&#x4FEE;&#x6539;WildFly&#x7248;&#x672C;&#x5219;&#x9700;&#x8981;&#x4FEE;&#x6539;Dockerfile&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x3002;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;WildFly&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x60C5;&#x51B5;&#x4F1A;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x3002;</li>\n<li>&#x6253;&#x5305;&#x5E94;&#x7528;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x6D4B;&#x8BD5;&#x7684;&#x4F9D;&#x8D56;&#x4E5F;&#x9700;&#x8981;&#x7559;&#x5728;&#x751F;&#x6210;&#x7684;&#x955C;&#x50CF;&#x4E2D;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x662F;&#x6CA1;&#x5FC5;&#x8981;&#x7684;&#x3002;</li>\n</ul>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;Dockerfile&#x62C6;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;Dockerfile&#x4EE5;Maven&#x955C;&#x50CF;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5E94;&#x7528;&#xFF0C;&#x5E76;&#x5C06;&#x6784;&#x5EFA;&#x597D;&#x7684;.war&#x6587;&#x4EF6;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5377;(volume)&#x590D;&#x5236;&#x5230;&#x5171;&#x4EAB;&#x7684;&#x76EE;&#x5F55;&#xFF1B;&#x7B2C;&#x4E8C;&#x4E2A;Dockerfile&#x4EE5;WildFly&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x5377;&#x5C06;.war&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x51FA;&#x6765;&#x5C31;&#x597D;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x6709;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x7EF4;&#x62A4;&#x591A;&#x4E2A;Dockerfile&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5377;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x4E5F;&#x4E0D;&#x65B9;&#x4FBF;&#x3002;</p>\n<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#xFF1F;</h3><p>&#x591A;&#x6B65;&#x6784;&#x5EFA;(multi-stage build)&#x5141;&#x8BB8;&#x5728;Dockerfile&#x4E2D;&#x4F7F;&#x7528;&#x591A;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#x3002;&#x4E24;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#x4E4B;&#x95F4;&#x7684;&#x6240;&#x6709;&#x6307;&#x4EE4;&#x4F1A;&#x751F;&#x4EA7;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#x4E4B;&#x540E;&#x7684;&#x6307;&#x4EE4;&#x5C06;&#x751F;&#x6210;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x3002;&#x4E2D;&#x95F4;&#x955C;&#x50CF;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>COPY --from=&lt;image-number&gt;</code>&#x6307;&#x4EE4;&#x62F7;&#x8D1D;&#xFF0C;&#x5176;&#x4E2D;image-number&#x4E3A;&#x955C;&#x50CF;&#x7F16;&#x53F7;&#xFF0C;0&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x3002;&#x6CA1;&#x6709;&#x88AB;&#x62F7;&#x8D1D;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x4E0D;&#x4F1A;&#x5B58;&#x5728;&#x4E8E;&#x6700;&#x7EC8;&#x751F;&#x6210;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x51CF;&#x5C0F;&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x3002;</p>\n<p><code>FROM</code>&#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>as &lt;stage-name&gt;</code>&#x6765;&#x6307;&#x5B9A;&#x6B65;&#x9AA4;&#x540D;&#x79F0;(stage name):</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> maven:<span class=\"number\">3.5</span>-jdk-<span class=\"number\">8</span> as BUILD</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;COPY&#x6307;&#x4EE4;&#x7684;<code>--from</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#x540D;&#x79F0;&#x4EE3;&#x66FF;&#x955C;&#x50CF;&#x7F16;&#x53F7;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x4E3A;&#x793A;&#x4F8B;Dockerfile:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">FROM</span> maven:<span class=\"number\">3.5</span>-jdk-<span class=\"number\">8</span> as BUILD</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> src /usr/src/myapp/src</span></div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> pom.xml /usr/src/myapp</span></div><div class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> mvn <span class=\"_\">-f</span> /usr/src/myapp/pom.xml clean package</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">FROM</span> jboss/wildfly:<span class=\"number\">10.1</span>.<span class=\"number\">0</span>.Final</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> --from=BUILD /usr/src/myapp/target/people-1.0-SNAPSHOT.war /opt/jboss/wildfly/standalone/deployments/people.war</span></div></pre></td></tr></table></figure>\n<p>&#x7531;Dockerfile&#x53EF;&#x77E5;:</p>\n<ul>\n<li>&#x4E00;&#x5171;&#x6709;&#x4E24;&#x4E2A;<code>FROM</code>&#x6307;&#x4EE4;&#xFF0C;&#x56E0;&#x6B64;&#x4E3A;&#x4E24;&#x6B65;&#x6784;&#x5EFA;&#x3002;</li>\n<li><code>maven:3.5-jdk-8</code> &#x662F;&#x7B2C;&#x4E00;&#x6B65;&#x6784;&#x5EFA;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5E94;&#x7528;&#x7684;WAR&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x7684;&#x540D;&#x79F0;&#x4E3A;<code>build</code>&#x3002;</li>\n<li><code>jboss/wildfly:10.1.0.Final</code> &#x662F;&#x7B2C;&#x4E8C;&#x6B65;&#x6784;&#x5EFA;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x3002;&#x7B2C;&#x4E00;&#x6B65;&#x6784;&#x5EFA;&#x7684;WAR&#x6587;&#x4EF6;&#x901A;&#x8FC7;<code>COPY --from</code>&#x6307;&#x4EE4;&#x62F7;&#x8D1D;&#x5230;WildFly&#x7684;<code>deloyments</code>&#x76EE;&#x5F55;&#x3002;</li>\n</ul>\n<h3 id=\"Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;\"><a href=\"#Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;\" class=\"headerlink\" title=\"Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;\"></a>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF1F;</h3><ul>\n<li>&#x4EC5;&#x9700;&#x8981;&#x4E00;&#x4E2A;Dockerfile&#x6765;&#x5B9A;&#x4E49;&#x6574;&#x4E2A;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;Dockerfile&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5377;&#x6765;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x3002;</li>\n<li>&#x53EF;&#x4EE5;&#x4E3A;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x6765;&#x6EE1;&#x8DB3;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x51CF;&#x5C0F;&#x6700;&#x7EC8;&#x955C;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6784;&#x5EFA;&#x6B65;&#x9AA4;&#x7684;&#x591A;&#x4F59;&#x6587;&#x4EF6;&#x90FD;&#x88AB;&#x4E22;&#x5F03;&#x4E86;&#x3002;</li>\n<li>&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x7684;WildFly&#x955C;&#x50CF;&#x4F5C;&#x4E3A;&#x751F;&#x4EA7;&#x955C;&#x50CF;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x624B;&#x52A8;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;WildFly&#x3002;&#x8FD9;&#x6837;&#xFF0C;WildFly&#x5347;&#x7EA7;&#x65F6;&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;</li>\n</ul>\n<p><strong>&#x6CE8;&#xFF1A;</strong>Docker&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x8FD8;&#x6CA1;&#x6709;&#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>curl -fsSL https://test.docker.com/ | sh</code>&#x547D;&#x4EE4;&#x5B89;&#x88C5;&#x6700;&#x65B0;&#x7684;&#x6D4B;&#x8BD5;&#x7248;Docker&#x8BD5;&#x7528;&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x7B2C;&#x4E00;&#x4E2A;Dockerfile&#x6784;&#x5EFA;&#x7684;&#x955C;&#x50CF;&#x4E3A;816MB&#xFF0C;&#x800C;&#x4F7F;&#x7528;&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x7684;&#x8BDD;&#xFF0C;&#x955C;&#x50CF;&#x53EA;&#x6709;584MB&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker-java-multistage $ docker images</div><div class=\"line\">REPOSITORY                          TAG                 IMAGE ID            CREATED             SIZE</div><div class=\"line\">people                              multistage          d36a4b82ad87        59 seconds ago      584MB</div><div class=\"line\">people                              singlestage         13dbcf8f54f6        5 minutes ago       816MB</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4F7F;&#x7528;&#x591A;&#x6B65;&#x6784;&#x5EFA;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x51CF;&#x5C0F;&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x3002;</p>\n<p>&#x67E5;&#x770B;<a href=\"https://github.com/moby/moby/pull/31257\">PR #31257</a>&#xFF0C;&#x6709;&#x66F4;&#x52A0;&#x8BE6;&#x7EC6;&#x7684;&#x8BA8;&#x8BBA;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/05/02/about-docker-sock/docker.JPG\"><br></div>"},{"title":"Node","date":"2017-04-25T13:00:00.000Z","_content":"\n**:** Node.jsNode\n\n\n<!-- more -->\n\n- : [Mastering the Node.js CLI & Command Line Options](https://blog.risingstack.com/mastering-the-node-js-cli-command-line-options/)\n- : [Fundebug](https://fundebug.com/)\n\n****\n\nNodeNode\n\n### Node\n\n**man**Node:\n\n```bash\n$ man node\n\nUsage: node [options] [ -e script | script.js ] [arguments]  \n       node debug script.js [arguments] \n\nOptions:  \n  -v, --version         print Node.js version\n  -e, --eval script     evaluate script\n  -p, --print           evaluate script and print result\n  -c, --check           syntax check script without executing\n...\n```\n\nUsage\n\n**index.js**:\n\n```javascript\nconsole.log(new Buffer(100))  \n```\n\n`--zero-fill-buffers`Buffer0:\n\n```bash\n--zero-fill-buffers\n              Automatically zero-fills all newly allocated Buffer and SlowBuffer instances.\n```\n\n`--zero-fill-buffers`\n\n```bash\n$ node --zero-fill-buffers index.js\n```\n\n0:\n\n```tex\n<Buffer 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... >  \n```\n\n### Node\n\n#### `--version`  `-v`\n\n `node --version` `node -v`Node`-v``--version`\n\n```bash\n$ node -v\nv6.10.0  \n```\n\n#### `--eval`  `-e`\n\n`--eval` Node.jsREPL`http`  `fs`require\n\n```bash\n$ node -e 'console.log(3 + 2)'\n5  \n```\n\n#### `--print`  `-p`\n\n`--print``--eval``--print``--eval``console.log`\n\n```bash\n$ node -p '3 + 2'\n5  \n```\n\n#### `--check` `-c`\n\n**Node v4.2.0**\n\n`--check`()\n\n**index.js**:\n\n```javascript\nconsole.log(new Buffer(100)  \n```\n\n`)``node index.js`:\n\n```bash\n/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1\n(function (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)\n                                                                                        ^\nSyntaxError: missing ) after argument list  \n    at Object.exports.runInThisContext (vm.js:76:16)\n    at Module._compile (module.js:542:28)\n    at Object.Module._extensions..js (module.js:579:10)\n    at Module.load (module.js:487:32)\n    at tryModuleLoad (module.js:446:12)\n    at Function.Module._load (module.js:438:3)\n    at Module.runMain (module.js:604:10)\n    at run (bootstrap_node.js:394:7)\n```\n\n`node --check index.js`**`--check`(stack trace)**:\n\n```bash\n/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1\n(function (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)\n                                                                                        ^\nSyntaxError: missing ) after argument list  \n    at startup (bootstrap_node.js:144:11)\n    at bootstrap_node.js:509:3\n```\n\n#### `--inspect[=host:port]`\n\n**node v6.3.0**\n\n`node --inspect`(host)(port)`127.0.0.1:9229`Chrome([Chrome Debugging Protocol](https://chromedevtools.github.io/debugger-protocol-viewer/))Node.js\n\n#### `--inspect-brk[=host:port]`\n\n**node v7.6.0**\n\n`--inspect-brk``--inspect`\n\n```bash\n$ node --inspect-brk index.js \nDebugger listening on port 9229.  \nWarning: This is an experimental feature and could change at any time.  \nTo start debugging, open the following URL in Chrome:  \n    chrome-devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813\n```\n\nChromeURL[chrome-devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813](chrome-devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813)Node.js\n\n#### `--zero-fill-buffers`\n\n**node v6.0.0**\n\n`--zero-fill-buffers`Buffer0 \n\n\n\n> Buffernode v6.0.0\n>\n> Also note, that some Buffer constructors got deprecated in `v6.0.0`:\n>\n> - `new Buffer(array)`\n> - `new Buffer(arrayBuffer[, byteOffset [, length]])`\n> - `new Buffer(buffer)`\n> - `new Buffer(size)`\n> - `new Buffer(string[, encoding])`\n>\n>  `Buffer.alloc(size[, fill[, encoding]])`, `Buffer.from(array)`, `Buffer.from(buffer)`, `Buffer.from(arrayBuffer[, byteOffset[, length]])`  `Buffer.from(string[, encoding])`.\n\nNode.js[Exploiting Buffer](https://snyk.io/blog/exploiting-buffer/)\n\n#### `--prof-process`\n\n `--prof-process`Node.jsV8(profiler)\n\n`--prof`:\n\n```bash\nnode --prof index.js  \n```\n\n`isolate-`\n\n`--prof-process`:\n\n```bash\nnode --prof-process isolate-0x102001600-v8.log > output.txt  \n```\n\n**output.txt**V8: C++JavaScript:\n\n```bash\n[C++]:\n   ticks  total  nonlib   name\n     16   18.4%   18.4%  node::ContextifyScript::New(v8::FunctionCallbackInfo<v8::Value> const&)\n      4    4.6%    4.6%  ___mkdir_extended\n      2    2.3%    2.3%  void v8::internal::String::WriteToFlat<unsigned short>(v8::internal::String*, unsigned short*, int, int)\n      2    2.3%    2.3%  void v8::internal::ScavengingVisitor<(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0>::ObjectEvacuationStrategy<(v8::internal::ScavengingVisitor<(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0>::ObjectContents)1>::VisitSpecialized<24>(v8::internal::Map*, v8::internal::HeapObject**, v8::internal::HeapObject*)\n\n[Summary]:\n   ticks  total  nonlib   name\n      1    1.1%    1.1%  JavaScript\n     70   80.5%   80.5%  C++\n      5    5.7%    5.7%  GC\n      0    0.0%          Shared libraries\n     16   18.4%          Unaccounted\n```\n\n[](https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_command_line_options)Node\n\n------\n\n### V8\n\n`--v8-options`V8\n\n> V8V8\n\n#### `--harmony`\n\n`--harmony`harmony(NodeES6)\n\n#### `--max_old_space_size`\n\n`--max_old_space_size`(old space)Node.jsNode.js\n\n#### `--optimize_for_size`\n\n`--optimize_for_size`V8\n\n### \n\n#### `NODE_DEBUG=module[,]`\n\n**NODE_DEBUG**Node.js**module**(http, fs):\n\n```bash\n$ NODE_DEBUG=module node index.js\n```\n\n(module):\n\n```\nMODULE 7595: looking for \"/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js\" in [\"/Users/gergelyke/.node_modules\",\"/Users/gergelyke/.node_libraries\",\"/Users/gergelyke/.nvm/versions/node/v6.10.0/lib/node\"]  \nMODULE 7595: load \"/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js\" for module \".\"  \n```\n\n#### `NODE_PATH=path`\n\n**NODE_PATH**Node.js\n\n#### `OPENSSL_CONF=file`\n\n**OPENSSL_CONF**OpenSSL\n\n[](https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_environment_variables)Node\n\n[Fundebug](https://fundebug.com/)**Node.js: 177654062**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"node-command-option/nodejs-qq-group.jpeg\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/04/25/node-command-option.md","raw":"---\ntitle: Node\n\ndate: 2017-04-25 21:00:00\n\ntags: [Node.js, ]\n---\n\n**:** Node.jsNode\n\n\n<!-- more -->\n\n- : [Mastering the Node.js CLI & Command Line Options](https://blog.risingstack.com/mastering-the-node-js-cli-command-line-options/)\n- : [Fundebug](https://fundebug.com/)\n\n****\n\nNodeNode\n\n### Node\n\n**man**Node:\n\n```bash\n$ man node\n\nUsage: node [options] [ -e script | script.js ] [arguments]  \n       node debug script.js [arguments] \n\nOptions:  \n  -v, --version         print Node.js version\n  -e, --eval script     evaluate script\n  -p, --print           evaluate script and print result\n  -c, --check           syntax check script without executing\n...\n```\n\nUsage\n\n**index.js**:\n\n```javascript\nconsole.log(new Buffer(100))  \n```\n\n`--zero-fill-buffers`Buffer0:\n\n```bash\n--zero-fill-buffers\n              Automatically zero-fills all newly allocated Buffer and SlowBuffer instances.\n```\n\n`--zero-fill-buffers`\n\n```bash\n$ node --zero-fill-buffers index.js\n```\n\n0:\n\n```tex\n<Buffer 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... >  \n```\n\n### Node\n\n#### `--version`  `-v`\n\n `node --version` `node -v`Node`-v``--version`\n\n```bash\n$ node -v\nv6.10.0  \n```\n\n#### `--eval`  `-e`\n\n`--eval` Node.jsREPL`http`  `fs`require\n\n```bash\n$ node -e 'console.log(3 + 2)'\n5  \n```\n\n#### `--print`  `-p`\n\n`--print``--eval``--print``--eval``console.log`\n\n```bash\n$ node -p '3 + 2'\n5  \n```\n\n#### `--check` `-c`\n\n**Node v4.2.0**\n\n`--check`()\n\n**index.js**:\n\n```javascript\nconsole.log(new Buffer(100)  \n```\n\n`)``node index.js`:\n\n```bash\n/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1\n(function (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)\n                                                                                        ^\nSyntaxError: missing ) after argument list  \n    at Object.exports.runInThisContext (vm.js:76:16)\n    at Module._compile (module.js:542:28)\n    at Object.Module._extensions..js (module.js:579:10)\n    at Module.load (module.js:487:32)\n    at tryModuleLoad (module.js:446:12)\n    at Function.Module._load (module.js:438:3)\n    at Module.runMain (module.js:604:10)\n    at run (bootstrap_node.js:394:7)\n```\n\n`node --check index.js`**`--check`(stack trace)**:\n\n```bash\n/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1\n(function (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)\n                                                                                        ^\nSyntaxError: missing ) after argument list  \n    at startup (bootstrap_node.js:144:11)\n    at bootstrap_node.js:509:3\n```\n\n#### `--inspect[=host:port]`\n\n**node v6.3.0**\n\n`node --inspect`(host)(port)`127.0.0.1:9229`Chrome([Chrome Debugging Protocol](https://chromedevtools.github.io/debugger-protocol-viewer/))Node.js\n\n#### `--inspect-brk[=host:port]`\n\n**node v7.6.0**\n\n`--inspect-brk``--inspect`\n\n```bash\n$ node --inspect-brk index.js \nDebugger listening on port 9229.  \nWarning: This is an experimental feature and could change at any time.  \nTo start debugging, open the following URL in Chrome:  \n    chrome-devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813\n```\n\nChromeURL[chrome-devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813](chrome-devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813)Node.js\n\n#### `--zero-fill-buffers`\n\n**node v6.0.0**\n\n`--zero-fill-buffers`Buffer0 \n\n\n\n> Buffernode v6.0.0\n>\n> Also note, that some Buffer constructors got deprecated in `v6.0.0`:\n>\n> - `new Buffer(array)`\n> - `new Buffer(arrayBuffer[, byteOffset [, length]])`\n> - `new Buffer(buffer)`\n> - `new Buffer(size)`\n> - `new Buffer(string[, encoding])`\n>\n>  `Buffer.alloc(size[, fill[, encoding]])`, `Buffer.from(array)`, `Buffer.from(buffer)`, `Buffer.from(arrayBuffer[, byteOffset[, length]])`  `Buffer.from(string[, encoding])`.\n\nNode.js[Exploiting Buffer](https://snyk.io/blog/exploiting-buffer/)\n\n#### `--prof-process`\n\n `--prof-process`Node.jsV8(profiler)\n\n`--prof`:\n\n```bash\nnode --prof index.js  \n```\n\n`isolate-`\n\n`--prof-process`:\n\n```bash\nnode --prof-process isolate-0x102001600-v8.log > output.txt  \n```\n\n**output.txt**V8: C++JavaScript:\n\n```bash\n[C++]:\n   ticks  total  nonlib   name\n     16   18.4%   18.4%  node::ContextifyScript::New(v8::FunctionCallbackInfo<v8::Value> const&)\n      4    4.6%    4.6%  ___mkdir_extended\n      2    2.3%    2.3%  void v8::internal::String::WriteToFlat<unsigned short>(v8::internal::String*, unsigned short*, int, int)\n      2    2.3%    2.3%  void v8::internal::ScavengingVisitor<(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0>::ObjectEvacuationStrategy<(v8::internal::ScavengingVisitor<(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0>::ObjectContents)1>::VisitSpecialized<24>(v8::internal::Map*, v8::internal::HeapObject**, v8::internal::HeapObject*)\n\n[Summary]:\n   ticks  total  nonlib   name\n      1    1.1%    1.1%  JavaScript\n     70   80.5%   80.5%  C++\n      5    5.7%    5.7%  GC\n      0    0.0%          Shared libraries\n     16   18.4%          Unaccounted\n```\n\n[](https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_command_line_options)Node\n\n------\n\n### V8\n\n`--v8-options`V8\n\n> V8V8\n\n#### `--harmony`\n\n`--harmony`harmony(NodeES6)\n\n#### `--max_old_space_size`\n\n`--max_old_space_size`(old space)Node.jsNode.js\n\n#### `--optimize_for_size`\n\n`--optimize_for_size`V8\n\n### \n\n#### `NODE_DEBUG=module[,]`\n\n**NODE_DEBUG**Node.js**module**(http, fs):\n\n```bash\n$ NODE_DEBUG=module node index.js\n```\n\n(module):\n\n```\nMODULE 7595: looking for \"/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js\" in [\"/Users/gergelyke/.node_modules\",\"/Users/gergelyke/.node_libraries\",\"/Users/gergelyke/.nvm/versions/node/v6.10.0/lib/node\"]  \nMODULE 7595: load \"/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js\" for module \".\"  \n```\n\n#### `NODE_PATH=path`\n\n**NODE_PATH**Node.js\n\n#### `OPENSSL_CONF=file`\n\n**OPENSSL_CONF**OpenSSL\n\n[](https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_environment_variables)Node\n\n[Fundebug](https://fundebug.com/)**Node.js: 177654062**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"node-command-option/nodejs-qq-group.jpeg\" />\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"2017/04/25/node-command-option","published":1,"updated":"2017-04-25T12:34:50.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgto2002571fywxhjxrfx","content":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x4F5C;&#x4E3A;Node.js&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x6709;&#x5FC5;&#x8981;&#x5168;&#x9762;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x5173;&#x952E;&#x65F6;&#x523B;&#x624D;&#x80FD;&#x5F97;&#x5FC3;&#x5E94;&#x624B;&#x3002;</p>\n<a id=\"more\"></a>\n<ul>\n<li>&#x539F;&#x6587;: <a href=\"https://blog.risingstack.com/mastering-the-node-js-cli-command-line-options/\" target=\"_blank\" rel=\"external\">Mastering the Node.js CLI &amp; Command Line Options</a></li>\n<li>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a></li>\n</ul>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>Node&#x547D;&#x4EE4;&#x6709;&#x5F88;&#x591A;&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8C03;&#x8BD5;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5168;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;Node&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5927;&#x5BB6;&#x7684;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x3002;</p>\n<h3 id=\"&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;\"><a href=\"#&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;\" class=\"headerlink\" title=\"&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;\"></a>&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;</h3><p>&#x4F7F;&#x7528;<strong>man</strong>&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ man node</div><div class=\"line\"></div><div class=\"line\">Usage: node [options] [ <span class=\"_\">-e</span> script | script.js ] [arguments]  </div><div class=\"line\">       node debug script.js [arguments] </div><div class=\"line\"></div><div class=\"line\">Options:  </div><div class=\"line\">  -v, --version         <span class=\"built_in\">print</span> Node.js version</div><div class=\"line\">  <span class=\"_\">-e</span>, --eval script     evaluate script</div><div class=\"line\">  -p, --print           evaluate script and <span class=\"built_in\">print</span> result</div><div class=\"line\">  -c, --check           syntax check script without executing</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>&#x6709;Usage&#x4FE1;&#x606F;&#x53EF;&#x77E5;&#xFF0C;&#x6240;&#x6709;&#x9009;&#x9879;&#x90FD;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4E14;&#x9700;&#x8981;&#x653E;&#x5728;&#x811A;&#x672C;&#x4E4B;&#x524D;&#x3002;</p>\n<p><strong>index.js</strong>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> Buffer(<span class=\"number\">100</span>))</div></pre></td></tr></table></figure>\n<p><code>--zero-fill-buffers</code>&#x9009;&#x9879;&#x5C06;&#x6240;&#x6709;&#x65B0;&#x521B;&#x5EFA;Buffer&#x521D;&#x59CB;&#x5316;&#x4E3A;0:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">--zero-fill-buffers</div><div class=\"line\">              Automatically zero-fills all newly allocated Buffer and SlowBuffer instances.</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<code>--zero-fill-buffers</code>&#x9009;&#x9879;&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node --zero-fill-buffers index.js</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x5168;&#x90E8;&#x4E3A;0&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x968F;&#x673A;&#x7684;&#x5E8F;&#x5217;:</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;Buffer 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... &gt;</div></pre></td></tr></table></figure>\n<h3 id=\"Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;\"><a href=\"#Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;\" class=\"headerlink\" title=\"Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;\"></a>Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;</h3><h4 id=\"version-&#x6216;-v\"><a href=\"#version-&#x6216;-v\" class=\"headerlink\" title=\"--version &#x6216; -v\"></a><code>--version</code> &#x6216; <code>-v</code></h4><p>&#x6267;&#x884C; <code>node --version</code>&#x6216;&#x8005; <code>node -v</code>&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Node&#x7248;&#x672C;&#x4FE1;&#x606F;&#x3002;<code>-v</code>&#x4E3A;<code>--version</code>&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x5176;&#x4ED6;&#x9009;&#x9879;&#x4E5F;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x7F29;&#x5199;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node -v</div><div class=\"line\">v6.10.0</div></pre></td></tr></table></figure>\n<h4 id=\"eval-&#x6216;-e\"><a href=\"#eval-&#x6216;-e\" class=\"headerlink\" title=\"--eval &#x6216; -e\"></a><code>--eval</code> &#x6216; <code>-e</code></h4><p>&#x4F7F;&#x7528;<code>--eval</code> &#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x7EC8;&#x7AEF;&#x6267;&#x884C;Node.js&#x4EE3;&#x7801;&#x3002;REPL&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x4F8B;&#x5982;<code>http</code> &#x3001; <code>fs</code>&#x7B49;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x9700;&#x8981;require&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node <span class=\"_\">-e</span> <span class=\"string\">&apos;console.log(3 + 2)&apos;</span></div><div class=\"line\">5</div></pre></td></tr></table></figure>\n<h4 id=\"print-&#x6216;-p\"><a href=\"#print-&#x6216;-p\" class=\"headerlink\" title=\"--print &#x6216; -p\"></a><code>--print</code> &#x6216; <code>-p</code></h4><p><code>--print</code>&#x9009;&#x9879;&#x4E0E;<code>--eval</code>&#x9009;&#x9879;&#x7684;&#x529F;&#x80FD;&#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;<code>--print</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x6253;&#x5370;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7ED3;&#x679C;&#x3002;<code>--eval</code>&#x9009;&#x9879;&#x4F7F;&#x7528;<code>console.log</code>&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x76F8;&#x540C;&#x7684;&#x6548;&#x679C;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node -p <span class=\"string\">&apos;3 + 2&apos;</span></div><div class=\"line\">5</div></pre></td></tr></table></figure>\n<h4 id=\"check-&#x6216;-c\"><a href=\"#check-&#x6216;-c\" class=\"headerlink\" title=\"--check &#x6216;-c\"></a><code>--check</code> &#x6216;<code>-c</code></h4><p><strong>Node v4.2.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p>&#x4F7F;&#x7528;<code>--check</code>&#xFF0C;&#x5219;&#x4F1A;&#x68C0;&#x67E5;&#x4EE3;&#x7801;&#x7684;&#x8BED;&#x6CD5;(&#x5E76;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x4EE3;&#x7801;)&#x3002;</p>\n<p><strong>index.js</strong>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> Buffer(<span class=\"number\">100</span>)</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4EE3;&#x7801;&#x4E2D;&#x7F3A;&#x5C11;&#x4E86;&#x4E00;&#x4E2A;<code>)</code>&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;<code>node index.js</code>&#x6267;&#x884C;&#x7684;&#x8BDD;&#x5219;&#x4F1A;&#x51FA;&#x9519;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1</div><div class=\"line\">(<span class=\"keyword\">function</span> (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)</div><div class=\"line\">                                                                                        ^</div><div class=\"line\">SyntaxError: missing ) after argument list  </div><div class=\"line\">    at Object.exports.runInThisContext (vm.js:76:16)</div><div class=\"line\">    at Module._compile (module.js:542:28)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:579:10)</div><div class=\"line\">    at Module.load (module.js:487:32)</div><div class=\"line\">    at tryModuleLoad (module.js:446:12)</div><div class=\"line\">    at Function.Module._load (module.js:438:3)</div><div class=\"line\">    at Module.runMain (module.js:604:10)</div><div class=\"line\">    at run (bootstrap_node.js:394:7)</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<code>node --check index.js</code>&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x68C0;&#x67E5;&#x5230;&#x540C;&#x6837;&#x7684;&#x9519;&#x8BEF;&#x3002;&#x4E24;&#x8005;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;<strong>&#x4F7F;&#x7528;<code>--check</code>&#x9009;&#x9879;&#x65F6;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x56E0;&#x6B64;&#x6CA1;&#x6709;&#x9519;&#x8BEF;&#x6808;(stack trace)</strong>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1</div><div class=\"line\">(<span class=\"keyword\">function</span> (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)</div><div class=\"line\">                                                                                        ^</div><div class=\"line\">SyntaxError: missing ) after argument list  </div><div class=\"line\">    at startup (bootstrap_node.js:144:11)</div><div class=\"line\">    at bootstrap_node.js:509:3</div></pre></td></tr></table></figure>\n<h4 id=\"inspect-host-port\"><a href=\"#inspect-host-port\" class=\"headerlink\" title=\"--inspect[=host:port]\"></a><code>--inspect[=host:port]</code></h4><p><strong>node v6.3.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p>&#x4F7F;&#x7528;<code>node --inspect</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5730;&#x5740;(host)&#x548C;&#x7AEF;&#x53E3;(port)&#x5F00;&#x542F;&#x76D1;&#x63A7;&#x5668;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;<code>127.0.0.1:9229</code>&#x3002;Chrome&#x8C03;&#x8BD5;&#x5DE5;&#x5177;(<a href=\"https://chromedevtools.github.io/debugger-protocol-viewer/\" target=\"_blank\" rel=\"external\">Chrome Debugging Protocol</a>)&#x901A;&#x8FC7;&#x8BE5;&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;Node.js&#x8FDB;&#x7A0B;&#x3002;</p>\n<h4 id=\"inspect-brk-host-port\"><a href=\"#inspect-brk-host-port\" class=\"headerlink\" title=\"--inspect-brk[=host:port]\"></a><code>--inspect-brk[=host:port]</code></h4><p><strong>node v7.6.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p><code>--inspect-brk</code>&#x9009;&#x9879;&#x4E0E;<code>--inspect</code>&#x9009;&#x9879;&#x7684;&#x529F;&#x80FD;&#x76F8;&#x540C;&#xFF0C;&#x53EA;&#x662F;&#x5B83;&#x4F1A;&#x5728;&#x4EE3;&#x7801;&#x7B2C;&#x4E00;&#x884C;&#x5C31;&#x6682;&#x505C;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node --inspect-brk index.js </div><div class=\"line\">Debugger listening on port 9229.  </div><div class=\"line\">Warning: This is an experimental feature and could change at any time.  </div><div class=\"line\">To start debugging, open the following URL <span class=\"keyword\">in</span> Chrome:  </div><div class=\"line\">    chrome-devtools://devtools/bundled/inspector.html?experiments=<span class=\"literal\">true</span>&amp;v8only=<span class=\"literal\">true</span>&amp;ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x7528;Chrome&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x8F93;&#x51FA;&#x4E2D;&#x63D0;&#x793A;&#x7684;URL&#x5730;&#x5740;<a href=\"chrome-devtools://devtools/bundled/inspector.html?experiments=true&amp;v8only=true&amp;ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813\" target=\"_blank\" rel=\"external\">chrome-devtools://devtools/bundled/inspector.html?experiments=true&amp;v8only=true&amp;ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813</a>&#x5C31;&#x53EF;&#x4EE5;&#x8C03;&#x8BD5;Node.js&#x4EE3;&#x7801;&#x4E86;&#x3002;</p>\n<h4 id=\"zero-fill-buffers\"><a href=\"#zero-fill-buffers\" class=\"headerlink\" title=\"--zero-fill-buffers\"></a><code>--zero-fill-buffers</code></h4><p><strong>node v6.0.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p>&#x4F7F;&#x7528;<code>--zero-fill-buffers</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x4F7F;&#x6240;&#x6709;&#x65B0;&#x521B;&#x5EFA;&#x7684;Buffer&#x521D;&#x59CB;&#x5316;&#x4E3A;0&#x3002; &#x8FD9;&#x6837;&#x505A;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x654F;&#x611F;&#x4FE1;&#x606F;&#x6CC4;&#x9732;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF0C;&#x4EC5;&#x5F53;&#x9700;&#x8981;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x654F;&#x611F;&#x4FE1;&#x606F;&#x6CC4;&#x9732;&#x65F6;&#x624D;&#x4F7F;&#x7528;&#x8BE5;&#x9009;&#x9879;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F1A;&#x4E25;&#x91CD;&#x5F71;&#x54CD;&#x4EE3;&#x7801;&#x6027;&#x80FD;&#x3002;</p>\n<blockquote>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;Buffer&#x6784;&#x9020;&#x5668;&#x5728;node v6.0.0&#x5DF2;&#x7ECF;&#x5F03;&#x7528;&#x4E86;&#x3002;</p>\n<p>Also note, that some Buffer constructors got deprecated in <code>v6.0.0</code>:</p>\n<ul>\n<li><code>new Buffer(array)</code></li>\n<li><code>new Buffer(arrayBuffer[, byteOffset [, length]])</code></li>\n<li><code>new Buffer(buffer)</code></li>\n<li><code>new Buffer(size)</code></li>\n<li><code>new Buffer(string[, encoding])</code></li>\n</ul>\n<p>&#x6240;&#x4EE5;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>Buffer.alloc(size[, fill[, encoding]])</code>, <code>Buffer.from(array)</code>, <code>Buffer.from(buffer)</code>, <code>Buffer.from(arrayBuffer[, byteOffset[, length]])</code> &#x548C; <code>Buffer.from(string[, encoding])</code>.</p>\n</blockquote>\n<p>&#x5173;&#x4E8E;Node.js&#x7684;&#x5185;&#x5B58;&#x5B89;&#x5168;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x535A;&#x5BA2;<a href=\"https://snyk.io/blog/exploiting-buffer/\" target=\"_blank\" rel=\"external\">Exploiting Buffer</a></p>\n<h4 id=\"prof-process\"><a href=\"#prof-process\" class=\"headerlink\" title=\"--prof-process\"></a><code>--prof-process</code></h4><p>&#x4F7F;&#x7528; <code>--prof-process</code>&#x9009;&#x9879;&#xFF0C;Node.js&#x8FDB;&#x7A0B;&#x5C06;&#x8F93;&#x51FA;V8&#x5F15;&#x64CE;&#x7684;&#x6027;&#x80FD;&#x8BB0;&#x5F55;&#x4FE1;&#x606F;(profiler)</p>\n<p>&#x9996;&#x5148;&#xFF0C;&#x4F7F;&#x7528;<code>--prof</code>&#x9009;&#x9879;&#x6267;&#x884C;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">node --prof index.js</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#xFF0C;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D;&#x5C06;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x6587;&#x4EF6;&#xFF0C;&#x524D;&#x7F00;&#x4E3A;<code>isolate-</code>&#x3002;</p>\n<p>&#x7136;&#x540E;&#xFF0C;&#x4F7F;&#x7528;<code>--prof-process</code>&#x9009;&#x9879;&#x6267;&#x884C;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">node --prof-process isolate-0x102001600-v8.log &gt; output.txt</div></pre></td></tr></table></figure>\n<p><strong>output.txt</strong>&#x6587;&#x4EF6;&#x4E2D;&#x6709;V8&#x5F15;&#x64CE;&#x7684;&#x6027;&#x80FD;&#x8BB0;&#x5F55;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;: C++&#x4EE3;&#x7801;&#x82B1;&#x4E86;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#xFF0C;JavaScript&#x4EE3;&#x7801;&#x82B1;&#x4E86;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#xFF0C;&#x90A3;&#x4E2A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x82B1;&#x4E86;&#x6700;&#x591A;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">[C++]:</div><div class=\"line\">   ticks  total  nonlib   name</div><div class=\"line\">     16   18.4%   18.4%  node::ContextifyScript::New(v8::FunctionCallbackInfo&lt;v8::Value&gt; const&amp;)</div><div class=\"line\">      4    4.6%    4.6%  ___mkdir_extended</div><div class=\"line\">      2    2.3%    2.3%  void v8::internal::String::WriteToFlat&lt;unsigned short&gt;(v8::internal::String*, unsigned short*, int, int)</div><div class=\"line\">      2    2.3%    2.3%  void v8::internal::ScavengingVisitor&lt;(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0&gt;::ObjectEvacuationStrategy&lt;(v8::internal::ScavengingVisitor&lt;(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0&gt;::ObjectContents)1&gt;::VisitSpecialized&lt;24&gt;(v8::internal::Map*, v8::internal::HeapObject**, v8::internal::HeapObject*)</div><div class=\"line\"></div><div class=\"line\">[Summary]:</div><div class=\"line\">   ticks  total  nonlib   name</div><div class=\"line\">      1    1.1%    1.1%  JavaScript</div><div class=\"line\">     70   80.5%   80.5%  C++</div><div class=\"line\">      5    5.7%    5.7%  GC</div><div class=\"line\">      0    0.0%          Shared libraries</div><div class=\"line\">     16   18.4%          Unaccounted</div></pre></td></tr></table></figure>\n<p>&#x8BBF;&#x95EE;<a href=\"https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_command_line_options\" target=\"_blank\" rel=\"external\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;&#x3002;</p>\n<hr>\n<h3 id=\"V8&#x5F15;&#x64CE;&#x9009;&#x9879;\"><a href=\"#V8&#x5F15;&#x64CE;&#x9009;&#x9879;\" class=\"headerlink\" title=\"V8&#x5F15;&#x64CE;&#x9009;&#x9879;\"></a>V8&#x5F15;&#x64CE;&#x9009;&#x9879;</h3><p>&#x4F7F;&#x7528;<code>--v8-options</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x6253;&#x5370;&#x6240;&#x6709;&#x7684;V8&#x5F15;&#x64CE;&#x9009;&#x9879;&#x3002;</p>\n<blockquote>\n<p>&#x76EE;&#x524D;&#xFF0C;V8&#x5F15;&#x64CE;&#x63D0;&#x4F9B;&#x4E86;&#x4E0A;&#x767E;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x53EA;&#x662F;&#x4ECB;&#x7ECD;&#x4E86;&#x5176;&#x4E2D;&#x51E0;&#x4E2A;&#x3002;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x5730;&#x6539;&#x53D8;V8&#x5F15;&#x64CE;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x614E;&#x91CD;&#x4F7F;&#x7528;&#x3002;</p>\n</blockquote>\n<h4 id=\"harmony\"><a href=\"#harmony\" class=\"headerlink\" title=\"--harmony\"></a><code>--harmony</code></h4><p>&#x4F7F;&#x7528;<code>--harmony</code>&#x9009;&#x9879;&#xFF0C;&#x5219;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6240;&#x6709;harmony&#x7279;&#x6027;(&#x5373;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x4F4E;&#x7248;&#x672C;&#x7684;Node&#x4E2D;&#x4F7F;&#x7528;ES6&#x7279;&#x6027;)&#x3002;</p>\n<h4 id=\"max-old-space-size\"><a href=\"#max-old-space-size\" class=\"headerlink\" title=\"--max_old_space_size\"></a><code>--max_old_space_size</code></h4><p>&#x4F7F;&#x7528;<code>--max_old_space_size</code>&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x8001;&#x751F;&#x4EE3;&#x5185;&#x5B58;&#x7A7A;&#x95F4;(old space&#xFF0C;&#x7528;&#x4E8E;&#x50A8;&#x5B58;&#x5B58;&#x6D3B;&#x65F6;&#x95F4;&#x8F83;&#x957F;&#x6216;&#x5E38;&#x9A7B;&#x5185;&#x5B58;&#x7684;&#x5BF9;&#x8C61;)&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C06;&#x76F4;&#x63A5;&#x5F71;&#x54CD;Node.js&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x3002;&#x5728;&#x5185;&#x5B58;&#x8F83;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9650;&#x5236;Node.js&#x8FDB;&#x7A0B;&#x5BF9;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x3002;</p>\n<h4 id=\"optimize-for-size\"><a href=\"#optimize-for-size\" class=\"headerlink\" title=\"--optimize_for_size\"></a><code>--optimize_for_size</code></h4><p>&#x4F7F;&#x7528;<code>--optimize_for_size</code>&#x9009;&#x9879;&#xFF0C;V8&#x5F15;&#x64CE;&#x4F1A;&#x4F18;&#x5316;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x964D;&#x4F4E;&#x5E94;&#x7528;&#x7684;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x3002;&#x540C;&#x6837;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x8F83;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;</p>\n<h3 id=\"&#x73AF;&#x5883;&#x53D8;&#x91CF;\"><a href=\"#&#x73AF;&#x5883;&#x53D8;&#x91CF;\" class=\"headerlink\" title=\"&#x73AF;&#x5883;&#x53D8;&#x91CF;\"></a>&#x73AF;&#x5883;&#x53D8;&#x91CF;</h3><h4 id=\"NODE-DEBUG-module-&#x2026;\"><a href=\"#NODE-DEBUG-module-&#x2026;\" class=\"headerlink\" title=\"NODE_DEBUG=module[,&#x2026;]\"></a><code>NODE_DEBUG=module[,&#x2026;]</code></h4><p>&#x8BBE;&#x7F6E;<strong>NODE_DEBUG</strong>&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x6253;&#x5370;Node.js&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x7684;&#x8C03;&#x8BD5;&#x4FE1;&#x606F;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<strong>module</strong>&#x6A21;&#x5757;&#x7684;&#x8C03;&#x8BD5;&#x4FE1;&#x606F;(&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5176;&#x5B83;&#x6A21;&#x5757;&#xFF0C;&#x4F8B;&#x5982;http, fs&#x7B49;):</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ NODE_DEBUG=module node index.js</div></pre></td></tr></table></figure>\n<p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;(&#x53EF;&#x77E5;&#xFF0C;module&#x6A21;&#x5757;&#x8D1F;&#x8D23;&#x52A0;&#x8F7D;&#x4EE3;&#x7801;&#x8C03;&#x7528;&#x7684;&#x5404;&#x4E2A;&#x6A21;&#x5757;):</p>\n<figure class=\"highlight vbnet\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">MODULE</span> <span class=\"number\">7595</span>: looking <span class=\"keyword\">for</span> <span class=\"string\">&quot;/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js&quot;</span> <span class=\"keyword\">in</span> [<span class=\"string\">&quot;/Users/gergelyke/.node_modules&quot;</span>,<span class=\"string\">&quot;/Users/gergelyke/.node_libraries&quot;</span>,<span class=\"string\">&quot;/Users/gergelyke/.nvm/versions/node/v6.10.0/lib/node&quot;</span>]  </div><div class=\"line\"><span class=\"keyword\">MODULE</span> <span class=\"number\">7595</span>: load <span class=\"string\">&quot;/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js&quot;</span> <span class=\"keyword\">for</span> <span class=\"keyword\">module</span> <span class=\"string\">&quot;.&quot;</span></div></pre></td></tr></table></figure>\n<h4 id=\"NODE-PATH-path\"><a href=\"#NODE-PATH-path\" class=\"headerlink\" title=\"NODE_PATH=path\"></a><code>NODE_PATH=path</code></h4><p>&#x4F7F;&#x7528;<strong>NODE_PATH</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;Node.js&#x8FDB;&#x7A0B;&#x641C;&#x7D22;&#x6A21;&#x5757;&#x7684;&#x989D;&#x5916;&#x76EE;&#x5F55;&#x3002;</p>\n<h4 id=\"OPENSSL-CONF-file\"><a href=\"#OPENSSL-CONF-file\" class=\"headerlink\" title=\"OPENSSL_CONF=file\"></a><code>OPENSSL_CONF=file</code></h4><p>&#x4F7F;&#x7528;<strong>OPENSSL_CONF</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;OpenSSL&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p>\n<p>&#x8BBF;&#x95EE;<a href=\"https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_environment_variables\" target=\"_blank\" rel=\"external\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 177654062</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/25/node-command-option/nodejs-qq-group.jpeg\"><br></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","excerpt":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x4F5C;&#x4E3A;Node.js&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x6709;&#x5FC5;&#x8981;&#x5168;&#x9762;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x5173;&#x952E;&#x65F6;&#x523B;&#x624D;&#x80FD;&#x5F97;&#x5FC3;&#x5E94;&#x624B;&#x3002;</p>","more":"<ul>\n<li>&#x539F;&#x6587;: <a href=\"https://blog.risingstack.com/mastering-the-node-js-cli-command-line-options/\">Mastering the Node.js CLI &amp; Command Line Options</a></li>\n<li>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\">Fundebug</a></li>\n</ul>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;</strong></p>\n<p>Node&#x547D;&#x4EE4;&#x6709;&#x5F88;&#x591A;&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8C03;&#x8BD5;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5168;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;Node&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5927;&#x5BB6;&#x7684;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x3002;</p>\n<h3 id=\"&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;\"><a href=\"#&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;\" class=\"headerlink\" title=\"&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;\"></a>&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x9009;&#x9879;</h3><p>&#x4F7F;&#x7528;<strong>man</strong>&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ man node</div><div class=\"line\"></div><div class=\"line\">Usage: node [options] [ <span class=\"_\">-e</span> script | script.js ] [arguments]  </div><div class=\"line\">       node debug script.js [arguments] </div><div class=\"line\"></div><div class=\"line\">Options:  </div><div class=\"line\">  -v, --version         <span class=\"built_in\">print</span> Node.js version</div><div class=\"line\">  <span class=\"_\">-e</span>, --eval script     evaluate script</div><div class=\"line\">  -p, --print           evaluate script and <span class=\"built_in\">print</span> result</div><div class=\"line\">  -c, --check           syntax check script without executing</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>&#x6709;Usage&#x4FE1;&#x606F;&#x53EF;&#x77E5;&#xFF0C;&#x6240;&#x6709;&#x9009;&#x9879;&#x90FD;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4E14;&#x9700;&#x8981;&#x653E;&#x5728;&#x811A;&#x672C;&#x4E4B;&#x524D;&#x3002;</p>\n<p><strong>index.js</strong>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> Buffer(<span class=\"number\">100</span>))</div></pre></td></tr></table></figure>\n<p><code>--zero-fill-buffers</code>&#x9009;&#x9879;&#x5C06;&#x6240;&#x6709;&#x65B0;&#x521B;&#x5EFA;Buffer&#x521D;&#x59CB;&#x5316;&#x4E3A;0:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">--zero-fill-buffers</div><div class=\"line\">              Automatically zero-fills all newly allocated Buffer and SlowBuffer instances.</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<code>--zero-fill-buffers</code>&#x9009;&#x9879;&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node --zero-fill-buffers index.js</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x5168;&#x90E8;&#x4E3A;0&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x968F;&#x673A;&#x7684;&#x5E8F;&#x5217;:</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;Buffer 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ... &gt;</div></pre></td></tr></table></figure>\n<h3 id=\"Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;\"><a href=\"#Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;\" class=\"headerlink\" title=\"Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;\"></a>Node&#x547D;&#x4EE4;&#x5E38;&#x7528;&#x9009;&#x9879;</h3><h4 id=\"version-&#x6216;-v\"><a href=\"#version-&#x6216;-v\" class=\"headerlink\" title=\"--version &#x6216; -v\"></a><code>--version</code> &#x6216; <code>-v</code></h4><p>&#x6267;&#x884C; <code>node --version</code>&#x6216;&#x8005; <code>node -v</code>&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Node&#x7248;&#x672C;&#x4FE1;&#x606F;&#x3002;<code>-v</code>&#x4E3A;<code>--version</code>&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x5176;&#x4ED6;&#x9009;&#x9879;&#x4E5F;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x7F29;&#x5199;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node -v</div><div class=\"line\">v6.10.0</div></pre></td></tr></table></figure>\n<h4 id=\"eval-&#x6216;-e\"><a href=\"#eval-&#x6216;-e\" class=\"headerlink\" title=\"--eval &#x6216; -e\"></a><code>--eval</code> &#x6216; <code>-e</code></h4><p>&#x4F7F;&#x7528;<code>--eval</code> &#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x7EC8;&#x7AEF;&#x6267;&#x884C;Node.js&#x4EE3;&#x7801;&#x3002;REPL&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x4F8B;&#x5982;<code>http</code> &#x3001; <code>fs</code>&#x7B49;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x9700;&#x8981;require&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node <span class=\"_\">-e</span> <span class=\"string\">&apos;console.log(3 + 2)&apos;</span></div><div class=\"line\">5</div></pre></td></tr></table></figure>\n<h4 id=\"print-&#x6216;-p\"><a href=\"#print-&#x6216;-p\" class=\"headerlink\" title=\"--print &#x6216; -p\"></a><code>--print</code> &#x6216; <code>-p</code></h4><p><code>--print</code>&#x9009;&#x9879;&#x4E0E;<code>--eval</code>&#x9009;&#x9879;&#x7684;&#x529F;&#x80FD;&#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;<code>--print</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x6253;&#x5370;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7ED3;&#x679C;&#x3002;<code>--eval</code>&#x9009;&#x9879;&#x4F7F;&#x7528;<code>console.log</code>&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x76F8;&#x540C;&#x7684;&#x6548;&#x679C;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node -p <span class=\"string\">&apos;3 + 2&apos;</span></div><div class=\"line\">5</div></pre></td></tr></table></figure>\n<h4 id=\"check-&#x6216;-c\"><a href=\"#check-&#x6216;-c\" class=\"headerlink\" title=\"--check &#x6216;-c\"></a><code>--check</code> &#x6216;<code>-c</code></h4><p><strong>Node v4.2.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p>&#x4F7F;&#x7528;<code>--check</code>&#xFF0C;&#x5219;&#x4F1A;&#x68C0;&#x67E5;&#x4EE3;&#x7801;&#x7684;&#x8BED;&#x6CD5;(&#x5E76;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x4EE3;&#x7801;)&#x3002;</p>\n<p><strong>index.js</strong>&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> Buffer(<span class=\"number\">100</span>)</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x77E5;&#xFF0C;&#x4EE3;&#x7801;&#x4E2D;&#x7F3A;&#x5C11;&#x4E86;&#x4E00;&#x4E2A;<code>)</code>&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;<code>node index.js</code>&#x6267;&#x884C;&#x7684;&#x8BDD;&#x5219;&#x4F1A;&#x51FA;&#x9519;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1</div><div class=\"line\">(<span class=\"keyword\">function</span> (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)</div><div class=\"line\">                                                                                        ^</div><div class=\"line\">SyntaxError: missing ) after argument list  </div><div class=\"line\">    at Object.exports.runInThisContext (vm.js:76:16)</div><div class=\"line\">    at Module._compile (module.js:542:28)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:579:10)</div><div class=\"line\">    at Module.load (module.js:487:32)</div><div class=\"line\">    at tryModuleLoad (module.js:446:12)</div><div class=\"line\">    at Function.Module._load (module.js:438:3)</div><div class=\"line\">    at Module.runMain (module.js:604:10)</div><div class=\"line\">    at run (bootstrap_node.js:394:7)</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<code>node --check index.js</code>&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x68C0;&#x67E5;&#x5230;&#x540C;&#x6837;&#x7684;&#x9519;&#x8BEF;&#x3002;&#x4E24;&#x8005;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;<strong>&#x4F7F;&#x7528;<code>--check</code>&#x9009;&#x9879;&#x65F6;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x56E0;&#x6B64;&#x6CA1;&#x6709;&#x9519;&#x8BEF;&#x6808;(stack trace)</strong>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js:1</div><div class=\"line\">(<span class=\"keyword\">function</span> (exports, require, module, __filename, __dirname) { console.log(new Buffer(100)</div><div class=\"line\">                                                                                        ^</div><div class=\"line\">SyntaxError: missing ) after argument list  </div><div class=\"line\">    at startup (bootstrap_node.js:144:11)</div><div class=\"line\">    at bootstrap_node.js:509:3</div></pre></td></tr></table></figure>\n<h4 id=\"inspect-host-port\"><a href=\"#inspect-host-port\" class=\"headerlink\" title=\"--inspect[=host:port]\"></a><code>--inspect[=host:port]</code></h4><p><strong>node v6.3.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p>&#x4F7F;&#x7528;<code>node --inspect</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x5730;&#x5740;(host)&#x548C;&#x7AEF;&#x53E3;(port)&#x5F00;&#x542F;&#x76D1;&#x63A7;&#x5668;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;<code>127.0.0.1:9229</code>&#x3002;Chrome&#x8C03;&#x8BD5;&#x5DE5;&#x5177;(<a href=\"https://chromedevtools.github.io/debugger-protocol-viewer/\">Chrome Debugging Protocol</a>)&#x901A;&#x8FC7;&#x8BE5;&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;Node.js&#x8FDB;&#x7A0B;&#x3002;</p>\n<h4 id=\"inspect-brk-host-port\"><a href=\"#inspect-brk-host-port\" class=\"headerlink\" title=\"--inspect-brk[=host:port]\"></a><code>--inspect-brk[=host:port]</code></h4><p><strong>node v7.6.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p><code>--inspect-brk</code>&#x9009;&#x9879;&#x4E0E;<code>--inspect</code>&#x9009;&#x9879;&#x7684;&#x529F;&#x80FD;&#x76F8;&#x540C;&#xFF0C;&#x53EA;&#x662F;&#x5B83;&#x4F1A;&#x5728;&#x4EE3;&#x7801;&#x7B2C;&#x4E00;&#x884C;&#x5C31;&#x6682;&#x505C;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ node --inspect-brk index.js </div><div class=\"line\">Debugger listening on port 9229.  </div><div class=\"line\">Warning: This is an experimental feature and could change at any time.  </div><div class=\"line\">To start debugging, open the following URL <span class=\"keyword\">in</span> Chrome:  </div><div class=\"line\">    chrome-devtools://devtools/bundled/inspector.html?experiments=<span class=\"literal\">true</span>&amp;v8only=<span class=\"literal\">true</span>&amp;ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x7528;Chrome&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x8F93;&#x51FA;&#x4E2D;&#x63D0;&#x793A;&#x7684;URL&#x5730;&#x5740;<a href=\"chrome-devtools://devtools/bundled/inspector.html?experiments=true&amp;v8only=true&amp;ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813\">chrome-devtools://devtools/bundled/inspector.html?experiments=true&amp;v8only=true&amp;ws=127.0.0.1:9229/86dd44ef-c865-479e-be4d-806d622a4813</a>&#x5C31;&#x53EF;&#x4EE5;&#x8C03;&#x8BD5;Node.js&#x4EE3;&#x7801;&#x4E86;&#x3002;</p>\n<h4 id=\"zero-fill-buffers\"><a href=\"#zero-fill-buffers\" class=\"headerlink\" title=\"--zero-fill-buffers\"></a><code>--zero-fill-buffers</code></h4><p><strong>node v6.0.0&#x4E4B;&#x540E;&#x624D;&#x6709;</strong></p>\n<p>&#x4F7F;&#x7528;<code>--zero-fill-buffers</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x4F7F;&#x6240;&#x6709;&#x65B0;&#x521B;&#x5EFA;&#x7684;Buffer&#x521D;&#x59CB;&#x5316;&#x4E3A;0&#x3002; &#x8FD9;&#x6837;&#x505A;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x654F;&#x611F;&#x4FE1;&#x606F;&#x6CC4;&#x9732;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF0C;&#x4EC5;&#x5F53;&#x9700;&#x8981;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x654F;&#x611F;&#x4FE1;&#x606F;&#x6CC4;&#x9732;&#x65F6;&#x624D;&#x4F7F;&#x7528;&#x8BE5;&#x9009;&#x9879;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F1A;&#x4E25;&#x91CD;&#x5F71;&#x54CD;&#x4EE3;&#x7801;&#x6027;&#x80FD;&#x3002;</p>\n<blockquote>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;Buffer&#x6784;&#x9020;&#x5668;&#x5728;node v6.0.0&#x5DF2;&#x7ECF;&#x5F03;&#x7528;&#x4E86;&#x3002;</p>\n<p>Also note, that some Buffer constructors got deprecated in <code>v6.0.0</code>:</p>\n<ul>\n<li><code>new Buffer(array)</code></li>\n<li><code>new Buffer(arrayBuffer[, byteOffset [, length]])</code></li>\n<li><code>new Buffer(buffer)</code></li>\n<li><code>new Buffer(size)</code></li>\n<li><code>new Buffer(string[, encoding])</code></li>\n</ul>\n<p>&#x6240;&#x4EE5;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>Buffer.alloc(size[, fill[, encoding]])</code>, <code>Buffer.from(array)</code>, <code>Buffer.from(buffer)</code>, <code>Buffer.from(arrayBuffer[, byteOffset[, length]])</code> &#x548C; <code>Buffer.from(string[, encoding])</code>.</p>\n</blockquote>\n<p>&#x5173;&#x4E8E;Node.js&#x7684;&#x5185;&#x5B58;&#x5B89;&#x5168;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x535A;&#x5BA2;<a href=\"https://snyk.io/blog/exploiting-buffer/\">Exploiting Buffer</a></p>\n<h4 id=\"prof-process\"><a href=\"#prof-process\" class=\"headerlink\" title=\"--prof-process\"></a><code>--prof-process</code></h4><p>&#x4F7F;&#x7528; <code>--prof-process</code>&#x9009;&#x9879;&#xFF0C;Node.js&#x8FDB;&#x7A0B;&#x5C06;&#x8F93;&#x51FA;V8&#x5F15;&#x64CE;&#x7684;&#x6027;&#x80FD;&#x8BB0;&#x5F55;&#x4FE1;&#x606F;(profiler)</p>\n<p>&#x9996;&#x5148;&#xFF0C;&#x4F7F;&#x7528;<code>--prof</code>&#x9009;&#x9879;&#x6267;&#x884C;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">node --prof index.js</div></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#xFF0C;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D;&#x5C06;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x6587;&#x4EF6;&#xFF0C;&#x524D;&#x7F00;&#x4E3A;<code>isolate-</code>&#x3002;</p>\n<p>&#x7136;&#x540E;&#xFF0C;&#x4F7F;&#x7528;<code>--prof-process</code>&#x9009;&#x9879;&#x6267;&#x884C;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">node --prof-process isolate-0x102001600-v8.log &gt; output.txt</div></pre></td></tr></table></figure>\n<p><strong>output.txt</strong>&#x6587;&#x4EF6;&#x4E2D;&#x6709;V8&#x5F15;&#x64CE;&#x7684;&#x6027;&#x80FD;&#x8BB0;&#x5F55;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;: C++&#x4EE3;&#x7801;&#x82B1;&#x4E86;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#xFF0C;JavaScript&#x4EE3;&#x7801;&#x82B1;&#x4E86;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#xFF0C;&#x90A3;&#x4E2A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x82B1;&#x4E86;&#x6700;&#x591A;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">[C++]:</div><div class=\"line\">   ticks  total  nonlib   name</div><div class=\"line\">     16   18.4%   18.4%  node::ContextifyScript::New(v8::FunctionCallbackInfo&lt;v8::Value&gt; const&amp;)</div><div class=\"line\">      4    4.6%    4.6%  ___mkdir_extended</div><div class=\"line\">      2    2.3%    2.3%  void v8::internal::String::WriteToFlat&lt;unsigned short&gt;(v8::internal::String*, unsigned short*, int, int)</div><div class=\"line\">      2    2.3%    2.3%  void v8::internal::ScavengingVisitor&lt;(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0&gt;::ObjectEvacuationStrategy&lt;(v8::internal::ScavengingVisitor&lt;(v8::internal::MarksHandling)1, (v8::internal::LoggingAndProfiling)0&gt;::ObjectContents)1&gt;::VisitSpecialized&lt;24&gt;(v8::internal::Map*, v8::internal::HeapObject**, v8::internal::HeapObject*)</div><div class=\"line\"></div><div class=\"line\">[Summary]:</div><div class=\"line\">   ticks  total  nonlib   name</div><div class=\"line\">      1    1.1%    1.1%  JavaScript</div><div class=\"line\">     70   80.5%   80.5%  C++</div><div class=\"line\">      5    5.7%    5.7%  GC</div><div class=\"line\">      0    0.0%          Shared libraries</div><div class=\"line\">     16   18.4%          Unaccounted</div></pre></td></tr></table></figure>\n<p>&#x8BBF;&#x95EE;<a href=\"https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_command_line_options\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;&#x3002;</p>\n<hr>\n<h3 id=\"V8&#x5F15;&#x64CE;&#x9009;&#x9879;\"><a href=\"#V8&#x5F15;&#x64CE;&#x9009;&#x9879;\" class=\"headerlink\" title=\"V8&#x5F15;&#x64CE;&#x9009;&#x9879;\"></a>V8&#x5F15;&#x64CE;&#x9009;&#x9879;</h3><p>&#x4F7F;&#x7528;<code>--v8-options</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x6253;&#x5370;&#x6240;&#x6709;&#x7684;V8&#x5F15;&#x64CE;&#x9009;&#x9879;&#x3002;</p>\n<blockquote>\n<p>&#x76EE;&#x524D;&#xFF0C;V8&#x5F15;&#x64CE;&#x63D0;&#x4F9B;&#x4E86;&#x4E0A;&#x767E;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x53EA;&#x662F;&#x4ECB;&#x7ECD;&#x4E86;&#x5176;&#x4E2D;&#x51E0;&#x4E2A;&#x3002;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x5730;&#x6539;&#x53D8;V8&#x5F15;&#x64CE;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x614E;&#x91CD;&#x4F7F;&#x7528;&#x3002;</p>\n</blockquote>\n<h4 id=\"harmony\"><a href=\"#harmony\" class=\"headerlink\" title=\"--harmony\"></a><code>--harmony</code></h4><p>&#x4F7F;&#x7528;<code>--harmony</code>&#x9009;&#x9879;&#xFF0C;&#x5219;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6240;&#x6709;harmony&#x7279;&#x6027;(&#x5373;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x4F4E;&#x7248;&#x672C;&#x7684;Node&#x4E2D;&#x4F7F;&#x7528;ES6&#x7279;&#x6027;)&#x3002;</p>\n<h4 id=\"max-old-space-size\"><a href=\"#max-old-space-size\" class=\"headerlink\" title=\"--max_old_space_size\"></a><code>--max_old_space_size</code></h4><p>&#x4F7F;&#x7528;<code>--max_old_space_size</code>&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x8001;&#x751F;&#x4EE3;&#x5185;&#x5B58;&#x7A7A;&#x95F4;(old space&#xFF0C;&#x7528;&#x4E8E;&#x50A8;&#x5B58;&#x5B58;&#x6D3B;&#x65F6;&#x95F4;&#x8F83;&#x957F;&#x6216;&#x5E38;&#x9A7B;&#x5185;&#x5B58;&#x7684;&#x5BF9;&#x8C61;)&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C06;&#x76F4;&#x63A5;&#x5F71;&#x54CD;Node.js&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x3002;&#x5728;&#x5185;&#x5B58;&#x8F83;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9650;&#x5236;Node.js&#x8FDB;&#x7A0B;&#x5BF9;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x3002;</p>\n<h4 id=\"optimize-for-size\"><a href=\"#optimize-for-size\" class=\"headerlink\" title=\"--optimize_for_size\"></a><code>--optimize_for_size</code></h4><p>&#x4F7F;&#x7528;<code>--optimize_for_size</code>&#x9009;&#x9879;&#xFF0C;V8&#x5F15;&#x64CE;&#x4F1A;&#x4F18;&#x5316;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x964D;&#x4F4E;&#x5E94;&#x7528;&#x7684;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x3002;&#x540C;&#x6837;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x8F83;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x5C06;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;</p>\n<h3 id=\"&#x73AF;&#x5883;&#x53D8;&#x91CF;\"><a href=\"#&#x73AF;&#x5883;&#x53D8;&#x91CF;\" class=\"headerlink\" title=\"&#x73AF;&#x5883;&#x53D8;&#x91CF;\"></a>&#x73AF;&#x5883;&#x53D8;&#x91CF;</h3><h4 id=\"NODE-DEBUG-module-&#x2026;\"><a href=\"#NODE-DEBUG-module-&#x2026;\" class=\"headerlink\" title=\"NODE_DEBUG=module[,&#x2026;]\"></a><code>NODE_DEBUG=module[,&#x2026;]</code></h4><p>&#x8BBE;&#x7F6E;<strong>NODE_DEBUG</strong>&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x6253;&#x5370;Node.js&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x7684;&#x8C03;&#x8BD5;&#x4FE1;&#x606F;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<strong>module</strong>&#x6A21;&#x5757;&#x7684;&#x8C03;&#x8BD5;&#x4FE1;&#x606F;(&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5176;&#x5B83;&#x6A21;&#x5757;&#xFF0C;&#x4F8B;&#x5982;http, fs&#x7B49;):</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ NODE_DEBUG=module node index.js</div></pre></td></tr></table></figure>\n<p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;(&#x53EF;&#x77E5;&#xFF0C;module&#x6A21;&#x5757;&#x8D1F;&#x8D23;&#x52A0;&#x8F7D;&#x4EE3;&#x7801;&#x8C03;&#x7528;&#x7684;&#x5404;&#x4E2A;&#x6A21;&#x5757;):</p>\n<figure class=\"highlight vbnet\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">MODULE</span> <span class=\"number\">7595</span>: looking <span class=\"keyword\">for</span> <span class=\"string\">&quot;/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js&quot;</span> <span class=\"keyword\">in</span> [<span class=\"string\">&quot;/Users/gergelyke/.node_modules&quot;</span>,<span class=\"string\">&quot;/Users/gergelyke/.node_libraries&quot;</span>,<span class=\"string\">&quot;/Users/gergelyke/.nvm/versions/node/v6.10.0/lib/node&quot;</span>]  </div><div class=\"line\"><span class=\"keyword\">MODULE</span> <span class=\"number\">7595</span>: load <span class=\"string\">&quot;/Users/gergelyke/Development/risingstack/mastering-nodejs-cli/index.js&quot;</span> <span class=\"keyword\">for</span> <span class=\"keyword\">module</span> <span class=\"string\">&quot;.&quot;</span></div></pre></td></tr></table></figure>\n<h4 id=\"NODE-PATH-path\"><a href=\"#NODE-PATH-path\" class=\"headerlink\" title=\"NODE_PATH=path\"></a><code>NODE_PATH=path</code></h4><p>&#x4F7F;&#x7528;<strong>NODE_PATH</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;Node.js&#x8FDB;&#x7A0B;&#x641C;&#x7D22;&#x6A21;&#x5757;&#x7684;&#x989D;&#x5916;&#x76EE;&#x5F55;&#x3002;</p>\n<h4 id=\"OPENSSL-CONF-file\"><a href=\"#OPENSSL-CONF-file\" class=\"headerlink\" title=\"OPENSSL_CONF=file\"></a><code>OPENSSL_CONF=file</code></h4><p>&#x4F7F;&#x7528;<strong>OPENSSL_CONF</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;OpenSSL&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p>\n<p>&#x8BBF;&#x95EE;<a href=\"https://nodejs.org/dist/latest-v7.x/docs/api/cli.html#cli_environment_variables\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Node&#x547D;&#x4EE4;&#x7684;&#x6240;&#x6709;&#x9009;&#x9879;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Node.js&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 177654062</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/04/25/node-command-option/nodejs-qq-group.jpeg\"><br></div>"},{"title":"Docker Swarm","date":"2017-05-08T01:00:00.000Z","_content":"\n**:** DockerDockerKubernetes, MesosSwarmSwarmDocker\n\n<!-- more -->\n\n: [Tips for using Docker Swarm mode in production](https://rock-it.pl/tips-for-using-docker-swarm-mode-in-production)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\nDocker! Docker Swarm\n\nDocker Swam[My experience with Docker Swarm - when you may need it?](https://rock-it.pl/my-experience-with-docker-swarm-when-you-need-it/)\n\n### 1. \n\n[](https://docs.docker.com/engine/swarm/swarm-tutorial/)SwarmSwarm [Digital Ocean](https://www.digitalocean.com/community/tutorials/how-to-create-a-cluster-of-docker-containers-with-docker-swarm-and-digitalocean-on-ubuntu-16-04)PS: AnsibleSwarm\n\n### 2. Docker Swarm\n\n**Swarm**SwarmCPUSwarm(Manager)(Worker)(1000+ )[](https://sematext.com/blog/2016/11/14/docker-swarm-lessons-from-swarm3k/)Swarm3k4700Swarm\n\n**Swarm()**SwarmSwarm**Docker 1.13**\n\n**Swarm**:\n\n```bash\n# \ndocker service create \\  \n  --image nginx \\\n  --replicas 2 \\\n  nginx \n\n# \ndocker service update \\  \n  --image nginx:alpine \\\n  nginx \n\n# \ndocker service rm nginx\n\n# ()\ndocker service scale nginx=0\n\n# \ndocker service scale nginx=5\n\n# \ndocker service ls\n\n# \ndocker service ps nginx\n\n# \ndocker service inspect nginx  \n```\n\n****:\n\n```bash\n# \ndocker build -t hub.docker.com/image . \n\n# Docker\ndocker push hub.docker.com/image\n\n# \ndocker service update --image hub.docker.com/image service  \n```\n\n**Swarm**(Mesos, Kubernetes)SwarmSwarm****Docker20Docker\n\n**** Docker\n\n### 3. Swarm\n\n**Swarm**SwarmlabelsSwarm(Docker 1.121.13*attachable* network)Docker Swarm(cross-host mounted volumes)\n\nSwarm(ENV)NginxDocker\n\nSwarm:\n\n- Django channels ()\n- Nginx()\n- Celery()\n- Sensu()\n\nSwarm:\n\n- Postgres()\n- Redis()\n\nIP[](https://github.com/moby/moby/issues/25526)NginxSwarmhost\n\n### 4. Docker\n\nDockerDocker[DockerHub](https://hub.docker.com/)[GitLab Container Registry](http://docs.gitlab.com/ce/user/project/container_registry.html)Docker()()Docker`--with-registry-auth`\n\nDocker\n\n### 5. \n\n****(volume)S3\n\nNginxNginx\n\n### 6. \n\nSaaSELKGrafana, Graylog...SaaS([Loggly](http://loggly.com/), [Logentries ](http://logentries.com/))ELK:\n\n```bash\ndocker service update \\  \n  --log-driver gelf \\\n  --log-opt gelf-address=udp://monitoring.example.com:12201 \\\n  --log-opt tag=example-tag \\\n  example-service\n```\n\n### 7. attachable network\n\nattachable network`docker run`SwarmDocker 1.13\n\nattachable network:\n\n```bash\ndocker network create --driver=overlay --attachable core  \n```\n\n### 8. Secrets API\n\n[How to write excellent Dockerfiles](https://rock-it.pl/how-to-write-excellent-dockerfiles/)DockerSwarm:\n\n```bash\n# \ndocker service create \\  \n  --env VAR=VALUE \\\n  --env-file FILENAME \\\n  ...\n\n# \ndocker service update \\  \n  --env-add VAR=NEW_VALUE \\\n  --env-rm VAR \\\n  ..\n```\n\n[Secrets API ](https://docs.docker.com/engine/swarm/secrets/)(SSL)Secrets API\n\n### 9. \n\nCPU\n\n`update-parallelism` 11 ` / 2`.\n\n\n\n```bash\n# 10\ndocker service update \\  \n  --update-parallelism 10 \\\n  webapp\n\n# \ndocker service scale redis=1 nginx=4 webapp=20\n\n# \ndocker service ls\n\n# () \ndocker service ps webapp | grep -v \"Shutdown\"  \n```\n\n### 10. Swarm\n\n[Docker Compose v3](https://docs.docker.com/compose/compose-file/#deploy)  `docker-compose.yml` `docker-compose.prod.yml`docker-compose `docker stack deploy` ([docker stack](https://docs.docker.com/engine/reference/commandline/stack/)\n\n**docker-compose**\n\n```\n# docker-compose.prod.yml\nversion: '3'  \nservices:  \n  webapp:\n    image: registry.example.com/webapp\n    networks:\n      - ingress\n    deploy:\n      replicas: ${WEBAPP_REPLICAS}\n      mode: replicated\n      restart_policy:\n        condition: on-failure\n\n  proxy:\n    image: registry.example.com/webapp-nginx-proxy\n    networks:\n      - ingress\n    ports:\n      - 80:80\n      - 443:443\n    deploy:\n      replicas: ${NGINX_REPLICAS}\n      mode: replicated\n      restart_policy:\n        condition: on-failure\n\nnetworks:  \n  ingress:\n    external: true\n```\n\n**:**\n\n```\nexport NGINX_REPLICAS=2 WEBAPP_REPLICAS=5\n\ndocker login registry.example.com  \ndocker stack deploy \\  \n  -c docker-compose.prod.yml\\\n  --with-registry-auth \\\n  frontend\n```\n\ndocker-compse(${VARIABLE})\n\n### 11. \n\nCPUCPU\n\n`reserve-cpu` `reserve-cpu` \n\n```bash\n# CPU\ndocker service update  \n  --limit-cpu 0.25\n  --reserve-cpu 0.1\n  webapp\n```\n\n### 13. \n\nSwarm9/(`--endpoint-mode`)\n\n\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"docker-swarm-suggestion/docker.JPG\" />\n</div>\n","source":"_posts/2017/05/08/docker-swarm-suggestion.md","raw":"---\ntitle: Docker Swarm\n\ndate: 2017-05-08 09:00:00\n\ntags: [Docker, Swarm, ]\n\n---\n\n**:** DockerDockerKubernetes, MesosSwarmSwarmDocker\n\n<!-- more -->\n\n: [Tips for using Docker Swarm mode in production](https://rock-it.pl/tips-for-using-docker-swarm-mode-in-production)\n\n: [Fundebug](https://fundebug.com/)\n\n****\n\nDocker! Docker Swarm\n\nDocker Swam[My experience with Docker Swarm - when you may need it?](https://rock-it.pl/my-experience-with-docker-swarm-when-you-need-it/)\n\n### 1. \n\n[](https://docs.docker.com/engine/swarm/swarm-tutorial/)SwarmSwarm [Digital Ocean](https://www.digitalocean.com/community/tutorials/how-to-create-a-cluster-of-docker-containers-with-docker-swarm-and-digitalocean-on-ubuntu-16-04)PS: AnsibleSwarm\n\n### 2. Docker Swarm\n\n**Swarm**SwarmCPUSwarm(Manager)(Worker)(1000+ )[](https://sematext.com/blog/2016/11/14/docker-swarm-lessons-from-swarm3k/)Swarm3k4700Swarm\n\n**Swarm()**SwarmSwarm**Docker 1.13**\n\n**Swarm**:\n\n```bash\n# \ndocker service create \\  \n  --image nginx \\\n  --replicas 2 \\\n  nginx \n\n# \ndocker service update \\  \n  --image nginx:alpine \\\n  nginx \n\n# \ndocker service rm nginx\n\n# ()\ndocker service scale nginx=0\n\n# \ndocker service scale nginx=5\n\n# \ndocker service ls\n\n# \ndocker service ps nginx\n\n# \ndocker service inspect nginx  \n```\n\n****:\n\n```bash\n# \ndocker build -t hub.docker.com/image . \n\n# Docker\ndocker push hub.docker.com/image\n\n# \ndocker service update --image hub.docker.com/image service  \n```\n\n**Swarm**(Mesos, Kubernetes)SwarmSwarm****Docker20Docker\n\n**** Docker\n\n### 3. Swarm\n\n**Swarm**SwarmlabelsSwarm(Docker 1.121.13*attachable* network)Docker Swarm(cross-host mounted volumes)\n\nSwarm(ENV)NginxDocker\n\nSwarm:\n\n- Django channels ()\n- Nginx()\n- Celery()\n- Sensu()\n\nSwarm:\n\n- Postgres()\n- Redis()\n\nIP[](https://github.com/moby/moby/issues/25526)NginxSwarmhost\n\n### 4. Docker\n\nDockerDocker[DockerHub](https://hub.docker.com/)[GitLab Container Registry](http://docs.gitlab.com/ce/user/project/container_registry.html)Docker()()Docker`--with-registry-auth`\n\nDocker\n\n### 5. \n\n****(volume)S3\n\nNginxNginx\n\n### 6. \n\nSaaSELKGrafana, Graylog...SaaS([Loggly](http://loggly.com/), [Logentries ](http://logentries.com/))ELK:\n\n```bash\ndocker service update \\  \n  --log-driver gelf \\\n  --log-opt gelf-address=udp://monitoring.example.com:12201 \\\n  --log-opt tag=example-tag \\\n  example-service\n```\n\n### 7. attachable network\n\nattachable network`docker run`SwarmDocker 1.13\n\nattachable network:\n\n```bash\ndocker network create --driver=overlay --attachable core  \n```\n\n### 8. Secrets API\n\n[How to write excellent Dockerfiles](https://rock-it.pl/how-to-write-excellent-dockerfiles/)DockerSwarm:\n\n```bash\n# \ndocker service create \\  \n  --env VAR=VALUE \\\n  --env-file FILENAME \\\n  ...\n\n# \ndocker service update \\  \n  --env-add VAR=NEW_VALUE \\\n  --env-rm VAR \\\n  ..\n```\n\n[Secrets API ](https://docs.docker.com/engine/swarm/secrets/)(SSL)Secrets API\n\n### 9. \n\nCPU\n\n`update-parallelism` 11 ` / 2`.\n\n\n\n```bash\n# 10\ndocker service update \\  \n  --update-parallelism 10 \\\n  webapp\n\n# \ndocker service scale redis=1 nginx=4 webapp=20\n\n# \ndocker service ls\n\n# () \ndocker service ps webapp | grep -v \"Shutdown\"  \n```\n\n### 10. Swarm\n\n[Docker Compose v3](https://docs.docker.com/compose/compose-file/#deploy)  `docker-compose.yml` `docker-compose.prod.yml`docker-compose `docker stack deploy` ([docker stack](https://docs.docker.com/engine/reference/commandline/stack/)\n\n**docker-compose**\n\n```\n# docker-compose.prod.yml\nversion: '3'  \nservices:  \n  webapp:\n    image: registry.example.com/webapp\n    networks:\n      - ingress\n    deploy:\n      replicas: ${WEBAPP_REPLICAS}\n      mode: replicated\n      restart_policy:\n        condition: on-failure\n\n  proxy:\n    image: registry.example.com/webapp-nginx-proxy\n    networks:\n      - ingress\n    ports:\n      - 80:80\n      - 443:443\n    deploy:\n      replicas: ${NGINX_REPLICAS}\n      mode: replicated\n      restart_policy:\n        condition: on-failure\n\nnetworks:  \n  ingress:\n    external: true\n```\n\n**:**\n\n```\nexport NGINX_REPLICAS=2 WEBAPP_REPLICAS=5\n\ndocker login registry.example.com  \ndocker stack deploy \\  \n  -c docker-compose.prod.yml\\\n  --with-registry-auth \\\n  frontend\n```\n\ndocker-compse(${VARIABLE})\n\n### 11. \n\nCPUCPU\n\n`reserve-cpu` `reserve-cpu` \n\n```bash\n# CPU\ndocker service update  \n  --limit-cpu 0.25\n  --reserve-cpu 0.1\n  webapp\n```\n\n### 13. \n\nSwarm9/(`--endpoint-mode`)\n\n\n\n[Fundebug](https://fundebug.com/)**Docker: 305097057**\n\n<div style=\"text-align: center;\">\n<img style=\"width:20%;\" src=\"docker-swarm-suggestion/docker.JPG\" />\n</div>\n","slug":"2017/05/08/docker-swarm-suggestion","published":1,"updated":"2017-05-08T00:30:02.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2iqgttj003v71fyy5rwskms","content":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x5B9E;&#x8DF5;&#x4E2D;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x8282;&#x70B9;&#x662F;&#x8FDC;&#x8FDC;&#x4E0D;&#x591F;&#x7684;&#xFF0C;&#x642D;&#x5EFA;Docker&#x96C6;&#x7FA4;&#x52BF;&#x5728;&#x5FC5;&#x884C;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x9762;&#x5BF9;Kubernetes, Mesos&#x4EE5;&#x53CA;Swarm&#x7B49;&#x4F17;&#x591A;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#xFF0C;&#x6211;&#x4EEC;&#x8BE5;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5462;&#xFF1F;&#x5B83;&#x4EEC;&#x4E4B;&#x4E2D;&#xFF0C;Swarm&#x662F;Docker&#x539F;&#x751F;&#x7684;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x6700;&#x7B80;&#x5355;&#xFF0C;&#x6700;&#x6613;&#x5B66;&#xFF0C;&#x6700;&#x8282;&#x7701;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x81F3;&#x5C11;&#x503C;&#x5F97;&#x6211;&#x4EEC;&#x591A;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4ECB;&#x7ECD;&#x4E00;&#x4E9B;&#x975E;&#x5E38;&#x5B9E;&#x7528;&#x7684;&#x5EFA;&#x8BAE;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x539F;&#x6587;: <a href=\"https://rock-it.pl/tips-for-using-docker-swarm-mode-in-production\" target=\"_blank\" rel=\"external\">Tips for using Docker Swarm mode in production</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x672C;&#x6587;&#x7248;&#x6743;&#x5F52;&#x539F;&#x4F5C;&#x8005;&#x6240;&#x6709;&#xFF0C;&#x7FFB;&#x8BD1;&#x4EC5;&#x7528;&#x4E8E;&#x5B66;&#x4E60;</strong>&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x5728;&#x5355;&#x4E2A;&#x751F;&#x4EA7;&#x8282;&#x70B9;&#x4E0A;&#x7528;&#x8FC7;Docker&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x73B0;&#x5355;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x8D44;&#x6E90;&#x4E0D;&#x591F;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x4F1A;&#x600E;&#x4E48;&#x505A;&#x5462;&#xFF1F;&#x6211;&#x4E5F;&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;! &#x5173;&#x4E8E;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;Docker Swarm&#xFF0C;&#x6211;&#x4F1A;&#x4E3A;&#x4F60;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x5EFA;&#x8BAE;&#xFF0C;&#x4E5F;&#x8BB8;&#x80FD;&#x591F;&#x5E2E;&#x5230;&#x4F60;&#x3002;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x6211;&#x4E00;&#x5E74;&#x6765;&#x79EF;&#x7D2F;&#x7684;&#x4E00;&#x4E9B;&#x7ECF;&#x9A8C;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5BF9;Docker Swam&#x4E0D;&#x719F;&#x6089;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x4E4B;&#x524D;&#x7684;&#x535A;&#x5BA2;<a href=\"https://rock-it.pl/my-experience-with-docker-swarm-when-you-need-it/\" target=\"_blank\" rel=\"external\">My experience with Docker Swarm - when you may need it?</a></p>\n<h3 id=\"1-&#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;\"><a href=\"#1-&#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;\" class=\"headerlink\" title=\"1. &#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;\"></a>1. &#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;</h3><p>&#x6211;&#x5E76;&#x4E0D;&#x6253;&#x7B97;&#x91CD;&#x590D;<a href=\"https://docs.docker.com/engine/swarm/swarm-tutorial/\" target=\"_blank\" rel=\"external\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;&#x5C3D;&#x7BA1;&#x6587;&#x6863;&#x975E;&#x5E38;&#x77ED;&#xFF0C;&#x4F46;&#x662F;&#x901A;&#x8FC7;&#x5B83;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;Swarm&#x7684;&#x57FA;&#x672C;&#x77E5;&#x8BC6;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4E5F;&#x4E0D;&#x4F1A;&#x5199;&#x5982;&#x4F55;&#x642D;&#x5EFA;Swarm&#x96C6;&#x7FA4;&#xFF0C;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x8D44;&#x6599;&#x592A;&#x591A;&#x4E86;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x67E5;&#x770B; <a href=\"https://www.digitalocean.com/community/tutorials/how-to-create-a-cluster-of-docker-containers-with-docker-swarm-and-digitalocean-on-ubuntu-16-04\" target=\"_blank\" rel=\"external\">Digital Ocean</a>&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x8C37;&#x6B4C;&#x3002;PS: &#x6211;&#x662F;&#x4F7F;&#x7528;Ansible&#x642D;&#x5EFA;Swarm&#x96C6;&#x7FA4;&#x7684;&#x3002;</p>\n<h3 id=\"2-Docker-Swarm&#x8981;&#x70B9;\"><a href=\"#2-Docker-Swarm&#x8981;&#x70B9;\" class=\"headerlink\" title=\"2. Docker Swarm&#x8981;&#x70B9;\"></a>2. Docker Swarm&#x8981;&#x70B9;</h3><p><strong>Swarm&#x7684;&#x8D1F;&#x8F7D;&#x975E;&#x5E38;&#x4F4E;</strong>&#x3002;&#x636E;&#x6211;&#x89C2;&#x5BDF;&#xFF0C;Swarm&#x8FDB;&#x884C;&#x8C03;&#x5EA6;&#x548C;&#x901A;&#x4FE1;&#x7684;CPU&#x8D1F;&#x8F7D;&#x975E;&#x5E38;&#x4F4E;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Swarm&#x7684;&#x7BA1;&#x7406;&#x8282;&#x70B9;(Manager)&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x4F5C;&#x4E3A;&#x5DE5;&#x4F5C;&#x8282;&#x70B9;(Worker)&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5927;&#x7684;&#x96C6;&#x7FA4;(1000+ &#x8282;&#x70B9;)&#xFF0C;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#x9700;&#x8981;&#x66F4;&#x591A;&#x8D44;&#x6E90;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x4E2D;&#x5C0F;&#x578B;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#xFF0C;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#x9700;&#x8981;&#x7684;&#x8D44;&#x6E90;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x4E0D;&#x8BA1;&#x3002;&#x53E6;&#x5916;&#xFF0C;<a href=\"https://sematext.com/blog/2016/11/14/docker-swarm-lessons-from-swarm3k/\" target=\"_blank\" rel=\"external\">&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;</a>&#x4ECB;&#x7ECD;&#x4E86;Swarm3k&#xFF08;&#x4E00;&#x4E2A;4700&#x8282;&#x70B9;&#x7684;Swarm&#x96C6;&#x7FA4;&#x7684;&#x5B9E;&#x9A8C;&#xFF09;&#xFF0C;&#x4E0D;&#x59A8;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x3002;</p>\n<p><strong>Swarm&#x96C6;&#x7FA4;&#x7684;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;(&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x4EE5;&#x53CA;&#x5BB9;&#x5668;&#x95F4;&#x901A;&#x4FE1;)&#x975E;&#x5E38;&#x53EF;&#x9760;&#x3002;</strong>&#x5F53;&#x4F60;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x4E4B;&#x540E;&#xFF0C;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5B83;&#x3002;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x4E5F;&#x662F;&#x7531;Swarm&#x63D0;&#x4F9B;&#x7684;&#x3002;&#x540E;&#x6587;&#x4F1A;&#x63D0;&#x5230;&#x4E00;&#x4E9B;&#x4E4B;&#x524D;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;<strong>Docker 1.13</strong>&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x90FD;&#x89E3;&#x51B3;&#x4E86;&#x3002;</p>\n<p><strong>&#x4F7F;&#x7528;Swarm&#x53EA;&#x9700;&#x8981;&#x638C;&#x63E1;&#x5C11;&#x91CF;&#x547D;&#x4EE4;&#x3002;</strong>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x6BCF;&#x5929;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service create \\  </div><div class=\"line\">  --image nginx \\</div><div class=\"line\">  --replicas 2 \\</div><div class=\"line\">  nginx </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x66F4;&#x65B0;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service update \\  </div><div class=\"line\">  --image nginx:alpine \\</div><div class=\"line\">  nginx </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5220;&#x9664;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service rm nginx</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;(&#x8FD9;&#x6BD4;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x670D;&#x52A1;&#x8981;&#x597D;)</span></div><div class=\"line\">docker service scale nginx=0</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x589E;&#x52A0;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;</span></div><div class=\"line\">docker service scale nginx=5</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x6240;&#x6709;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service ls</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x7684;&#x5BB9;&#x5668;&#x72B6;&#x6001;</span></div><div class=\"line\">docker service ps nginx</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x3002;</span></div><div class=\"line\">docker service inspect nginx</div></pre></td></tr></table></figure>\n<p><strong>&#x5B9E;&#x73B0;&#x96F6;&#x5B95;&#x673A;&#x90E8;&#x7F72;&#x4E5F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;</strong>&#x8FD9;&#x6837;&#x4E5F;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x5B9E;&#x73B0;&#x6301;&#x7EED;&#x90E8;&#x7F72;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x6784;&#x5EFA;&#x65B0;&#x955C;&#x50CF;</span></div><div class=\"line\">docker build -t hub.docker.com/image . </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5C06;&#x65B0;&#x955C;&#x50CF;&#x4E0A;&#x4F20;&#x5230;Docker&#x4ED3;&#x5E93;</span></div><div class=\"line\">docker push hub.docker.com/image</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x66F4;&#x65B0;&#x670D;&#x52A1;&#x7684;&#x955C;&#x50CF;</span></div><div class=\"line\">docker service update --image hub.docker.com/image service</div></pre></td></tr></table></figure>\n<p><strong>Swarm&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x5165;&#x95E8;</strong>&#x3002;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x901A;&#x5E38;&#x662F;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x3002;&#x4E0E;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;(Mesos, Kubernetes)&#x76F8;&#x6BD4;&#xFF0C;Swarm&#x7684;&#x5B66;&#x4E60;&#x66F2;&#x7EBF;&#x6700;&#x4F4E;&#x3002;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;Swarm&#x77E5;&#x8BC6;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x53EA;&#x82B1;&#x4E86;<strong>&#x4E00;&#x5468;&#x65F6;&#x95F4;</strong>&#xFF0C;&#x5C31;&#x628A;&#x670D;&#x52A1;&#x4ECE;&#x5355;&#x4E2A;Docker&#x4E3B;&#x673A;&#x8FC1;&#x79FB;&#x5230;20&#x4E2A;&#x8282;&#x70B9;&#x7684;Docker&#x96C6;&#x7FA4;&#x4E0A;&#x3002;</p>\n<p><strong>&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x8981;&#x614E;&#x91CD;</strong>&#x3002; &#x4F60;&#x7684;&#x5BB9;&#x5668;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x5728;&#x591A;&#x4E2A;&#x4E3B;&#x673A;&#x4E0A;&#x3002;&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x66F4;&#x65B0;Docker&#x955C;&#x50CF;&#x3002;&#x5408;&#x7406;&#x7684;&#x6D4B;&#x8BD5;&#x548C;&#x90E8;&#x7F72;&#x6D41;&#x7A0B;&#x662F;&#x4FDD;&#x8BC1;&#x6210;&#x529F;&#x7684;&#x5173;&#x952E;&#x3002;</p>\n<h3 id=\"3-&#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;\"><a href=\"#3-&#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;\" class=\"headerlink\" title=\"3. &#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;\"></a>3. &#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;</h3><p><strong>&#x5E76;&#x975E;&#x6240;&#x6709;&#x670D;&#x52A1;&#x90FD;&#x5E94;&#x8BE5;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x5185;</strong>&#x3002;&#x6570;&#x636E;&#x5E93;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x6709;&#x72B6;&#x6001;&#x670D;&#x52A1;&#x5C31;&#x4E0D;&#x9002;&#x5408;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x5185;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;labels&#x5C06;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5230;&#x7279;&#x5B9A;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;Swarm&#x96C6;&#x7FA4;&#x5916;&#x7684;&#x8282;&#x70B9;&#x5C31;&#x5F88;&#x96BE;&#x8BBF;&#x95EE;&#x5B83;&#x4EEC;&#x4E86;(Docker 1.12&#x6CA1;&#x6709;&#x5F88;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;1.13&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<em>attachable</em> network)&#x3002;&#x5982;&#x679C;&#x4F60;&#x5141;&#x8BB8;&#x96C6;&#x7FA4;&#x5916;&#x7684;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5219;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5B83;&#xFF0C;&#x8FD9;&#x663E;&#x7136;&#x4E0D;&#x7B26;&#x5408;&#x4F60;&#x7684;&#x9700;&#x6C42;&#x3002;&#x53E6;&#x5916;&#xFF0C;Docker Swarm&#x7684;&#x8DE8;&#x8282;&#x70B9;&#x6570;&#x636E;&#x5377;(cross-host mounted volumes)&#x5E76;&#x4E0D;&#x53EF;&#x9760;&#xFF0C;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x90FD;&#x53EF;&#x80FD;&#x5F15;&#x8D77;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x65E0;&#x72B6;&#x6001;&#x7684;&#x5BB9;&#x5668;&#x5C31;&#x975E;&#x5E38;&#x9002;&#x5408;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x7531;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x914D;&#x7F6E;(&#x4F7F;&#x7528;ENV&#x6307;&#x4EE4;)&#x3002;&#x5EFA;&#x8BAE;&#x4E3A;&#x5F00;&#x6E90;&#x5DE5;&#x5177;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;Nginx&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x653E;&#x5230;Docker&#x955C;&#x50CF;&#x4E2D;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x670D;&#x52A1;:</p>\n<ul>\n<li>Django channels (&#x7F51;&#x9875;&#x5E94;&#x7528;)</li>\n<li>Nginx(&#x4EE3;&#x7406;)</li>\n<li>Celery(&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;)</li>\n<li>Sensu(&#x76D1;&#x63A7;)</li>\n</ul>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E4B;&#x5916;&#x7684;&#x5BB9;&#x5668;:</p>\n<ul>\n<li>Postgres(&#x6570;&#x636E;&#x5E93;)</li>\n<li>Redis(&#x7F13;&#x5B58;)</li>\n</ul>\n<p>&#x7531;&#x4E8E;&#x4E00;&#x4E2A;&#x83B7;&#x53D6;&#x771F;&#x6B63;IP&#x7684;<a href=\"https://github.com/moby/moby/issues/25526\" target=\"_blank\" rel=\"external\">&#x95EE;&#x9898;</a>&#xFF0C;&#x6211;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x5C06;Nginx&#x8FD0;&#x884C;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E4B;&#x5916;&#xFF0C;&#x6216;&#x8005;&#x91C7;&#x7528;host&#x6A21;&#x5F0F;&#x3002;</p>\n<h3 id=\"4-&#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;\"><a href=\"#4-&#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"4. &#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;\"></a>4. &#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;</h3><p>Docker&#x4ED3;&#x5E93;&#xFF0C;&#x4F60;&#x503C;&#x5F97;&#x62E5;&#x6709;&#xFF01;&#x4F60;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;Docker&#x4ED3;&#x5E93;&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;<a href=\"https://hub.docker.com/\" target=\"_blank\" rel=\"external\">DockerHub</a>&#x6216;&#x8005;<a href=\"http://docs.gitlab.com/ce/user/project/container_registry.html\" target=\"_blank\" rel=\"external\">GitLab Container Registry</a>&#x3002;&#x4E0D;&#x8981;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x76F4;&#x63A5;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x6709;&#x591A;&#x4E2A;&#x8282;&#x70B9;(&#x5728;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x975E;&#x5E38;&#x9EBB;&#x70E6;)&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x7684;&#x65F6;&#x5019;&#x4F60;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x955C;&#x50CF;(&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x5E94;&#x8BE5;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;)&#x3002;&#x5982;&#x679C;&#x4F60;&#x914D;&#x7F6E;&#x4E86;&#x79C1;&#x6709;Docker&#x4ED3;&#x5E93;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x6307;&#x5B9A;<code>--with-registry-auth</code>&#xFF0C;&#x5426;&#x5219;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x5C06;&#x65E0;&#x6CD5;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4E3A;Docker&#x955C;&#x50CF;&#x8BBE;&#x7F6E;&#x7248;&#x672C;&#xFF0C;&#x8FD9;&#x6837;&#x66F4;&#x52A0;&#x6613;&#x4E8E;&#x56DE;&#x6EDA;&#x3002;</p>\n<h3 id=\"5-&#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;\"><a href=\"#5-&#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;\" class=\"headerlink\" title=\"5. &#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;\"></a>5. &#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;</h3><p>&#x6240;&#x8C13;<strong>&#x534A;&#x65E0;&#x72B6;&#x6001;&#x670D;&#x52A1;</strong>&#xFF0C;&#x5C31;&#x662F;&#x5BB9;&#x5668;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x4E00;&#x4E9B;&#x4E0D;&#x592A;&#x91CD;&#x8981;&#x7684;&#x5916;&#x90E8;&#x6587;&#x4EF6;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5377;(volume)&#xFF0C;&#x4F46;&#x662F;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;&#x662F;&#x4F7F;&#x7528;S3&#x6216;&#x8005;&#x5176;&#x4ED6;&#x4E91;&#x5B58;&#x50A8;&#x670D;&#x52A1;&#x3002;&#x8BB0;&#x4F4F;&#xFF0C;&#x60F3;&#x8981;&#x83B7;&#x5F97;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x4E91;&#x662F;&#x6700;&#x597D;&#x7684;&#x9009;&#x62E9;&#x3002;</p>\n<p>&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4E0D;&#x5F97;&#x4E0D;&#x6784;&#x5EFA;Nginx&#x955C;&#x50CF;&#xFF0C;&#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x955C;&#x50CF;&#x4E2D;&#x3002;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5377;&#x6302;&#x8F7D;Nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E0D;&#x662F;&#x5F88;&#x65B9;&#x4FBF;&#x3002;</p>\n<h3 id=\"6-&#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;\"><a href=\"#6-&#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;\" class=\"headerlink\" title=\"6. &#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;\"></a>6. &#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;</h3><p>&#x4F7F;&#x7528;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x65F6;&#xFF0C;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;&#x65E5;&#x5FD7;&#x662F;&#x975E;&#x5E38;&#x5FC5;&#x8981;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x6709;&#x5F88;&#x591A;&#x65B9;&#x6848;&#xFF0C;&#x5305;&#x62EC;&#x5F00;&#x6E90;&#x5DE5;&#x5177;&#x6216;&#x8005;SaaS&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;ELK&#xFF0C;Grafana, Graylog&#x2026;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x5B8C;&#x6574;&#x7684;&#x7CFB;&#x7EDF;&#x662F;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5EFA;&#x8BAE;&#x642D;&#x5EFA;&#x5148;&#x4F7F;&#x7528;SaaS&#x670D;&#x52A1;(&#x6BD4;&#x5982;<a href=\"http://loggly.com/\" target=\"_blank\" rel=\"external\">Loggly</a>, <a href=\"http://logentries.com/\" target=\"_blank\" rel=\"external\">Logentries </a>)&#xFF0C;&#x5F53;&#x8D39;&#x7528;&#x592A;&#x9AD8;&#x65F6;&#xFF0C;&#x5219;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x3002;ELK&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x914D;&#x7F6E;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker service update \\  </div><div class=\"line\">  --log-driver gelf \\</div><div class=\"line\">  --log-opt gelf-address=udp://monitoring.example.com:12201 \\</div><div class=\"line\">  --log-opt tag=example-tag \\</div><div class=\"line\">  example-service</div></pre></td></tr></table></figure>\n<h3 id=\"7-&#x521B;&#x5EFA;attachable-network\"><a href=\"#7-&#x521B;&#x5EFA;attachable-network\" class=\"headerlink\" title=\"7. &#x521B;&#x5EFA;attachable network\"></a>7. &#x521B;&#x5EFA;attachable network</h3><p>attachable network&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x7279;&#x6027;&#x3002;&#x4F60;&#x6700;&#x597D;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x5426;&#x5219;<code>docker run</code>&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x5C06;&#x65E0;&#x6CD5;&#x63A5;&#x5165;Swarm&#x96C6;&#x7FA4;&#x7684;&#x7F51;&#x7EDC;&#x3002;&#x8FD9;&#x662F;Docker 1.13&#x4E4B;&#x540E;&#x7684;&#x7248;&#x672C;&#x624D;&#x6709;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x8BB8;&#x4F60;&#x9700;&#x8981;&#x5347;&#x7EA7;&#x3002;</p>\n<p>&#x521B;&#x5EFA;attachable network&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker network create --driver=overlay --attachable core</div></pre></td></tr></table></figure>\n<h3 id=\"8-&#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets-API\"><a href=\"#8-&#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets-API\" class=\"headerlink\" title=\"8. &#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets API\"></a>8. &#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets API</h3><p>&#x5982;&#x679C;&#x4F60;&#x6309;&#x7167;<a href=\"https://rock-it.pl/how-to-write-excellent-dockerfiles/\" target=\"_blank\" rel=\"external\">How to write excellent Dockerfiles</a>&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#xFF0C;&#x4F60;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x53BB;&#x914D;&#x7F6E;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x8FC1;&#x79FB;&#x5230;Swarm&#x96C6;&#x7FA4;&#x65F6;&#x95EE;&#x9898;&#x4F1A;&#x5C11;&#x5F88;&#x591A;&#x3002;&#x793A;&#x4F8B;&#x547D;&#x4EE4;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x670D;&#x52A1;&#x65F6;&#x6307;&#x5B9A;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></div><div class=\"line\">docker service create \\  </div><div class=\"line\">  --env VAR=VALUE \\</div><div class=\"line\">  --env-file FILENAME \\</div><div class=\"line\">  ...</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x589E;&#x52A0;&#x3001;&#x5220;&#x9664;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></div><div class=\"line\">docker service update \\  </div><div class=\"line\">  --env-add VAR=NEW_VALUE \\</div><div class=\"line\">  --env-rm VAR \\</div><div class=\"line\">  ..</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x4E00;&#x6B65;&#x662F;&#x4F7F;&#x7528;<a href=\"https://docs.docker.com/engine/swarm/secrets/\" target=\"_blank\" rel=\"external\">Secrets API </a>&#x3002;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x79C1;&#x5BC6;&#x6570;&#x636E;(&#x6BD4;&#x5982;&#x5BC6;&#x7801;&#xFF0C;SSL&#x8BC1;&#x4E66;&#x7B49;)&#x4EE5;&#x6587;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#x6302;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x3002;&#x867D;&#x7136;&#x6211;&#x8FD8;&#x6CA1;&#x6709;&#x7528;&#x8FC7;Secrets API&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x89C9;&#x5F97;&#x503C;&#x5F97;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#x3002;</p>\n<h3 id=\"9-&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;\"><a href=\"#9-&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;\" class=\"headerlink\" title=\"9. &#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;\"></a>9. &#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;</h3><p>&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x8DB3;&#x591F;&#x591A;&#x7684;&#x5BB9;&#x5668;&#x6570;&#x6765;&#x5904;&#x7406;&#x8D1F;&#x8F7D;&#x4EE5;&#x53CA;&#x4F5C;&#x4E3A;&#x707E;&#x5907;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x592A;&#x591A;&#x7684;&#x5BB9;&#x5668;&#x4F1A;&#x5BFC;&#x81F4;CPU&#x548C;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x5408;&#x7406;&#x4E2A;&#x6570;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;<code>update-parallelism</code> &#x503C;&#x662F;1&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x6BCF;&#x6B21;&#x53EA;&#x66F4;&#x65B0;1&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x592A;&#x5C0F;&#x4E86;&#x3002;&#x6211;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#x5C06;&#x5B83;&#x8BBE;&#x4E3A; <code>&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x6570; / 2</code>.&#x3002;</p>\n<p>&#x76F8;&#x5173;&#x547D;&#x4EE4;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5C06;&#x540C;&#x65F6;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x6570;&#x8BBE;&#x4E3A;10</span></div><div class=\"line\">docker service update \\  </div><div class=\"line\">  --update-parallelism 10 \\</div><div class=\"line\">  webapp</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x540C;&#x65F6;&#x589E;&#x52A0;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x5BB9;&#x5668;&#x6570;</span></div><div class=\"line\">docker service scale redis=1 nginx=4 webapp=20</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x72B6;&#x6001;</span></div><div class=\"line\">docker service ls</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x7684;&#x8BE6;&#x60C5;(&#x6392;&#x9664;&#x5173;&#x95ED;&#x7684;&#x5BB9;&#x5668;) </span></div><div class=\"line\">docker service ps webapp | grep -v <span class=\"string\">&quot;Shutdown&quot;</span></div></pre></td></tr></table></figure>\n<h3 id=\"10-&#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;\"><a href=\"#10-&#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;\" class=\"headerlink\" title=\"10. &#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;\"></a>10. &#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;</h3><p>&#x6700;&#x4F73;&#x65B9;&#x5F0F;&#x662F;&#x4F7F;&#x7528;<a href=\"https://docs.docker.com/compose/compose-file/#deploy\" target=\"_blank\" rel=\"external\">Docker Compose v3</a> &#x8BED;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5C06;&#x670D;&#x52A1;&#x7684;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x4EE3;&#x7801;&#x5316;&#x3002;&#x6211;&#x5C06; <code>docker-compose.yml</code>&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C; <code>docker-compose.prod.yml</code>&#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x3002;&#x4F7F;&#x7528;docker-compose&#x6587;&#x4EF6;&#x90E8;&#x7F72;&#x670D;&#x52A1;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528; <code>docker stack deploy</code> &#x547D;&#x4EE4;(&#x53C2;&#x8003;<a href=\"https://docs.docker.com/engine/reference/commandline/stack/\" target=\"_blank\" rel=\"external\">docker stack</a></p>\n<p><strong>docker-compose&#x6587;&#x4EF6;&#x793A;&#x4F8B;</strong></p>\n<figure class=\"highlight dts\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># docker-compose.prod.yml</span></div><div class=\"line\"><span class=\"symbol\">version:</span> <span class=\"string\">&apos;3&apos;</span>  </div><div class=\"line\"><span class=\"symbol\">services:</span>  </div><div class=\"line\"><span class=\"symbol\">  webapp:</span></div><div class=\"line\"><span class=\"symbol\">    image:</span> registry.example.com/webapp</div><div class=\"line\"><span class=\"symbol\">    networks:</span></div><div class=\"line\">      - ingress</div><div class=\"line\"><span class=\"symbol\">    deploy:</span></div><div class=\"line\"><span class=\"symbol\">      replicas:</span> ${WEBAPP_REPLICAS}</div><div class=\"line\"><span class=\"symbol\">      mode:</span> replicated</div><div class=\"line\"><span class=\"symbol\">      restart_policy:</span></div><div class=\"line\"><span class=\"symbol\">        condition:</span> on-failure</div><div class=\"line\"><span class=\"symbol\"></span></div><div class=\"line\">  proxy:</div><div class=\"line\"><span class=\"symbol\">    image:</span> registry.example.com/webapp-nginx-proxy</div><div class=\"line\"><span class=\"symbol\">    networks:</span></div><div class=\"line\">      - ingress</div><div class=\"line\"><span class=\"symbol\">    ports:</span></div><div class=\"line\">      - <span class=\"number\">80</span>:<span class=\"number\">80</span></div><div class=\"line\">      - <span class=\"number\">443</span>:<span class=\"number\">443</span></div><div class=\"line\"><span class=\"symbol\">    deploy:</span></div><div class=\"line\"><span class=\"symbol\">      replicas:</span> ${NGINX_REPLICAS}</div><div class=\"line\"><span class=\"symbol\">      mode:</span> replicated</div><div class=\"line\"><span class=\"symbol\">      restart_policy:</span></div><div class=\"line\"><span class=\"symbol\">        condition:</span> on-failure</div><div class=\"line\"><span class=\"symbol\"></span></div><div class=\"line\">networks:  </div><div class=\"line\"><span class=\"symbol\">  ingress:</span></div><div class=\"line\"><span class=\"symbol\">    external:</span> true</div></pre></td></tr></table></figure>\n<p><strong>&#x90E8;&#x7F72;&#x547D;&#x4EE4;:</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">export NGINX_REPLICAS=<span class=\"number\">2</span> WEBAPP_REPLICAS=<span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\">docker login registry<span class=\"selector-class\">.example</span><span class=\"selector-class\">.com</span>  </div><div class=\"line\">docker stack deploy \\  </div><div class=\"line\">  -c docker-compose<span class=\"selector-class\">.prod</span><span class=\"selector-class\">.yml</span>\\</div><div class=\"line\">  --with-registry-auth \\</div><div class=\"line\">  frontend</div></pre></td></tr></table></figure>\n<p>&#x53E6;&#x5916;&#xFF0C;docker-compse&#x6587;&#x4EF6;&#x652F;&#x6301;&#x73AF;&#x5883;&#x53D8;&#x91CF;(${VARIABLE})&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x8C03;&#x6574;&#x914D;&#x7F6E;&#x3002;</p>\n<h3 id=\"11-&#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;\"><a href=\"#11-&#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;\" class=\"headerlink\" title=\"11. &#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;\"></a>11. &#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;</h3><p>&#x6839;&#x636E;&#x6211;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x9650;&#x5236;&#x6240;&#x6709;&#x670D;&#x52A1;&#x7684;CPU&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x5355;&#x4E2A;&#x5BB9;&#x5668;&#x5360;&#x7528;&#x4E3B;&#x673A;&#x7684;&#x6240;&#x6709;&#x7684;CPU&#x8D44;&#x6E90;&#x3002;</p>\n<p><code>reserve-cpu</code> &#x9009;&#x9879;&#x4E5F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;&#x5F53;&#x6211;&#x5E0C;&#x671B;&#x5E73;&#x5747;&#x5730;&#x5C06;&#x6240;&#x6709;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5230;&#x5404;&#x4E2A;&#x4E3B;&#x673A;&#x65F6;&#xFF0C;&#x6211;&#x4F1A;&#x4F7F;&#x7528;<code>reserve-cpu</code> &#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x5BB9;&#x5668;&#x90FD;&#x6709;&#x8DB3;&#x591F;&#x5730;&#x8D44;&#x6E90;&#x3002;&#x793A;&#x4F8B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x9650;&#x5236;&#x670D;&#x52A1;&#x5360;&#x7528;&#x7684;CPU&#x8D44;&#x6E90;</span></div><div class=\"line\">docker service update  </div><div class=\"line\">  --limit-cpu 0.25</div><div class=\"line\">  --reserve-cpu 0.1</div><div class=\"line\">  webapp</div></pre></td></tr></table></figure>\n<h3 id=\"13-&#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;\"><a href=\"#13-&#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"13. &#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;\"></a>13. &#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;</h3><p>&#x6211;&#x9047;&#x5230;&#x8FC7;Swarm&#x7F51;&#x7EDC;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;&#x3002;&#x6709;&#x65F6;&#x5019;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x67D0;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x800C;&#x8FD8;&#x6709;9&#x4E2A;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x51CF;&#x5C11;/&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x4E2A;&#x6570;&#xFF0C;&#x6216;&#x8005;&#x6539;&#x53D8;&#x8DEF;&#x7531;&#x7C7B;&#x578B;(&#x4F7F;&#x7528;<code>--endpoint-mode</code>&#x9009;&#x9879;)</p>\n<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x76D1;&#x63A7;&#x65E5;&#x5FD7;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x95EE;&#x9898;&#x5F88;&#x96BE;&#x88AB;&#x53D1;&#x73B0;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x642D;&#x5EFA;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x662F;&#x975E;&#x5E38;&#x5FC5;&#x8981;&#x7684;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\" target=\"_blank\" rel=\"external\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/05/08/docker-swarm-suggestion/docker.JPG\"><br></div>\n","excerpt":"<p><strong>&#x8BD1;&#x8005;&#x6309;:</strong> &#x5B9E;&#x8DF5;&#x4E2D;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#x5355;&#x4E2A;Docker&#x8282;&#x70B9;&#x662F;&#x8FDC;&#x8FDC;&#x4E0D;&#x591F;&#x7684;&#xFF0C;&#x642D;&#x5EFA;Docker&#x96C6;&#x7FA4;&#x52BF;&#x5728;&#x5FC5;&#x884C;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x9762;&#x5BF9;Kubernetes, Mesos&#x4EE5;&#x53CA;Swarm&#x7B49;&#x4F17;&#x591A;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#xFF0C;&#x6211;&#x4EEC;&#x8BE5;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5462;&#xFF1F;&#x5B83;&#x4EEC;&#x4E4B;&#x4E2D;&#xFF0C;Swarm&#x662F;Docker&#x539F;&#x751F;&#x7684;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x6700;&#x7B80;&#x5355;&#xFF0C;&#x6700;&#x6613;&#x5B66;&#xFF0C;&#x6700;&#x8282;&#x7701;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x81F3;&#x5C11;&#x503C;&#x5F97;&#x6211;&#x4EEC;&#x591A;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4ECB;&#x7ECD;&#x4E00;&#x4E9B;&#x975E;&#x5E38;&#x5B9E;&#x7528;&#x7684;&#x5EFA;&#x8BAE;&#x3002;</p>","more":"<p>&#x539F;&#x6587;: <a href=\"https://rock-it.pl/tips-for-using-docker-swarm-mode-in-production\">Tips for using Docker Swarm mode in production</a></p>\n<p>&#x8BD1;&#x8005;: <a href=\"https://fundebug.com/\">Fundebug</a></p>\n<p><strong>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x672C;&#x6587;&#x91C7;&#x7528;&#x610F;&#x8BD1;&#x800C;&#x975E;&#x76F4;&#x8BD1;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x672C;&#x6587;&#x7248;&#x6743;&#x5F52;&#x539F;&#x4F5C;&#x8005;&#x6240;&#x6709;&#xFF0C;&#x7FFB;&#x8BD1;&#x4EC5;&#x7528;&#x4E8E;&#x5B66;&#x4E60;</strong>&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x5728;&#x5355;&#x4E2A;&#x751F;&#x4EA7;&#x8282;&#x70B9;&#x4E0A;&#x7528;&#x8FC7;Docker&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x73B0;&#x5355;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x8D44;&#x6E90;&#x4E0D;&#x591F;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x4F1A;&#x600E;&#x4E48;&#x505A;&#x5462;&#xFF1F;&#x6211;&#x4E5F;&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;! &#x5173;&#x4E8E;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;Docker Swarm&#xFF0C;&#x6211;&#x4F1A;&#x4E3A;&#x4F60;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x5EFA;&#x8BAE;&#xFF0C;&#x4E5F;&#x8BB8;&#x80FD;&#x591F;&#x5E2E;&#x5230;&#x4F60;&#x3002;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x6211;&#x4E00;&#x5E74;&#x6765;&#x79EF;&#x7D2F;&#x7684;&#x4E00;&#x4E9B;&#x7ECF;&#x9A8C;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5BF9;Docker Swam&#x4E0D;&#x719F;&#x6089;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x4E4B;&#x524D;&#x7684;&#x535A;&#x5BA2;<a href=\"https://rock-it.pl/my-experience-with-docker-swarm-when-you-need-it/\">My experience with Docker Swarm - when you may need it?</a></p>\n<h3 id=\"1-&#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;\"><a href=\"#1-&#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;\" class=\"headerlink\" title=\"1. &#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;\"></a>1. &#x9605;&#x8BFB;&#x5B98;&#x65B9;&#x6587;&#x6863;</h3><p>&#x6211;&#x5E76;&#x4E0D;&#x6253;&#x7B97;&#x91CD;&#x590D;<a href=\"https://docs.docker.com/engine/swarm/swarm-tutorial/\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;&#x5C3D;&#x7BA1;&#x6587;&#x6863;&#x975E;&#x5E38;&#x77ED;&#xFF0C;&#x4F46;&#x662F;&#x901A;&#x8FC7;&#x5B83;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;Swarm&#x7684;&#x57FA;&#x672C;&#x77E5;&#x8BC6;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4E5F;&#x4E0D;&#x4F1A;&#x5199;&#x5982;&#x4F55;&#x642D;&#x5EFA;Swarm&#x96C6;&#x7FA4;&#xFF0C;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x8D44;&#x6599;&#x592A;&#x591A;&#x4E86;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x67E5;&#x770B; <a href=\"https://www.digitalocean.com/community/tutorials/how-to-create-a-cluster-of-docker-containers-with-docker-swarm-and-digitalocean-on-ubuntu-16-04\">Digital Ocean</a>&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x8C37;&#x6B4C;&#x3002;PS: &#x6211;&#x662F;&#x4F7F;&#x7528;Ansible&#x642D;&#x5EFA;Swarm&#x96C6;&#x7FA4;&#x7684;&#x3002;</p>\n<h3 id=\"2-Docker-Swarm&#x8981;&#x70B9;\"><a href=\"#2-Docker-Swarm&#x8981;&#x70B9;\" class=\"headerlink\" title=\"2. Docker Swarm&#x8981;&#x70B9;\"></a>2. Docker Swarm&#x8981;&#x70B9;</h3><p><strong>Swarm&#x7684;&#x8D1F;&#x8F7D;&#x975E;&#x5E38;&#x4F4E;</strong>&#x3002;&#x636E;&#x6211;&#x89C2;&#x5BDF;&#xFF0C;Swarm&#x8FDB;&#x884C;&#x8C03;&#x5EA6;&#x548C;&#x901A;&#x4FE1;&#x7684;CPU&#x8D1F;&#x8F7D;&#x975E;&#x5E38;&#x4F4E;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Swarm&#x7684;&#x7BA1;&#x7406;&#x8282;&#x70B9;(Manager)&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x4F5C;&#x4E3A;&#x5DE5;&#x4F5C;&#x8282;&#x70B9;(Worker)&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5927;&#x7684;&#x96C6;&#x7FA4;(1000+ &#x8282;&#x70B9;)&#xFF0C;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#x9700;&#x8981;&#x66F4;&#x591A;&#x8D44;&#x6E90;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x4E2D;&#x5C0F;&#x578B;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#xFF0C;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#x9700;&#x8981;&#x7684;&#x8D44;&#x6E90;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x4E0D;&#x8BA1;&#x3002;&#x53E6;&#x5916;&#xFF0C;<a href=\"https://sematext.com/blog/2016/11/14/docker-swarm-lessons-from-swarm3k/\">&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;</a>&#x4ECB;&#x7ECD;&#x4E86;Swarm3k&#xFF08;&#x4E00;&#x4E2A;4700&#x8282;&#x70B9;&#x7684;Swarm&#x96C6;&#x7FA4;&#x7684;&#x5B9E;&#x9A8C;&#xFF09;&#xFF0C;&#x4E0D;&#x59A8;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x3002;</p>\n<p><strong>Swarm&#x96C6;&#x7FA4;&#x7684;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;(&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x4EE5;&#x53CA;&#x5BB9;&#x5668;&#x95F4;&#x901A;&#x4FE1;)&#x975E;&#x5E38;&#x53EF;&#x9760;&#x3002;</strong>&#x5F53;&#x4F60;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;&#x4E4B;&#x540E;&#xFF0C;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5B83;&#x3002;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x4E5F;&#x662F;&#x7531;Swarm&#x63D0;&#x4F9B;&#x7684;&#x3002;&#x540E;&#x6587;&#x4F1A;&#x63D0;&#x5230;&#x4E00;&#x4E9B;&#x4E4B;&#x524D;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;<strong>Docker 1.13</strong>&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x90FD;&#x89E3;&#x51B3;&#x4E86;&#x3002;</p>\n<p><strong>&#x4F7F;&#x7528;Swarm&#x53EA;&#x9700;&#x8981;&#x638C;&#x63E1;&#x5C11;&#x91CF;&#x547D;&#x4EE4;&#x3002;</strong>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x6BCF;&#x5929;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service create \\  </div><div class=\"line\">  --image nginx \\</div><div class=\"line\">  --replicas 2 \\</div><div class=\"line\">  nginx </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x66F4;&#x65B0;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service update \\  </div><div class=\"line\">  --image nginx:alpine \\</div><div class=\"line\">  nginx </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5220;&#x9664;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service rm nginx</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;(&#x8FD9;&#x6BD4;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x670D;&#x52A1;&#x8981;&#x597D;)</span></div><div class=\"line\">docker service scale nginx=0</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x589E;&#x52A0;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;</span></div><div class=\"line\">docker service scale nginx=5</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x6240;&#x6709;&#x670D;&#x52A1;</span></div><div class=\"line\">docker service ls</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x7684;&#x5BB9;&#x5668;&#x72B6;&#x6001;</span></div><div class=\"line\">docker service ps nginx</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x3002;</span></div><div class=\"line\">docker service inspect nginx</div></pre></td></tr></table></figure>\n<p><strong>&#x5B9E;&#x73B0;&#x96F6;&#x5B95;&#x673A;&#x90E8;&#x7F72;&#x4E5F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;</strong>&#x8FD9;&#x6837;&#x4E5F;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x5B9E;&#x73B0;&#x6301;&#x7EED;&#x90E8;&#x7F72;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x6784;&#x5EFA;&#x65B0;&#x955C;&#x50CF;</span></div><div class=\"line\">docker build -t hub.docker.com/image . </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x5C06;&#x65B0;&#x955C;&#x50CF;&#x4E0A;&#x4F20;&#x5230;Docker&#x4ED3;&#x5E93;</span></div><div class=\"line\">docker push hub.docker.com/image</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x66F4;&#x65B0;&#x670D;&#x52A1;&#x7684;&#x955C;&#x50CF;</span></div><div class=\"line\">docker service update --image hub.docker.com/image service</div></pre></td></tr></table></figure>\n<p><strong>Swarm&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x5165;&#x95E8;</strong>&#x3002;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x901A;&#x5E38;&#x662F;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x3002;&#x4E0E;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;(Mesos, Kubernetes)&#x76F8;&#x6BD4;&#xFF0C;Swarm&#x7684;&#x5B66;&#x4E60;&#x66F2;&#x7EBF;&#x6700;&#x4F4E;&#x3002;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;Swarm&#x77E5;&#x8BC6;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x53EA;&#x82B1;&#x4E86;<strong>&#x4E00;&#x5468;&#x65F6;&#x95F4;</strong>&#xFF0C;&#x5C31;&#x628A;&#x670D;&#x52A1;&#x4ECE;&#x5355;&#x4E2A;Docker&#x4E3B;&#x673A;&#x8FC1;&#x79FB;&#x5230;20&#x4E2A;&#x8282;&#x70B9;&#x7684;Docker&#x96C6;&#x7FA4;&#x4E0A;&#x3002;</p>\n<p><strong>&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x8981;&#x614E;&#x91CD;</strong>&#x3002; &#x4F60;&#x7684;&#x5BB9;&#x5668;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x5728;&#x591A;&#x4E2A;&#x4E3B;&#x673A;&#x4E0A;&#x3002;&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x66F4;&#x65B0;Docker&#x955C;&#x50CF;&#x3002;&#x5408;&#x7406;&#x7684;&#x6D4B;&#x8BD5;&#x548C;&#x90E8;&#x7F72;&#x6D41;&#x7A0B;&#x662F;&#x4FDD;&#x8BC1;&#x6210;&#x529F;&#x7684;&#x5173;&#x952E;&#x3002;</p>\n<h3 id=\"3-&#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;\"><a href=\"#3-&#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;\" class=\"headerlink\" title=\"3. &#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;\"></a>3. &#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;</h3><p><strong>&#x5E76;&#x975E;&#x6240;&#x6709;&#x670D;&#x52A1;&#x90FD;&#x5E94;&#x8BE5;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x5185;</strong>&#x3002;&#x6570;&#x636E;&#x5E93;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x6709;&#x72B6;&#x6001;&#x670D;&#x52A1;&#x5C31;&#x4E0D;&#x9002;&#x5408;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x5185;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;labels&#x5C06;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5230;&#x7279;&#x5B9A;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;Swarm&#x96C6;&#x7FA4;&#x5916;&#x7684;&#x8282;&#x70B9;&#x5C31;&#x5F88;&#x96BE;&#x8BBF;&#x95EE;&#x5B83;&#x4EEC;&#x4E86;(Docker 1.12&#x6CA1;&#x6709;&#x5F88;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;1.13&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<em>attachable</em> network)&#x3002;&#x5982;&#x679C;&#x4F60;&#x5141;&#x8BB8;&#x96C6;&#x7FA4;&#x5916;&#x7684;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5219;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5B83;&#xFF0C;&#x8FD9;&#x663E;&#x7136;&#x4E0D;&#x7B26;&#x5408;&#x4F60;&#x7684;&#x9700;&#x6C42;&#x3002;&#x53E6;&#x5916;&#xFF0C;Docker Swarm&#x7684;&#x8DE8;&#x8282;&#x70B9;&#x6570;&#x636E;&#x5377;(cross-host mounted volumes)&#x5E76;&#x4E0D;&#x53EF;&#x9760;&#xFF0C;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x90FD;&#x53EF;&#x80FD;&#x5F15;&#x8D77;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x65E0;&#x72B6;&#x6001;&#x7684;&#x5BB9;&#x5668;&#x5C31;&#x975E;&#x5E38;&#x9002;&#x5408;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x7531;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x914D;&#x7F6E;(&#x4F7F;&#x7528;ENV&#x6307;&#x4EE4;)&#x3002;&#x5EFA;&#x8BAE;&#x4E3A;&#x5F00;&#x6E90;&#x5DE5;&#x5177;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;Nginx&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x653E;&#x5230;Docker&#x955C;&#x50CF;&#x4E2D;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x670D;&#x52A1;:</p>\n<ul>\n<li>Django channels (&#x7F51;&#x9875;&#x5E94;&#x7528;)</li>\n<li>Nginx(&#x4EE3;&#x7406;)</li>\n<li>Celery(&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;)</li>\n<li>Sensu(&#x76D1;&#x63A7;)</li>\n</ul>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x90E8;&#x7F72;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E4B;&#x5916;&#x7684;&#x5BB9;&#x5668;:</p>\n<ul>\n<li>Postgres(&#x6570;&#x636E;&#x5E93;)</li>\n<li>Redis(&#x7F13;&#x5B58;)</li>\n</ul>\n<p>&#x7531;&#x4E8E;&#x4E00;&#x4E2A;&#x83B7;&#x53D6;&#x771F;&#x6B63;IP&#x7684;<a href=\"https://github.com/moby/moby/issues/25526\">&#x95EE;&#x9898;</a>&#xFF0C;&#x6211;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x5C06;Nginx&#x8FD0;&#x884C;&#x5728;Swarm&#x96C6;&#x7FA4;&#x4E4B;&#x5916;&#xFF0C;&#x6216;&#x8005;&#x91C7;&#x7528;host&#x6A21;&#x5F0F;&#x3002;</p>\n<h3 id=\"4-&#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;\"><a href=\"#4-&#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"4. &#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;\"></a>4. &#x914D;&#x7F6E;Docker&#x4ED3;&#x5E93;</h3><p>Docker&#x4ED3;&#x5E93;&#xFF0C;&#x4F60;&#x503C;&#x5F97;&#x62E5;&#x6709;&#xFF01;&#x4F60;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;Docker&#x4ED3;&#x5E93;&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;<a href=\"https://hub.docker.com/\">DockerHub</a>&#x6216;&#x8005;<a href=\"http://docs.gitlab.com/ce/user/project/container_registry.html\">GitLab Container Registry</a>&#x3002;&#x4E0D;&#x8981;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x76F4;&#x63A5;&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x6709;&#x591A;&#x4E2A;&#x8282;&#x70B9;(&#x5728;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x975E;&#x5E38;&#x9EBB;&#x70E6;)&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x7684;&#x65F6;&#x5019;&#x4F60;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x955C;&#x50CF;(&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x5E94;&#x8BE5;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;)&#x3002;&#x5982;&#x679C;&#x4F60;&#x914D;&#x7F6E;&#x4E86;&#x79C1;&#x6709;Docker&#x4ED3;&#x5E93;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x6307;&#x5B9A;<code>--with-registry-auth</code>&#xFF0C;&#x5426;&#x5219;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x5C06;&#x65E0;&#x6CD5;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4E3A;Docker&#x955C;&#x50CF;&#x8BBE;&#x7F6E;&#x7248;&#x672C;&#xFF0C;&#x8FD9;&#x6837;&#x66F4;&#x52A0;&#x6613;&#x4E8E;&#x56DE;&#x6EDA;&#x3002;</p>\n<h3 id=\"5-&#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;\"><a href=\"#5-&#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;\" class=\"headerlink\" title=\"5. &#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;\"></a>5. &#x5C06;&#x534A;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#x53D8;&#x5F97;&#x5B8C;&#x5168;&#x65E0;&#x72B6;&#x6001;</h3><p>&#x6240;&#x8C13;<strong>&#x534A;&#x65E0;&#x72B6;&#x6001;&#x670D;&#x52A1;</strong>&#xFF0C;&#x5C31;&#x662F;&#x5BB9;&#x5668;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x4E00;&#x4E9B;&#x4E0D;&#x592A;&#x91CD;&#x8981;&#x7684;&#x5916;&#x90E8;&#x6587;&#x4EF6;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5377;(volume)&#xFF0C;&#x4F46;&#x662F;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;&#x662F;&#x4F7F;&#x7528;S3&#x6216;&#x8005;&#x5176;&#x4ED6;&#x4E91;&#x5B58;&#x50A8;&#x670D;&#x52A1;&#x3002;&#x8BB0;&#x4F4F;&#xFF0C;&#x60F3;&#x8981;&#x83B7;&#x5F97;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x4E91;&#x662F;&#x6700;&#x597D;&#x7684;&#x9009;&#x62E9;&#x3002;</p>\n<p>&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4E0D;&#x5F97;&#x4E0D;&#x6784;&#x5EFA;Nginx&#x955C;&#x50CF;&#xFF0C;&#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x955C;&#x50CF;&#x4E2D;&#x3002;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5377;&#x6302;&#x8F7D;Nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E0D;&#x662F;&#x5F88;&#x65B9;&#x4FBF;&#x3002;</p>\n<h3 id=\"6-&#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;\"><a href=\"#6-&#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;\" class=\"headerlink\" title=\"6. &#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;\"></a>6. &#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x670D;&#x52A1;</h3><p>&#x4F7F;&#x7528;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x65F6;&#xFF0C;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;&#x65E5;&#x5FD7;&#x662F;&#x975E;&#x5E38;&#x5FC5;&#x8981;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x6709;&#x5F88;&#x591A;&#x65B9;&#x6848;&#xFF0C;&#x5305;&#x62EC;&#x5F00;&#x6E90;&#x5DE5;&#x5177;&#x6216;&#x8005;SaaS&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;ELK&#xFF0C;Grafana, Graylog&#x2026;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x5B8C;&#x6574;&#x7684;&#x7CFB;&#x7EDF;&#x662F;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5EFA;&#x8BAE;&#x642D;&#x5EFA;&#x5148;&#x4F7F;&#x7528;SaaS&#x670D;&#x52A1;(&#x6BD4;&#x5982;<a href=\"http://loggly.com/\">Loggly</a>, <a href=\"http://logentries.com/\">Logentries </a>)&#xFF0C;&#x5F53;&#x8D39;&#x7528;&#x592A;&#x9AD8;&#x65F6;&#xFF0C;&#x5219;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x3002;ELK&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x914D;&#x7F6E;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker service update \\  </div><div class=\"line\">  --log-driver gelf \\</div><div class=\"line\">  --log-opt gelf-address=udp://monitoring.example.com:12201 \\</div><div class=\"line\">  --log-opt tag=example-tag \\</div><div class=\"line\">  example-service</div></pre></td></tr></table></figure>\n<h3 id=\"7-&#x521B;&#x5EFA;attachable-network\"><a href=\"#7-&#x521B;&#x5EFA;attachable-network\" class=\"headerlink\" title=\"7. &#x521B;&#x5EFA;attachable network\"></a>7. &#x521B;&#x5EFA;attachable network</h3><p>attachable network&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x7279;&#x6027;&#x3002;&#x4F60;&#x6700;&#x597D;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x5426;&#x5219;<code>docker run</code>&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x5C06;&#x65E0;&#x6CD5;&#x63A5;&#x5165;Swarm&#x96C6;&#x7FA4;&#x7684;&#x7F51;&#x7EDC;&#x3002;&#x8FD9;&#x662F;Docker 1.13&#x4E4B;&#x540E;&#x7684;&#x7248;&#x672C;&#x624D;&#x6709;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x8BB8;&#x4F60;&#x9700;&#x8981;&#x5347;&#x7EA7;&#x3002;</p>\n<p>&#x521B;&#x5EFA;attachable network&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">docker network create --driver=overlay --attachable core</div></pre></td></tr></table></figure>\n<h3 id=\"8-&#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets-API\"><a href=\"#8-&#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets-API\" class=\"headerlink\" title=\"8. &#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets API\"></a>8. &#x5148;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x518D;&#x8003;&#x8651;Secrets API</h3><p>&#x5982;&#x679C;&#x4F60;&#x6309;&#x7167;<a href=\"https://rock-it.pl/how-to-write-excellent-dockerfiles/\">How to write excellent Dockerfiles</a>&#x6784;&#x5EFA;Docker&#x955C;&#x50CF;&#xFF0C;&#x4F60;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x53BB;&#x914D;&#x7F6E;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x8FC1;&#x79FB;&#x5230;Swarm&#x96C6;&#x7FA4;&#x65F6;&#x95EE;&#x9898;&#x4F1A;&#x5C11;&#x5F88;&#x591A;&#x3002;&#x793A;&#x4F8B;&#x547D;&#x4EE4;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x670D;&#x52A1;&#x65F6;&#x6307;&#x5B9A;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></div><div class=\"line\">docker service create \\  </div><div class=\"line\">  --env VAR=VALUE \\</div><div class=\"line\">  --env-file FILENAME \\</div><div class=\"line\">  ...</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x589E;&#x52A0;&#x3001;&#x5220;&#x9664;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></div><div class=\"line\">docker service update \\  </div><div class=\"line\">  --env-add VAR=NEW_VALUE \\</div><div class=\"line\">  --env-rm VAR \\</div><div class=\"line\">  ..</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x4E00;&#x6B65;&#x662F;&#x4F7F;&#x7528;<a href=\"https://docs.docker.com/engine/swarm/secrets/\">Secrets API </a>&#x3002;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x79C1;&#x5BC6;&#x6570;&#x636E;(&#x6BD4;&#x5982;&#x5BC6;&#x7801;&#xFF0C;SSL&#x8BC1;&#x4E66;&#x7B49;)&#x4EE5;&#x6587;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#x6302;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x3002;&#x867D;&#x7136;&#x6211;&#x8FD8;&#x6CA1;&#x6709;&#x7528;&#x8FC7;Secrets API&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x89C9;&#x5F97;&#x503C;&#x5F97;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#x3002;</p>\n<h3 id=\"9-&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;\"><a href=\"#9-&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;\" class=\"headerlink\" title=\"9. &#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;\"></a>9. &#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x5E76;&#x884C;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2A;&#x6570;</h3><p>&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x8DB3;&#x591F;&#x591A;&#x7684;&#x5BB9;&#x5668;&#x6570;&#x6765;&#x5904;&#x7406;&#x8D1F;&#x8F7D;&#x4EE5;&#x53CA;&#x4F5C;&#x4E3A;&#x707E;&#x5907;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x592A;&#x591A;&#x7684;&#x5BB9;&#x5668;&#x4F1A;&#x5BFC;&#x81F4;CPU&#x548C;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x4E2A;&#x6570;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x5408;&#x7406;&#x4E2A;&#x6570;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;<code>update-parallelism</code> &#x503C;&#x662F;1&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x6BCF;&#x6B21;&#x53EA;&#x66F4;&#x65B0;1&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x592A;&#x5C0F;&#x4E86;&#x3002;&#x6211;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#x5C06;&#x5B83;&#x8BBE;&#x4E3A; <code>&#x670D;&#x52A1;&#x5BB9;&#x5668;&#x6570; / 2</code>.&#x3002;</p>\n<p>&#x76F8;&#x5173;&#x547D;&#x4EE4;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x5C06;&#x540C;&#x65F6;&#x66F4;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x6570;&#x8BBE;&#x4E3A;10</span></div><div class=\"line\">docker service update \\  </div><div class=\"line\">  --update-parallelism 10 \\</div><div class=\"line\">  webapp</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x540C;&#x65F6;&#x589E;&#x52A0;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x5BB9;&#x5668;&#x6570;</span></div><div class=\"line\">docker service scale redis=1 nginx=4 webapp=20</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x72B6;&#x6001;</span></div><div class=\"line\">docker service ls</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;&#x670D;&#x52A1;&#x7684;&#x8BE6;&#x60C5;(&#x6392;&#x9664;&#x5173;&#x95ED;&#x7684;&#x5BB9;&#x5668;) </span></div><div class=\"line\">docker service ps webapp | grep -v <span class=\"string\">&quot;Shutdown&quot;</span></div></pre></td></tr></table></figure>\n<h3 id=\"10-&#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;\"><a href=\"#10-&#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;\" class=\"headerlink\" title=\"10. &#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;\"></a>10. &#x5C06;Swarm&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5316;</h3><p>&#x6700;&#x4F73;&#x65B9;&#x5F0F;&#x662F;&#x4F7F;&#x7528;<a href=\"https://docs.docker.com/compose/compose-file/#deploy\">Docker Compose v3</a> &#x8BED;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5C06;&#x670D;&#x52A1;&#x7684;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x4EE3;&#x7801;&#x5316;&#x3002;&#x6211;&#x5C06; <code>docker-compose.yml</code>&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C; <code>docker-compose.prod.yml</code>&#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x3002;&#x4F7F;&#x7528;docker-compose&#x6587;&#x4EF6;&#x90E8;&#x7F72;&#x670D;&#x52A1;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528; <code>docker stack deploy</code> &#x547D;&#x4EE4;(&#x53C2;&#x8003;<a href=\"https://docs.docker.com/engine/reference/commandline/stack/\">docker stack</a></p>\n<p><strong>docker-compose&#x6587;&#x4EF6;&#x793A;&#x4F8B;</strong></p>\n<figure class=\"highlight dts\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># docker-compose.prod.yml</span></div><div class=\"line\"><span class=\"symbol\">version:</span> <span class=\"string\">&apos;3&apos;</span>  </div><div class=\"line\"><span class=\"symbol\">services:</span>  </div><div class=\"line\"><span class=\"symbol\">  webapp:</span></div><div class=\"line\"><span class=\"symbol\">    image:</span> registry.example.com/webapp</div><div class=\"line\"><span class=\"symbol\">    networks:</span></div><div class=\"line\">      - ingress</div><div class=\"line\"><span class=\"symbol\">    deploy:</span></div><div class=\"line\"><span class=\"symbol\">      replicas:</span> ${WEBAPP_REPLICAS}</div><div class=\"line\"><span class=\"symbol\">      mode:</span> replicated</div><div class=\"line\"><span class=\"symbol\">      restart_policy:</span></div><div class=\"line\"><span class=\"symbol\">        condition:</span> on-failure</div><div class=\"line\"><span class=\"symbol\"></span></div><div class=\"line\">  proxy:</div><div class=\"line\"><span class=\"symbol\">    image:</span> registry.example.com/webapp-nginx-proxy</div><div class=\"line\"><span class=\"symbol\">    networks:</span></div><div class=\"line\">      - ingress</div><div class=\"line\"><span class=\"symbol\">    ports:</span></div><div class=\"line\">      - <span class=\"number\">80</span>:<span class=\"number\">80</span></div><div class=\"line\">      - <span class=\"number\">443</span>:<span class=\"number\">443</span></div><div class=\"line\"><span class=\"symbol\">    deploy:</span></div><div class=\"line\"><span class=\"symbol\">      replicas:</span> ${NGINX_REPLICAS}</div><div class=\"line\"><span class=\"symbol\">      mode:</span> replicated</div><div class=\"line\"><span class=\"symbol\">      restart_policy:</span></div><div class=\"line\"><span class=\"symbol\">        condition:</span> on-failure</div><div class=\"line\"><span class=\"symbol\"></span></div><div class=\"line\">networks:  </div><div class=\"line\"><span class=\"symbol\">  ingress:</span></div><div class=\"line\"><span class=\"symbol\">    external:</span> true</div></pre></td></tr></table></figure>\n<p><strong>&#x90E8;&#x7F72;&#x547D;&#x4EE4;:</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"code\"><pre><div class=\"line\">export NGINX_REPLICAS=<span class=\"number\">2</span> WEBAPP_REPLICAS=<span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\">docker login registry<span class=\"selector-class\">.example</span><span class=\"selector-class\">.com</span>  </div><div class=\"line\">docker stack deploy \\  </div><div class=\"line\">  -c docker-compose<span class=\"selector-class\">.prod</span><span class=\"selector-class\">.yml</span>\\</div><div class=\"line\">  --with-registry-auth \\</div><div class=\"line\">  frontend</div></pre></td></tr></table></figure>\n<p>&#x53E6;&#x5916;&#xFF0C;docker-compse&#x6587;&#x4EF6;&#x652F;&#x6301;&#x73AF;&#x5883;&#x53D8;&#x91CF;(${VARIABLE})&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x8C03;&#x6574;&#x914D;&#x7F6E;&#x3002;</p>\n<h3 id=\"11-&#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;\"><a href=\"#11-&#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;\" class=\"headerlink\" title=\"11. &#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;\"></a>11. &#x8BBE;&#x7F6E;&#x8D44;&#x6E90;&#x9650;&#x5236;</h3><p>&#x6839;&#x636E;&#x6211;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x9650;&#x5236;&#x6240;&#x6709;&#x670D;&#x52A1;&#x7684;CPU&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x5355;&#x4E2A;&#x5BB9;&#x5668;&#x5360;&#x7528;&#x4E3B;&#x673A;&#x7684;&#x6240;&#x6709;&#x7684;CPU&#x8D44;&#x6E90;&#x3002;</p>\n<p><code>reserve-cpu</code> &#x9009;&#x9879;&#x4E5F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;&#x5F53;&#x6211;&#x5E0C;&#x671B;&#x5E73;&#x5747;&#x5730;&#x5C06;&#x6240;&#x6709;&#x5BB9;&#x5668;&#x90E8;&#x7F72;&#x5230;&#x5404;&#x4E2A;&#x4E3B;&#x673A;&#x65F6;&#xFF0C;&#x6211;&#x4F1A;&#x4F7F;&#x7528;<code>reserve-cpu</code> &#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x5BB9;&#x5668;&#x90FD;&#x6709;&#x8DB3;&#x591F;&#x5730;&#x8D44;&#x6E90;&#x3002;&#x793A;&#x4F8B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># &#x9650;&#x5236;&#x670D;&#x52A1;&#x5360;&#x7528;&#x7684;CPU&#x8D44;&#x6E90;</span></div><div class=\"line\">docker service update  </div><div class=\"line\">  --limit-cpu 0.25</div><div class=\"line\">  --reserve-cpu 0.1</div><div class=\"line\">  webapp</div></pre></td></tr></table></figure>\n<h3 id=\"13-&#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;\"><a href=\"#13-&#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"13. &#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;\"></a>13. &#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;</h3><p>&#x6211;&#x9047;&#x5230;&#x8FC7;Swarm&#x7F51;&#x7EDC;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;&#x3002;&#x6709;&#x65F6;&#x5019;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x67D0;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x800C;&#x8FD8;&#x6709;9&#x4E2A;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x51CF;&#x5C11;/&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x4E2A;&#x6570;&#xFF0C;&#x6216;&#x8005;&#x6539;&#x53D8;&#x8DEF;&#x7531;&#x7C7B;&#x578B;(&#x4F7F;&#x7528;<code>--endpoint-mode</code>&#x9009;&#x9879;)</p>\n<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x76D1;&#x63A7;&#x65E5;&#x5FD7;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x95EE;&#x9898;&#x5F88;&#x96BE;&#x88AB;&#x53D1;&#x73B0;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x642D;&#x5EFA;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x662F;&#x975E;&#x5E38;&#x5FC5;&#x8981;&#x7684;&#x3002;</p>\n<p>&#x6B22;&#x8FCE;&#x52A0;&#x5165;<a href=\"https://fundebug.com/\">&#x6211;&#x4EEC;Fundebug</a>&#x7684;<strong>Docker&#x6280;&#x672F;&#x4EA4;&#x6D41;&#x7FA4;: 305097057</strong>&#x3002;</p>\n<div style=\"text-align: center;\"><br><img style=\"width:20%;\" src=\"/2017/05/08/docker-swarm-suggestion/docker.JPG\"><br></div>"}],"PostAsset":[{"_id":"source/_posts/2016/11/fundebug-is-online/with_fundebug.jpg","slug":"with_fundebug.jpg","post":"cj2iqgtgp000171fyknu83y06","modified":1,"renderable":0},{"_id":"source/_posts/2016/11/fundebug-is-online/without_fundebug.jpg","slug":"without_fundebug.jpg","post":"cj2iqgtgp000171fyknu83y06","modified":1,"renderable":0},{"_id":"source/_posts/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.png","slug":"kubernetes-multiple-docker.png","post":"cj2iqgtk4000571fyxra9l595","modified":1,"renderable":0},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.png","slug":"kubernetes-multiple-docker.png","post":"cj2iqgtkb000871fyiq7ind5w","modified":1,"renderable":0},{"_id":"source/_posts/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.png","slug":"ubuntu-hadoop.png","post":"cj2iqgtk6000771fy1in4m81q","modified":1,"renderable":0},{"_id":"source/_posts/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.png","slug":"vagrant-vm-cluster.png","post":"cj2iqgtmb000l71fycfn0ko43","modified":1,"renderable":0},{"_id":"source/_posts/2017/05/02/about-docker-sock/docker.JPG","slug":"docker.JPG","post":"cj2iqgto1002271fy1nm9ivrr","modified":1,"renderable":0},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug/error-detail.png","slug":"error-detail.png","post":"cj2iqgtmk000v71fyl5et4lnf","modified":1,"renderable":0},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap1.png","slug":"chrome-sourcemap1.png","post":"cj2iqgtn2001d71fyqf76qoqv","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/05/understand-script-error/script-error-ok.png","slug":"script-error-ok.png","post":"cj2iqgtna001o71fy31wxa3gf","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/05/understand-script-error/script-error.png","slug":"script-error.png","post":"cj2iqgtna001o71fy31wxa3gf","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/06/test-script-error/2.png","slug":"2.png","post":"cj2iqgtnq001s71fy7cvmjiqn","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/06/test-script-error/script-error.png","slug":"script-error.png","post":"cj2iqgtnq001s71fy7cvmjiqn","modified":1,"renderable":0},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/Mesos.png","slug":"Mesos.png","post":"cj2iqgtl7000b71fyw0wiv6du","modified":1,"renderable":0},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.graffle","slug":"mesos-marathon-platform.graffle","post":"cj2iqgtm9000j71fyk4f1xf2l","modified":1,"renderable":0},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/mesos-marathon-platform.png","slug":"mesos-marathon-platform.png","post":"cj2iqgtm9000j71fyk4f1xf2l","modified":1,"renderable":0},{"_id":"source/_posts/2017/01/16/fundebug-support-all-browsers/browser.jpg","slug":"browser.jpg","post":"cj2iqgtmo001071fywsfpleku","modified":1,"renderable":0},{"_id":"source/_posts/2017/02/11/weixin-miniprogram-need-fundebug/fundebug-wxjs.jpg","post":"cj2iqgtmu001371fy1gha73gy","slug":"fundebug-wxjs.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2017/02/18/weixinjsbridge-is-not-defined/weixinjsbridge_is_not_defined.png","post":"cj2iqgtmv001571fy74a9ns2e","slug":"weixinjsbridge_is_not_defined.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/17/fundebug-support-nodejs/fundebug-nodejs.png","post":"cj2iqgtmy001871fyai2c3bo2","slug":"fundebug-nodejs.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/06/jquery-is-not-defined/fundebug-jquery-error.png","post":"cj2iqgtmz001a71fys1q5x315","slug":"fundebug-jquery-error.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/18/docker-system-explain/docker.JPG","post":"cj2iqgtnx001x71fyektczln6","slug":"docker.JPG","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/25/node-command-option/nodejs-qq-group.jpeg","post":"cj2iqgto2002571fywxhjxrfx","slug":"nodejs-qq-group.jpeg","modified":1,"renderable":1},{"_id":"source/_posts/2015/06/08/150608-hadoop-cluster-docker/image-architecture.graffle","post":"cj2iqgtk1000471fyt439tvbh","slug":"image-architecture.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2015/06/08/150608-hadoop-cluster-docker/image-architecture.png","post":"cj2iqgtk1000471fyt439tvbh","slug":"image-architecture.png","modified":1,"renderable":1},{"_id":"source/_posts/2015/11/28/151128-single-kubernetes-docker/kubernetes-multiple-docker.graffle","post":"cj2iqgtk4000571fyxra9l595","slug":"kubernetes-multiple-docker.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/05/29/160529-compile-hadoop-ubuntu/ubuntu-hadoop.graffle","post":"cj2iqgtk6000771fy1in4m81q","slug":"ubuntu-hadoop.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.graffle","post":"cj2iqgtkw000971fy1ioyfjz4","slug":"hadoop-docker.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/06/05/160605-compile-hadoop-docker/hadoop-docker.png","slug":"hadoop-docker.png","post":"cj2iqgtkw000971fy1ioyfjz4","modified":1,"renderable":0},{"_id":"source/_posts/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.graffle","post":"cj2iqgtlj000c71fyjnkgjad9","slug":"hadoop-cluster-docker.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/06/26/hadoop-cluster-docker-update-english/hadoop-cluster-docker.png","post":"cj2iqgtlj000c71fyjnkgjad9","slug":"hadoop-cluster-docker.png","modified":1,"renderable":1},{"_id":"source/_posts/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.graffle","post":"cj2iqgtls000e71fyqxj2pqjf","slug":"hadoop-cluster-docker.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/06/12/160612-hadoop-cluster-docker-update/hadoop-cluster-docker.png","post":"cj2iqgtls000e71fyqxj2pqjf","slug":"hadoop-cluster-docker.png","modified":1,"renderable":1},{"_id":"source/_posts/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.graffle","post":"cj2iqgtm0000g71fyszj03vl1","slug":"vagrant-vm.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/06/19/160619-vagrant-virtual-machine/vagrant-vm.png","slug":"vagrant-vm.png","post":"cj2iqgtm0000g71fyszj03vl1","modified":1,"renderable":0},{"_id":"source/_posts/2016/07/03/vagrant-vm-cluster/vagrant-vm-cluster.graffle","post":"cj2iqgtmb000l71fycfn0ko43","slug":"vagrant-vm-cluster.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/09/04/what-is-service-discovery/service-discovery.graffle","post":"cj2iqgtme000o71fyi4vg9esy","slug":"service-discovery.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/09/04/what-is-service-discovery/service-discovery.png","post":"cj2iqgtme000o71fyi4vg9esy","slug":"service-discovery.png","modified":1,"renderable":1},{"_id":"source/_posts/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.graffle","slug":"mongodb-inverted-index.graffle","post":"cj2iqgtmg000q71fyys9tx3zq","modified":1,"renderable":0},{"_id":"source/_posts/2016/09/11/mongodb-inverted-index/mongodb-inverted-index.png","slug":"mongodb-inverted-index.png","post":"cj2iqgtmg000q71fyys9tx3zq","modified":1,"renderable":0},{"_id":"source/_posts/2016/09/18/underscore-example/underscore-example.graffle","post":"cj2iqgtmi000t71fyrsjx9uil","slug":"underscore-example.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/09/18/underscore-example/underscore-example.png","post":"cj2iqgtmi000t71fyrsjx9uil","slug":"underscore-example.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/01/23/fundebug-support-wxjs/empty.png","post":"cj2iqgtml000y71fyy3wej153","slug":"empty.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/01/23/fundebug-support-wxjs/fundebug-wxjs.jpg","post":"cj2iqgtml000y71fyy3wej153","slug":"fundebug-wxjs.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2017/01/16/fundebug-support-all-browsers/browser-share.png","post":"cj2iqgtmo001071fywsfpleku","slug":"browser-share.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/20/nodejs-unit-test/nodejs-qq-group.jpeg","post":"cj2iqgtn3001f71fym8mlvp6a","slug":"nodejs-qq-group.jpeg","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/20/nodejs-unit-test/nodejs-unit-test.jpg","post":"cj2iqgtn3001f71fym8mlvp6a","slug":"nodejs-unit-test.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/29/user-behavior-track/fundebug-track-behavior.png","post":"cj2iqgtn4001g71fyjz4tb0kv","slug":"fundebug-track-behavior.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/29/user-behavior-track/user-behavior-track.png","post":"cj2iqgtn4001g71fyjz4tb0kv","slug":"user-behavior-track.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/26/nodejs-docker/nodejs-docker.png","post":"cj2iqgtn6001j71fyuivg2jhk","slug":"nodejs-docker.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/26/nodejs-docker/nodejs-qq-group.jpeg","post":"cj2iqgtn6001j71fyuivg2jhk","slug":"nodejs-qq-group.jpeg","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/10/nodejs-interview-2017/nodejs-qq-group.jpeg","post":"cj2iqgtns001t71fyifqszugw","slug":"nodejs-qq-group.jpeg","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/10/nodejs-interview-2017/test_pyramid.png","post":"cj2iqgtns001t71fyifqszugw","slug":"test_pyramid.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/24/ssh-port-forwarding/socket_proxy.png","post":"cj2iqgto0002071fy3tn2cksx","slug":"socket_proxy.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/24/ssh-port-forwarding/ssh_tunnel.jpeg","post":"cj2iqgto0002071fy3tn2cksx","slug":"ssh_tunnel.jpeg","modified":1,"renderable":1},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug/email.png","post":"cj2iqgtmk000v71fyl5et4lnf","slug":"email.png","modified":1,"renderable":1},{"_id":"source/_posts/2016/12/07/fundebug-catch-the-bug/error-count.png","post":"cj2iqgtmk000v71fyl5et4lnf","slug":"error-count.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/01/nodejs-async-await/debug-async-await.png","post":"cj2iqgtn8001l71fy5wra3wcu","slug":"debug-async-await.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/01/nodejs-async-await/debug-promise.png","post":"cj2iqgtn8001l71fy5wra3wcu","slug":"debug-promise.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/01/nodejs-async-await/nodejs-qq-group.jpeg","post":"cj2iqgtn8001l71fy5wra3wcu","slug":"nodejs-qq-group.jpeg","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/05/understand-script-error/script-error-not-ok-chrome.png","post":"cj2iqgtna001o71fy31wxa3gf","slug":"script-error-not-ok-chrome.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/07/solve-script-error/QRCode.png","post":"cj2iqgtno001q71fycji311hd","slug":"QRCode.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/07/solve-script-error/qiniu.png","slug":"qiniu.png","post":"cj2iqgtno001q71fycji311hd","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/07/solve-script-error/script-error.png","post":"cj2iqgtno001q71fycji311hd","slug":"script-error.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/17/about-docker-sock/01.png","post":"cj2iqgtnv001v71fywsf8e5b4","slug":"01.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/17/about-docker-sock/02.png","post":"cj2iqgtnv001v71fywsf8e5b4","slug":"02.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/17/about-docker-sock/docker.JPG","post":"cj2iqgtnv001v71fywsf8e5b4","slug":"docker.JPG","modified":1,"renderable":1},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-multiple-docker.graffle","post":"cj2iqgtkb000871fyiq7ind5w","slug":"kubernetes-multiple-docker.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.graffle","post":"cj2iqgtkb000871fyiq7ind5w","slug":"kubernetes-single-docker.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2016/01/09/160109-multiple-processes--docker-container/kubernetes-single-docker.png","post":"cj2iqgtkb000871fyiq7ind5w","slug":"kubernetes-single-docker.png","modified":1,"renderable":1},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/Marathon.png","post":"cj2iqgtl7000b71fyw0wiv6du","slug":"Marathon.png","modified":1,"renderable":1},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/hello.png","post":"cj2iqgtl7000b71fyw0wiv6du","slug":"hello.png","modified":1,"renderable":1},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.graffle","post":"cj2iqgtl7000b71fyw0wiv6du","slug":"single-mesos-marathon.graffle","modified":1,"renderable":1},{"_id":"source/_posts/2015/09/18/150918-single-mesos-docker/single-mesos-marathon.png","post":"cj2iqgtl7000b71fyw0wiv6du","slug":"single-mesos-marathon.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap2.png","post":"cj2iqgtn2001d71fyqf76qoqv","slug":"chrome-sourcemap2.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap3.png","post":"cj2iqgtn2001d71fyqf76qoqv","slug":"chrome-sourcemap3.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/chrome-sourcemap4.png","post":"cj2iqgtn2001d71fyqf76qoqv","slug":"chrome-sourcemap4.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/03/13/sourcemap-tutorial/fundebug-sourcemap.jpg","post":"cj2iqgtn2001d71fyqf76qoqv","slug":"fundebug-sourcemap.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/marathon.png","post":"cj2iqgtm9000j71fyk4f1xf2l","slug":"marathon.png","modified":1,"renderable":1},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/mesos.png","post":"cj2iqgtm9000j71fyk4f1xf2l","slug":"mesos.png","modified":1,"renderable":1},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/nginx.png","post":"cj2iqgtm9000j71fyk4f1xf2l","slug":"nginx.png","modified":1,"renderable":1},{"_id":"source/_posts/2016/07/10/mesos-marathon-platform/zookeeper.png","post":"cj2iqgtm9000j71fyk4f1xf2l","slug":"zookeeper.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/06/test-script-error/01.png","post":"cj2iqgtnq001s71fy7cvmjiqn","slug":"01.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/06/test-script-error/012.png","slug":"012.png","post":"cj2iqgtnq001s71fy7cvmjiqn","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/06/test-script-error/1.png","slug":"1.png","post":"cj2iqgtnq001s71fy7cvmjiqn","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/06/test-script-error/1chrome.png","post":"cj2iqgtnq001s71fy7cvmjiqn","slug":"1chrome.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/06/test-script-error/2firefox.png","post":"cj2iqgtnq001s71fy7cvmjiqn","slug":"2firefox.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/04/06/test-script-error/4.png","slug":"4.png","post":"cj2iqgtnq001s71fy7cvmjiqn","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/06/test-script-error/5.png","slug":"5.png","post":"cj2iqgtnq001s71fy7cvmjiqn","modified":1,"renderable":0},{"_id":"source/_posts/2017/04/06/test-script-error/chrome_error.png","post":"cj2iqgtnq001s71fy7cvmjiqn","slug":"chrome_error.png","modified":1,"renderable":1},{"_id":"source/_posts/2017/05/08/docker-swarm-suggestion/docker.JPG","post":"cj2iqgttj003v71fyy5rwskms","slug":"docker.JPG","modified":1,"renderable":1}],"PostCategory":[],"PostTag":[{"post_id":"cj2iqgtgp000171fyknu83y06","tag_id":"cj2iqgtgx000271fy0u73ij3h","_id":"cj2iqgth4000371fydatlwz61"},{"post_id":"cj2iqgtk1000471fyt439tvbh","tag_id":"cj2iqgtk6000671fyfe2h0f1l","_id":"cj2iqgtlv000f71fypn61f7qm"},{"post_id":"cj2iqgtk1000471fyt439tvbh","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtm2000h71fyr0d1nqls"},{"post_id":"cj2iqgtlj000c71fyjnkgjad9","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtmb000k71fyw2y74q2h"},{"post_id":"cj2iqgtlj000c71fyjnkgjad9","tag_id":"cj2iqgtk6000671fyfe2h0f1l","_id":"cj2iqgtmd000m71fyjfrlcic5"},{"post_id":"cj2iqgtls000e71fyqxj2pqjf","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtmg000p71fyyxhnbxkp"},{"post_id":"cj2iqgtls000e71fyqxj2pqjf","tag_id":"cj2iqgtk6000671fyfe2h0f1l","_id":"cj2iqgtmi000r71fyr3wj9dc6"},{"post_id":"cj2iqgtk4000571fyxra9l595","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtmj000u71fy3tbcubni"},{"post_id":"cj2iqgtk4000571fyxra9l595","tag_id":"cj2iqgtm3000i71fyefq8p0y3","_id":"cj2iqgtml000w71fygrloyvrg"},{"post_id":"cj2iqgtme000o71fyi4vg9esy","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtmn000z71fyk0g8ll2i"},{"post_id":"cj2iqgtk6000771fy1in4m81q","tag_id":"cj2iqgtk6000671fyfe2h0f1l","_id":"cj2iqgtmt001171fydt5i45wt"},{"post_id":"cj2iqgtmk000v71fyl5et4lnf","tag_id":"cj2iqgtgx000271fy0u73ij3h","_id":"cj2iqgtmv001471fy3075h7h0"},{"post_id":"cj2iqgtkb000871fyiq7ind5w","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtmx001671fymhp0aslr"},{"post_id":"cj2iqgtkb000871fyiq7ind5w","tag_id":"cj2iqgtm3000i71fyefq8p0y3","_id":"cj2iqgtmz001971fyqt08dv13"},{"post_id":"cj2iqgtkw000971fy1ioyfjz4","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtn1001b71fymk9jeqlr"},{"post_id":"cj2iqgtkw000971fy1ioyfjz4","tag_id":"cj2iqgtk6000671fyfe2h0f1l","_id":"cj2iqgtn3001e71fyl7u488vn"},{"post_id":"cj2iqgtl7000b71fyw0wiv6du","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtn6001i71fyb0vfkpk6"},{"post_id":"cj2iqgtl7000b71fyw0wiv6du","tag_id":"cj2iqgtmx001771fy36knzqkw","_id":"cj2iqgtn7001k71fyz2edkx4y"},{"post_id":"cj2iqgtl7000b71fyw0wiv6du","tag_id":"cj2iqgtn1001c71fyci37xkvy","_id":"cj2iqgtn9001n71fy3stm9hoy"},{"post_id":"cj2iqgtm0000g71fyszj03vl1","tag_id":"cj2iqgtn5001h71fypifr5zoz","_id":"cj2iqgtno001p71fyr8pwrp57"},{"post_id":"cj2iqgtm9000j71fyk4f1xf2l","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtnw001w71fy773av0vq"},{"post_id":"cj2iqgtm9000j71fyk4f1xf2l","tag_id":"cj2iqgtmx001771fy36knzqkw","_id":"cj2iqgtnz001y71fyf5hwvivp"},{"post_id":"cj2iqgtm9000j71fyk4f1xf2l","tag_id":"cj2iqgtn1001c71fyci37xkvy","_id":"cj2iqgto0002171fy6agplbhs"},{"post_id":"cj2iqgtmb000l71fycfn0ko43","tag_id":"cj2iqgtn5001h71fypifr5zoz","_id":"cj2iqgto2002371fyaatvo0ie"},{"post_id":"cj2iqgtmg000q71fyys9tx3zq","tag_id":"cj2iqgtnz001z71fyqx0qt9cq","_id":"cj2iqgto3002671fyl68olzzp"},{"post_id":"cj2iqgtmi000t71fyrsjx9uil","tag_id":"cj2iqgto2002471fy8mgk9z03","_id":"cj2iqgto4002871fyub1pylzq"},{"post_id":"cj2iqgtml000y71fyy3wej153","tag_id":"cj2iqgtgx000271fy0u73ij3h","_id":"cj2iqgto5002a71fysmrqk43h"},{"post_id":"cj2iqgtml000y71fyy3wej153","tag_id":"cj2iqgto4002771fyrft5mzsr","_id":"cj2iqgto5002b71fyle8hljnv"},{"post_id":"cj2iqgtmo001071fywsfpleku","tag_id":"cj2iqgtgx000271fy0u73ij3h","_id":"cj2iqgto5002d71fyfa47aqx8"},{"post_id":"cj2iqgtmo001071fywsfpleku","tag_id":"cj2iqgto4002971fy2vytfzt0","_id":"cj2iqgto5002e71fykpqassps"},{"post_id":"cj2iqgtmu001371fy1gha73gy","tag_id":"cj2iqgtgx000271fy0u73ij3h","_id":"cj2iqgto6002g71fy24zb2o0j"},{"post_id":"cj2iqgtmu001371fy1gha73gy","tag_id":"cj2iqgto4002771fyrft5mzsr","_id":"cj2iqgto6002h71fygeg1vm0i"},{"post_id":"cj2iqgtmy001871fyai2c3bo2","tag_id":"cj2iqgto2002471fy8mgk9z03","_id":"cj2iqgto6002j71fyen0yokvk"},{"post_id":"cj2iqgtn2001d71fyqf76qoqv","tag_id":"cj2iqgto6002i71fyselp2evi","_id":"cj2iqgto7002m71fy3b6lfi0z"},{"post_id":"cj2iqgtn2001d71fyqf76qoqv","tag_id":"cj2iqgto4002971fy2vytfzt0","_id":"cj2iqgto7002n71fyu6r6tomp"},{"post_id":"cj2iqgtn3001f71fym8mlvp6a","tag_id":"cj2iqgto2002471fy8mgk9z03","_id":"cj2iqgto7002p71fyyn238gc3"},{"post_id":"cj2iqgtn4001g71fyjz4tb0kv","tag_id":"cj2iqgtgx000271fy0u73ij3h","_id":"cj2iqgto7002r71fyy7ph4d8j"},{"post_id":"cj2iqgtn4001g71fyjz4tb0kv","tag_id":"cj2iqgto4002971fy2vytfzt0","_id":"cj2iqgto7002s71fyzhyswrhy"},{"post_id":"cj2iqgtn6001j71fyuivg2jhk","tag_id":"cj2iqgto2002471fy8mgk9z03","_id":"cj2iqgto8002u71fyzmac4okb"},{"post_id":"cj2iqgtn6001j71fyuivg2jhk","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgto8002v71fy3toxzbo6"},{"post_id":"cj2iqgtn8001l71fy5wra3wcu","tag_id":"cj2iqgto2002471fy8mgk9z03","_id":"cj2iqgto9002y71fy7zls8k2h"},{"post_id":"cj2iqgtn8001l71fy5wra3wcu","tag_id":"cj2iqgto8002w71fy5rj5uryg","_id":"cj2iqgto9002z71fyyyl2yeaj"},{"post_id":"cj2iqgtna001o71fy31wxa3gf","tag_id":"cj2iqgto4002971fy2vytfzt0","_id":"cj2iqgtoa003271fyw01ja1no"},{"post_id":"cj2iqgtna001o71fy31wxa3gf","tag_id":"cj2iqgto9003071fyci8wltrt","_id":"cj2iqgtoa003371fypi24m1q9"},{"post_id":"cj2iqgtno001q71fycji311hd","tag_id":"cj2iqgto4002971fy2vytfzt0","_id":"cj2iqgtoc003671fys9mq2thn"},{"post_id":"cj2iqgtno001q71fycji311hd","tag_id":"cj2iqgto9003071fyci8wltrt","_id":"cj2iqgtoc003771fyo6hwmz5d"},{"post_id":"cj2iqgtnq001s71fy7cvmjiqn","tag_id":"cj2iqgto4002971fy2vytfzt0","_id":"cj2iqgtoe003a71fyz8cjqp1b"},{"post_id":"cj2iqgtnq001s71fy7cvmjiqn","tag_id":"cj2iqgto9003071fyci8wltrt","_id":"cj2iqgtoe003b71fy3w1eu2nh"},{"post_id":"cj2iqgtns001t71fyifqszugw","tag_id":"cj2iqgto2002471fy8mgk9z03","_id":"cj2iqgtog003e71fywt8qr4us"},{"post_id":"cj2iqgtns001t71fyifqszugw","tag_id":"cj2iqgto8002w71fy5rj5uryg","_id":"cj2iqgtog003f71fyjn1zp03s"},{"post_id":"cj2iqgtnv001v71fywsf8e5b4","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtoh003h71fy9lh94sev"},{"post_id":"cj2iqgtnv001v71fywsf8e5b4","tag_id":"cj2iqgto8002w71fy5rj5uryg","_id":"cj2iqgtoh003i71fyt5kdmf32"},{"post_id":"cj2iqgtnx001x71fyektczln6","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtoh003k71fykpqbfen9"},{"post_id":"cj2iqgtnx001x71fyektczln6","tag_id":"cj2iqgto8002w71fy5rj5uryg","_id":"cj2iqgtoh003l71fy52opsmv4"},{"post_id":"cj2iqgto0002071fy3tn2cksx","tag_id":"cj2iqgtoh003j71fy15rxdazs","_id":"cj2iqgtoj003n71fywfj4gvpj"},{"post_id":"cj2iqgto1002271fy1nm9ivrr","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtol003q71fyjuunot2a"},{"post_id":"cj2iqgto1002271fy1nm9ivrr","tag_id":"cj2iqgto8002w71fy5rj5uryg","_id":"cj2iqgtol003r71fyd0nc61z7"},{"post_id":"cj2iqgto1002271fy1nm9ivrr","tag_id":"cj2iqgtoj003o71fyvkp39kq4","_id":"cj2iqgtol003s71fybsx89kkl"},{"post_id":"cj2iqgto2002571fywxhjxrfx","tag_id":"cj2iqgto2002471fy8mgk9z03","_id":"cj2iqgtol003t71fylegxjmgo"},{"post_id":"cj2iqgto2002571fywxhjxrfx","tag_id":"cj2iqgto8002w71fy5rj5uryg","_id":"cj2iqgtol003u71fy1hfkosj6"},{"post_id":"cj2iqgttj003v71fyy5rwskms","tag_id":"cj2iqgtky000a71fy3dgyvpe2","_id":"cj2iqgtuv003x71fyb34yfylj"},{"post_id":"cj2iqgttj003v71fyy5rwskms","tag_id":"cj2iqgttl003w71fyixwom694","_id":"cj2iqgtvg003y71fy8izc7dwy"},{"post_id":"cj2iqgttj003v71fyy5rwskms","tag_id":"cj2iqgto8002w71fy5rj5uryg","_id":"cj2iqgtw0003z71fy0qtwvq88"}],"Tag":[{"name":"Fundebug","_id":"cj2iqgtgx000271fy0u73ij3h"},{"name":"Hadoop","_id":"cj2iqgtk6000671fyfe2h0f1l"},{"name":"Docker","_id":"cj2iqgtky000a71fy3dgyvpe2"},{"name":"Kubernetes","_id":"cj2iqgtm3000i71fyefq8p0y3"},{"name":"Mesos","_id":"cj2iqgtmx001771fy36knzqkw"},{"name":"Marathon","_id":"cj2iqgtn1001c71fyci37xkvy"},{"name":"Vagrant","_id":"cj2iqgtn5001h71fypifr5zoz"},{"name":"MongoDB","_id":"cj2iqgtnz001z71fyqx0qt9cq"},{"name":"Node.js","_id":"cj2iqgto2002471fy8mgk9z03"},{"name":"","_id":"cj2iqgto4002771fyrft5mzsr"},{"name":"JavaScript","_id":"cj2iqgto4002971fy2vytfzt0"},{"name":"Source Map","_id":"cj2iqgto6002i71fyselp2evi"},{"name":"","_id":"cj2iqgto8002w71fy5rj5uryg"},{"name":"BUG","_id":"cj2iqgto9003071fyci8wltrt"},{"name":"Linux","_id":"cj2iqgtoh003j71fy15rxdazs"},{"name":"Java","_id":"cj2iqgtoj003o71fyvkp39kq4"},{"name":"Swarm","_id":"cj2iqgttl003w71fyixwom694"}]}}